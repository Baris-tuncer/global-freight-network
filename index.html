<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Freight Network - International Logistics Platform</title>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1e3c72;
            --primary-light: #2a5298;
            --accent: #00d4aa;
            --accent-orange: #ff6b35;
            --bg-light: #f0f4f8;
            --text-dark: #1e3c72;
            --white: #ffffff;
            --shadow: 0 4px 20px rgba(30, 60, 114, 0.1);
            --shadow-hover: 0 8px 30px rgba(30, 60, 114, 0.15);
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            min-height: 100vh;
            color: var(--text-dark);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           LANDING PAGE - Premium TasarÄ±m
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ULTRA PREMIUM LANDING PAGE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .landing-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            padding: 60px 20px;
        }
        
        .landing-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 0;
        }
        
        .landing-gradient {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 30% 20%, rgba(59, 130, 246, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 80%, rgba(139, 92, 246, 0.06) 0%, transparent 50%),
                linear-gradient(180deg, #0c1222 0%, #111827 40%, #0f172a 100%);
        }
        
        .landing-pattern {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(0, 212, 170, 0.02) 0%, transparent 40%),
                radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.02) 0%, transparent 40%);
            animation: patternMove 40s ease-in-out infinite;
        }
        
        /* Subtle floating ambient */
        .landing-bg::before {
            content: '';
            position: absolute;
            top: 15%;
            left: 5%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(0, 212, 170, 0.04) 0%, transparent 70%);
            border-radius: 50%;
            filter: blur(80px);
            animation: float1 30s ease-in-out infinite;
        }
        
        .landing-bg::after {
            content: '';
            position: absolute;
            bottom: 15%;
            right: 5%;
            width: 450px;
            height: 450px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.05) 0%, transparent 70%);
            border-radius: 50%;
            filter: blur(80px);
            animation: float2 35s ease-in-out infinite;
        }
        
        @keyframes float1 {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(20px, -20px); }
        }
        
        @keyframes float2 {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-20px, 15px); }
        }
        
        @keyframes patternMove {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .landing-content {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 1000px;
            padding: 0 20px;
        }
        
        /* Premium Badge - ENTERPRISE */
        .landing-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 100px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 48px;
            backdrop-filter: blur(20px);
            letter-spacing: 0.03em;
            animation: badgeFade 1s ease-out;
        }
        
        @keyframes badgeFade {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .badge-icon {
            font-size: 1.1em;
        }
        
        /* Ultra Premium Title - ENTERPRISE */
        .landing-title {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: clamp(2.5rem, 8vw, 5rem);
            font-weight: 600;
            line-height: 1.1;
            margin-bottom: 32px;
            letter-spacing: -0.04em;
            animation: titleFade 1.2s ease-out 0.2s both;
        }
        
        @keyframes titleFade {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .title-line {
            display: block;
            color: #ffffff;
            font-weight: 500;
            letter-spacing: -0.03em;
            text-shadow: 0 2px 40px rgba(0, 0, 0, 0.5);
        }
        
        .title-line.gradient {
            font-weight: 700;
            background: linear-gradient(100deg, #00d4aa 0%, #00b8d4 30%, #3b82f6 60%, #8b5cf6 85%, #a855f7 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.035em;
            padding-bottom: 8px;
            filter: drop-shadow(0 4px 30px rgba(0, 212, 170, 0.25));
        }
        
        /* Premium Subtitle - ENTERPRISE */
        .landing-subtitle {
            font-size: clamp(1.15rem, 2.2vw, 1.4rem);
            color: rgba(255, 255, 255, 0.55);
            line-height: 1.7;
            margin-bottom: 56px;
            max-width: 680px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 400;
            letter-spacing: 0.01em;
            animation: subtitleFade 1.2s ease-out 0.4s both;
        }
        
        @keyframes subtitleFade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Premium CTA Buttons - ENTERPRISE */
        .landing-cta {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 56px;
            animation: ctaFade 1.2s ease-out 0.6s both;
        }
        
        @keyframes ctaFade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .btn-start {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 16px 36px;
            background: linear-gradient(135deg, #00d4aa 0%, #00b894 100%);
            color: #0a0f1c;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 20px rgba(0, 212, 170, 0.35);
            letter-spacing: 0.02em;
        }
        
        .btn-start:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 212, 170, 0.45);
        }
        
        .btn-demo {
            padding: 16px 36px;
            background: transparent;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            font-weight: 500;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            letter-spacing: 0.02em;
        }
        
        .btn-demo:hover {
            background: rgba(255, 255, 255, 0.06);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        /* Premium Features - ENTERPRISE */
        .landing-features {
            display: flex;
            gap: 32px;
            justify-content: center;
            flex-wrap: wrap;
            animation: featuresFade 1.2s ease-out 0.8s both;
        }
        
        @keyframes featuresFade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feature-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
            font-weight: 450;
            letter-spacing: 0.02em;
            transition: all 0.3s ease;
        }
        
        .feature-item:hover {
            color: rgba(255, 255, 255, 0.8);
        }
        
        .feature-icon {
            color: #00d4aa;
            font-weight: 600;
            font-size: 1rem;
        }
        
        /* Premium Footer - ENTERPRISE */
        .landing-footer {
            position: absolute;
            bottom: 20px;
            left: 0;
            right: 0;
            z-index: 1;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.85rem;
            text-align: center;
            letter-spacing: 0.03em;
            font-weight: 400;
            padding: 20px !important;
        }
        
        .landing-footer .footer-legal-links {
            margin-bottom: 12px !important;
        }
        
        .landing-footer .footer-legal-links a {
            color: rgba(255, 255, 255, 0.6) !important;
            transition: color 0.2s;
        }
        
        .landing-footer .footer-legal-links a:hover {
            color: rgba(255, 255, 255, 0.9) !important;
        }
        
        .landing-content {
            padding-bottom: 120px;
        }
        
        /* Services Page Nav - ENTERPRISE */
        .services-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 32px;
            background: rgba(30, 58, 95, 0.95);
            backdrop-filter: blur(12px);
            z-index: 100;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
        }
        
        .services-logo {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
            cursor: pointer;
            letter-spacing: -0.01em;
        }
        
        .services-user {
            display: flex;
            align-items: center;
            gap: 16px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }
        
        .btn-logout-small {
            padding: 8px 18px;
            background: rgba(255,255,255,0.08);
            color: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.2s ease;
            letter-spacing: 0.02em;
        }
        
        .btn-logout-small:hover {
            background: rgba(255,255,255,0.12);
            border-color: rgba(255,255,255,0.2);
        }
        
        /* Mobile Responsive - ENTERPRISE */
        @media (max-width: 768px) {
            .landing-container { padding: 48px 24px; }
            .landing-title { font-size: clamp(2.8rem, 14vw, 4.5rem); }
            .title-line { letter-spacing: -0.02em; }
            .landing-subtitle { font-size: 1rem; margin-bottom: 40px; }
            .landing-cta { flex-direction: column; align-items: center; gap: 12px; }
            .btn-start, .btn-demo { width: 100%; max-width: 280px; padding: 14px 32px; }
            .landing-features { gap: 20px; }
            .feature-item { font-size: 0.85rem; }
            .landing-badge { font-size: 0.8rem; padding: 10px 18px; }
        }


        /* Language Selector - Disabled for now */
        /*
        .lang-selector {
            display: none;
        }
        */

        /* HOME PAGE - Professional Design (Services Page) */
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HOME CONTAINER - ENTERPRISE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .home-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 100px 20px 60px 20px;
            position: relative;
            overflow: hidden;
            background: linear-gradient(180deg, #1e3a5f 0%, #1a3654 50%, #162d49 100%);
        }

        .home-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(ellipse at 20% 30%, rgba(99, 102, 241, 0.06) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 70%, rgba(16, 185, 129, 0.04) 0%, transparent 50%);
            pointer-events: none;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HOME HERO - ENTERPRISE
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .home-hero {
            text-align: center;
            margin-bottom: 56px;
            position: relative;
            z-index: 1;
        }

        .hero-badge {
            display: inline-block;
            padding: 8px 20px;
            background: rgba(0, 212, 170, 0.1);
            border: 1px solid rgba(0, 212, 170, 0.3);
            border-radius: 50px;
            color: #00b894;
            font-size: 0.85em;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .home-hero h1 {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            color: white;
            font-size: clamp(2.5rem, 6vw, 4rem);
            margin-bottom: 16px;
            letter-spacing: -0.03em;
            line-height: 1.1;
            font-weight: 600;
        }

        .home-hero p {
            color: rgba(255,255,255,0.55);
            font-size: 1.1rem;
            max-width: 500px;
            line-height: 1.6;
            margin: 0 auto;
            font-weight: 400;
            letter-spacing: 0.01em;
        }

        .home-section {
            width: 100%;
            max-width: 1100px;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
        }

        .section-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9em;
            margin-bottom: 20px;
        }

        .section-badge.client-badge {
            background: rgba(0, 212, 170, 0.15);
            color: #00d4aa;
        }

        .section-badge.provider-badge {
            background: rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.9);
        }

        .cards-row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .cards-row.single {
            justify-content: center;
        }

        .cards-row.multi {
            justify-content: center;
        }

        /* Professional Cards */
        .pro-card {
            background: white;
            border-radius: 16px;
            padding: 28px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            border: 1px solid rgba(0,0,0,0.05);
            position: relative;
            overflow: hidden;
        }

        .pro-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.15);
        }

        .pro-card.client-highlight {
            display: flex;
            align-items: center;
            gap: 25px;
            max-width: 700px;
            width: 100%;
            background: linear-gradient(135deg, #ffffff 0%, #f8fffe 100%);
            border: 2px solid rgba(0, 212, 170, 0.2);
        }

        .pro-card.client-highlight:hover {
            border-color: rgba(0, 212, 170, 0.4);
        }

        .cards-row.multi .pro-card {
            flex: 0 1 200px;
            text-align: center;
        }

        .pro-card-icon {
            width: 60px;
            height: 60px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8em;
            flex-shrink: 0;
        }

        .cards-row.multi .pro-card-icon {
            width: 56px;
            height: 56px;
            margin: 0 auto 16px;
            font-size: 1.6em;
        }

        .client-icon-bg { background: linear-gradient(135deg, #e8faf6 0%, #d0f5ed 100%); }
        .forwarder-icon-bg { background: linear-gradient(135deg, #e8f4fd 0%, #cce5f9 100%); }
        .insurance-icon-bg { background: linear-gradient(135deg, #f3e8fd 0%, #e4ccf9 100%); }
        .customs-icon-bg { background: linear-gradient(135deg, #fef3e8 0%, #fce3c8 100%); }
        .warehouse-icon-bg { background: linear-gradient(135deg, #e8fdf8 0%, #c8f9ed 100%); }
        .packaging-icon-bg { background: linear-gradient(135deg, #fde8e8 0%, #f9cccc 100%); }
        
        /* Carrier icon backgrounds */
        .sea-carrier-icon-bg { background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); }
        .air-carrier-icon-bg { background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); }
        .land-carrier-icon-bg { background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%); }
        
        .carrier-badge {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }

        .pro-card-content {
            flex: 1;
        }

        .pro-card h3 {
            font-family: 'Space Grotesk', sans-serif;
            color: #1a1a2e;
            font-size: 1.25em;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .cards-row.multi .pro-card h3 {
            font-size: 1.05em;
        }

        .pro-card p {
            color: #64748b;
            font-size: 0.9em;
            line-height: 1.5;
            margin-bottom: 12px;
        }

        .cards-row.multi .pro-card p {
            font-size: 0.8em;
            margin-bottom: 15px;
        }

        .pro-card-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .pro-card-features span {
            font-size: 0.8em;
            padding: 6px 12px;
            background: #f1f5f9;
            color: #475569;
            border-radius: 6px;
            font-weight: 500;
        }

        .pro-card-stat {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.8em;
            color: #64748b;
            margin-bottom: 15px;
        }

        .stat-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #e0e0e0;
        }

        .stat-dot.active {
            background: #00d4aa;
            box-shadow: 0 0 8px rgba(0, 212, 170, 0.5);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .pro-card-action {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border-radius: 10px;
            font-weight: 600;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .pro-card:hover .pro-card-action {
            gap: 12px;
        }

        .pro-card-action.small {
            padding: 10px 16px;
            font-size: 0.85em;
            background: #f8fafc;
            color: var(--primary);
            border: 1px solid #e2e8f0;
        }

        .pro-card:hover .pro-card-action.small {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Trust Section */
        .trust-section {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            padding: 30px 50px;
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            margin-top: 20px;
            position: relative;
            z-index: 1;
        }

        .trust-item {
            text-align: center;
        }

        .trust-num {
            display: block;
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8em;
            font-weight: 700;
            color: white;
            line-height: 1;
        }

        .trust-label {
            font-size: 0.85em;
            color: rgba(255,255,255,0.7);
            margin-top: 4px;
        }

        .trust-divider {
            width: 1px;
            height: 40px;
            background: rgba(255,255,255,0.2);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ENTERPRISE ROLE SELECTION
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .premium-role-selection {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 32px;
            padding: 32px 48px 80px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .mega-role-card {
            position: relative;
            background: #ffffff;
            border-radius: 20px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(0, 0, 0, 0.04);
        }
        
        .mega-role-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.12);
        }
        
        .mega-card-glow {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
        }
        
        .client-mega .mega-card-glow {
            background: linear-gradient(90deg, #10b981, #059669);
        }
        
        .mega-card-content {
            padding: 36px;
        }
        
        .mega-icon-wrapper {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 28px;
        }
        
        .mega-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(145deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
        }
        
        .mega-icon svg {
            width: 44px;
            height: 44px;
        }
        
        .client-mega .mega-icon {
            background: linear-gradient(145deg, #10b981 0%, #059669 100%);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }
        
        .mega-badge {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            padding: 8px 16px;
            border-radius: 100px;
            color: white;
            font-size: 13px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            letter-spacing: 0.02em;
        }
        
        .mega-badge.client-badge-color {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .pulse-dot {
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: pulse 2.5s ease-in-out infinite;
        }
        
        .pulse-dot.green {
            background: rgba(255, 255, 255, 0.8);
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.6; transform: scale(1.15); }
        }
        
        .mega-label {
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: #6366f1;
            margin-bottom: 6px;
        }
        
        .mega-label.client-label {
            color: #10b981;
        }
        
        .mega-title {
            font-family: 'Space Grotesk', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 28px;
            font-weight: 600;
            color: #111827;
            margin: 0 0 6px 0;
            letter-spacing: -0.02em;
        }
        
        .mega-subtitle {
            font-size: 16px;
            color: #6b7280;
            margin: 0 0 20px 0;
            font-weight: 400;
        }
        
        .mega-description {
            font-size: 14px;
            color: #4b5563;
            line-height: 1.65;
            margin-bottom: 24px;
            padding-bottom: 24px;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .mega-features {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 28px;
        }
        
        .mega-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: #374151;
            font-weight: 450;
        }
        
        .mega-feature svg {
            color: #6366f1;
            flex-shrink: 0;
            width: 18px;
            height: 18px;
        }
        
        .client-mega .mega-feature svg {
            color: #10b981;
        }
        
        .mega-action {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 28px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            transition: all 0.3s ease;
            letter-spacing: 0.01em;
        }
        
        .mega-action svg {
            width: 20px;
            height: 20px;
        }
        
        .mega-action.client-action {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .mega-role-card:hover .mega-action {
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.35);
        }
        
        .client-mega:hover .mega-action {
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.35);
        }
        
        @media (max-width: 1024px) {
            .premium-role-selection {
                grid-template-columns: 1fr;
                padding: 24px 20px 60px;
                gap: 24px;
            }
            
            .mega-title {
                font-size: 24px;
            }
            
            .mega-card-content {
                padding: 28px;
            }
        }

        @media (max-width: 768px) {
            .home-hero h1 {
                font-size: clamp(2rem, 8vw, 2.5rem);
            }
            .home-hero p {
                font-size: 0.95rem;
            }
            .pro-card.client-highlight {
                flex-direction: column;
                text-align: center;
            }
            .cards-row.multi .pro-card {
                flex: 0 1 45%;
            }
            .trust-section {
                flex-wrap: wrap;
                gap: 20px;
                padding: 25px 30px;
            }
            .trust-divider {
                display: none;
            }
            .trust-item {
                flex: 0 1 40%;
            }
        }

        /* AUTH PAGES */
        .auth-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .auth-box {
            background: var(--white);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 420px;
            box-shadow: var(--shadow);
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .auth-box h2 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-dark);
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.8em;
        }

        .back-link {
            color: white;
            margin-bottom: 20px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            font-weight: 500;
            transition: opacity 0.3s;
        }

        .back-link:hover {
            opacity: 0.8;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .autocomplete-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e0e0e0;
            border-top: none;
            border-radius: 0 0 12px 12px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 100;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }

        .autocomplete-item {
            padding: 12px 16px;
            cursor: pointer;
            color: var(--text-dark);
            transition: background 0.2s;
        }

        .autocomplete-item:hover {
            background: var(--bg-light);
        }

        .form-group label {
            display: block;
            color: var(--text-dark);
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .form-group input, 
        .form-group select, 
        .form-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e8ecf0;
            border-radius: 12px;
            font-size: 1em;
            color: var(--text-dark);
            background: var(--white);
            font-family: 'DM Sans', sans-serif;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .form-group input:focus, 
        .form-group select:focus, 
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(30, 60, 114, 0.1);
        }

        .form-group input::placeholder {
            color: #a0aab4;
        }

        .remember-row {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .remember-row input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 10px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .remember-row label {
            color: var(--text-dark);
            cursor: pointer;
        }

        .btn-primary {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(30, 60, 114, 0.2);
        }

        .auth-link {
            text-align: center;
            margin-top: 20px;
            color: var(--text-dark);
        }

        .auth-link a {
            color: var(--primary);
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
        }

        .auth-link a:hover {
            text-decoration: underline;
        }

        .social-buttons {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            justify-content: center;
        }

        .social-btn {
            width: 60px;
            height: 60px;
            padding: 0;
            border: 2px solid #e8ecf0;
            border-radius: 14px;
            background: white;
            color: var(--text-dark);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .social-btn svg {
            width: 28px;
            height: 28px;
        }

        .social-btn:hover {
            border-color: #d0d5dc;
            background: #f8fafc;
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.1);
        }

        .social-btn.apple-btn {
            background: #000;
            border-color: #000;
            color: white;
        }

        .social-btn.apple-btn:hover {
            background: #1a1a1a;
            border-color: #1a1a1a;
        }

        .social-btn.apple-btn svg path {
            fill: white;
        }

        @media (max-width: 480px) {
            .social-buttons {
                gap: 12px;
            }
            .social-btn {
                width: 50px;
                height: 50px;
            }
            .social-btn svg {
                width: 24px;
                height: 24px;
            }
        }

        .divider {
            text-align: center;
            margin: 25px 0;
            color: #a0aab4;
            position: relative;
            font-size: 0.9em;
        }

        .divider::before,
        .divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: 40%;
            height: 1px;
            background: #e8ecf0;
        }

        .divider::before { left: 0; }
        .divider::after { right: 0; }

        /* DASHBOARD COMMON */
        .dashboard-container {
            min-height: 100vh;
            background: var(--bg-light);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ğŸ¢ ENTERPRISE HEADER STILI
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .dashboard-nav {
            background: var(--white);
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-top-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 40px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .nav-brand {
            display: flex;
            align-items: center;
            gap: 14px;
        }
        
        .nav-brand-icon {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(30, 60, 114, 0.25);
        }
        
        .nav-brand-icon svg {
            width: 26px;
            height: 26px;
            fill: white;
        }
        
        .nav-brand-text {
            display: flex;
            flex-direction: column;
        }
        
        .nav-brand-name {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 22px;
            font-weight: 700;
            color: #1e293b;
            line-height: 1.1;
        }
        
        .nav-brand-tagline {
            font-size: 11px;
            color: #64748b;
            font-weight: 500;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        .nav-user-section {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .nav-user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            background: #f8fafc;
            border-radius: 12px;
        }
        
        .nav-user-avatar {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
        }
        
        .nav-user-avatar.client-avatar {
            background: linear-gradient(135deg, #00a385 0%, #00c9a7 100%);
        }
        
        .nav-user-details {
            display: flex;
            flex-direction: column;
        }
        
        .nav-user-name {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }
        
        .nav-user-role {
            font-size: 11px;
            color: #64748b;
        }
        
        .btn-logout {
            padding: 10px 20px;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
            font-size: 13px;
        }

        .btn-logout:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.35);
        }
        
        .nav-menu-row {
            display: flex;
            align-items: center;
            padding: 0 40px;
            background: #fafbfc;
            border-bottom: 1px solid #e2e8f0;
        }

        .nav-logo {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.4em;
            font-weight: 700;
            color: var(--primary);
            display: none;
        }

        .nav-menu {
            display: flex;
            gap: 4px;
        }

        .nav-menu-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 14px 20px;
            cursor: pointer;
            font-weight: 500;
            font-size: 13px;
            color: #1e3c72;
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
            background: #cbd5e1;
            border-radius: 8px 8px 0 0;
            margin: 0 2px;
        }

        .nav-menu-item:hover {
            color: #1e3c72;
            background: #94a3b8;
        }

        .nav-menu-item.active {
            color: #1e3c72;
            border-bottom-color: #1e3c72;
            background: white;
            font-weight: 600;
        }
        
        .nav-menu-item svg {
            width: 18px;
            height: 18px;
            fill: currentColor;
        }
        
        .nav-menu-item .menu-icon {
            font-size: 16px;
        }

        .nav-user {
            display: none;
        }

        /* Legacy nav-user for other dashboards */
        .dashboard-nav:not(.enterprise-nav) .nav-user {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .dashboard-nav:not(.enterprise-nav) .nav-user span {
            color: var(--text-dark);
            font-weight: 600;
        }

        .dashboard-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .welcome-box {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 30px 35px;
            border-radius: 20px;
            margin-bottom: 15px;
            position: relative;
            overflow: hidden;
        }

        .welcome-box::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }
        
        .welcome-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: relative;
            z-index: 1;
        }
        
        .carrier-type-badge {
            background: rgba(255,255,255,0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }
        
        .mode-filter-info {
            margin-top: 12px;
            padding: 8px 16px;
            background: rgba(255,255,255,0.15);
            border-radius: 8px;
            font-size: 0.85em;
            display: inline-block;
            position: relative;
            z-index: 1;
        }

        .provider-welcome.insurance-gradient {
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
        }

        .provider-welcome.customs-gradient {
            background: linear-gradient(135deg, #e67e22, #d35400);
        }

        .provider-welcome.warehouse-gradient {
            background: linear-gradient(135deg, #1abc9c, #16a085);
        }

        .provider-welcome.packaging-gradient {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }
        
        /* Carrier Gradients */
        .sea-carrier-gradient {
            background: linear-gradient(135deg, #0077b6, #023e8a) !important;
        }
        
        .air-carrier-gradient {
            background: linear-gradient(135deg, #ff8500, #e85d04) !important;
        }
        
        .land-carrier-gradient {
            background: linear-gradient(135deg, #2d6a4f, #1b4332) !important;
        }

        .welcome-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .welcome-left h2 {
            font-family: 'Space Grotesk', sans-serif;
            color: white;
            margin-bottom: 5px;
            font-size: 1.8em;
        }

        .welcome-left p {
            color: rgba(255,255,255,0.9);
            font-size: 1em;
        }

        .welcome-right {
            display: flex;
            gap: 10px;
        }

        .ai-quick-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            background: rgba(255,255,255,0.15);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
            backdrop-filter: blur(10px);
        }

        .ai-quick-btn:hover {
            background: rgba(255,255,255,0.25);
            transform: translateY(-2px);
        }

        .ai-btn-icon {
            font-size: 1.2em;
        }

        /* AI TOOLS BAR */
        .ai-tools-bar {
            background: var(--white);
            border-radius: 16px;
            padding: 15px 20px;
            margin-bottom: 25px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 20px;
            overflow-x: auto;
        }

        .ai-tools-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 700;
            color: var(--primary);
            white-space: nowrap;
            padding-right: 15px;
            border-right: 2px solid var(--bg-light);
        }

        .ai-icon {
            font-size: 1.4em;
        }

        .ai-tools-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: nowrap;
        }

        .ai-bar-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 10px 16px;
            background: var(--bg-light);
            border: 2px solid transparent;
            border-radius: 10px;
            color: var(--text-dark);
            font-weight: 600;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
            white-space: nowrap;
        }

        .ai-bar-btn:hover {
            background: var(--white);
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 60, 114, 0.15);
        }

        .ai-bar-btn span:first-child {
            font-size: 1.1em;
        }

        /* STATS CARDS */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--white);
            border-radius: 16px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-hover);
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .stat-icon.blue { background: rgba(30, 60, 114, 0.1); }
        .stat-icon.green { background: rgba(0, 212, 170, 0.1); }
        .stat-icon.orange { background: rgba(255, 107, 53, 0.1); }
        .stat-icon.purple { background: rgba(130, 80, 200, 0.1); }

        .stat-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2em;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 5px;
        }

        .stat-label {
            color: var(--text-dark);
            opacity: 0.6;
            font-size: 0.9em;
        }

        /* QUOTE BOX */
        .quote-box {
            background: var(--white);
            border-radius: 20px;
            padding: 35px;
            box-shadow: var(--shadow);
        }
        
        .quote-box-header {
            margin-bottom: 20px;
        }
        
        .btn-back-form {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            color: #475569;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-back-form:hover {
            background: #cbd5e1;
            color: #1e293b;
            transform: translateX(-4px);
        }
        
        .btn-back-form svg {
            transition: transform 0.3s ease;
        }
        
        .btn-back-form:hover svg {
            transform: translateX(-4px);
        }

        .quote-box h3 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-dark);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--bg-light);
            font-size: 1.4em;
        }
        
        /* TAMAMLANAN TALEPLER */
        .completed-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .completed-item {
            background: #e2e8f0;
            border: 1px solid #cbd5e1;
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .completed-item:hover {
            border-color: #94a3b8;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .completed-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }
        
        .completed-status {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .status-badge.success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .completed-date {
            color: #64748b;
            font-size: 13px;
        }
        
        .completed-id {
            color: #94a3b8;
            font-size: 12px;
            font-family: monospace;
        }
        
        .completed-route {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dashed #e2e8f0;
            margin-bottom: 12px;
        }
        
        .route-info {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .route-from {
            color: #1e293b;
            font-weight: 600;
            font-size: 15px;
        }
        
        .route-container {
            background: #cbd5e1;
            color: #1e3c72;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .customer-name {
            color: #64748b;
            font-size: 14px;
        }
        
        .completed-details {
            display: flex;
            gap: 24px;
        }
        
        .completed-details .detail-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .completed-details .detail-label {
            color: #94a3b8;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .completed-details .detail-value {
            color: #1e293b;
            font-weight: 600;
            font-size: 14px;
        }
        
        .completed-details .detail-item.profit .detail-value {
            color: #10b981;
        }
        
        .completed-summary {
            display: flex;
            gap: 16px;
            padding-top: 20px;
            border-top: 2px solid #e2e8f0;
        }
        
        .summary-card {
            flex: 1;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        
        .summary-card .summary-label {
            color: #64748b;
            font-size: 13px;
        }
        
        .summary-card.profit {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-color: #a7f3d0;
        }

        .freight-options {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
        }

        .freight-opt {
            flex: 1;
            padding: 20px;
            border: 2px solid #e8ecf0;
            border-radius: 14px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-dark);
        }

        .freight-opt:hover {
            border-color: var(--primary);
        }

        .freight-opt.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-color: transparent;
            color: white;
        }

        .freight-opt strong {
            display: block;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .freight-opt span {
            font-size: 0.85em;
            opacity: 0.8;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .section-label {
            color: var(--text-dark);
            font-weight: 700;
            margin: 25px 0 15px 0;
            font-size: 1.1em;
        }

        /* Freight-specific fields */
        .freight-specific-fields {
            background: linear-gradient(135deg, rgba(0,212,170,0.05) 0%, rgba(30,60,114,0.05) 100%);
            border: 1px solid rgba(0,212,170,0.2);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .freight-specific-fields .section-label {
            margin-top: 0;
            color: var(--accent);
        }

        .btn-submit {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 14px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(30, 60, 114, 0.25);
        }

        /* RESULTS PAGE */
        .results-header {
            text-align: center;
            margin-bottom: 25px;
        }

        .results-header h2 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-dark);
            margin-bottom: 5px;
            font-size: 1.8em;
        }

        .results-header p {
            color: var(--text-dark);
            opacity: 0.7;
        }

        .shipment-summary {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: var(--white);
            padding: 24px 32px;
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            gap: 20px;
        }

        .summary-item {
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .summary-label {
            display: block;
            color: #94a3b8;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        /* Premium Client Navigation */
        .client-nav-premium {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-bottom: 1px solid #e2e8f0;
        }
        
        .client-nav-premium .nav-menu {
            display: flex;
            gap: 4px;
        }
        
        .client-nav-premium .nav-menu-item {
            padding: 10px 18px;
            font-size: 14px;
            font-weight: 500;
            color: #1e3c72;
            background: #f1f5f9;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .client-nav-premium .nav-menu-item:hover {
            background: #cbd5e1;
            color: #1e3c72;
        }
        
        .client-nav-premium .nav-menu-item.active {
            background: #cbd5e1;
            color: #1e3c72;
            font-weight: 600;
            border: 2px solid #1e3c72;
        }
        
        .results-header-premium {
            text-align: center;
            padding: 32px 20px;
            background: linear-gradient(135deg, #00a385 0%, #00c9a7 100%);
            border-radius: 16px;
            margin-bottom: 20px;
            color: white;
        }
        
        .results-header-premium h2 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
        }
        
        .results-header-premium p {
            font-size: 16px;
            opacity: 0.9;
        }
        
        .results-header-premium strong {
            font-weight: 700;
        }

        .quote-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }

        .quote-card:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .quote-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .forwarder-name {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-dark);
            font-size: 1.3em;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .forwarder-rating {
            color: #f39c12;
            font-size: 0.95em;
        }

        .forwarder-reviews {
            color: var(--text-dark);
            opacity: 0.5;
            font-size: 0.85em;
        }

        .quote-price {
            text-align: right;
        }

        .quote-details {
            display: flex;
            gap: 30px;
            margin-bottom: 15px;
            padding: 18px;
            background: var(--bg-light);
            border-radius: 12px;
        }

        .quote-detail {
            color: var(--text-dark);
            font-size: 0.9em;
        }

        .quote-detail strong {
            display: block;
            margin-bottom: 3px;
            font-weight: 600;
        }

        .quote-badges {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .badge {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }
        
        .menu-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 20px;
            height: 20px;
            padding: 0 6px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: 600;
            background: #3b82f6;
            color: white;
            margin-left: 6px;
        }
        
        .menu-badge.rfq-badge {
            background: #ef4444;
            animation: badgePulse 2s ease-in-out infinite;
        }
        
        @keyframes badgePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .badge-verified { background: #e8f5e9; color: #27ae60; }
        .badge-fast { background: #fff3e0; color: #f39c12; }
        .badge-eco { background: #e3f2fd; color: #2196f3; }

        .btn-back {
            width: 100%;
            padding: 14px;
            background: var(--white);
            color: var(--text-dark);
            border: 2px solid var(--primary);
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-back:hover {
            background: var(--bg-light);
        }

        /* FORWARDER DASHBOARD */
        .request-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }

        .request-card:hover {
            background: #f1f5f9;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
            border-color: #cbd5e1;
        }

        .request-card.pending { border-left: 3px solid #f59e0b; }
        .request-card.quoted { border-left: 3px solid #1e3c72; }
        .request-card.accepted { border-left: 3px solid #10b981; }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .request-id {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            color: var(--text-dark);
        }

        .request-date {
            color: var(--text-dark);
            opacity: 0.6;
            font-size: 0.85em;
        }

        .request-status {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .status-pending { background: #fff3e0; color: #f39c12; }
        .status-quoted { background: rgba(30, 60, 114, 0.1); color: var(--primary); }
        .status-accepted { background: #e8f5e9; color: #27ae60; }
        .status-inprogress { background: #e3f2fd; color: #2196f3; }
        .status-completed { background: #e8f5e9; color: #27ae60; }

        /* Provider Request Cards */
        .request-client {
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .request-route-simple {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 12px;
        }

        .request-info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f0;
            font-size: 0.9em;
            color: var(--text-dark);
        }

        .request-info-row:last-of-type {
            border-bottom: none;
            margin-bottom: 15px;
        }

        .cargo-value {
            font-weight: 700;
            color: var(--primary);
        }

        .section-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.3em;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 20px;
            margin-top: 10px;
        }

        .requests-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        @media (max-width: 768px) {
            .requests-container {
                grid-template-columns: 1fr;
            }
        }

        /* Tab Content */
        .tab-content {
            display: block;
        }

        .tab-content.active {
            display: block;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            background: #f8fafc;
            border-radius: 16px;
            border: 2px dashed #e2e8f0;
        }

        .empty-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }

        .empty-state h3 {
            color: #475569;
            margin-bottom: 8px;
        }

        .empty-state p {
            color: #94a3b8;
        }

        /* Space Card (Warehouse) */
        .space-overview {
            display: grid;
            gap: 20px;
        }

        .space-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }

        .space-header {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 8px;
        }

        .space-value {
            font-size: 32px;
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 16px;
        }

        .space-bar {
            height: 12px;
            background: #cbd5e1;
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 8px;
        }

        .space-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4aa, #00a385);
            border-radius: 6px;
        }

        .space-info {
            font-size: 14px;
            color: #64748b;
        }

        /* Materials Grid (Packaging) */
        .materials-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 16px;
        }

        .material-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }

        .material-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .material-icon {
            font-size: 36px;
            margin-bottom: 12px;
        }

        .material-name {
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 4px;
        }

        .material-stock {
            color: #00d4aa;
            font-weight: 500;
        }

        .request-route {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--bg-light);
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .route-point {
            flex: 1;
        }

        .route-label {
            font-size: 0.75em;
            color: var(--text-dark);
            opacity: 0.6;
            margin-bottom: 3px;
        }

        .route-city {
            font-weight: 700;
            color: var(--text-dark);
        }

        .route-arrow {
            font-size: 1.5em;
            color: var(--primary);
        }

        .request-details {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .detail-item {
            background: var(--bg-light);
            padding: 10px 15px;
            border-radius: 10px;
        }

        .detail-label {
            font-size: 0.75em;
            color: var(--text-dark);
            opacity: 0.6;
        }

        .detail-value {
            font-weight: 600;
            color: var(--text-dark);
        }

        .request-actions {
            display: flex;
            gap: 10px;
        }

        .btn-quote {
            flex: 1;
            padding: 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-quote:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(30, 60, 114, 0.2);
        }

        .btn-view {
            padding: 12px 20px;
            background: var(--bg-light);
            color: var(--text-dark);
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-view:hover {
            background: #e0e4e8;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-box {
            background: var(--white);
            border-radius: 20px;
            padding: 35px;
            width: 100%;
            max-width: 500px;
            margin: 20px;
            transform: scale(0.9);
            transition: transform 0.3s;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-overlay.active .modal-box {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .modal-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-dark);
        }

        .modal-close {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            background: var(--bg-light);
            border: none;
            cursor: pointer;
            font-size: 1.5em;
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: #e0e4e8;
        }

        .price-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .currency-symbol {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2em;
            font-weight: 700;
            color: var(--text-dark);
        }

        .price-input {
            flex: 1;
            padding: 15px;
            border: 2px solid #e8ecf0;
            border-radius: 12px;
            font-size: 1.5em;
            font-weight: 700;
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-dark);
        }

        .price-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* =====================================================
           MARKETPLACE STYLES
           ===================================================== */
        
        /* Request Cards */
        .request-card.network {
            background: #e2e8f0;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border: 1px solid #cbd5e1;
            transition: all 0.2s ease;
        }

        .request-card.network:hover {
            background: #dbe4ed;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
            border-color: #94a3b8;
        }
        
        /* Request Card - Has Quote State */
        .request-card.network.has-quote {
            background: #f0fdf4;
            border-color: #86efac;
        }
        
        .request-card.network.has-quote:hover {
            background: #dcfce7;
            border-color: #4ade80;
        }
        
        .quote-submitted-badge {
            background: #10b981;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .btn-quote.btn-quoted {
            background: #d1d5db !important;
            color: #6b7280 !important;
            cursor: not-allowed;
        }
        
        .btn-quote {
            flex: 1;
            padding: 12px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }
        
        .btn-quote:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(30, 60, 114, 0.2);
        }
        
        .btn-quote.btn-submitted {
            background: #d1fae5 !important;
            color: #059669 !important;
            cursor: not-allowed;
        }
        
        /* Requests Filter Buttons */
        .requests-filter-bar {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .requests-filter-btn {
            padding: 8px 16px;
            border: 1px solid #e5e7eb;
            background: white;
            border-radius: 20px;
            font-size: 13px;
            color: #6b7280;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .requests-filter-btn:hover {
            border-color: #1e3c72;
            color: #1e3c72;
        }
        
        .requests-filter-btn.active {
            background: #1e3c72;
            color: white;
            border-color: #1e3c72;
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .request-id-badge {
            background: #1e3c72;
            color: #ffffff;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }

        .request-time {
            color: #64748b;
            font-size: 13px;
        }

        .request-route {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            padding: 20px;
            background: #ffffff;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #e2e8f0;
        }

        .route-from, .route-to {
            text-align: center;
        }

        .route-label {
            display: block;
            font-size: 11px;
            color: #94a3b8;
            text-transform: uppercase;
            margin-bottom: 4px;
        }

        .route-from strong, .route-to strong {
            font-size: 18px;
            color: #1e3c72;
        }

        .route-arrow {
            font-size: 24px;
            color: #00d4aa;
        }

        .request-details-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .detail-item {
            background: #ffffff;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }

        .detail-label {
            display: block;
            font-size: 11px;
            color: #94a3b8;
            margin-bottom: 4px;
        }

        .detail-value {
            font-size: 14px;
            font-weight: 600;
            color: #1e3c72;
        }

        .request-notes {
            background: #ffffff;
            border: 1px solid #fcd34d;
            border: 1px solid #fcd34d;
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 13px;
            color: #92400e;
            margin-bottom: 16px;
        }

        .request-services {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .service-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .service-badge.insurance {
            background: #fce7f3;
            color: #be185d;
        }

        .service-badge.customs {
            background: #ede9fe;
            color: #7c3aed;
        }

        .service-badge.warehouse {
            background: #d1fae5;
            color: #059669;
        }

        .service-badge.packaging {
            background: #ffedd5;
            color: #c2410c;
        }

        .request-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 16px;
            border-top: 1px solid #e2e8f0;
        }

        .quote-count {
            font-size: 14px;
            color: #64748b;
        }

        .count-badge {
            display: inline-block;
            background: #00d4aa;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            text-align: center;
            line-height: 24px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 6px;
        }

        .no-quotes {
            color: #f59e0b;
            font-weight: 500;
        }

        .request-actions {
            display: flex;
            gap: 10px;
        }

        .btn-message {
            padding: 10px 20px;
            background: #f1f5f9;
            color: #475569;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-message:hover {
            background: #cbd5e1;
        }

        .btn-quote {
            padding: 10px 24px;
            background: linear-gradient(135deg, #00d4aa, #00a385);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-quote:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0,212,170,0.4);
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1500;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-container {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            transform: scale(0.9);
            transition: all 0.3s;
            resize: both;
            overflow: hidden;
            min-width: 350px;
            min-height: 300px;
        }

        .modal-overlay.active .modal-container {
            transform: scale(1);
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            flex-shrink: 0;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 18px;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .modal-header-buttons {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .modal-expand {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .modal-expand:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .modal-container.expanded {
            max-width: 98vw !important;
            max-height: 95vh !important;
            width: 98vw !important;
            height: 95vh !important;
        }

        .modal-body {
            padding: 20px;
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 16px 20px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            flex-shrink: 0;
        }

        .modal-request-info {
            text-align: center;
            padding-bottom: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid #e2e8f0;
        }

        .request-badge {
            display: inline-block;
            background: #1e3c72;
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .request-route-mini {
            font-size: 20px;
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 4px;
        }

        .request-details-mini {
            font-size: 14px;
            color: #64748b;
        }

        .quote-form .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .quote-form .form-group {
            margin-bottom: 16px;
        }

        .quote-form label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #475569;
            margin-bottom: 8px;
        }

        .quote-form input,
        .quote-form select,
        .quote-form textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 15px;
            transition: all 0.3s;
        }

        .quote-form input:focus,
        .quote-form select:focus,
        .quote-form textarea:focus {
            outline: none;
            border-color: #00d4aa;
        }
        
        /* AI Enhanced Quote Modal - BÃ¼yÃ¼tÃ¼lebilir */
        .quote-modal.ai-enhanced .modal-container {
            max-width: 950px;
            width: 95%;
            max-height: 90vh;
            min-height: 500px;
        }
        
        .quote-modal-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }
        
        .quote-form-section {
            padding-right: 20px;
            border-right: 1px solid #e2e8f0;
        }
        
        .ai-quote-panel {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 16px;
            padding: 20px;
            height: fit-content;
        }
        
        .ai-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            font-weight: 700;
            color: #1e3c72;
            font-size: 16px;
        }
        
        .btn-ai-refresh {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            background: white;
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-ai-refresh:hover {
            background: #f0f9ff;
            border-color: #00d4aa;
            transform: rotate(180deg);
        }
        
        .btn-ai-refresh:active {
            transform: rotate(360deg) scale(0.95);
            background: #00d4aa;
            color: white;
        }
        
        .ai-section {
            background: white;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
        }
        
        .ai-section-title {
            font-size: 13px;
            font-weight: 700;
            color: #475569;
            margin-bottom: 12px;
        }
        
        /* Price Range Bar */
        .ai-price-range {
            margin-bottom: 12px;
        }
        
        .price-bar {
            display: flex;
            height: 32px;
            border-radius: 8px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .price-zone {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 600;
            color: white;
        }
        
        .price-zone.low { background: #ef4444; }
        .price-zone.optimal { background: #00d4aa; }
        .price-zone.high { background: #f59e0b; }
        
        .price-labels {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            font-weight: 700;
            color: #64748b;
        }
        
        .btn-ai-apply {
            width: 100%;
            padding: 10px;
            background: linear-gradient(135deg, #00d4aa, #00a385);
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-ai-apply:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,212,170,0.3);
        }
        
        /* Win Probability Circle */
        .win-probability {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .prob-circle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: conic-gradient(#e2e8f0 0deg, #e2e8f0 360deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .prob-circle::before {
            content: '';
            position: absolute;
            width: 54px;
            height: 54px;
            background: white;
            border-radius: 50%;
        }
        
        .prob-circle span {
            position: relative;
            font-size: 16px;
            font-weight: 700;
            color: #1e3c72;
        }
        
        .prob-circle.high { background: conic-gradient(#00d4aa var(--prob), #e2e8f0 var(--prob)); }
        .prob-circle.medium { background: conic-gradient(#f59e0b var(--prob), #e2e8f0 var(--prob)); }
        .prob-circle.low { background: conic-gradient(#ef4444 var(--prob), #e2e8f0 var(--prob)); }
        
        .prob-details {
            flex: 1;
        }
        
        #winProbText {
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 4px;
        }
        
        .prob-factors {
            font-size: 12px;
            color: #64748b;
        }
        
        /* Cost Breakdown */
        .cost-breakdown {
            font-size: 13px;
        }
        
        .cost-breakdown.editable .cost-item {
            align-items: center;
        }
        
        .cost-input-wrapper {
            display: flex;
            align-items: center;
            gap: 4px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 4px 8px;
        }
        
        .cost-input-wrapper .currency {
            color: #64748b;
            font-weight: 500;
        }
        
        .cost-input-wrapper input {
            border: none;
            background: transparent;
            width: 70px;
            text-align: right;
            font-weight: 600;
            color: #1e293b;
            font-size: 13px;
        }
        
        .cost-input-wrapper input:focus {
            outline: none;
        }
        
        .edit-hint {
            font-size: 10px;
            color: #94a3b8;
            font-weight: 400;
        }
        
        .cost-item {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .cost-item:last-child { border-bottom: none; }
        
        .cost-item.total {
            font-weight: 700;
            color: #1e3c72;
            border-top: 2px solid #e2e8f0;
            margin-top: 8px;
            padding-top: 12px;
        }
        
        .cost-item.profit {
            color: #00a385;
            font-weight: 600;
        }
        
        /* Market Insights */
        .market-insights {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        /* NEW: AI Price References Panel Styles */
        .non-binding-badge {
            font-size: 10px;
            font-weight: 600;
            color: #dc2626;
            background: #fef2f2;
            padding: 2px 8px;
            border-radius: 4px;
            margin-left: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .reference-range-box {
            background: linear-gradient(135deg, #fefce8, #fef9c3);
            border: 1px solid #fde047;
            border-radius: 10px;
            padding: 14px;
        }
        
        .range-intro {
            font-size: 12px;
            color: #713f12;
            margin: 0 0 12px 0;
            line-height: 1.5;
        }
        
        .range-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .range-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 10px 12px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }
        
        .range-label {
            font-size: 12px;
            color: #44403c;
            font-weight: 500;
        }
        
        .range-value {
            font-size: 14px;
            font-weight: 700;
            color: #1e3c72;
        }
        
        .range-disclaimer {
            font-size: 11px;
            color: #92400e;
            margin: 0;
            font-style: italic;
            line-height: 1.5;
            padding-top: 8px;
            border-top: 1px dashed #fcd34d;
        }
        
        /* Consistency Checks */
        .consistency-checks {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .check-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 8px 10px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .check-icon {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            flex-shrink: 0;
        }
        
        .check-icon.neutral {
            background: #e2e8f0;
            color: #64748b;
        }
        
        .check-icon.positive {
            background: #dcfce7;
            color: #16a34a;
        }
        
        .check-icon.warning {
            background: #fef3c7;
            color: #d97706;
        }
        
        .check-text {
            font-size: 12px;
            color: #475569;
            line-height: 1.4;
        }
        
        /* Operational Notes */
        .operational-notes {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .op-note {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px 12px;
            background: #f0f9ff;
            border-radius: 8px;
            border-left: 3px solid #0ea5e9;
        }
        
        .op-icon {
            font-size: 16px;
            flex-shrink: 0;
        }
        
        .op-text {
            font-size: 12px;
            color: #0369a1;
            line-height: 1.5;
        }
        
        /* Own Rates List */
        .own-rates-list {
            min-height: 40px;
        }
        
        .no-rates-msg {
            font-size: 12px;
            color: #64748b;
            margin: 0;
        }
        
        .no-rates-msg a {
            color: #1e3c72;
            text-decoration: underline;
        }
        
        /* AI Disclaimer Box */
        .ai-disclaimer-box {
            display: flex;
            gap: 10px;
            padding: 14px;
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            border-radius: 10px;
            border: 1px solid #cbd5e1;
            margin-top: 12px;
        }
        
        .disclaimer-icon {
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .disclaimer-text {
            font-size: 11px;
            color: #475569;
            margin: 0;
            line-height: 1.6;
            font-style: italic;
        }
        
        /* AI Role Statement */
        .ai-role-statement {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border: 1px solid #7dd3fc;
            border-radius: 10px;
            padding: 12px 14px;
            margin-bottom: 16px;
        }
        
        .ai-role-statement p {
            margin: 0;
            font-size: 12px;
            color: #0369a1;
            line-height: 1.5;
            font-style: italic;
        }
        
        /* Trade Lane Notes Box */
        .trade-lane-notes-box {
            background: #f8fafc;
            border-radius: 10px;
            padding: 14px;
            border-left: 3px solid #64748b;
        }
        
        .lane-note {
            margin: 0 0 10px 0;
            font-size: 13px;
            color: #334155;
            line-height: 1.6;
        }
        
        .lane-disclaimer {
            margin: 0;
            font-size: 11px;
            color: #94a3b8;
            font-style: italic;
            padding-top: 8px;
            border-top: 1px dashed #e2e8f0;
        }
        
        /* Scope Review Intro */
        .scope-review-intro {
            font-size: 11px;
            color: #64748b;
            margin: 0 0 12px 0;
            font-style: italic;
        }
        
        /* TIER-BASED AI Panel (Final Specification) */
        .ai-quote-panel.tier-based {
            border: 1px solid #e5e7eb;
            background: #fafafa;
            display: flex;
            flex-direction: column;
            min-height: 180px;
        }
        
        .ai-quote-panel.tier-based .ai-panel-header {
            background: #f3f4f6;
            color: #374151;
            font-size: 12px;
            padding: 10px 14px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .ai-quote-panel.tier-based.premium .ai-panel-header {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            color: white;
        }
        
        .tier-badge {
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            letter-spacing: 0.5px;
            background: #e5e7eb;
            color: #6b7280;
        }
        
        .tier-badge.premium {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        
        /* Silent State */
        .ai-silent-state {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px 16px;
        }
        
        .silent-text {
            margin: 0;
            font-size: 12px;
            color: #9ca3af;
            text-align: center;
        }
        
        /* Event Message */
        .ai-event-message {
            padding: 14px 16px;
        }
        
        .event-text {
            margin: 0;
            padding: 12px 14px;
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-left: 3px solid #0ea5e9;
            border-radius: 6px;
            font-size: 12px;
            color: #0c4a6e;
            line-height: 1.5;
        }
        
        /* Pre-Submit Section */
        .ai-presubmit-section {
            padding: 14px 16px;
            border-top: 1px solid #e5e7eb;
        }
        
        /* FREE Tier Upsell */
        .presubmit-free .upsell-text {
            margin: 0;
            padding: 12px 14px;
            background: #faf5ff;
            border: 1px solid #e9d5ff;
            border-radius: 6px;
            font-size: 11px;
            color: #7c3aed;
            text-align: center;
        }
        
        /* PREMIUM Tier Review */
        .presubmit-premium .review-header {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #6366f1;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .review-checklist {
            display: flex;
            flex-direction: column;
            gap: 6px;
            margin-bottom: 12px;
        }
        
        .review-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 12px;
            color: #374151;
            line-height: 1.4;
        }
        
        .review-item .check-mark {
            color: #10b981;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .review-item .warning-mark {
            color: #f59e0b;
            flex-shrink: 0;
        }
        
        /* Network Intel */
        .network-intel {
            margin-top: 10px;
        }
        
        .network-intel .intel-text {
            margin: 0;
            padding: 10px 12px;
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 6px;
            font-size: 11px;
            color: #0369a1;
            font-style: italic;
            line-height: 1.5;
        }
        
        /* Final Confirmation */
        .ai-final-confirm {
            padding: 12px 16px;
            border-top: 1px solid #e5e7eb;
        }
        
        .ai-final-confirm .confirm-text {
            margin: 0;
            padding: 12px 14px;
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 1px solid #86efac;
            border-radius: 6px;
            font-size: 12px;
            color: #166534;
            line-height: 1.5;
        }
        
        /* Implicit Disclaimer */
        .ai-disclaimer-implicit {
            padding: 8px 14px;
            background: #f9fafb;
            border-top: 1px solid #e5e7eb;
            margin-top: auto;
        }
        
        .ai-disclaimer-implicit p {
            margin: 0;
            font-size: 10px;
            color: #9ca3af;
            text-align: center;
        }
        
        /* LOCKED PREMIUM AI Panel (Paywall) */
        .ai-quote-panel.premium-locked {
            border: 1px solid #e5e7eb;
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
            display: flex;
            flex-direction: column;
            min-height: 280px;
        }
        
        .ai-quote-panel.premium-locked .ai-panel-header.locked {
            background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);
            color: white;
            font-size: 12px;
            padding: 10px 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .premium-badge-locked {
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        /* Locked Content */
        .ai-locked-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }
        
        .locked-icon {
            font-size: 32px;
            margin-bottom: 12px;
            opacity: 0.7;
        }
        
        .locked-body {
            margin: 0 0 12px 0;
            font-size: 13px;
            color: #374151;
            line-height: 1.6;
            max-width: 280px;
        }
        
        .locked-disclaimer {
            margin: 0 0 16px 0;
            font-size: 11px;
            color: #6b7280;
            font-style: italic;
            line-height: 1.5;
            max-width: 260px;
        }
        
        /* CTAs */
        .locked-ctas {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            max-width: 220px;
        }
        
        .btn-upgrade {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-upgrade:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%);
            transform: translateY(-1px);
        }
        
        .btn-continue-free {
            background: transparent;
            color: #6b7280;
            border: 1px solid #d1d5db;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-continue-free:hover {
            background: #f3f4f6;
            color: #374151;
        }
        
        /* Inline Teaser */
        .ai-inline-teaser {
            padding: 8px 14px;
            background: #f0f9ff;
            border-top: 1px solid #bae6fd;
        }
        
        .ai-inline-teaser p {
            margin: 0;
            font-size: 10px;
            color: #0369a1;
            text-align: center;
        }
        
        /* Premium Badge in Profile */
        .premium-ai-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 1px solid #93c5fd;
            padding: 10px 14px;
            border-radius: 8px;
            margin-top: 12px;
        }
        
        .premium-ai-badge .badge-icon {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }
        
        .premium-ai-badge .badge-content {
            display: flex;
            flex-direction: column;
        }
        
        .premium-ai-badge .badge-title {
            font-size: 12px;
            font-weight: 600;
            color: #1e40af;
        }
        
        .premium-ai-badge .badge-subtitle {
            font-size: 10px;
            color: #3b82f6;
        }
        
        /* PREMIUM TIER AI Panel (Pre-Submit Activation) */
        .ai-quote-panel.premium-tier {
            border: 1px solid #e0e7ff;
            background: linear-gradient(135deg, #fafbff 0%, #f5f7ff 100%);
            display: flex;
            flex-direction: column;
            min-height: 220px;
        }
        
        .ai-quote-panel.premium-tier .ai-panel-header {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            color: white;
            font-size: 12px;
            padding: 10px 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .premium-badge-small {
            background: rgba(255,255,255,0.2);
            color: white;
            font-size: 9px;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        /* Inactive State */
        .ai-inactive-state {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 20px;
        }
        
        .inactive-text {
            margin: 0;
            font-size: 12px;
            color: #9ca3af;
            text-align: center;
        }
        
        /* Pre-Submit Review */
        .ai-presubmit-review {
            flex: 1;
            padding: 14px;
        }
        
        .review-header {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #6366f1;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .review-checklist {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 14px;
        }
        
        .review-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 12px;
            color: #374151;
            line-height: 1.4;
        }
        
        .review-item .check-mark {
            color: #10b981;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .review-item .warning-mark {
            color: #f59e0b;
            flex-shrink: 0;
        }
        
        /* Network Intelligence */
        .network-intelligence {
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 6px;
            padding: 10px 12px;
            margin-bottom: 12px;
        }
        
        .intel-text {
            margin: 0;
            font-size: 11px;
            color: #0369a1;
            font-style: italic;
            line-height: 1.5;
        }
        
        /* Final Confirmation */
        .final-confirmation {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border: 1px solid #86efac;
            border-radius: 6px;
            padding: 10px 12px;
        }
        
        .confirm-text {
            margin: 0;
            font-size: 12px;
            color: #166534;
            line-height: 1.5;
        }
        
        /* Premium Disclaimer */
        .ai-disclaimer-premium {
            padding: 10px 14px;
            background: #f8fafc;
            border-top: 1px solid #e0e7ff;
            margin-top: auto;
        }
        
        .ai-disclaimer-premium p {
            margin: 0;
            font-size: 10px;
            color: #6b7280;
            text-align: center;
            line-height: 1.4;
        }
        
        /* FREE TIER AI Panel (Minimal, Event-Driven) */
        .ai-quote-panel.free-tier {
            border: 1px solid #e5e7eb;
            background: #fafafa;
            display: flex;
            flex-direction: column;
            min-height: 200px;
        }
        
        .ai-quote-panel.free-tier .ai-panel-header {
            background: #f3f4f6;
            color: #6b7280;
            font-size: 12px;
            padding: 10px 14px;
            border-bottom: 1px solid #e5e7eb;
        }
        
        /* Silent State */
        .ai-silent-state {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 30px 20px;
        }
        
        .silent-text {
            margin: 0;
            font-size: 12px;
            color: #9ca3af;
            text-align: center;
        }
        
        /* Message Display */
        .ai-message-display {
            flex: 1;
            padding: 16px;
        }
        
        .ai-message {
            padding: 14px 16px;
            background: #f0f9ff;
            border: 1px solid #bae6fd;
            border-left: 3px solid #0ea5e9;
            border-radius: 6px;
            font-size: 13px;
            color: #0c4a6e;
            line-height: 1.5;
            animation: fadeInMessage 0.3s ease-out;
        }
        
        @keyframes fadeInMessage {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Minimal Footer */
        .ai-footer-minimal {
            padding: 8px 14px;
            background: #f9fafb;
            border-top: 1px solid #e5e7eb;
        }
        
        .ai-footer-minimal p {
            margin: 0;
            font-size: 10px;
            color: #9ca3af;
            text-align: center;
        }
        
        /* OPERATIONAL CONTEXT AI Panel (Quiet Co-Pilot) */
        .ai-quote-panel.operational-context {
            border: 1px solid #e2e8f0;
            background: #fafbfc;
        }
        
        .ai-quote-panel.operational-context .ai-panel-header {
            background: #f1f5f9;
            color: #475569;
            font-size: 13px;
            padding: 12px 14px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        /* Global Disclaimer */
        .ai-global-disclaimer {
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            padding: 10px 14px;
        }
        
        .ai-global-disclaimer p {
            margin: 0;
            font-size: 11px;
            color: #64748b;
            line-height: 1.5;
            font-style: italic;
        }
        
        /* Trade Lane Context */
        .trade-lane-context {
            padding: 14px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .trade-lane-info {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 8px;
        }
        
        .lane-description {
            margin: 0;
            font-size: 12px;
            color: #475569;
            line-height: 1.6;
        }
        
        .lane-soft-disclaimer {
            margin: 0;
            font-size: 10px;
            color: #94a3b8;
            font-style: italic;
        }
        
        /* Scope Consistency Check */
        .scope-consistency {
            padding: 14px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .scope-checklist {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .scope-checklist .check-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 12px;
        }
        
        .check-status {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 12px;
            background: #f1f5f9;
            color: #94a3b8;
        }
        
        .check-status.checked {
            background: #dcfce7;
            color: #16a34a;
        }
        
        .check-status.review {
            background: #fef3c7;
            color: #d97706;
        }
        
        .check-label {
            color: #475569;
        }
        
        /* Operational Considerations */
        .operational-considerations {
            padding: 14px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .considerations-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .consideration-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px 12px;
            background: #fffbeb;
            border: 1px solid #fde68a;
            border-left: 3px solid #f59e0b;
            border-radius: 6px;
            font-size: 12px;
            color: #92400e;
        }
        
        .consideration-icon {
            font-size: 14px;
            flex-shrink: 0;
        }
        
        /* Readiness Indicator */
        .readiness-indicator {
            padding: 14px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .readiness-status {
            margin-bottom: 8px;
        }
        
        .status-badge {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-badge.draft {
            background: #f1f5f9;
            color: #64748b;
        }
        
        .status-badge.reviewed {
            background: #fef3c7;
            color: #b45309;
        }
        
        .status-badge.ready {
            background: #dcfce7;
            color: #16a34a;
        }
        
        .readiness-note {
            margin: 0;
            font-size: 10px;
            color: #94a3b8;
            font-style: italic;
        }
        
        /* Footer Disclaimer */
        .ai-footer-disclaimer {
            padding: 10px 14px;
            background: #f8fafc;
        }
        
        .ai-footer-disclaimer p {
            margin: 0;
            font-size: 10px;
            color: #94a3b8;
            text-align: center;
        }
        
        /* Section Title for Operational Context */
        .ai-quote-panel.operational-context .ai-section-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: #64748b;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        /* EVENT-DRIVEN AI Panel Styles */
        .ai-quote-panel.event-driven {
            display: flex;
            flex-direction: column;
            min-height: 400px;
        }
        
        /* Waiting State */
        .ai-waiting-state {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
            text-align: center;
        }
        
        .waiting-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.6;
        }
        
        .waiting-text {
            font-size: 14px;
            color: #64748b;
            margin: 0 0 8px 0;
        }
        
        .waiting-subtext {
            font-size: 11px;
            color: #94a3b8;
            font-style: italic;
            margin: 0;
        }
        
        /* Insights Stream */
        .ai-insights-stream {
            flex: 1;
            padding: 12px;
            overflow-y: auto;
        }
        
        .ai-insight-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            animation: slideInInsight 0.3s ease-out;
        }
        
        @keyframes slideInInsight {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .ai-insight-item.incoterm {
            background: linear-gradient(135deg, #eff6ff, #dbeafe);
            border-left: 3px solid #3b82f6;
        }
        
        .ai-insight-item.transit {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-left: 3px solid #22c55e;
        }
        
        .ai-insight-item.validity {
            background: linear-gradient(135deg, #fefce8, #fef3c7);
            border-left: 3px solid #f59e0b;
        }
        
        .ai-insight-item.notes {
            background: linear-gradient(135deg, #faf5ff, #f3e8ff);
            border-left: 3px solid #a855f7;
        }
        
        .insight-icon {
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .insight-text {
            font-size: 13px;
            color: #334155;
            line-height: 1.5;
            margin: 0;
        }
        
        .insight-timestamp {
            font-size: 10px;
            color: #94a3b8;
            margin-top: 4px;
        }
        
        /* Pre-Submit Summary */
        .ai-presubmit-summary {
            padding: 16px;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-top: 1px solid #e2e8f0;
        }
        
        .summary-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            font-weight: 600;
            color: #1e293b;
            font-size: 13px;
        }
        
        .summary-icon {
            font-size: 18px;
        }
        
        .summary-checklist {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .summary-checklist li {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 0;
            font-size: 12px;
            color: #475569;
        }
        
        .summary-checklist li .check {
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 12px;
        }
        
        .summary-checklist li.complete .check {
            background: #22c55e;
            color: white;
        }
        
        .summary-checklist li.pending .check {
            background: #e2e8f0;
            color: #94a3b8;
        }
        
        /* Final Confirmation */
        .ai-final-confirmation {
            padding: 16px;
        }
        
        .confirmation-box {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 1px solid #86efac;
            border-radius: 10px;
        }
        
        .confirmation-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #22c55e;
            color: white;
            border-radius: 50%;
            font-size: 18px;
            font-weight: bold;
        }
        
        .confirmation-text {
            flex: 1;
            font-size: 13px;
            color: #166534;
            line-height: 1.5;
            margin: 0;
        }
        
        /* Compact Disclaimer */
        .ai-disclaimer-box.compact {
            padding: 10px 14px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            margin-top: auto;
        }
        
        .disclaimer-text-compact {
            margin: 0;
            font-size: 10px;
            color: #64748b;
            text-align: center;
        }
        
        /* PREMIUM AI Panel Styles */
        .ai-quote-panel.premium-ai {
            border: 2px solid #f59e0b;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
        }
        
        .ai-quote-panel.premium-ai .ai-panel-header {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .premium-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #78350f;
            font-size: 10px;
            font-weight: 700;
            padding: 3px 8px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .premium-feature-badge {
            color: #f59e0b;
            font-size: 12px;
            margin-left: 6px;
        }
        
        .ai-role-statement.premium {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            border-color: #f59e0b;
        }
        
        .ai-role-statement.premium p {
            color: #92400e;
        }
        
        .trade-lane-notes-box.premium {
            border-left-color: #f59e0b;
            background: linear-gradient(135deg, #fffbeb, #fef3c7);
        }
        
        .lane-insight {
            margin: 8px 0 10px 0;
            font-size: 12px;
            color: #b45309;
            line-height: 1.5;
            font-style: italic;
            padding-left: 12px;
            border-left: 2px solid #fbbf24;
        }
        
        .scope-framing-box.premium {
            background: linear-gradient(135deg, #fffbeb, #fef3c7);
            border-color: #f59e0b;
        }
        
        .framing-suggestions {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px dashed #fbbf24;
        }
        
        .suggestion-item {
            margin: 4px 0;
            font-size: 11px;
            color: #92400e;
        }
        
        .language-tone-box {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 1px solid #86efac;
            border-left: 3px solid #22c55e;
            border-radius: 8px;
            padding: 12px 14px;
        }
        
        .tone-note {
            margin: 0 0 8px 0;
            font-size: 12px;
            color: #166534;
            line-height: 1.5;
        }
        
        .tone-disclaimer {
            margin: 0;
            font-size: 10px;
            color: #6b7280;
            font-style: italic;
        }
        
        .check-icon.info {
            color: #3b82f6;
        }
        
        /* Scope Framing Box */
        .scope-framing-box {
            background: linear-gradient(135deg, #fefce8, #fef9c3);
            border: 1px solid #fde047;
            border-left: 3px solid #eab308;
            border-radius: 8px;
            padding: 12px 14px;
        }
        
        .framing-note {
            margin: 0;
            font-size: 12px;
            color: #854d0e;
            line-height: 1.5;
            font-style: italic;
        }
        
        /* Check Item Warning State */
        .check-icon.warning {
            color: #f59e0b;
        }
        
        /* Commercial Terms Notice */
        .commercial-terms-notice {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 12px 14px;
            background: linear-gradient(135deg, #fefce8, #fef9c3);
            border: 1px solid #fde047;
            border-radius: 10px;
            margin-bottom: 12px;
        }
        
        .commercial-terms-notice .notice-icon {
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .commercial-terms-notice p {
            margin: 0;
            font-size: 12px;
            color: #854d0e;
            line-height: 1.5;
            font-weight: 500;
        }
        
        /* Updated AI Disclaimer */
        .ai-disclaimer-box .disclaimer-content {
            flex: 1;
        }
        
        .disclaimer-text-secondary {
            margin: 6px 0 0 0 !important;
            font-weight: 600 !important;
            color: #475569 !important;
            font-style: normal !important;
        }
        
        /* Carrier Rates List in Quote Modal */
        .carrier-rates-list {
            max-height: 120px;
            overflow-y: auto;
            font-size: 12px;
        }
        
        .carrier-rate-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px;
            background: white;
            border-radius: 8px;
            margin-bottom: 6px;
            border-left: 3px solid #00d4aa;
        }
        
        .carrier-rate-item.sea { border-color: #0077b6; }
        .carrier-rate-item.air { border-color: #ff8500; }
        .carrier-rate-item.land { border-color: #2d6a4f; }
        
        .carrier-rate-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .carrier-rate-name {
            font-weight: 600;
            color: #1e3c72;
        }
        
        .carrier-rate-detail {
            color: #64748b;
            font-size: 11px;
        }
        
        .carrier-rate-price {
            font-weight: 700;
            color: #00d4aa;
            font-size: 14px;
        }
        
        /* Combination Options */
        .combination-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .combo-option {
            background: white;
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s;
        }
        
        .combo-option:hover {
            border-color: #00d4aa;
        }
        
        .combo-option.selected {
            border-color: #00d4aa;
            background: linear-gradient(135deg, #e6fff9 0%, #d0f5ed 100%);
        }
        
        .combo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .combo-mode {
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 700;
            color: #1e3c72;
            font-size: 13px;
        }
        
        .combo-price {
            font-weight: 700;
            color: #00d4aa;
            font-size: 16px;
        }
        
        .combo-details {
            font-size: 11px;
            color: #64748b;
            margin-bottom: 8px;
        }
        
        .combo-pros-cons {
            display: flex;
            gap: 12px;
            font-size: 10px;
        }
        
        .combo-pros, .combo-cons {
            flex: 1;
        }
        
        .combo-pros-title {
            color: #16a34a;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .combo-cons-title {
            color: #dc2626;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .combo-pros ul, .combo-cons ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .combo-pros li::before {
            content: 'âœ“ ';
            color: #16a34a;
        }
        
        .combo-cons li::before {
            content: 'âœ— ';
            color: #dc2626;
        }
        
        .insight-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
            color: #475569;
        }
        
        .insight-icon {
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .quote-modal-body {
                grid-template-columns: 1fr;
            }
            .quote-form-section {
                padding-right: 0;
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 20px;
            }
        }
        
        /* CARRIER DASHBOARD STYLES */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .btn-add-rate {
            padding: 12px 24px;
            background: linear-gradient(135deg, #00d4aa, #00a385);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-add-rate:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,212,170,0.3);
        }
        
        .rates-info-box {
            display: flex;
            align-items: flex-start;
            gap: 16px;
            background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 20px;
        }
        
        .rates-info-box .info-icon {
            font-size: 24px;
        }
        
        .rates-info-box .info-content strong {
            display: block;
            color: #00838f;
            margin-bottom: 4px;
        }
        
        .rates-info-box .info-content p {
            color: #006064;
            font-size: 14px;
            margin: 0;
        }
        
        .rates-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .rate-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }
        
        .rate-card:hover {
            background: #f1f5f9;
            box-shadow: 0 2px 6px rgba(0,0,0,0.08);
            border-color: #cbd5e1;
        }
        
        .rate-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .rate-route {
            font-size: 18px;
            font-weight: 700;
            color: #1e3c72;
        }
        
        .rate-price {
            font-size: 24px;
            font-weight: 700;
            color: #00d4aa;
        }
        
        .rate-price small {
            font-size: 14px;
            color: #64748b;
            font-weight: 400;
        }
        
        .rate-details {
            display: flex;
            gap: 24px;
            flex-wrap: wrap;
            margin-bottom: 12px;
        }
        
        .rate-detail {
            font-size: 14px;
            color: #64748b;
        }
        
        .rate-detail strong {
            color: #1e3c72;
        }
        
        .rate-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 12px;
            border-top: 1px solid #f1f5f9;
        }
        
        .rate-validity {
            font-size: 13px;
            color: #94a3b8;
        }
        
        .rate-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-edit-rate, .btn-delete-rate {
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-edit-rate {
            background: #f1f5f9;
            color: #475569;
        }
        
        .btn-edit-rate:hover {
            background: #cbd5e1;
        }
        
        .btn-delete-rate {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .btn-delete-rate:hover {
            background: #fecaca;
        }
        
        /* Rate Modal - BÃ¼yÃ¼tÃ¼lebilir */
        .rate-modal.ai-enhanced .modal-container {
            max-width: 950px;
            width: 95%;
            max-height: 90vh;
            min-height: 500px;
        }
        
        .rate-modal-body {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            flex: 1;
            overflow-y: auto;
            min-height: 0;
        }
        
        .rate-form-section {
            padding-right: 20px;
            border-right: 1px solid #e2e8f0;
        }
        
        .ai-rate-panel {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 16px;
            padding: 20px;
        }
        
        .route-info-section {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            padding: 12px 16px;
            border-radius: 10px;
            margin-bottom: 12px;
        }
        
        .route-distance {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
            color: #0369a1;
        }
        
        .distance-icon {
            font-size: 18px;
        }
        
        .final-price-input {
            display: flex;
            align-items: center;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .final-price-input .currency {
            padding: 12px 16px;
            background: #f8fafc;
            font-weight: 700;
            color: #1e3c72;
            border-right: 2px solid #e2e8f0;
        }
        
        .final-price-input input {
            flex: 1;
            border: none;
            padding: 12px 16px;
            font-size: 18px;
            font-weight: 700;
            color: #00d4aa;
        }
        
        .final-price-input input:focus {
            outline: none;
        }
        
        .final-price-input .unit {
            padding: 12px 16px;
            color: #64748b;
            font-size: 14px;
        }
        
        /* Profit Calculator */
        .profit-calculator {
            padding: 12px;
            background: white;
            border-radius: 12px;
        }
        
        .profit-slider-container {
            margin-bottom: 16px;
        }
        
        .profit-slider-container label {
            display: block;
            font-size: 13px;
            color: #475569;
            margin-bottom: 8px;
        }
        
        .profit-slider-container input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: linear-gradient(90deg, #ef4444, #f59e0b, #00d4aa);
            outline: none;
            -webkit-appearance: none;
        }
        
        .profit-slider-container input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            border: 3px solid #1e3c72;
            cursor: pointer;
        }
        
        .profit-result {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .profit-item {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
        }
        
        .profit-item.suggested {
            font-weight: 700;
            color: #00d4aa;
            font-size: 16px;
            padding-top: 8px;
            border-top: 1px dashed #e2e8f0;
        }
        
        /* Market Comparison */
        .market-comparison {
            padding: 12px;
            background: white;
            border-radius: 12px;
        }
        
        .market-bar {
            position: relative;
            height: 40px;
            background: linear-gradient(90deg, #dcfce7 0%, #fef9c3 50%, #fee2e2 100%);
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        .market-range {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
            padding: 0 12px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .range-low { color: #16a34a; }
        .range-avg { color: #64748b; }
        .range-high { color: #dc2626; }
        
        .market-indicator {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 16px;
            height: 16px;
            background: #1e3c72;
            border: 3px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: left 0.3s;
            left: 50%;
        }
        
        .market-position {
            text-align: center;
            font-size: 13px;
            color: #64748b;
        }
        
        /* Market Intelligence Styles */
        .market-intel {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .intel-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            background: white;
            border-radius: 10px;
            border-left: 3px solid #00d4aa;
        }
        
        .intel-icon {
            font-size: 20px;
        }
        
        .intel-content {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .intel-label {
            font-size: 11px;
            color: #64748b;
        }
        
        .intel-value {
            font-size: 14px;
            font-weight: 700;
            color: #1e3c72;
        }
        
        .intel-value.trend-up {
            color: #16a34a;
        }
        
        .intel-value.trend-down {
            color: #dc2626;
        }
        
        /* Win Probability Meter */
        .win-prob-container {
            background: white;
            border-radius: 12px;
            padding: 16px;
            text-align: center;
        }
        
        .win-prob-meter {
            height: 12px;
            background: linear-gradient(90deg, #fee2e2 0%, #fef9c3 50%, #dcfce7 100%);
            border-radius: 6px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .win-prob-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4aa, #00a385);
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .win-prob-value {
            font-size: 28px;
            font-weight: 800;
            color: #1e3c72;
            margin-bottom: 4px;
        }
        
        .win-prob-value.high { color: #16a34a; }
        .win-prob-value.medium { color: #f59e0b; }
        .win-prob-value.low { color: #dc2626; }
        
        .win-prob-hint {
            font-size: 12px;
            color: #64748b;
        }
        
        /* Smart Suggestions */
        .smart-suggestions {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .suggestion-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            padding: 10px 12px;
            background: linear-gradient(135deg, #fffbeb 0%, #fef3c7 100%);
            border-radius: 10px;
            font-size: 12px;
            color: #92400e;
        }
        
        .suggestion-item.tip-speed { background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); color: #065f46; }
        .suggestion-item.tip-price { background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); color: #1e40af; }
        .suggestion-item.tip-route { background: linear-gradient(135deg, #fdf4ff 0%, #fae8ff 100%); color: #86198f; }
        .suggestion-item.tip-timing { background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%); color: #c2410c; }
        
        .sugg-icon {
            font-size: 14px;
        }
        
        /* Route Stats Grid */
        .route-stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }
        
        .route-stat-box {
            background: white;
            border-radius: 12px;
            padding: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
        }
        
        .stat-box-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        
        .stat-box-value {
            font-size: 16px;
            font-weight: 800;
            color: #1e3c72;
        }
        
        .stat-box-label {
            font-size: 10px;
            color: #64748b;
            text-transform: uppercase;
        }
        
        /* Performance Grid */
        .performance-grid {
            background: white;
            border-radius: 12px;
            padding: 12px;
        }
        
        .perf-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .perf-item:last-child {
            border-bottom: none;
        }
        
        .perf-label {
            font-size: 12px;
            color: #64748b;
        }
        
        .perf-value {
            font-size: 14px;
            font-weight: 700;
            color: #1e3c72;
        }
        
        .perf-bar-container {
            flex: 1;
            height: 8px;
            background: #cbd5e1;
            border-radius: 4px;
            margin: 0 12px;
            overflow: hidden;
        }
        
        .perf-bar {
            height: 100%;
            background: linear-gradient(90deg, #00d4aa, #00a385);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        /* Market Labels */
        .market-labels {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: #94a3b8;
            margin-bottom: 4px;
        }
        
        .market-comparison .range-avg {
            font-weight: 600;
            color: #f59e0b;
        }
        
        @media (max-width: 768px) {
            .modal-container {
                width: 98%;
                max-height: 95vh;
                min-width: 300px;
                resize: vertical;
            }
            .rate-modal.ai-enhanced .modal-container,
            .quote-modal.ai-enhanced .modal-container {
                max-width: 98%;
                min-height: 400px;
            }
            .rate-modal-body,
            .quote-modal-body {
                grid-template-columns: 1fr;
            }
            .rate-form-section,
            .quote-form-section {
                padding-right: 0;
                border-right: none;
                border-bottom: 1px solid #e2e8f0;
                padding-bottom: 20px;
            }
        }

        .btn-secondary {
            padding: 12px 24px;
            background: #f1f5f9;
            color: #475569;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-secondary:hover {
            background: #cbd5e1;
        }

        /* Message Modal */
        .message-modal {
            max-width: 450px;
        }

        .modal-request-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
        }

        .messages-body {
            padding: 0;
        }

        .messages-list {
            height: 350px;
            overflow-y: auto;
            padding: 20px;
            background: #f8fafc;
        }

        .no-messages {
            text-align: center;
            color: #94a3b8;
            padding: 40px;
        }

        .message-item {
            max-width: 80%;
            margin-bottom: 16px;
            padding: 12px 16px;
            border-radius: 16px;
        }

        .message-item.own {
            margin-left: auto;
            background: linear-gradient(135deg, #00d4aa, #00a385);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message-item.other {
            background: white;
            border: 1px solid #e2e8f0;
            border-bottom-left-radius: 4px;
        }

        .message-sender {
            font-size: 11px;
            font-weight: 600;
            margin-bottom: 4px;
            opacity: 0.8;
        }

        .message-text {
            font-size: 14px;
            line-height: 1.5;
        }

        .message-time {
            font-size: 10px;
            opacity: 0.6;
            margin-top: 4px;
            text-align: right;
        }

        .message-input-footer {
            display: flex;
            gap: 10px;
            padding: 16px 20px;
        }

        .message-input-footer input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 25px;
            font-size: 14px;
        }

        .message-input-footer input:focus {
            outline: none;
            border-color: #00d4aa;
        }

        .btn-send {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #00d4aa, #00a385);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .btn-send:hover {
            transform: scale(1.1);
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            z-index: 2000;
            transform: translateX(120%);
            transition: all 0.3s;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 4px solid #00d4aa;
        }

        .notification.error {
            border-left: 4px solid #ef4444;
        }

        .no-requests {
            text-align: center;
            padding: 60px 20px;
            color: #94a3b8;
            font-size: 16px;
        }

        @media (max-width: 768px) {
            .request-details-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .request-route {
                flex-direction: column;
                gap: 10px;
            }
            
            .route-arrow {
                transform: rotate(90deg);
            }
            
            .quote-form .form-row {
                grid-template-columns: 1fr;
            }
        }

        /* AI CHATBOT */
        .chatbot-container {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 380px;
            max-height: 500px;
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            z-index: 1000;
            overflow: hidden;
            animation: slideUp 0.3s ease;
        }

        .chatbot-container.active {
            display: flex;
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .ai-avatar {
            font-size: 1.5em;
        }

        .online-status {
            display: block;
            font-size: 0.75em;
            opacity: 0.9;
            color: #00d4aa;
        }

        .chatbot-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            font-size: 1.3em;
            cursor: pointer;
            transition: background 0.3s;
        }

        .chatbot-close:hover {
            background: rgba(255,255,255,0.3);
        }

        .chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            max-height: 350px;
            background: #f8f9fa;
        }

        .chat-message {
            margin-bottom: 15px;
            display: flex;
        }

        .chat-message.bot {
            justify-content: flex-start;
        }

        .chat-message.user {
            justify-content: flex-end;
        }

        .message-content {
            max-width: 85%;
            padding: 12px 16px;
            border-radius: 16px;
            font-size: 0.9em;
            line-height: 1.5;
        }

        .chat-message.bot .message-content {
            background: white;
            color: var(--text-dark);
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .chat-message.user .message-content {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border-bottom-right-radius: 4px;
        }

        .quick-questions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .quick-questions button {
            padding: 6px 12px;
            background: var(--bg-light);
            border: 1px solid #e0e4e8;
            border-radius: 20px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text-dark);
        }

        .quick-questions button:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .chatbot-input {
            display: flex;
            gap: 10px;
            padding: 15px;
            background: white;
            border-top: 1px solid #e0e4e8;
        }

        .chatbot-input input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e4e8;
            border-radius: 25px;
            font-size: 0.9em;
            outline: none;
            transition: border-color 0.3s;
        }

        .chatbot-input input:focus {
            border-color: var(--primary);
        }

        .chatbot-input button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s;
        }

        .chatbot-input button:hover {
            transform: scale(1.1);
        }

        .chatbot-toggle {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 20px rgba(30, 60, 114, 0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(30, 60, 114, 0.4);
        }

        .chat-icon {
            font-size: 1.8em;
        }

        .chat-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4757;
            color: white;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            font-size: 0.75em;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* PRICE ESTIMATOR */
        .price-estimator {
            position: fixed;
            top: 100px;
            right: 20px;
            width: 320px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            z-index: 900;
            overflow: hidden;
        }

        .estimator-header {
            background: linear-gradient(135deg, var(--accent), #00b894);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        .estimator-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
        }

        .estimator-content {
            padding: 20px;
        }

        .estimate-loading {
            text-align: center;
            padding: 30px;
            color: var(--text-dark);
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #e0e4e8;
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .estimate-comparison {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .estimate-option {
            flex: 1;
            text-align: center;
            padding: 12px 8px;
            background: var(--bg-light);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .estimate-option:hover {
            border-color: var(--primary);
        }

        .est-mode {
            font-size: 0.85em;
            margin-bottom: 5px;
        }

        .est-price {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1em;
            font-weight: 700;
        }

        .est-time {
            font-size: 0.7em;
            opacity: 0.8;
        }

        .ai-suggestion {
            background: #fff9e6;
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 12px;
        }

        .suggestion-badge {
            font-size: 0.75em;
            font-weight: 600;
            color: #f39c12;
        }

        .ai-suggestion p {
            margin: 5px 0 0;
            font-size: 0.85em;
            color: var(--text-dark);
        }

        .savings-box {
            background: #e8f5e9;
            border-radius: 10px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #27ae60;
            font-weight: 600;
            font-size: 0.9em;
        }

        .savings-icon {
            font-size: 1.5em;
        }

        /* RISK ANALYZER */
        .risk-analyzer {
            position: fixed;
            top: 100px;
            left: 20px;
            width: 350px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            z-index: 900;
            overflow: hidden;
        }

        .risk-header {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        .risk-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2em;
        }

        .risk-content {
            padding: 20px;
        }

        .risk-score-circle {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
        }

        .risk-score-circle svg {
            width: 100%;
            height: 100%;
        }

        .risk-score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .risk-number {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2em;
            font-weight: 700;
            color: var(--text-dark);
            display: block;
        }

        .risk-label {
            font-size: 0.75em;
            color: var(--text-dark);
            opacity: 0.6;
        }

        .risk-factors {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 15px;
        }

        .risk-factor {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: var(--bg-light);
            border-radius: 10px;
        }

        .factor-icon {
            font-size: 1.3em;
        }

        .factor-details {
            flex: 1;
        }

        .factor-name {
            font-size: 0.85em;
            font-weight: 600;
            color: var(--text-dark);
            display: block;
            margin-bottom: 4px;
        }

        .factor-bar {
            height: 6px;
            background: #e0e4e8;
            border-radius: 3px;
            overflow: hidden;
        }

        .factor-fill {
            height: 100%;
            background: var(--accent);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .factor-status {
            font-size: 0.75em;
            font-weight: 600;
            padding: 3px 8px;
            border-radius: 10px;
        }

        .factor-status.good { background: #e8f5e9; color: #27ae60; }
        .factor-status.medium { background: #fff3e0; color: #f39c12; }
        .factor-status.high { background: #ffebee; color: #e74c3c; }

        .risk-recommendation {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 12px;
            font-size: 0.85em;
        }

        .risk-recommendation strong {
            color: var(--primary);
        }

        .risk-recommendation p {
            margin: 5px 0 0;
            color: var(--text-dark);
        }

        /* HS CODE MODAL */
        .hs-search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .hs-search-box input {
            flex: 1;
            padding: 14px 16px;
            border: 2px solid #e0e4e8;
            border-radius: 12px;
            font-size: 1em;
        }

        .btn-hs-search {
            padding: 14px 24px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-hs-search:hover {
            transform: translateY(-2px);
        }

        .hs-results {
            max-height: 300px;
            overflow-y: auto;
        }

        .hs-result-item {
            padding: 15px;
            border: 2px solid #e0e4e8;
            border-radius: 12px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .hs-result-item:hover {
            border-color: var(--primary);
            background: var(--bg-light);
        }

        .hs-code {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            color: var(--primary);
        }

        .hs-description {
            font-size: 0.9em;
            color: var(--text-dark);
            margin-top: 5px;
        }

        .hs-duty {
            font-size: 0.8em;
            color: var(--accent);
            margin-top: 5px;
        }

        .hs-disclaimer {
            margin-top: 15px;
            padding: 10px;
            background: #fff3e0;
            border-radius: 8px;
            color: #f39c12;
        }

        /* DUTY CALCULATOR */
        .duty-calculator {
            padding: 10px 0;
        }

        .duty-results {
            margin-top: 20px;
            animation: slideUp 0.3s ease;
        }

        .duty-breakdown {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 15px;
        }

        .duty-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e0e4e8;
            color: var(--text-dark);
        }

        .duty-row:last-child {
            border-bottom: none;
        }

        .duty-row.total {
            font-weight: 700;
            font-size: 1.1em;
            color: var(--primary);
            margin-top: 5px;
            padding-top: 15px;
            border-top: 2px solid var(--primary);
        }

        .duty-note {
            margin-top: 15px;
            padding: 10px;
            background: #e3f2fd;
            border-radius: 8px;
            color: var(--primary);
        }

        /* CARBON CALCULATOR */
        .carbon-result {
            padding: 10px 0;
        }

        .carbon-comparison {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .carbon-mode {
            flex: 1;
            text-align: center;
            padding: 20px 15px;
            background: var(--bg-light);
            border-radius: 12px;
            transition: all 0.3s;
        }

        .carbon-mode.lowest {
            background: #e8f5e9;
            border: 2px solid #27ae60;
        }

        .carbon-icon {
            font-size: 2em;
            display: block;
            margin-bottom: 10px;
        }

        .carbon-label {
            font-size: 0.85em;
            color: var(--text-dark);
            opacity: 0.7;
            display: block;
        }

        .carbon-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-dark);
            display: block;
            margin: 5px 0;
        }

        .carbon-unit {
            font-size: 0.75em;
            color: var(--text-dark);
            opacity: 0.6;
        }

        .carbon-equivalents {
            background: #fff9e6;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .carbon-equivalents p {
            margin: 8px 0;
            font-size: 0.9em;
            color: var(--text-dark);
        }

        .carbon-offset {
            margin-top: 10px;
        }

        /* SHIPPING CALENDAR */
        .calendar-content {
            padding: 10px 0;
        }

        .calendar-route-select {
            margin-bottom: 20px;
        }

        .calendar-route-select .form-row {
            grid-template-columns: 1fr 1fr 1fr;
        }

        .holiday-alerts {
            margin-bottom: 20px;
        }

        .holiday-alert {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            animation: slideUp 0.3s ease;
        }

        .holiday-alert.warning {
            background: #fff3e0;
            border-left: 4px solid #f39c12;
        }

        .holiday-alert.danger {
            background: #ffebee;
            border-left: 4px solid #e74c3c;
        }

        .holiday-alert.info {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
        }

        .holiday-alert-icon {
            font-size: 1.5em;
        }

        .holiday-alert-content {
            flex: 1;
        }

        .holiday-alert-title {
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        .holiday-alert-desc {
            font-size: 0.9em;
            color: var(--text-dark);
            opacity: 0.8;
        }

        .holiday-alert-dates {
            font-size: 0.85em;
            font-weight: 600;
            color: var(--primary);
            margin-top: 5px;
        }

        .holiday-alert-impact {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.75em;
            font-weight: 600;
            margin-top: 8px;
        }

        .impact-high {
            background: #ffebee;
            color: #e74c3c;
        }

        .impact-medium {
            background: #fff3e0;
            color: #f39c12;
        }

        .impact-low {
            background: #e8f5e9;
            color: #27ae60;
        }

        .calendar-legend {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8em;
            color: var(--text-dark);
        }

        .cal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .cal-dot.best { background: #27ae60; }
        .cal-dot.good { background: #00d4aa; }
        .cal-dot.medium { background: #f39c12; }
        .cal-dot.peak { background: #e74c3c; }
        .cal-dot.closed { background: #2c3e50; }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .cal-day {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .cal-day .day-num {
            font-size: 1em;
        }

        .cal-day .day-info {
            font-size: 0.6em;
            opacity: 0.8;
            margin-top: 2px;
        }

        .cal-day.header {
            background: none;
            color: var(--text-dark);
            opacity: 0.6;
            font-size: 0.75em;
            cursor: default;
            aspect-ratio: auto;
            padding: 5px;
        }

        .cal-day.best { background: #e8f5e9; color: #27ae60; }
        .cal-day.good { background: #e0f7f4; color: #00b894; }
        .cal-day.medium { background: #fff3e0; color: #f39c12; }
        .cal-day.peak { background: #ffebee; color: #e74c3c; }
        .cal-day.closed { background: #2c3e50; color: white; }

        .cal-day:not(.header):hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 10;
        }

        .cal-day.selected {
            outline: 3px solid var(--primary);
            outline-offset: 2px;
        }

        .cal-day .holiday-indicator {
            position: absolute;
            top: 3px;
            right: 3px;
            font-size: 0.7em;
        }

        .delay-estimation {
            background: #fff9e6;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #f39c12;
        }

        .delay-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            color: #f39c12;
            margin-bottom: 15px;
        }

        .delay-icon {
            font-size: 1.3em;
        }

        .delay-content {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .delay-item {
            flex: 1;
            min-width: 150px;
            background: white;
            padding: 12px 15px;
            border-radius: 10px;
        }

        .delay-label {
            display: block;
            font-size: 0.8em;
            color: var(--text-dark);
            opacity: 0.7;
            margin-bottom: 5px;
        }

        .delay-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            color: var(--text-dark);
        }

        .delay-value.warning {
            color: #f39c12;
        }

        .delay-value.danger {
            color: #e74c3c;
        }

        .calendar-recommendation {
            background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .rec-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
            color: var(--primary);
        }

        .rec-header span:first-child {
            font-size: 1.3em;
        }

        .calendar-recommendation p {
            margin: 0;
            font-size: 0.95em;
            color: var(--text-dark);
            line-height: 1.6;
        }

        .calendar-actions {
            display: flex;
            justify-content: center;
        }

        .btn-calendar-select {
            padding: 14px 30px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-calendar-select:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(30, 60, 114, 0.25);
        }

        @media (max-width: 768px) {
            .calendar-route-select .form-row {
                grid-template-columns: 1fr;
            }
            .calendar-legend {
                flex-direction: column;
                align-items: flex-start;
            }
            .delay-content {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .chatbot-container {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }
            .price-estimator, .risk-analyzer {
                width: calc(100% - 40px);
                left: 20px;
                right: 20px;
            }
            .welcome-content {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            .welcome-right {
                width: 100%;
                justify-content: center;
            }
            .ai-tools-bar {
                flex-direction: column;
                align-items: flex-start;
            }
            .ai-tools-label {
                border-right: none;
                border-bottom: 2px solid var(--bg-light);
                padding-bottom: 10px;
                padding-right: 0;
                width: 100%;
            }
            .ai-tools-buttons {
                flex-wrap: wrap;
                width: 100%;
            }
            .ai-bar-btn {
                flex: 1 1 45%;
                justify-content: center;
            }
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 15px;
            background: var(--bg-light);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkbox-item:hover {
            background: #e0e4e8;
        }

        .checkbox-item input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary);
            cursor: pointer;
        }

        .checkbox-item span {
            color: var(--text-dark);
            font-weight: 500;
        }

        /* SERVICE CARDS */
        .services-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .service-card {
            background: var(--white);
            border: 2px solid #e0e4e8;
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .service-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 15px rgba(30, 60, 114, 0.1);
        }

        .service-card.active {
            border-color: var(--primary);
            background: linear-gradient(to bottom, rgba(30, 60, 114, 0.03), transparent);
        }

        .service-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
        }

        .service-header input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
            cursor: pointer;
        }

        .service-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .service-icon {
            font-size: 1.8em;
        }

        .service-name {
            display: block;
            font-weight: 700;
            color: var(--text-dark);
            font-size: 0.95em;
        }

        .service-desc {
            display: block;
            font-size: 0.8em;
            color: var(--text-dark);
            opacity: 0.6;
        }

        .service-arrow {
            font-size: 1.5em;
            color: var(--primary);
            transition: transform 0.3s;
        }

        .service-card.active .service-arrow {
            transform: rotate(90deg);
        }

        .service-panel {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease;
            background: var(--bg-light);
        }

        .service-card.active .service-panel {
            max-height: 500px;
        }

        .panel-content {
            padding: 20px;
            border-top: 1px solid #e0e4e8;
        }

        .panel-content .form-group {
            margin-bottom: 15px;
        }

        .panel-content .form-group:last-child {
            margin-bottom: 0;
        }

        .panel-content label {
            display: block;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
            font-size: 0.85em;
        }

        .panel-content select,
        .panel-content input[type="number"],
        .panel-content input[type="text"] {
            width: 100%;
            padding: 10px 12px;
            border: 2px solid #e0e4e8;
            border-radius: 10px;
            font-size: 0.9em;
            transition: border-color 0.3s;
        }

        .panel-content select:focus,
        .panel-content input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .checkbox-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .check-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            background: var(--white);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.85em;
        }

        .check-item:hover {
            background: #f0f2f5;
        }

        .check-item input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--primary);
        }

        .check-item span {
            color: var(--text-dark);
        }

        /* Insurance Calculator */
        .insurance-calc {
            background: var(--white);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .calc-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            font-size: 0.9em;
            color: var(--text-dark);
        }

        .calc-row:last-child {
            border-top: 1px dashed #e0e4e8;
            padding-top: 12px;
            margin-top: 5px;
        }

        .calc-amount {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1em;
        }

        .coverage-info {
            background: #e8f5e9;
            border-radius: 10px;
            padding: 12px 15px;
        }

        .coverage-info p {
            margin: 5px 0;
            font-size: 0.85em;
            color: #27ae60;
        }

        /* Customs Estimate */
        .customs-estimate {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #e3f2fd;
            border-radius: 10px;
            padding: 12px 15px;
            margin-top: 15px;
        }

        .customs-estimate span:first-child {
            font-size: 0.9em;
            color: var(--text-dark);
        }

        .estimate-price {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            color: var(--primary);
        }

        /* Packaging Note */
        .packaging-note {
            background: #fff9e6;
            border-radius: 10px;
            padding: 12px 15px;
            margin-top: 15px;
        }

        .packaging-note small {
            font-size: 0.85em;
            color: #f39c12;
            line-height: 1.5;
        }

        /* Warehouse Estimate */
        .warehouse-estimate {
            background: #f3e5f5;
            border-radius: 10px;
            padding: 12px 15px;
            margin-top: 15px;
        }

        .est-row {
            display: flex;
            justify-content: space-between;
            padding: 5px 0;
            font-size: 0.85em;
            color: var(--text-dark);
        }

        .est-row span:last-child {
            font-weight: 600;
            color: #8e44ad;
        }

        @media (max-width: 768px) {
            .services-grid {
                grid-template-columns: 1fr;
            }
            .service-info {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            .service-icon {
                font-size: 1.5em;
            }
        }

        /* TRACKING PAGE */
        .tracking-search-box {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 30px;
        }

        .tracking-search-box h2 {
            font-family: 'Space Grotesk', sans-serif;
            color: white;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .tracking-search-box p {
            opacity: 0.9;
            margin-bottom: 25px;
        }

        .tracking-input-wrapper {
            display: flex;
            gap: 10px;
            max-width: 500px;
            margin: 0 auto;
        }

        .tracking-input-wrapper input {
            flex: 1;
            padding: 16px 20px;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-family: 'Space Grotesk', sans-serif;
        }

        .btn-track {
            padding: 16px 30px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-track:hover {
            background: #00c49a;
            transform: translateY(-2px);
        }

        .tracking-result {
            background: var(--white);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
        }

        .tracking-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--bg-light);
        }

        .tracking-number {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8em;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 10px;
        }

        .tracking-status-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .tracking-status-badge.in-transit {
            background: rgba(255, 107, 53, 0.1);
            color: var(--accent-orange);
        }

        .tracking-status-badge.delivered {
            background: rgba(0, 212, 170, 0.1);
            color: var(--accent);
        }

        .tracking-status-badge .pulse {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .eta-box {
            text-align: right;
        }

        .eta-label {
            font-size: 0.85em;
            color: var(--text-dark);
            opacity: 0.6;
        }

        .eta-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5em;
            font-weight: 700;
            color: var(--text-dark);
        }

        .eta-time {
            font-size: 0.9em;
            color: var(--accent);
            font-weight: 600;
        }

        .tracking-visual {
            margin-bottom: 25px;
        }

        .route-visualization {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 24px;
            padding: 32px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .route-bg-pattern {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(0,212,170,0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255,107,53,0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .route-header {
            position: relative;
            margin-bottom: 40px;
        }

        .route-cities {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }

        .city-from, .city-to {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }

        .city-to {
            justify-content: flex-end;
            text-align: right;
        }

        .city-flag {
            font-size: 48px;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
        }

        .city-details {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .city-label {
            font-size: 11px;
            font-weight: 600;
            color: rgba(255,255,255,0.5);
            letter-spacing: 1px;
        }

        .city-name {
            font-size: 24px;
            font-weight: 700;
            color: #fff;
            font-family: 'Space Grotesk', sans-serif;
        }

        .city-port {
            font-size: 13px;
            color: rgba(255,255,255,0.6);
        }

        .route-line-visual {
            flex: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 0 20px;
        }

        .route-line-track {
            width: 100%;
            height: 6px;
            background: rgba(255,255,255,0.1);
            border-radius: 3px;
            position: relative;
        }

        .route-line-progress {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #00d4aa 0%, #ff6b35 100%);
            border-radius: 3px;
            box-shadow: 0 0 20px rgba(0,212,170,0.5);
        }

        .route-plane-icon {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 28px;
            filter: drop-shadow(0 4px 12px rgba(255,107,53,0.6));
            z-index: 2;
        }

        .plane-glow {
            position: absolute;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, rgba(255,107,53,0.4) 0%, transparent 70%);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            animation: pulseGlow 2s infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.5); opacity: 0.5; }
        }

        .route-distance-label {
            font-size: 13px;
            color: rgba(255,255,255,0.5);
            font-weight: 500;
        }

        .timeline-container {
            position: relative;
            margin: 50px 0 40px;
            padding: 0 40px;
        }

        .timeline-track {
            position: relative;
            height: 120px;
        }

        .track-line-bg {
            position: absolute;
            top: 24px;
            left: 0;
            right: 0;
            height: 4px;
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
        }

        .track-line-fill {
            position: absolute;
            top: 24px;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #00d4aa 0%, #00d4aa 90%, #ff6b35 100%);
            border-radius: 2px;
            box-shadow: 0 0 15px rgba(0,212,170,0.4);
        }

        .timeline-waypoint {
            position: absolute;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 2;
        }

        .waypoint-marker {
            position: relative;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .marker-ring {
            position: absolute;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .timeline-waypoint.completed .marker-ring {
            border-color: #00d4aa;
            background: rgba(0,212,170,0.1);
        }

        .timeline-waypoint.upcoming .marker-ring {
            border-color: rgba(255,255,255,0.3);
            border-style: dashed;
        }

        .timeline-waypoint.destination .marker-ring {
            border-color: #ff6b35;
            background: rgba(255,107,53,0.1);
        }

        .marker-dot {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .timeline-waypoint.completed .marker-dot {
            background: #00d4aa;
            box-shadow: 0 0 15px rgba(0,212,170,0.5);
        }

        .timeline-waypoint.destination .marker-dot {
            background: #ff6b35;
            box-shadow: 0 0 15px rgba(255,107,53,0.5);
        }

        .waypoint-content {
            margin-top: 12px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 3px;
        }

        .waypoint-title {
            font-size: 14px;
            font-weight: 600;
            color: #fff;
        }

        .waypoint-date {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
        }

        .waypoint-status {
            font-size: 11px;
            font-weight: 600;
            padding: 3px 10px;
            border-radius: 20px;
            margin-top: 4px;
        }

        .waypoint-status.completed {
            background: rgba(0,212,170,0.2);
            color: #00d4aa;
        }

        .waypoint-status.upcoming {
            background: rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.6);
        }

        .waypoint-status.destination {
            background: rgba(255,107,53,0.2);
            color: #ff6b35;
        }

        .current-location-indicator {
            position: absolute;
            top: -15px;
            transform: translateX(-50%);
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .current-pulse {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255,107,53,0.2);
            animation: currentPulse 2s infinite;
        }

        @keyframes currentPulse {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.8); opacity: 0; }
        }

        .current-marker {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff6b35 0%, #ff8f5a 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 30px rgba(255,107,53,0.5);
            position: relative;
            z-index: 2;
        }

        .current-info {
            margin-top: 15px;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(10px);
            padding: 12px 20px;
            border-radius: 12px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 3px;
            border: 1px solid rgba(255,107,53,0.3);
        }

        .current-label {
            font-size: 10px;
            font-weight: 600;
            color: rgba(255,255,255,0.5);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .current-place {
            font-size: 18px;
            font-weight: 700;
            color: #ff6b35;
        }

        .current-speed {
            font-size: 12px;
            color: rgba(255,255,255,0.6);
        }

        .route-stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-top: 20px;
        }

        .stat-card {
            background: rgba(255,255,255,0.05);
            border-radius: 16px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            border: 1px solid rgba(255,255,255,0.08);
            transition: all 0.3s;
        }

        .stat-card:hover {
            background: rgba(255,255,255,0.08);
            transform: translateY(-2px);
        }

        .stat-card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .stat-card-content {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .stat-card-value {
            font-size: 20px;
            font-weight: 700;
            color: #fff;
            font-family: 'Space Grotesk', sans-serif;
        }

        .stat-card-label {
            font-size: 12px;
            color: rgba(255,255,255,0.5);
        }

        @media (max-width: 900px) {
            .route-cities { flex-direction: column; gap: 30px; }
            .city-from, .city-to { justify-content: center; text-align: center; }
            .city-to { flex-direction: row-reverse; }
            .route-line-visual { width: 100%; padding: 20px 0; }
            .route-stats-grid { grid-template-columns: repeat(2, 1fr); }
            .timeline-container { padding: 0 20px; }
            .waypoint-title { font-size: 11px; }
            .waypoint-date { font-size: 10px; }
        }

        @media (max-width: 600px) {
            .route-visualization { padding: 20px; }
            .route-stats-grid { grid-template-columns: 1fr 1fr; }
            .stat-card { padding: 15px; }
            .stat-card-value { font-size: 16px; }
            .city-name { font-size: 20px; }
            .city-flag { font-size: 36px; }
        }

        /* Container Lookup Section */
        .container-lookup-section {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 24px;
            padding: 32px;
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 50px rgba(30, 60, 114, 0.3);
        }

        .container-lookup-section::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .lookup-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 28px;
        }

        .lookup-icon {
            width: 64px;
            height: 64px;
            background: rgba(255,255,255,0.15);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .lookup-title h3 {
            color: white;
            font-size: 24px;
            font-weight: 700;
            margin: 0 0 6px 0;
            font-family: 'Space Grotesk', sans-serif;
        }

        .lookup-title p {
            color: rgba(255,255,255,0.7);
            font-size: 14px;
            margin: 0;
        }

        .lookup-form {
            position: relative;
            z-index: 1;
        }

        .lookup-tabs {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .lookup-tab {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            background: rgba(255,255,255,0.1);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            color: rgba(255,255,255,0.7);
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .lookup-tab:hover {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.3);
        }

        .lookup-tab.active {
            background: white;
            border-color: white;
            color: #1e3c72;
        }

        .lookup-input-group {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .input-with-icon {
            flex: 1;
            position: relative;
        }

        .input-with-icon input {
            width: 100%;
            padding: 18px 24px;
            padding-right: 120px;
            font-size: 16px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 14px;
            background: rgba(255,255,255,0.95);
            color: #1e3c72;
            font-weight: 500;
            transition: all 0.3s;
        }

        .input-with-icon input:focus {
            outline: none;
            border-color: #00d4aa;
            box-shadow: 0 0 0 4px rgba(0,212,170,0.2);
        }

        .input-with-icon input::placeholder {
            color: #94a3b8;
        }

        .carrier-badge {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            padding: 6px 14px;
            background: linear-gradient(135deg, #00d4aa 0%, #00a385 100%);
            border-radius: 8px;
            color: white;
            font-size: 12px;
            font-weight: 700;
            opacity: 0;
            transition: all 0.3s;
        }

        .carrier-badge.visible {
            opacity: 1;
        }

        .btn-lookup {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 18px 32px;
            background: linear-gradient(135deg, #00d4aa 0%, #00a385 100%);
            border: none;
            border-radius: 14px;
            color: white;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .btn-lookup:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,212,170,0.4);
        }

        .carrier-hints {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .hint-label {
            color: rgba(255,255,255,0.6);
            font-size: 13px;
        }

        .carrier-logos {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .carrier-chip {
            padding: 5px 12px;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            color: rgba(255,255,255,0.8);
            font-size: 11px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* Lookup Result */
        .lookup-result {
            margin-top: 30px;
            background: rgba(0,0,0,0.2);
            border-radius: 16px;
            overflow: hidden;
        }

        .lookup-result.hidden {
            display: none;
        }

        .lookup-loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            padding: 50px;
            color: white;
        }

        .lookup-loading.hidden {
            display: none;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255,255,255,0.2);
            border-top-color: #00d4aa;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .lookup-data {
            padding: 0;
        }

        .lookup-data.hidden {
            display: none;
        }

        /* Container Result Card */
        .container-result-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
        }

        .result-header {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            padding: 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result-container-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .container-icon {
            width: 56px;
            height: 56px;
            background: rgba(255,255,255,0.1);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .container-details h4 {
            color: white;
            font-size: 20px;
            font-weight: 700;
            margin: 0 0 5px 0;
            font-family: 'Space Grotesk', sans-serif;
        }

        .container-details span {
            color: rgba(255,255,255,0.6);
            font-size: 14px;
        }

        .result-status {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
        }

        .status-badge-large {
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-badge-large.in-transit {
            background: rgba(255,107,53,0.2);
            color: #ff6b35;
        }

        .status-badge-large.delivered {
            background: rgba(0,212,170,0.2);
            color: #00d4aa;
        }

        .status-badge-large .pulse-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: pulseDot 1.5s infinite;
        }

        @keyframes pulseDot {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .result-body {
            padding: 24px;
        }

        .result-route-visual {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 25px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 14px;
            margin-bottom: 24px;
        }

        .route-point {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .route-point-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .route-point-icon.origin {
            background: linear-gradient(135deg, #00d4aa 0%, #00a385 100%);
            box-shadow: 0 5px 20px rgba(0,212,170,0.3);
        }

        .route-point-icon.destination {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 5px 20px rgba(102,126,234,0.3);
        }

        .route-point-name {
            font-size: 16px;
            font-weight: 700;
            color: #1e3c72;
        }

        .route-point-code {
            font-size: 13px;
            color: #64748b;
        }

        .route-line-container {
            flex: 1;
            padding: 0 30px;
            position: relative;
        }

        .route-progress-line {
            height: 4px;
            background: #cbd5e1;
            border-radius: 2px;
            position: relative;
        }

        .route-progress-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            background: linear-gradient(90deg, #00d4aa 0%, #ff6b35 100%);
            border-radius: 2px;
        }

        .route-ship-icon {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            filter: drop-shadow(0 2px 8px rgba(0,0,0,0.2));
        }

        .result-details-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .detail-card {
            background: #f8fafc;
            padding: 18px;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }

        .detail-card-label {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detail-card-value {
            font-size: 16px;
            font-weight: 700;
            color: #1e3c72;
        }

        .result-timeline {
            border-top: 1px solid #e2e8f0;
            padding-top: 24px;
        }

        .timeline-title {
            font-size: 16px;
            font-weight: 700;
            color: #1e3c72;
            margin-bottom: 20px;
        }

        .timeline-events {
            display: flex;
            flex-direction: column;
            gap: 0;
        }

        .timeline-event {
            display: flex;
            gap: 20px;
            padding: 16px 0;
            position: relative;
        }

        .timeline-event:not(:last-child)::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 48px;
            bottom: 0;
            width: 2px;
            background: #cbd5e1;
        }

        .timeline-event.completed::before {
            background: #00d4aa;
        }

        .event-dot {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #cbd5e1;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            z-index: 1;
        }

        .timeline-event.completed .event-dot {
            background: #00d4aa;
            color: white;
        }

        .timeline-event.current .event-dot {
            background: #ff6b35;
            color: white;
            animation: pulseEvent 2s infinite;
        }

        @keyframes pulseEvent {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255,107,53,0.4); }
            50% { box-shadow: 0 0 0 10px rgba(255,107,53,0); }
        }

        .event-content {
            flex: 1;
        }

        .event-title {
            font-size: 15px;
            font-weight: 600;
            color: #1e3c72;
            margin-bottom: 4px;
        }

        .event-location {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 4px;
        }

        .event-time {
            font-size: 12px;
            color: #94a3b8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .lookup-input-group {
                flex-direction: column;
            }
            
            .result-details-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .result-route-visual {
                flex-direction: column;
                gap: 20px;
            }
            
            .route-line-container {
                width: 100%;
                padding: 20px 0;
            }
        }

        /* Result Tabs */
        .result-tabs {
            display: flex;
            gap: 10px;
        }

        .result-tab {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 8px;
            color: rgba(255,255,255,0.7);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .result-tab:hover {
            background: rgba(255,255,255,0.2);
        }

        .result-tab.active {
            background: #00d4aa;
            color: #0f172a;
        }

        .result-tab-content {
            display: none;
        }

        .result-tab-content.active {
            display: block;
        }

        /* Searates Notice */
        .searates-notice {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 16px 20px;
            background: linear-gradient(135deg, rgba(0,212,170,0.1) 0%, rgba(0,163,224,0.1) 100%);
            border: 1px solid rgba(0,212,170,0.3);
            border-radius: 12px;
            margin-bottom: 24px;
        }

        .notice-icon {
            font-size: 28px;
        }

        .notice-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .notice-text strong {
            color: #00d4aa;
            font-size: 14px;
        }

        .notice-text span {
            color: #64748b;
            font-size: 13px;
        }

        /* Status Detail Card */
        .status-detail-card {
            display: flex;
            align-items: center;
            gap: 20px;
            padding: 24px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 14px;
            margin-bottom: 24px;
            border-left: 4px solid #64748b;
        }

        .status-detail-card.in-transit {
            border-left-color: #ff6b35;
            background: linear-gradient(135deg, #fff7ed 0%, #ffedd5 100%);
        }

        .status-detail-card.delivered {
            border-left-color: #00d4aa;
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
        }

        .status-icon {
            font-size: 40px;
        }

        .status-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .status-title {
            font-size: 18px;
            font-weight: 700;
            color: #1e3c72;
        }

        .status-location {
            font-size: 15px;
            color: #475569;
            font-weight: 500;
        }

        .status-update {
            font-size: 13px;
            color: #94a3b8;
        }

        /* Searates Iframe Container */
        .searates-iframe-container {
            background: white;
            border-radius: 16px;
            overflow: hidden;
        }

        .iframe-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: #f1f5f9;
            border-bottom: 1px solid #e2e8f0;
        }

        .iframe-header span {
            font-size: 14px;
            font-weight: 600;
            color: #1e3c72;
        }

        .open-external {
            font-size: 13px;
            color: #00d4aa;
            text-decoration: none;
            font-weight: 500;
        }

        .open-external:hover {
            text-decoration: underline;
        }

        #searatesIframe {
            width: 100%;
            height: 600px;
            border: none;
        }

        .iframe-note {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 20px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
            font-size: 13px;
            color: #64748b;
        }

        .iframe-note span {
            font-size: 16px;
        }

        .tracking-progress {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 25px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--text-dark);
        }

        .progress-percent {
            color: var(--accent);
        }

        .progress-bar {
            height: 12px;
            background: rgba(30, 60, 114, 0.1);
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent), var(--accent-orange));
            border-radius: 6px;
            transition: width 1s ease;
        }

        .progress-distance {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.8em;
            color: var(--text-dark);
            opacity: 0.6;
        }

        .tracking-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .tracking-detail-card {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 20px;
            background: var(--bg-light);
            border-radius: 14px;
        }

        .detail-card-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .detail-card-icon.blue { background: rgba(30, 60, 114, 0.1); }
        .detail-card-icon.green { background: rgba(0, 212, 170, 0.1); }
        .detail-card-icon.orange { background: rgba(255, 107, 53, 0.1); }
        .detail-card-icon.purple { background: rgba(130, 80, 200, 0.1); }

        .detail-card-label {
            font-size: 0.8em;
            color: var(--text-dark);
            opacity: 0.6;
            margin-bottom: 3px;
        }

        .detail-card-value {
            font-weight: 700;
            color: var(--text-dark);
        }

        .tracking-timeline {
            margin-bottom: 25px;
        }

        .tracking-timeline h3 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--text-dark);
            margin-bottom: 20px;
        }

        .timeline {
            position: relative;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #e0e4e8;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 25px;
        }

        .timeline-item:last-child {
            padding-bottom: 0;
        }

        .timeline-dot {
            position: absolute;
            left: -26px;
            top: 3px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #e0e4e8;
            border: 3px solid white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .timeline-item.completed .timeline-dot {
            background: var(--accent);
        }

        .timeline-item.active .timeline-dot {
            background: var(--accent-orange);
            animation: pulse 1.5s infinite;
        }

        .timeline-item.pending .timeline-dot {
            background: #e0e4e8;
        }

        .timeline-date {
            font-size: 0.8em;
            color: var(--text-dark);
            opacity: 0.6;
            margin-bottom: 3px;
        }

        .timeline-title {
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 3px;
        }

        .timeline-item.pending .timeline-title {
            opacity: 0.5;
        }

        .timeline-desc {
            font-size: 0.9em;
            color: var(--text-dark);
            opacity: 0.7;
        }

        .timeline-item.pending .timeline-desc {
            opacity: 0.4;
        }

        .tracking-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn-action {
            flex: 1;
            min-width: 180px;
            padding: 14px 20px;
            border: 2px solid #e0e4e8;
            border-radius: 12px;
            background: white;
            color: var(--text-dark);
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-action:hover {
            border-color: var(--primary);
            background: var(--bg-light);
        }

        .btn-action.primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border: none;
        }

        .btn-action.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(30, 60, 114, 0.2);
        }

        /* MY SHIPMENTS PAGE */
        .shipments-filters {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border: 2px solid #e0e4e8;
            border-radius: 25px;
            background: white;
            color: var(--text-dark);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'DM Sans', sans-serif;
        }

        .filter-btn:hover {
            border-color: var(--primary);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border-color: transparent;
        }

        .shipments-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .shipment-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .shipment-card:hover {
            background: #f1f5f9;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            border-color: #cbd5e1;
        }

        .shipment-card-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .shipment-id {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.2em;
            font-weight: 700;
            color: var(--text-dark);
        }

        .shipment-date {
            font-size: 0.85em;
            color: var(--text-dark);
            opacity: 0.6;
        }

        .shipment-status {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
        }

        .shipment-status.active { background: rgba(255, 107, 53, 0.1); color: var(--accent-orange); }
        .shipment-status.completed { background: rgba(0, 212, 170, 0.1); color: var(--accent); }
        .shipment-status.pending { background: rgba(130, 80, 200, 0.1); color: #8250c8; }

        .shipment-route {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--bg-light);
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .shipment-route-point {
            flex: 1;
        }

        .shipment-route-label {
            font-size: 0.75em;
            color: var(--text-dark);
            opacity: 0.6;
        }

        .shipment-route-city {
            font-weight: 700;
            color: var(--text-dark);
        }

        .shipment-route-arrow {
            font-size: 1.5em;
            color: var(--primary);
        }

        .shipment-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .shipment-meta {
            display: flex;
            gap: 20px;
        }

        .shipment-meta-item {
            font-size: 0.9em;
        }

        .shipment-meta-item span {
            color: var(--text-dark);
            opacity: 0.6;
        }

        .shipment-price {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.3em;
            font-weight: 700;
            color: var(--text-dark);
        }

        @media (max-width: 768px) {
            .tracking-header { flex-direction: column; gap: 20px; }
            .tracking-header-right { text-align: left; }
            .eta-box { text-align: left; }
            .tracking-input-wrapper { flex-direction: column; }
            .tracking-actions { flex-direction: column; }
            .btn-action { min-width: 100%; }
            .shipment-info { flex-direction: column; gap: 15px; align-items: flex-start; }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORWARDER FÄ°YAT TARÄ°FELERÄ° STÄ°LLERÄ°
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .forwarder-rates-section {
            margin-top: 30px;
        }
        
        .rates-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .rates-header h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.8rem;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .rates-header p {
            color: #64748b;
            font-size: 1rem;
        }
        
        .rates-tabs {
            display: flex;
            gap: 8px;
            background: white;
            padding: 8px;
            border-radius: 16px;
            box-shadow: var(--shadow);
            margin-bottom: 25px;
            overflow-x: auto;
        }
        
        .rates-tab {
            flex: 1;
            padding: 14px 20px;
            border: none;
            background: transparent;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .rates-tab:hover {
            background: #f1f5f9;
            color: var(--text-dark);
        }
        
        .rates-tab.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(30, 60, 114, 0.3);
        }
        
        /* Rates Tab Content - controlled by JavaScript inline styles */
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .rate-form-card {
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        .form-card-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 25px 30px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        
        .form-card-header.sea {
            background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%);
        }
        
        .form-card-header.land {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        }
        
        .form-card-header.on-carriage {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        }
        
        .form-card-header.terminal {
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
        }
        
        .form-icon {
            font-size: 2.5rem;
        }
        
        .form-card-header h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.3rem;
            margin-bottom: 4px;
            color: white;
        }
        
        .form-card-header p {
            opacity: 0.95;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.95);
        }
        
        .rate-form-card form {
            padding: 30px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-row.three-col {
            grid-template-columns: repeat(3, 1fr);
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .form-group.full {
            grid-column: 1 / -1;
        }
        
        .form-group label {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 0.9rem;
        }
        
        .form-group select,
        .form-group input {
            padding: 14px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.2s ease;
            background: white;
        }
        
        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }
        
        .form-group select {
            cursor: pointer;
        }
        
        .port-info {
            font-size: 0.8rem;
            color: #64748b;
            margin-top: 4px;
        }
        
        .rate-hint {
            font-size: 0.75rem;
            color: #94a3b8;
            margin-top: 4px;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORWARDER FÄ°YATLANDIRMA SEKSÄ°YONU
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .pricing-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid #e2e8f0;
        }
        
        .pricing-section-title {
            font-weight: 600;
            color: #1e293b;
            font-size: 15px;
            margin-bottom: 16px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .price-summary {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            color: white;
        }
        
        .summary-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 12px;
            opacity: 0.9;
        }
        
        .summary-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .summary-item {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            opacity: 0.85;
        }
        
        .summary-total {
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            font-weight: 700;
        }
        
        .summary-total span:last-child {
            color: #a7f3d0;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AI FÄ°YAT HESAPLAMA VE BREAKDOWN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ai-calculate-section {
            text-align: center;
            margin: 25px 0;
            padding: 20px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 12px;
            border: 2px dashed #cbd5e1;
        }
        
        .btn-ai-calculate {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 16px 32px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .btn-ai-calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }
        
        .ai-calc-icon {
            display: flex;
            animation: sparkle 2s ease-in-out infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .ai-hint {
            display: block;
            margin-top: 10px;
            font-size: 12px;
            color: #64748b;
        }
        
        /* Pricing Breakdown Table */
        .pricing-breakdown {
            background: white;
            border-radius: 16px;
            border: 1px solid #e2e8f0;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .breakdown-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            font-weight: 600;
        }
        
        .breakdown-hint {
            font-size: 11px;
            opacity: 0.8;
            font-weight: 400;
        }
        
        .breakdown-table {
            padding: 10px 0;
        }
        
        .breakdown-row {
            display: grid;
            grid-template-columns: 1fr 150px 120px;
            gap: 15px;
            padding: 12px 20px;
            align-items: center;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .breakdown-row:last-child {
            border-bottom: none;
        }
        
        .breakdown-row.hidden {
            display: none;
        }
        
        .breakdown-label {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 14px;
            color: #1e293b;
            font-weight: 500;
        }
        
        .breakdown-label span {
            color: #1e293b;
        }
        
        .breakdown-table .breakdown-label,
        .breakdown-table .breakdown-label span,
        .pricing-breakdown .breakdown-label,
        .pricing-breakdown .breakdown-label span {
            color: #1e293b !important;
            font-weight: 500;
        }
        
        .breakdown-icon {
            font-size: 18px;
        }
        
        .breakdown-input {
            display: flex;
            align-items: center;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .breakdown-input .currency {
            padding: 8px 10px;
            background: #cbd5e1;
            color: #64748b;
            font-weight: 600;
            font-size: 13px;
        }
        
        .breakdown-input input {
            border: none;
            padding: 8px 10px;
            width: 80px;
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            background: transparent;
        }
        
        .breakdown-input input:focus {
            outline: none;
        }
        
        .breakdown-input.profit-input {
            background: #fef3c7;
            border-color: #fcd34d;
        }
        
        .breakdown-input.profit-input input {
            width: 50px;
            text-align: center;
        }
        
        .breakdown-input .percent {
            padding: 8px 10px;
            background: #fcd34d;
            color: #92400e;
            font-weight: 600;
        }
        
        .breakdown-source {
            font-size: 11px;
            color: #94a3b8;
            text-align: right;
        }
        
        .breakdown-source.ai {
            color: #8b5cf6;
            font-weight: 500;
        }
        
        .breakdown-source.manual {
            color: #f59e0b;
        }
        
        .breakdown-value {
            font-size: 15px;
            font-weight: 600;
            color: #1e293b;
            text-align: right;
        }
        
        .breakdown-row.subtotal {
            background: #f8fafc;
            border-top: 2px solid #e2e8f0;
        }
        
        .breakdown-row.subtotal .breakdown-value {
            color: #1e3c72;
        }
        
        .breakdown-row.subtotal .breakdown-label,
        .breakdown-row.subtotal .breakdown-label span {
            color: #1e293b;
            font-weight: 600;
        }
        
        .breakdown-row.profit {
            background: #fffbeb;
        }
        
        .breakdown-row.profit .breakdown-label,
        .breakdown-row.profit .breakdown-label span {
            color: #92400e;
            font-weight: 600;
        }
        
        .profit-value {
            color: #16a34a !important;
        }
        
        .breakdown-row.total {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            padding: 16px 20px;
        }
        
        .breakdown-row.total .breakdown-label,
        .breakdown-row.total .breakdown-label span {
            color: white;
            font-weight: 600;
        }
        
        .breakdown-row.total .breakdown-icon {
            color: white;
        }
        
        .total-value {
            font-size: 22px !important;
            color: white !important;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AI PDF YÃœKLEME - PREMIUM Ã–ZELLÄ°K
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        /* Sub Tabs */
        .sub-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .sub-tab {
            flex: 1;
            padding: 14px 20px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .sub-tab:hover {
            border-color: #cbd5e1;
            background: #f8fafc;
        }
        
        .sub-tab.active {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            border-color: #f59e0b;
            color: white;
        }
        
        .sub-tab.premium {
            position: relative;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-color: #1e3c72;
            color: white;
        }
        
        .sub-tab.premium .premium-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            color: #1e293b;
            font-size: 9px;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: 700;
        }
        
        .sub-tab-content.hidden {
            display: none;
        }
        
        /* Premium Card */
        .premium-card {
            border: 2px solid #667eea;
            background: linear-gradient(135deg, #fefefe 0%, #f8faff 100%);
        }
        
        .form-card-header.ai-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            position: relative;
        }
        
        .form-card-header.ai-header h3 {
            color: white;
        }
        
        .ai-header-desc {
            color: rgba(255, 255, 255, 0.95) !important;
            font-size: 14px;
        }
        
        .ai-sparkle-icon {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .premium-tag {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: #1e293b;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
        }
        
        /* Upload Zone */
        .ai-upload-section {
            padding: 30px;
        }
        
        .upload-zone {
            border: 3px dashed #cbd5e1;
            border-radius: 20px;
            padding: 50px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        
        .upload-zone:hover {
            border-color: #667eea;
            background: linear-gradient(135deg, #eff6ff 0%, #e0e7ff 100%);
        }
        
        .upload-zone.drag-over {
            border-color: #667eea;
            background: linear-gradient(135deg, #dbeafe 0%, #c7d2fe 100%);
            transform: scale(1.02);
        }
        
        .upload-icon {
            margin-bottom: 20px;
        }
        
        .upload-text {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .upload-text strong {
            font-size: 18px;
            color: #1e293b;
        }
        
        .upload-text span {
            font-size: 14px;
            color: #64748b;
        }
        
        .upload-formats {
            display: flex;
            justify-content: center;
            gap: 10px;
        }
        
        .format-tag {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .format-tag.pdf {
            background: #fef2f2;
            color: #dc2626;
        }
        
        .format-tag.excel {
            background: #f0fdf4;
            color: #16a34a;
        }
        
        .format-tag.csv {
            background: #eff6ff;
            color: #2563eb;
        }
        
        /* Format Info */
        .format-info {
            margin-top: 30px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }
        
        .format-info h4 {
            margin: 0 0 15px 0;
            font-size: 14px;
            color: #1e293b;
        }
        
        .format-example table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }
        
        .format-example th {
            background: #f1f5f9;
            padding: 10px;
            text-align: left;
            font-weight: 600;
            color: #475569;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .format-example td {
            padding: 10px;
            border-bottom: 1px solid #e2e8f0;
            color: #1e293b;
        }
        
        /* Processing */
        .ai-processing {
            padding: 40px;
            text-align: center;
        }
        
        .ai-processing.hidden {
            display: none;
        }
        
        .processing-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .processing-icon svg.spin {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            100% { transform: rotate(360deg); }
        }
        
        .processing-text {
            text-align: left;
        }
        
        .processing-text strong {
            display: block;
            font-size: 18px;
            color: #1e293b;
            margin-bottom: 4px;
        }
        
        .processing-text span {
            font-size: 14px;
            color: #64748b;
        }
        
        .progress-bar {
            height: 8px;
            background: #cbd5e1;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
        }
        
        .progress-steps .step {
            padding: 8px 16px;
            background: #f1f5f9;
            border-radius: 20px;
            font-size: 12px;
            color: #64748b;
            font-weight: 500;
        }
        
        .progress-steps .step.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .progress-steps .step.done {
            background: #10b981;
            color: white;
        }
        
        /* Results */
        .ai-results {
            padding: 0 30px 30px;
        }
        
        .ai-results.hidden {
            display: none;
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 12px;
            margin-bottom: 20px;
            color: white;
        }
        
        .results-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .results-icon {
            font-size: 32px;
        }
        
        .results-info strong {
            display: block;
            font-size: 18px;
        }
        
        .results-time {
            font-size: 12px;
            opacity: 0.85;
        }
        
        .results-actions {
            display: flex;
            gap: 10px;
        }
        
        .results-actions button {
            padding: 8px 16px;
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .results-actions button:hover {
            background: rgba(255,255,255,0.3);
        }
        
        /* Results Table */
        .results-table-wrapper {
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
        }
        
        .results-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .results-table thead {
            position: sticky;
            top: 0;
            background: #f8fafc;
        }
        
        .results-table th {
            padding: 14px;
            text-align: left;
            font-weight: 600;
            color: #475569;
            font-size: 13px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .results-table td {
            padding: 12px 14px;
            border-bottom: 1px solid #f1f5f9;
            font-size: 14px;
            color: #1e293b;
        }
        
        .results-table tr:hover {
            background: #f8fafc;
        }
        
        .results-table input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .status-badge.matched {
            background: #d1fae5;
            color: #059669;
        }
        
        .status-badge.new {
            background: #dbeafe;
            color: #2563eb;
        }
        
        .status-badge.warning {
            background: #fef3c7;
            color: #d97706;
        }
        
        /* Results Footer */
        .results-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        
        .selected-count {
            font-size: 14px;
            color: #64748b;
        }
        
        .results-buttons {
            display: flex;
            gap: 12px;
        }
        
        .btn-cancel {
            padding: 12px 24px;
            background: #f1f5f9;
            border: none;
            border-radius: 10px;
            color: #64748b;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-cancel:hover {
            background: #cbd5e1;
        }
        
        .btn-save-all {
            padding: 12px 28px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }
        
        .btn-save-all:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        
        /* Premium Marketing */
        .premium-marketing {
            margin: 30px;
            padding: 25px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 16px;
            color: white;
        }
        
        .marketing-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            display: block;
            font-size: 32px;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .stat-label {
            font-size: 13px;
            color: #e2e8f0;
            font-weight: 500;
        }
        
        .marketing-text {
            text-align: center;
            font-size: 14px;
            opacity: 0.9;
            line-height: 1.6;
        }
        
        /* Supported Carriers */
        .supported-carriers {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
        }
        
        .supported-carriers > span {
            display: block;
            font-size: 13px;
            color: #64748b;
            margin-bottom: 10px;
        }
        
        .carrier-logos {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .carrier-tag {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .carrier-tag.maersk {
            background: #00243d;
            color: #7fdbff;
        }
        
        .carrier-tag.msc {
            background: #1a1a6c;
            color: #ffd700;
        }
        
        .carrier-tag.cma {
            background: #e4002b;
            color: white;
        }
        
        .carrier-tag.hapag {
            background: #ff6600;
            color: white;
        }
        
        .carrier-tag.arkas {
            background: #0066b3;
            color: white;
        }
        
        .carrier-tag.turkon {
            background: #e30613;
            color: white;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GÃ–NDERÄ°M Ã‡EÅÄ°DÄ° SEÃ‡Ä°MÄ°
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .shipment-type-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .shipment-type-option {
            flex: 1;
            min-width: 140px;
            cursor: pointer;
        }
        
        .shipment-type-option input {
            display: none;
        }
        
        .shipment-type-option .sto-content {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        
        .shipment-type-option:hover .sto-content {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }
        
        .shipment-type-option.active .sto-content {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-color: #3b82f6;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }
        
        .sto-icon {
            font-size: 24px;
            line-height: 1;
        }
        
        .sto-info {
            display: flex;
            flex-direction: column;
        }
        
        .sto-info strong {
            font-size: 14px;
            color: #1e293b;
            font-weight: 700;
        }
        
        .sto-info span {
            font-size: 11px;
            color: #64748b;
        }
        
        .shipment-type-option.active .sto-info strong {
            color: #1d4ed8;
        }
        
        .shipment-type-option.active .sto-info span {
            color: #3b82f6;
        }
        
        .thc-extras {
            display: flex;
            gap: 25px;
            margin: 20px 0;
            padding: 15px;
            background: #f8fafc;
            border-radius: 12px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            color: #475569;
        }
        
        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        .btn-save-rate {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .btn-save-rate:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 119, 182, 0.3);
        }
        
        .btn-save-rate.land {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        }
        
        .btn-save-rate.land:hover {
            box-shadow: 0 8px 25px rgba(245, 158, 11, 0.3);
        }
        
        .btn-save-rate.on-carriage {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        }
        
        .btn-save-rate.on-carriage:hover {
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3);
        }
        
        .btn-save-rate.terminal {
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
        }
        
        .btn-save-rate.terminal:hover {
            box-shadow: 0 8px 25px rgba(139, 92, 246, 0.3);
        }
        
        /* Saved Rates */
        .my-rates-container {
            background: white;
            border-radius: 20px;
            box-shadow: var(--shadow);
            padding: 25px;
        }
        
        .my-rates-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        .my-rates-header h3 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.3rem;
            color: var(--text-dark);
        }
        
        .my-rates-filters {
            display: flex;
            gap: 8px;
        }
        
        .filter-btn {
            padding: 8px 16px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            font-size: 0.85rem;
            font-weight: 600;
            color: #64748b;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-btn:hover {
            border-color: var(--primary);
            color: var(--primary);
        }
        
        .filter-btn.active {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }
        
        .my-rates-list {
            min-height: 200px;
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        
        .empty-rates {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 50px;
            color: #94a3b8;
            text-align: center;
        }
        
        .empty-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .empty-rates p {
            font-size: 1.1rem;
            font-weight: 600;
            color: #64748b;
        }
        
        .empty-rates small {
            font-size: 0.9rem;
        }
        
        .rate-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: #f8fafc;
            border-radius: 12px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }
        
        .rate-item:hover {
            background: #f1f5f9;
        }
        
        .rate-item-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .rate-item-icon {
            width: 45px;
            height: 45px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }
        
        .rate-item-icon.sea { background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%); }
        .rate-item-icon.pre { background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%); }
        .rate-item-icon.on { background: linear-gradient(135deg, #10b981 0%, #34d399 100%); }
        .rate-item-icon.thc { background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%); }
        
        .rate-item-details h4 {
            font-size: 0.95rem;
            color: var(--text-dark);
            margin-bottom: 4px;
        }
        
        .rate-item-details p {
            font-size: 0.85rem;
            color: #64748b;
        }
        
        .rate-item-price {
            text-align: right;
        }
        
        .rate-item-price .price {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .rate-item-price .container-type {
            font-size: 0.8rem;
            color: #64748b;
        }
        
        .rate-item-actions {
            display: flex;
            gap: 8px;
            margin-left: 15px;
        }
        
        .btn-rate-action {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .btn-rate-action.edit {
            background: #e0f2fe;
            color: #0077b6;
        }
        
        .btn-rate-action.delete {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .btn-rate-action:hover {
            transform: scale(1.1);
        }
        
        .rates-summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            padding-top: 20px;
            border-top: 2px solid #f1f5f9;
        }
        
        .summary-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 12px;
        }
        
        .summary-icon {
            font-size: 1.5rem;
        }
        
        .summary-info {
            display: flex;
            flex-direction: column;
        }
        
        .summary-label {
            font-size: 0.8rem;
            color: #64748b;
        }
        
        @media (max-width: 768px) {
            .rates-tabs { flex-wrap: wrap; }
            .rates-tab { flex: none; width: calc(50% - 4px); }
            .form-row { grid-template-columns: 1fr; }
            .form-row.three-col { grid-template-columns: 1fr; }
            .thc-extras { flex-direction: column; gap: 12px; }
            .my-rates-header { flex-direction: column; align-items: flex-start; }
            .my-rates-filters { flex-wrap: wrap; }
            .rates-summary { grid-template-columns: repeat(2, 1fr); }
        }

        .hidden { display: none !important; }

        @media (max-width: 768px) {
            .home-logo h1 { font-size: 2em; }
            .home-cards { flex-direction: column; }
            .home-card { width: 100%; }
            .form-row { grid-template-columns: 1fr; }
            .freight-options { flex-direction: column; }
            .shipment-summary { flex-wrap: wrap; gap: 15px; }
            .summary-item { flex: 1 1 40%; }
            .quote-details { flex-wrap: wrap; gap: 15px; }
            .stats-grid { grid-template-columns: 1fr 1fr; }
            .nav-menu { display: none; }
            .request-details { flex-direction: column; }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AI PANEL STÄ°LLERÄ° - TÃœM STAKEHOLDER'LAR Ä°Ã‡Ä°N
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        /* Ortak AI Panel BaÅŸlÄ±ÄŸÄ± */
        .ai-panel-title {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 15px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 16px 16px 0 0;
            font-weight: 600;
        }
        
        /* Enterprise AI Icon */
        .ai-icon-svg {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 8px;
            animation: ai-glow 2s infinite;
        }
        .ai-icon-svg svg {
            width: 18px;
            height: 18px;
            fill: white;
        }
        @keyframes ai-glow {
            0%, 100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
            50% { box-shadow: 0 0 12px 4px rgba(99, 102, 241, 0.3); }
        }
        
        .ai-icon-animated {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 10px;
            animation: bounce 2s infinite, ai-glow 2s infinite;
        }
        .ai-icon-animated svg {
            width: 20px;
            height: 20px;
            fill: white;
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MÃœÅTERÄ° - TEKLÄ°F KARÅILAÅTIRMA PANELÄ°
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ai-analysis-panel {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.15);
            margin-bottom: 25px;
            overflow: hidden;
        }
        .ai-analysis-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0;
            padding: 20px;
            background: #f8fafc;
        }
        .ai-analysis-card {
            padding: 20px;
            background: white;
            border-radius: 12px;
            margin: 5px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .ai-analysis-card.highlight {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border: 1px solid #86efac;
        }
        .ai-analysis-card.conclusion {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 1px solid #93c5fd;
        }
        .analysis-header {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 15px;
            font-size: 14px;
        }
        .stat-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
            font-size: 13px;
        }
        .stat-row:last-child { border-bottom: none; }
        .stat-row strong { color: #10b981; }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CLIENT-SIDE AI INSIGHTS PANEL - PREMIUM NETWORK DESIGN
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .ai-insights-panel-client {
            background: linear-gradient(135deg, #fafbfc 0%, #f1f5f9 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid #e2e8f0;
        }
        
        .ai-insights-header-client {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .ai-title-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .ai-icon-subtle {
            color: #64748b;
        }
        
        .ai-title-text {
            font-size: 18px;
            font-weight: 600;
            color: #334155;
        }
        
        .ai-transparency-badge {
            font-size: 11px;
            font-weight: 600;
            color: #0369a1;
            background: #e0f2fe;
            padding: 4px 12px;
            border-radius: 20px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .ai-insights-grid-client {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .ai-insights-grid-client {
                grid-template-columns: 1fr;
            }
        }
        
        .ai-insight-card-client {
            background: white;
            border-radius: 12px;
            padding: 18px;
            border: 1px solid #e2e8f0;
        }
        
        .insight-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 14px;
            padding-bottom: 12px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .insight-icon {
            font-size: 18px;
        }
        
        .insight-title {
            font-size: 14px;
            font-weight: 600;
            color: #334155;
        }
        
        .insight-card-content {
            font-size: 13px;
            color: #475569;
        }
        
        .insight-intro {
            margin: 0 0 12px 0;
            color: #64748b;
            line-height: 1.5;
        }
        
        .scope-differences {
            list-style: none;
            padding: 0;
            margin: 0 0 12px 0;
        }
        
        .scope-differences li {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            padding: 6px 0;
            color: #334155;
            font-size: 13px;
        }
        
        .diff-icon {
            color: #94a3b8;
            font-size: 12px;
        }
        
        .insight-note {
            margin: 0;
            font-size: 12px;
            color: #64748b;
            font-style: italic;
            padding-top: 8px;
            border-top: 1px dashed #e2e8f0;
        }
        
        .timing-observations {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .timing-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .timing-label {
            color: #64748b;
            font-size: 12px;
        }
        
        .timing-value {
            font-weight: 600;
            color: #1e3c72;
            font-size: 13px;
        }
        
        .insight-tradeoff {
            margin: 0;
            font-size: 12px;
            color: #64748b;
            line-height: 1.6;
            padding: 10px;
            background: #fffbeb;
            border-radius: 6px;
            border-left: 3px solid #fbbf24;
        }
        
        .verification-signals {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .signal-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 10px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .signal-badge {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 12px;
        }
        
        .signal-badge.verified {
            background: #dcfce7;
            color: #16a34a;
        }
        
        .signal-badge.lane {
            background: #e0f2fe;
            color: #0369a1;
        }
        
        .signal-badge.history {
            background: #f3e8ff;
            color: #7c3aed;
        }
        
        .signal-text {
            font-size: 13px;
            color: #334155;
        }
        
        .operational-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .op-item-client {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 13px;
            color: #475569;
            line-height: 1.5;
        }
        
        .op-bullet {
            color: #94a3b8;
        }
        
        .ai-no-ranking-notice {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            background: #f0f9ff;
            border-radius: 8px;
            border: 1px solid #bae6fd;
            margin-bottom: 16px;
        }
        
        .notice-icon {
            font-size: 16px;
        }
        
        .notice-text {
            margin: 0;
            font-size: 13px;
            color: #0369a1;
            font-weight: 500;
        }
        
        .ai-client-disclaimer {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 10px;
            border: 1px solid #e2e8f0;
            padding: 16px;
        }
        
        .disclaimer-content {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .disclaimer-content .disclaimer-icon {
            font-size: 20px;
            flex-shrink: 0;
        }
        
        .disclaimer-content .disclaimer-text {
            margin: 0;
            font-size: 12px;
            color: #64748b;
            line-height: 1.6;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORWARDER TEKLÄ°F KARTLARI - PREMIUM TASARIM
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .quotes-section-header {
            margin: 30px 0 20px 0;
        }
        
        .quotes-section-header h3 {
            color: #1e293b;
            font-size: 22px;
            margin: 0 0 8px 0;
        }
        
        .quotes-section-header p {
            color: #64748b;
            font-size: 14px;
            margin: 0;
        }
        
        .forwarder-quotes-grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        .forwarder-quote-card {
            background: #f8fafc;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            padding: 24px;
            position: relative;
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }
        
        .forwarder-quote-card:hover {
            background: #f1f5f9;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            border-color: #cbd5e1;
        }
        
        .card-ribbon {
            position: absolute;
            top: -10px;
            left: 20px;
            background: linear-gradient(135deg, #475569 0%, #334155 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.5px;
            z-index: 10;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        
        .card-ribbon.verified {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .card-ribbon.lane-match {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .fq-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .fq-logo {
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 18px;
        }
        
        .fq-info {
            flex: 1;
        }
        
        .fq-info h4 {
            margin: 0 0 4px 0;
            color: #1e293b;
            font-size: 18px;
            font-weight: 600;
        }
        
        .fq-rating {
            color: #f59e0b;
            font-size: 14px;
            font-weight: 600;
        }
        
        .fq-rating span {
            color: #94a3b8;
            font-weight: 400;
            font-size: 12px;
        }
        
        .fq-details {
            display: flex;
            gap: 24px;
            padding: 16px 0;
            border-top: 1px solid #e2e8f0;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 16px;
        }
        
        .fq-detail {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .fq-detail .detail-icon {
            font-size: 18px;
        }
        
        .fq-detail .detail-label {
            font-size: 12px;
            color: #64748b;
        }
        
        .fq-detail .detail-value {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
            margin-left: 4px;
        }
        
        .fq-badges {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 16px;
        }
        
        .fq-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .fq-badge.verified {
            background: #dcfce7;
            color: #166534;
        }
        
        .fq-badge.fast {
            background: #fef3c7;
            color: #92400e;
        }
        
        .fq-badge.eco {
            background: #d1fae5;
            color: #065f46;
        }
        
        .fq-badge.tracking {
            background: #e0e7ff;
            color: #3730a3;
        }
        
        .fq-ai-note {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 10px;
            margin-bottom: 16px;
            font-size: 13px;
            color: #475569;
        }
        
        .fq-ai-note .ai-icon {
            font-size: 16px;
        }
        
        .btn-select-forwarder {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-select-forwarder:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30, 60, 114, 0.3);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONTACT INFO MODAL (For accepted quotes)
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .contact-info-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(6px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }
        
        .contact-modal-content {
            background: white;
            border-radius: 20px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
        }
        
        .contact-modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 24px 28px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 20px 20px 0 0;
        }
        
        .contact-modal-header h3 {
            color: white;
            font-size: 20px;
            margin: 0;
        }
        
        .contact-modal-header .modal-close {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .contact-modal-header .modal-close:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .contact-modal-body {
            padding: 28px;
        }
        
        .contact-cards-row {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }
        
        .contact-card {
            background: #f8fafc;
            border-radius: 16px;
            padding: 24px;
            border: 2px solid #e2e8f0;
        }
        
        .contact-card.client {
            border-color: #10b981;
        }
        
        .contact-card.forwarder {
            border-color: #667eea;
        }
        
        .contact-card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 2px dashed #e2e8f0;
        }
        
        .contact-card-header span {
            font-size: 24px;
        }
        
        .contact-item {
            margin-bottom: 10px;
            font-size: 14px;
            color: #475569;
        }
        
        .contact-item strong {
            color: #1e293b;
            display: inline-block;
            width: 70px;
        }
        
        .contact-item a {
            color: #667eea;
            text-decoration: none;
        }
        
        .contact-item a:hover {
            text-decoration: underline;
        }
        
        .contact-missing {
            color: #94a3b8;
            font-style: italic;
            text-align: center;
            padding: 20px;
        }
        
        .contact-actions {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 10px;
        }
        
        .btn-whatsapp {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: #25D366;
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .btn-whatsapp:hover {
            background: #128C7E;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.3);
        }
        
        .btn-whatsapp svg {
            flex-shrink: 0;
        }
        
        .contact-modal-note {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            padding: 16px 20px;
            border-radius: 12px;
            text-align: center;
            font-size: 14px;
            color: #92400e;
            margin-top: 20px;
        }
        
        .contact-modal-footer {
            padding: 20px 28px;
            border-top: 1px solid #e2e8f0;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .contact-cards-row {
                grid-template-columns: 1fr;
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ä°LETÄ°ÅÄ°M BÄ°LGÄ°LERÄ° FORMU
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .contact-form-section {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            margin-bottom: 24px;
        }
        
        .contact-form-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px dashed #e2e8f0;
        }
        
        .contact-form-header h3 {
            font-size: 18px;
            color: #1e293b;
            margin: 0;
        }
        
        .contact-form-header .edit-badge {
            background: #fef3c7;
            color: #92400e;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 600;
        }
        
        .contact-form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .contact-form-grid .full-width {
            grid-column: span 2;
        }
        
        .contact-saved-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            background: #dcfce7;
            color: #166534;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .profile-info-note {
            display: flex;
            gap: 16px;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            padding: 20px 24px;
            border-radius: 12px;
            border-left: 4px solid #3b82f6;
        }
        
        .info-note-icon {
            font-size: 28px;
        }
        
        .info-note-content strong {
            display: block;
            color: #1e40af;
            margin-bottom: 6px;
        }
        
        .info-note-content p {
            color: #3b82f6;
            font-size: 14px;
            line-height: 1.6;
            margin: 0;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CLIENT GELEN TEKLÄ°FLER
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .quotes-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .quote-card-client {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }
        
        .quote-card-client:hover {
            background: #f1f5f9;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            border-color: #cbd5e1;
        }
        
        .quote-card-client.accepted {
            border-left: 3px solid #10b981;
            background: #f8fafc;
        }
        
        .quote-card-client.rejected {
            border-left: 3px solid #ef4444;
            opacity: 0.7;
        }
        
        .quote-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .quote-forwarder {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .forwarder-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .forwarder-info h4 {
            margin: 0;
            font-size: 16px;
            color: #1e293b;
        }
        
        .quote-time {
            font-size: 12px;
            color: #94a3b8;
        }
        
        .quote-status {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .quote-status.pending {
            background: #fef3c7;
            color: #92400e;
        }
        
        .quote-status.accepted {
            background: #dcfce7;
            color: #166534;
        }
        
        .quote-status.rejected {
            background: #fee2e2;
            color: #991b1b;
        }
        
        .quote-route {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: #f8fafc;
            border-radius: 12px;
            margin-bottom: 16px;
        }
        
        .route-origin, .route-dest {
            font-weight: 600;
            color: #1e293b;
        }
        
        .route-arrow {
            color: #94a3b8;
            font-size: 20px;
        }
        
        .route-container {
            margin-left: auto;
            background: #cbd5e1;
            color: #1e3c72;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .quote-details {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .quote-detail {
            font-size: 13px;
            color: #64748b;
        }
        
        .quote-detail strong {
            color: #1e293b;
        }
        
        .quote-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 12px;
            margin-bottom: 12px;
        }
        
        .quote-total span {
            color: rgba(255, 255, 255, 0.8);
            font-size: 14px;
        }
        
        .quote-total .total-price {
            font-size: 24px;
            font-weight: 700;
            color: white;
        }
        
        .quote-valid {
            font-size: 12px;
            color: #94a3b8;
            text-align: right;
            margin-bottom: 16px;
        }
        
        .quote-actions {
            display: flex;
            gap: 12px;
        }
        
        .quote-actions .btn-accept {
            flex: 1;
            padding: 12px 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quote-actions .btn-accept:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        
        .quote-actions .btn-reject {
            padding: 12px 20px;
            background: #f1f5f9;
            color: #64748b;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quote-actions .btn-reject:hover {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .quote-actions .btn-contact {
            flex: 1;
            padding: 12px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quote-actions .btn-contact:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        @media (max-width: 768px) {
            .quote-details {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORWARDER VERDÄ°ÄÄ°M TEKLÄ°FLER KARTLARI
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .quote-card-forwarder {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }
        
        .quote-card-forwarder:hover {
            background: #f1f5f9;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
            border-color: #cbd5e1;
        }
        
        .quote-card-forwarder.accepted {
            border-left: 3px solid #10b981;
            background: #f8fafc;
        }
        
        .quote-card-forwarder.rejected {
            border-left: 3px solid #ef4444;
            background: #f8fafc;
            opacity: 0.8;
        }
        
        .quote-card-forwarder .quote-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .quote-card-forwarder .quote-info-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .quote-card-forwarder .quote-id-badge {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .quote-card-forwarder .quote-time {
            color: #94a3b8;
            font-size: 13px;
        }
        
        .quote-card-forwarder .quote-route {
            background: #f8fafc;
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .quote-price-summary {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            padding: 16px;
            background: #f8fafc;
            border-radius: 12px;
            margin-bottom: 16px;
        }
        
        .quote-price-summary .price-item {
            text-align: center;
        }
        
        .quote-price-summary .price-item span {
            display: block;
            font-size: 12px;
            color: #64748b;
            margin-bottom: 4px;
        }
        
        .quote-price-summary .price-item strong {
            font-size: 16px;
            color: #1e293b;
        }
        
        .quote-price-summary .highlight-price {
            color: #059669 !important;
            font-size: 20px !important;
        }
        
        .quote-notes {
            background: #fefce8;
            padding: 12px 16px;
            border-radius: 10px;
            margin-bottom: 16px;
            font-size: 14px;
            color: #854d0e;
            border-left: 4px solid #facc15;
        }
        
        .quote-accepted-info {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 12px;
            color: white;
        }
        
        .quote-accepted-info .accepted-icon {
            font-size: 32px;
        }
        
        .quote-accepted-info .accepted-text {
            flex: 1;
        }
        
        .quote-accepted-info .accepted-text strong {
            display: block;
            margin-bottom: 4px;
        }
        
        .quote-accepted-info .accepted-text p {
            font-size: 13px;
            opacity: 0.9;
            margin: 0;
        }
        
        .quote-accepted-info .btn-contact {
            padding: 12px 20px;
            background: white;
            color: #059669;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .quote-accepted-info .btn-contact:hover {
            background: #f0fdf4;
            transform: scale(1.02);
        }
        
        .quote-rejected-info {
            padding: 12px 16px;
            background: #fef2f2;
            border-radius: 10px;
            color: #dc2626;
            font-size: 14px;
            text-align: center;
        }
        
        @media (max-width: 768px) {
            .quote-price-summary {
                grid-template-columns: 1fr;
            }
            .quote-accepted-info {
                flex-direction: column;
                text-align: center;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORWARDER Ä°LETÄ°ÅÄ°M MODAL
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .forwarder-contact-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1500;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .forwarder-contact-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .fcm-content {
            background: white;
            border-radius: 24px;
            width: 90%;
            max-width: 520px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.3);
            transform: scale(0.9) translateY(20px);
            transition: transform 0.3s ease;
            position: relative;
        }
        
        .forwarder-contact-modal.active .fcm-content {
            transform: scale(1) translateY(0);
        }
        
        .fcm-close {
            position: absolute;
            top: 16px;
            right: 16px;
            width: 36px;
            height: 36px;
            background: #f1f5f9;
            border: none;
            border-radius: 50%;
            font-size: 24px;
            color: #64748b;
            cursor: pointer;
            transition: all 0.2s;
            z-index: 10;
        }
        
        .fcm-close:hover {
            background: #cbd5e1;
            color: #1e293b;
        }
        
        .fcm-header {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 28px 28px 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 24px 24px 0 0;
        }
        
        .fcm-logo {
            width: 64px;
            height: 64px;
            background: white;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 22px;
            font-weight: 700;
            color: #1e3c72;
        }
        
        .fcm-title h2 {
            color: white;
            font-size: 22px;
            margin: 0 0 6px 0;
        }
        
        .fcm-price {
            color: rgba(255, 255, 255, 0.85);
            font-size: 15px;
            margin: 0;
        }
        
        .fcm-price strong {
            color: #a7f3d0;
            font-size: 18px;
        }
        
        .fcm-body {
            padding: 24px 28px 28px;
        }
        
        .fcm-section h4 {
            color: #1e293b;
            font-size: 16px;
            margin: 0 0 16px 0;
        }
        
        .fcm-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }
        
        .fcm-info-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 14px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
            transition: all 0.2s;
        }
        
        .fcm-info-item.clickable {
            cursor: pointer;
        }
        
        .fcm-info-item.clickable:hover {
            background: #f1f5f9;
            border-color: #3b82f6;
        }
        
        .fcm-icon {
            font-size: 20px;
            line-height: 1;
        }
        
        .fcm-info-content {
            flex: 1;
        }
        
        .fcm-info-content label {
            display: block;
            font-size: 11px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 4px;
        }
        
        .fcm-info-content span {
            display: block;
            font-size: 14px;
            color: #1e293b;
            font-weight: 500;
        }
        
        .fcm-info-content .fcm-link {
            color: #3b82f6;
        }
        
        .fcm-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }
        
        .fcm-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 14px 20px;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .fcm-btn-call {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .fcm-btn-call:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        
        .fcm-btn-email {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }
        
        .fcm-btn-email:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        
        .fcm-note {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            padding: 14px;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 10px;
            font-size: 13px;
            color: #475569;
        }
        
        @media (max-width: 600px) {
            .fcm-info-grid {
                grid-template-columns: 1fr;
            }
            .fcm-actions {
                flex-direction: column;
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           NAKLÄ°YECÄ° - TALEP ANALÄ°ZÄ° PANELÄ°
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ai-demand-panel {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.15);
            margin-bottom: 25px;
            overflow: hidden;
        }
        .ai-demand-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 20px;
        }
        .ai-demand-card {
            background: #f8fafc;
            border-radius: 12px;
            padding: 15px;
        }
        .ai-demand-card.suggestion {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 1px solid #fbbf24;
        }
        .demand-header {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 12px;
            font-size: 14px;
        }
        .top-route-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
            font-size: 13px;
        }
        .top-route-item:last-child { border-bottom: none; }
        .route-rank {
            width: 24px;
            height: 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
        }
        .route-name { flex: 1; }
        .route-count { color: #10b981; font-weight: 600; }
        
        .platform-stat {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        .platform-stat:last-child { border-bottom: none; }
        .ps-label { color: #64748b; font-size: 13px; }
        .ps-value { font-weight: 700; color: #1e293b; font-size: 16px; }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORWARDER - TAÅIYICI Ã–NERÄ°SÄ° PANELÄ°
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ai-forwarder-panel {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.15);
            margin-bottom: 25px;
            overflow: hidden;
        }
        .ai-forwarder-content {
            padding: 20px;
        }
        .ai-forwarder-intro {
            color: #64748b;
            margin-bottom: 15px;
        }
        .ai-match-examples {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .match-example {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: #f8fafc;
            border-radius: 12px;
        }
        .match-cargo {
            display: flex;
            gap: 8px;
            flex: 1;
        }
        .match-cargo span {
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            background: #cbd5e1;
        }
        .cargo-urgency.urgent {
            background: #fee2e2 !important;
            color: #dc2626;
        }
        .match-arrow {
            color: #667eea;
            font-size: 20px;
            font-weight: bold;
        }
        .match-recommendation {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        .rec-mode {
            padding: 6px 14px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 13px;
        }
        .rec-mode.land { background: #fef3c7; color: #b45309; }
        .rec-mode.sea { background: #dbeafe; color: #1d4ed8; }
        .rec-mode.air { background: #ede9fe; color: #7c3aed; }
        .rec-reason { font-size: 11px; color: #64748b; }
        
        .ai-forwarder-note, .ai-customs-note {
            margin-top: 15px;
            padding: 12px;
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-radius: 8px;
            font-size: 13px;
            color: #166534;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GÃœMRÃœKÃ‡Ãœ - BELGE Ã–NERÄ°SÄ° PANELÄ°
           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .ai-customs-panel {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(102, 126, 234, 0.15);
            margin-bottom: 25px;
            overflow: hidden;
        }
        .ai-customs-content {
            padding: 20px;
        }
        .ai-customs-intro {
            color: #64748b;
            margin-bottom: 15px;
        }
        .ai-customs-demo {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
        }
        .customs-demo-input {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .demo-field {
            flex: 1;
        }
        .demo-field label {
            display: block;
            font-size: 12px;
            color: #64748b;
            margin-bottom: 5px;
        }
        .demo-field select {
            width: 100%;
            padding: 10px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            background: white;
        }
        .customs-demo-result {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        .doc-category {
            background: white;
            border-radius: 8px;
            padding: 15px;
        }
        .doc-cat-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 10px;
            font-size: 13px;
        }
        .doc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .doc-list li {
            padding: 6px 0;
            font-size: 13px;
            color: #475569;
            border-bottom: 1px solid #f1f5f9;
        }
        .doc-list li:last-child { border-bottom: none; }
        
        .quote-card {
            position: relative;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORWARDER RATES PANEL STYLES
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .forwarder-rates-section {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid #e2e8f0;
        }
        
        .rates-section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .rates-section-header h3 {
            font-size: 20px;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .rates-section-header .header-icon {
            font-size: 28px;
        }
        
        .rates-tab-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .rates-tab-btn {
            padding: 10px 18px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            color: #64748b;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .rates-tab-btn:hover {
            border-color: #3b82f6;
            color: #3b82f6;
            transform: translateY(-2px);
        }
        
        .rates-tab-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }
        
        .rates-tab-btn.active.sea {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.4);
        }
        
        .rates-tab-btn.active.land {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
        }
        
        .rates-tab-btn.active.on-carriage {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .rates-tab-btn.active.terminal {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4);
        }
        
        .rates-tab-btn.active.list {
            background: linear-gradient(135deg, #64748b 0%, #475569 100%);
            box-shadow: 0 4px 12px rgba(100, 116, 139, 0.4);
        }
        
        /* rates-tab-content styling handled in main CSS block */
        
        .rate-form-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #e2e8f0;
        }
        
        .form-card-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px dashed #e2e8f0;
        }
        
        .form-card-header.sea {
            border-bottom-color: #0ea5e9;
            background: linear-gradient(135deg, #0077b6 0%, #00b4d8 100%);
            padding: 20px;
            border-radius: 12px 12px 0 0;
            margin: -24px -24px 24px -24px;
        }
        
        .form-card-header.land {
            border-bottom-color: #f59e0b;
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            padding: 20px;
            border-radius: 12px 12px 0 0;
            margin: -24px -24px 24px -24px;
        }
        
        .form-card-header.on-carriage {
            border-bottom-color: #10b981;
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            padding: 20px;
            border-radius: 12px 12px 0 0;
            margin: -24px -24px 24px -24px;
        }
        
        .form-card-header.terminal {
            border-bottom-color: #8b5cf6;
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
            padding: 20px;
            border-radius: 12px 12px 0 0;
            margin: -24px -24px 24px -24px;
        }
        
        .form-icon {
            font-size: 40px;
            background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
            padding: 12px;
            border-radius: 12px;
        }
        
        .form-card-header h3 {
            font-size: 18px;
            color: #1e293b;
            margin: 0 0 4px 0;
        }
        
        .form-card-header p {
            font-size: 13px;
            color: #475569;
            margin: 0;
        }
        
        /* Renkli arka planlÄ± header'lar iÃ§in beyaz yazÄ± */
        .form-card-header.sea h3,
        .form-card-header.land h3,
        .form-card-header.on-carriage h3,
        .form-card-header.terminal h3,
        .form-card-header.insurance h3,
        .form-card-header.customs h3,
        .form-card-header.customs-tax h3,
        .form-card-header.foreign-customs h3,
        .form-card-header.ai-header h3 {
            color: white;
        }
        
        .form-card-header.sea p,
        .form-card-header.land p,
        .form-card-header.on-carriage p,
        .form-card-header.terminal p,
        .form-card-header.insurance p,
        .form-card-header.customs p,
        .form-card-header.customs-tax p,
        .form-card-header.foreign-customs p,
        .form-card-header.ai-header p {
            color: rgba(255, 255, 255, 0.95);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .form-row.three-col {
            grid-template-columns: 1fr 1fr 1fr;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-group.full {
            grid-column: 1 / -1;
        }
        
        .form-group label {
            font-size: 13px;
            font-weight: 600;
            color: #475569;
            margin-bottom: 6px;
        }
        
        .form-group select,
        .form-group input {
            padding: 12px 14px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .form-group small.port-info {
            font-size: 11px;
            color: #64748b;
            margin-top: 4px;
            font-style: italic;
        }
        
        .btn-save-rate {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.3s ease;
            margin-top: 8px;
        }
        
        .btn-save-rate:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        
        .btn-save-rate.sea {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
        }
        
        .btn-save-rate.sea:hover {
            box-shadow: 0 6px 20px rgba(14, 165, 233, 0.4);
        }
        
        .btn-save-rate.land {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .btn-save-rate.land:hover {
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }
        
        .btn-save-rate.on-carriage {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .btn-save-rate.on-carriage:hover {
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4);
        }
        
        .btn-save-rate.terminal {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .btn-save-rate.terminal:hover {
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }
        
        .thc-extras {
            display: flex;
            gap: 20px;
            margin: 16px 0;
            padding: 12px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #475569;
            cursor: pointer;
        }
        
        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        
        /* SIMPLIFIED RATE FORM (My Rates v1) */
        .rate-form-card.simplified {
            background: white;
            border: 1px solid #e5e7eb;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .rate-form-card.simplified .form-card-header {
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            padding: 20px 24px;
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .rate-form-card.simplified .form-card-header .form-icon {
            font-size: 32px;
        }
        
        .rate-form-card.simplified .form-card-header h3 {
            margin: 0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .rate-form-card.simplified .form-card-header p {
            margin: 4px 0 0 0;
            font-size: 13px;
            opacity: 0.9;
        }
        
        .rate-form-card.simplified form {
            padding: 24px;
        }
        
        /* Rate Sections */
        .rate-section {
            margin-bottom: 28px;
            padding-bottom: 24px;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .rate-section:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        
        .section-label {
            font-size: 14px;
            font-weight: 600;
            color: #111827;
            margin-bottom: 6px;
        }
        
        .section-helper {
            font-size: 12px;
            color: #6b7280;
            margin: 0 0 16px 0;
        }
        
        /* Rate Input Wrapper */
        .rate-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .currency-prefix {
            position: absolute;
            left: 12px;
            color: #6b7280;
            font-weight: 500;
        }
        
        .rate-input-wrapper input {
            padding-left: 28px;
        }
        
        /* Scope Tags */
        .scope-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .scope-tag {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 14px;
            background: #f9fafb;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 13px;
            color: #374151;
        }
        
        .scope-tag:hover {
            background: #f3f4f6;
            border-color: #d1d5db;
        }
        
        .scope-tag input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: #0ea5e9;
        }
        
        .scope-tag input[type="checkbox"]:checked + span {
            color: #0284c7;
            font-weight: 500;
        }
        
        .scope-tag:has(input:checked) {
            background: #f0f9ff;
            border-color: #0ea5e9;
        }
        
        /* Field Helper */
        .field-helper {
            display: block;
            margin-top: 6px;
            font-size: 11px;
            color: #9ca3af;
        }
        
        /* Rate Action */
        .rate-action {
            margin-top: 24px;
            padding-top: 20px;
            border-top: 1px solid #f3f4f6;
        }
        
        .btn-save-rate-simple {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .btn-save-rate-simple:hover {
            background: linear-gradient(135deg, #0284c7 0%, #0369a1 100%);
            transform: translateY(-1px);
        }
        
        /* My Rates List */
        .my-rates-container {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }
        
        .my-rates-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 12px;
        }
        
        .my-rates-header h3 {
            font-size: 18px;
            color: #1e293b;
        }
        
        .my-rates-filters {
            display: flex;
            gap: 8px;
        }
        
        .filter-btn {
            padding: 8px 14px;
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            color: #64748b;
            transition: all 0.2s ease;
        }
        
        .filter-btn:hover {
            background: #f1f5f9;
        }
        
        .filter-btn.active {
            background: #1e293b;
            color: white;
            border-color: #1e293b;
        }
        
        .my-rates-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .empty-rates {
            text-align: center;
            padding: 40px 20px;
            color: #94a3b8;
        }
        
        .empty-icon {
            font-size: 48px;
            display: block;
            margin-bottom: 12px;
        }
        
        .empty-rates p {
            font-size: 16px;
            color: #64748b;
            margin: 0 0 8px 0;
        }
        
        .empty-rates small {
            font-size: 13px;
        }
        
        .rate-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }
        
        .rate-item:hover {
            border-color: #cbd5e1;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }
        
        .rate-item-left {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .rate-type-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .rate-type-icon.sea {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
        }
        
        .rate-type-icon.land {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }
        
        .rate-type-icon.on {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        }
        
        .rate-type-icon.thc {
            background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);
        }
        
        .rate-item-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }
        
        .rate-item-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .rate-item-icon.sea {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
        }
        
        .rate-item-icon.pre {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }
        
        .rate-item-icon.on {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
        }
        
        .rate-item-icon.thc {
            background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);
        }
        
        .rate-item-details h4 {
            font-size: 14px;
            color: #1e293b;
            margin: 0 0 4px 0;
        }
        
        .rate-item-details p {
            font-size: 12px;
            color: #64748b;
            margin: 0;
        }
        
        .rate-item-price {
            text-align: right;
            margin-right: 16px;
        }
        
        .rate-item-price .price {
            font-size: 18px;
            font-weight: 700;
            color: #059669;
        }
        
        .rate-item-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-rate-action {
            width: 36px;
            height: 36px;
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .btn-rate-action:hover {
            background: #f1f5f9;
        }
        
        .btn-rate-action.delete:hover {
            background: #fee2e2;
            border-color: #fecaca;
        }
        
        .rate-item-info h4 {
            font-size: 14px;
            color: #1e293b;
            margin: 0 0 4px 0;
        }
        
        .rate-item-info p {
            font-size: 12px;
            color: #64748b;
            margin: 0;
        }
        
        .rate-item-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .rate-price {
            font-size: 16px;
            font-weight: 700;
            color: #059669;
        }
        
        .rate-container-badge {
            padding: 4px 10px;
            background: #f1f5f9;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            color: #475569;
        }
        
        .rate-actions {
            display: flex;
            gap: 6px;
        }
        
        .rate-action-btn {
            padding: 6px 10px;
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
        }
        
        .rate-action-btn:hover {
            background: #f1f5f9;
        }
        
        .rate-action-btn.delete:hover {
            background: #fee2e2;
            border-color: #fecaca;
            color: #dc2626;
        }
        
        .rates-summary {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        
        .summary-card {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 10px;
        }
        
        .summary-icon {
            font-size: 24px;
        }
        
        .summary-info {
            display: flex;
            flex-direction: column;
        }
        
        .summary-label {
            font-size: 11px;
            color: #64748b;
        }
        
        /* Success Toast */
        .toast-success {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(16, 185, 129, 0.4);
            z-index: 1500;
            display: flex;
            align-items: center;
            gap: 12px;
            animation: slideInRight 0.4s ease;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* Provider Rates Section (Insurance & Customs) */
        .provider-rates-section {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid #e2e8f0;
        }
        
        .form-card-header.insurance {
            border-bottom-color: #06b6d4;
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            padding: 20px;
            border-radius: 12px 12px 0 0;
            margin: -24px -24px 24px -24px;
        }
        
        .form-card-header.customs {
            border-bottom-color: #f59e0b;
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            padding: 20px;
            border-radius: 12px 12px 0 0;
            margin: -24px -24px 24px -24px;
        }
        
        .form-card-header.customs-tax {
            border-bottom-color: #8b5cf6;
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            padding: 20px;
            border-radius: 12px 12px 0 0;
            margin: -24px -24px 24px -24px;
        }
        
        .btn-save-rate.insurance {
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
        }
        
        .btn-save-rate.insurance:hover {
            box-shadow: 0 6px 20px rgba(6, 182, 212, 0.4);
        }
        
        .btn-save-rate.customs {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .btn-save-rate.customs:hover {
            box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4);
        }
        
        .btn-save-rate.customs-tax {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .btn-save-rate.customs-tax:hover {
            box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4);
        }
        
        .btn-save-rate.foreign-customs {
            background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
        }
        
        .btn-save-rate.foreign-customs:hover {
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.4);
        }
        
        .form-card-header.foreign-customs {
            border-bottom-color: #ec4899;
            background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
            padding: 20px;
            border-radius: 12px 12px 0 0;
            margin: -24px -24px 24px -24px;
        }
        
        .info-box {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            background: linear-gradient(135deg, #fdf4ff 0%, #fae8ff 100%);
            border: 1px solid #f0abfc;
            border-radius: 10px;
            padding: 14px 16px;
            margin-bottom: 20px;
        }
        
        .info-box .info-icon {
            font-size: 20px;
            flex-shrink: 0;
        }
        
        .info-box p {
            margin: 0;
            font-size: 13px;
            color: #86198f;
            line-height: 1.5;
        }
        
        .service-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            padding: 12px;
            background: #f8fafc;
            border-radius: 8px;
        }
        
        .rate-item-icon.fc {
            background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ENTERPRISE FÄ°YAT HESAPLAMA PANELÄ° - BEYAZ ZEMIN
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .ai-calculator-enterprise {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            margin-bottom: 24px;
            overflow: hidden;
        }
        
        /* Empty State */
        .calc-empty-state {
            padding: 80px 40px;
            text-align: center;
        }
        
        .calc-empty-state .empty-icon {
            margin-bottom: 24px;
        }
        
        .calc-empty-state h2 {
            color: #1e293b;
            font-size: 24px;
            margin: 0 0 12px 0;
        }
        
        .calc-empty-state p {
            color: #64748b;
            font-size: 15px;
            margin: 0 0 28px 0;
        }
        
        .btn-go-rates {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 14px 28px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-go-rates:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(30, 60, 114, 0.3);
        }
        
        /* Main Panel */
        .calc-main-panel {
            padding: 0;
        }
        
        /* Header Bar */
        .calc-header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 24px 32px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        
        .calc-route-display {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .route-point {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 18px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
        }
        
        .point-flag {
            font-size: 22px;
        }
        
        .point-name {
            font-weight: 600;
            font-size: 15px;
        }
        
        .route-line svg {
            opacity: 0.7;
        }
        
        .calc-meta-info {
            display: flex;
            gap: 10px;
        }
        
        .meta-badge {
            padding: 8px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .meta-badge.container {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .meta-badge.carrier {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        /* Incoterm Selector */
        .incoterm-selector {
            padding: 24px 32px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .incoterm-selector label {
            display: block;
            color: #475569;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .incoterm-options {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .incoterm-option {
            cursor: pointer;
        }
        
        .incoterm-option input {
            display: none;
        }
        
        .incoterm-option .option-box {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 14px 20px;
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            transition: all 0.3s ease;
            min-width: 100px;
        }
        
        .incoterm-option input:checked + .option-box {
            border-color: #1e3c72;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            box-shadow: 0 4px 12px rgba(30, 60, 114, 0.15);
        }
        
        .option-code {
            font-size: 16px;
            font-weight: 700;
            color: #1e3c72;
        }
        
        .option-desc {
            font-size: 11px;
            color: #64748b;
            margin-top: 4px;
        }
        
        /* Cost Items Section */
        .cost-items-section {
            padding: 28px 32px;
        }
        
        .cost-items-section h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #1e293b;
            font-size: 18px;
            margin: 0 0 20px 0;
        }
        
        .cost-items-grid {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        
        /* Cost Item Card */
        .cost-item-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 14px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .cost-item-card:hover {
            border-color: #cbd5e1;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .cost-item-header {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px 20px;
        }
        
        .cost-item-icon {
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            font-size: 22px;
        }
        
        .cost-item-icon.sea { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
        .cost-item-icon.land { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); }
        .cost-item-icon.terminal { background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%); }
        .cost-item-icon.customs { background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%); }
        .cost-item-icon.insurance-icon { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); }
        
        .cost-item-title {
            flex: 1;
        }
        
        .cost-item-title .title {
            display: block;
            color: #1e293b;
            font-weight: 600;
            font-size: 15px;
        }
        
        .cost-item-title .subtitle {
            display: block;
            color: #64748b;
            font-size: 12px;
            margin-top: 2px;
        }
        
        .cost-item-value {
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .cost-item-value input {
            width: 100px;
            padding: 10px 14px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            color: #1e293b;
            text-align: right;
            transition: all 0.3s ease;
        }
        
        .cost-item-value input:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }
        
        .cost-item-value .currency {
            color: #64748b;
            font-size: 13px;
            font-weight: 500;
        }
        
        /* Provider Options */
        .cost-item-options {
            padding: 16px 20px;
            background: white;
            border-top: 1px dashed #e2e8f0;
        }
        
        .options-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 12px;
        }
        
        .options-title {
            color: #64748b;
            font-size: 12px;
        }
        
        .option-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .provider-option {
            cursor: pointer;
        }
        
        .provider-option input {
            display: none;
        }
        
        .provider-option input + span {
            display: flex;
            align-items: center;
            padding: 12px 16px;
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            transition: all 0.2s ease;
        }
        
        .provider-option:hover input + span {
            border-color: #cbd5e1;
        }
        
        .provider-option input:checked + span {
            border-color: #1e3c72;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }
        
        .provider-option.selected input + span {
            border-color: #1e3c72;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
        }
        
        .provider-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .provider-name {
            color: #1e293b;
            font-weight: 500;
            font-size: 14px;
        }
        
        .provider-rating {
            color: #f59e0b;
            font-size: 12px;
        }
        
        .provider-price {
            color: #1e3c72;
            font-weight: 700;
            font-size: 15px;
        }
        
        /* Insurance Input */
        .insurance-input-row {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            background: white;
            border-top: 1px dashed #e2e8f0;
        }
        
        .insurance-input-row label {
            color: #64748b;
            font-size: 13px;
        }
        
        .insurance-input-row input {
            width: 120px;
            padding: 8px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 14px;
            color: #1e293b;
        }
        
        .insurance-input-row span {
            color: #64748b;
            font-size: 13px;
        }
        
        /* Profit Margin Section */
        .profit-margin-section {
            padding: 20px 32px;
            background: #f1f5f9;
            border-top: 1px solid #e2e8f0;
        }
        
        .profit-header {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .profit-label {
            color: #475569;
            font-weight: 600;
            font-size: 14px;
            min-width: 100px;
        }
        
        .profit-slider-container {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .profit-slider-container input[type="range"] {
            flex: 1;
            height: 8px;
            border-radius: 4px;
            background: #cbd5e1;
            appearance: none;
            cursor: pointer;
        }
        
        .profit-slider-container input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(30, 60, 114, 0.3);
        }
        
        .profit-percent {
            color: #1e3c72;
            font-weight: 700;
            font-size: 16px;
            min-width: 50px;
        }
        
        .profit-amount {
            color: #10b981;
            font-weight: 700;
            font-size: 18px;
            min-width: 100px;
            text-align: right;
        }
        
        /* Total Section */
        .total-section {
            padding: 24px 32px;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
        }
        
        .subtotal-row {
            display: flex;
            justify-content: space-between;
            padding-bottom: 16px;
            margin-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .subtotal-row span:first-child {
            color: #94a3b8;
            font-size: 14px;
        }
        
        .subtotal-row span:last-child {
            color: #e2e8f0;
            font-size: 18px;
            font-weight: 600;
        }
        
        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .total-row span:first-child {
            color: white;
            font-size: 14px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        .total-amount {
            color: white;
            font-size: 36px;
            font-weight: 700;
        }
        
        /* Actions Bar */
        .calc-actions-bar {
            display: flex;
            gap: 12px;
            padding: 24px 32px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
        }
        
        .calc-actions-bar button {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 24px;
            border: none;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-reset {
            background: white;
            color: #64748b;
            border: 2px solid #e2e8f0 !important;
        }
        
        .btn-reset:hover {
            border-color: #cbd5e1 !important;
            color: #475569;
        }
        
        .btn-save-draft {
            background: white;
            color: #1e3c72;
            border: 2px solid #1e3c72 !important;
        }
        
        .btn-save-draft:hover {
            background: #eff6ff;
        }
        
        .btn-create-offer {
            flex: 1;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .btn-create-offer:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }
        
        /* AI Calculator Styles (Legacy) */
        .ai-calculator-section {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 24px;
            border: 1px solid rgba(99, 102, 241, 0.3);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .ai-calc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .ai-calc-title {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .ai-icon-pulse {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, rgba(99,102,241,0.2) 0%, rgba(139,92,246,0.2) 100%);
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px;
            animation: pulse 2s infinite;
        }
        
        .ai-icon-pulse svg {
            width: 32px;
            height: 32px;
            fill: #a78bfa;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .ai-calc-title h2 {
            color: white;
            font-size: 24px;
            margin: 0;
        }
        
        .ai-calc-title p {
            color: #94a3b8;
            font-size: 14px;
            margin: 4px 0 0 0;
        }
        
        .ai-calc-form-container {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 24px;
        }
        
        .ai-calc-form {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .calc-section {
            margin-bottom: 24px;
        }
        
        .calc-section h3 {
            color: #e2e8f0;
            font-size: 16px;
            margin: 0 0 16px 0;
            padding-bottom: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .calc-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .calc-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        
        .calc-group label {
            color: #94a3b8;
            font-size: 13px;
            font-weight: 500;
        }
        
        .calc-group select,
        .calc-group input {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 12px 14px;
            color: white;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .calc-group select:focus,
        .calc-group input:focus {
            outline: none;
            border-color: #6366f1;
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
        }
        
        .calc-group select option {
            background: #1e293b;
            color: white;
        }
        
        .btn-calculate-ai {
            width: 100%;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
        }
        
        .btn-calculate-ai:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.4);
        }
        
        .btn-calculate-ai .btn-icon {
            font-size: 20px;
        }
        
        .ai-calc-result {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-height: 400px;
            display: flex;
            flex-direction: column;
        }
        
        .calc-result-placeholder {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 40px;
        }
        
        .placeholder-icon {
            font-size: 60px;
            margin-bottom: 16px;
            opacity: 0.5;
        }
        
        .calc-result-placeholder h3 {
            color: #64748b;
            font-size: 18px;
            margin: 0 0 8px 0;
        }
        
        .calc-result-placeholder p {
            color: #475569;
            font-size: 14px;
            margin: 0;
            line-height: 1.6;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           HESAPLAMA SONUÃ‡ PANELÄ° STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        #calcResultPanel {
            padding: 20px;
        }
        
        .calc-result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .calc-result-route {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .route-badge {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .route-arrow {
            color: #64748b;
            font-size: 18px;
        }
        
        .container-badge {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }
        
        .calc-result-carrier {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .carrier-label {
            color: #64748b;
            font-size: 12px;
        }
        
        .carrier-value {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 700;
        }
        
        .calc-cost-breakdown {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .calc-cost-breakdown h4 {
            color: white;
            font-size: 16px;
            margin: 0 0 16px 0;
        }
        
        .cost-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .cost-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            border-left: 3px solid #64748b;
        }
        
        .cost-item.sea { border-left-color: #3b82f6; }
        .cost-item.land { border-left-color: #f59e0b; }
        .cost-item.terminal { border-left-color: #8b5cf6; }
        .cost-item.customs { border-left-color: #10b981; }
        
        .cost-icon {
            font-size: 20px;
        }
        
        .cost-details {
            flex: 1;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .cost-label {
            color: #94a3b8;
            font-size: 13px;
        }
        
        .cost-value {
            color: white;
            font-size: 14px;
            font-weight: 600;
        }
        
        .cost-subtotal {
            display: flex;
            justify-content: space-between;
            padding: 14px 16px;
            margin-top: 16px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .cost-subtotal span:first-child {
            color: #94a3b8;
            font-size: 14px;
        }
        
        .cost-subtotal span:last-child {
            color: #60a5fa;
            font-size: 16px;
            font-weight: 700;
        }
        
        .cost-profit {
            display: flex;
            justify-content: space-between;
            padding: 12px 16px;
            margin-top: 8px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .cost-profit span:first-child {
            color: #94a3b8;
            font-size: 13px;
        }
        
        .cost-profit span:last-child {
            color: #34d399;
            font-size: 14px;
            font-weight: 600;
        }
        
        .insurance-calc {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            padding: 16px 20px;
            margin-bottom: 20px;
        }
        
        .insurance-calc h4 {
            color: white;
            font-size: 14px;
            margin: 0 0 12px 0;
        }
        
        .insurance-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .insurance-row label {
            color: #94a3b8;
            font-size: 13px;
        }
        
        .insurance-row input {
            width: 120px;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }
        
        .insurance-rate {
            color: #64748b;
            font-size: 12px;
        }
        
        .insurance-cost {
            color: #f59e0b;
            font-size: 14px;
            font-weight: 600;
        }
        
        .final-price-box {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .final-price-label {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            margin-bottom: 8px;
        }
        
        .final-price-amount {
            color: white;
            font-size: 42px;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 8px;
        }
        
        .final-price-note {
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
        }
        
        .calc-actions {
            display: flex;
            gap: 10px;
        }
        
        .calc-actions button {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-create-quote {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }
        
        .btn-create-quote:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .btn-save-calc {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
        }
        
        .btn-save-calc:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .btn-new-calc {
            background: rgba(239, 68, 68, 0.1);
            color: #f87171;
            border: 1px solid rgba(239, 68, 68, 0.2) !important;
        }
        
        .btn-new-calc:hover {
            background: rgba(239, 68, 68, 0.2);
        }
        
        /* Result Display */
        .calc-result-content {
            padding: 20px;
        }
        
        .result-header {
            text-align: center;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 16px;
        }
        
        .result-header h3 {
            color: #10b981;
            font-size: 14px;
            margin: 0 0 8px 0;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .result-total {
            font-size: 36px;
            font-weight: 700;
            color: white;
            margin: 0;
        }
        
        .result-incoterm {
            color: #94a3b8;
            font-size: 14px;
            margin-top: 4px;
        }
        
        .result-breakdown {
            margin-bottom: 16px;
        }
        
        .result-breakdown h4 {
            color: #94a3b8;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin: 0 0 12px 0;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin-bottom: 8px;
        }
        
        .breakdown-item.included {
            border-left: 3px solid #10b981;
        }
        
        .breakdown-item.not-included {
            border-left: 3px solid #475569;
            opacity: 0.5;
        }
        
        .breakdown-item.missing {
            border-left: 3px solid #f59e0b;
            background: rgba(245, 158, 11, 0.1);
        }
        
        .result-breakdown .breakdown-label {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #e2e8f0;
            font-size: 13px;
        }
        
        .result-breakdown .breakdown-value {
            color: #10b981;
            font-weight: 600;
            font-size: 14px;
        }
        
        .result-breakdown .breakdown-item.not-included .breakdown-value {
            color: #475569;
        }
        
        .result-breakdown .breakdown-item.missing .breakdown-value {
            color: #f59e0b;
        }
        
        .result-transit {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 12px;
            background: rgba(99, 102, 241, 0.1);
            border-radius: 10px;
            color: #a5b4fc;
            font-size: 14px;
        }
        
        .missing-rates-warning {
            display: flex;
            gap: 16px;
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 12px;
            padding: 16px 20px;
            margin-top: 20px;
        }
        
        .warning-icon {
            font-size: 24px;
        }
        
        .warning-content h4 {
            color: #fbbf24;
            font-size: 14px;
            margin: 0 0 8px 0;
        }
        
        .warning-content p {
            color: #fcd34d;
            font-size: 13px;
            margin: 0 0 8px 0;
        }
        
        .warning-content ul {
            margin: 0;
            padding-left: 20px;
            color: #fde68a;
            font-size: 13px;
        }
        
        @media (max-width: 1000px) {
            .ai-calc-form-container {
                grid-template-columns: 1fr;
            }
            .calc-row {
                grid-template-columns: 1fr;
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ğŸ“¢ BÄ°LDÄ°RÄ°M SÄ°STEMÄ° STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .nav-notifications {
            position: relative;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }
        
        .nav-notifications:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .nav-badge, .notif-badge {
            position: absolute;
            top: 2px;
            right: 2px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
            min-width: 16px;
            text-align: center;
        }
        
        .notification-dropdown {
            position: absolute;
            top: 60px;
            right: 20px;
            width: 380px;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            overflow: hidden;
        }
        
        .notif-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        
        .notif-header h4 {
            margin: 0;
            font-size: 16px;
        }
        
        .notif-header button {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .notif-list {
            max-height: 350px;
            overflow-y: auto;
        }
        
        .notif-item {
            display: flex;
            gap: 12px;
            padding: 14px 20px;
            border-bottom: 1px solid #f1f5f9;
            transition: background 0.2s ease;
            cursor: pointer;
        }
        
        .notif-item:hover {
            background: #f8fafc;
        }
        
        .notif-item.unread {
            background: #eff6ff;
        }
        
        .notif-icon {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }
        
        .notif-icon.success { background: #dcfce7; }
        .notif-icon.info { background: #dbeafe; }
        .notif-icon.warning { background: #fef3c7; }
        .notif-icon.error { background: #fee2e2; }
        
        .notif-content {
            flex: 1;
        }
        
        .notif-content p {
            margin: 0;
            font-size: 13px;
            color: #334155;
            line-height: 1.4;
        }
        
        .notif-time {
            font-size: 11px;
            color: #94a3b8;
        }
        
        .notif-footer {
            padding: 12px 20px;
            text-align: center;
            border-top: 1px solid #f1f5f9;
        }
        
        .notif-footer a {
            color: #3b82f6;
            font-size: 13px;
            cursor: pointer;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TEKLÄ°F TALEPLERÄ° & KARÅILAÅTIRMA STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .my-requests-section {
            margin-top: 20px;
        }
        
        .request-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            border: 1px solid #e2e8f0;
        }
        
        .request-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .request-route {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .request-route h3 {
            margin: 0;
            font-size: 18px;
            color: #1e293b;
        }
        
        .request-status {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .request-status.pending {
            background: #fef3c7;
            color: #b45309;
        }
        
        .request-status.quoted {
            background: #dbeafe;
            color: #1d4ed8;
        }
        
        .request-status.accepted {
            background: #dcfce7;
            color: #15803d;
        }
        
        .request-status.booked {
            background: #dcfce7;
            color: #15803d;
        }
        
        .request-status.expired {
            background: #f1f5f9;
            color: #64748b;
        }
        
        .request-details {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            padding: 16px;
            background: #f8fafc;
            border-radius: 10px;
            margin-bottom: 16px;
        }
        
        .request-detail-item {
            text-align: center;
        }
        
        .request-detail-item label {
            display: block;
            font-size: 11px;
            color: #64748b;
            margin-bottom: 4px;
            text-transform: uppercase;
        }
        
        .request-detail-item span {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .request-offers {
            margin-top: 16px;
        }
        
        .request-offers h4 {
            font-size: 14px;
            color: #475569;
            margin: 0 0 12px 0;
        }
        
        .offer-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 16px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 12px;
            margin-bottom: 10px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .offer-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }
        
        .offer-card.best {
            background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
            border-color: #10b981;
        }
        
        .offer-company {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .offer-logo {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
        }
        
        .offer-company-info h5 {
            margin: 0;
            font-size: 15px;
            color: #1e293b;
        }
        
        .offer-company-info .rating {
            font-size: 12px;
            color: #64748b;
        }
        
        .offer-company-info .rating span {
            color: #f59e0b;
        }
        
        .offer-details {
            display: flex;
            gap: 24px;
            align-items: center;
        }
        
        .offer-detail {
            text-align: center;
        }
        
        .offer-detail label {
            display: block;
            font-size: 10px;
            color: #64748b;
            text-transform: uppercase;
        }
        
        .offer-detail span {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .offer-price {
            text-align: right;
        }
        
        .offer-price .price {
            font-size: 22px;
            font-weight: 700;
            color: #10b981;
        }
        
        .offer-price .best-tag {
            font-size: 10px;
            background: #10b981;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
        }
        
        .offer-actions {
            display: flex;
            gap: 8px;
        }
        
        .btn-accept {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-accept:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        
        .btn-chat {
            background: #f1f5f9;
            color: #475569;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-chat:hover {
            background: #cbd5e1;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            MESAJLAÅMA SÄ°STEMÄ° STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .messages-container {
            display: grid;
            grid-template-columns: 320px 1fr;
            gap: 20px;
            height: calc(100vh - 250px);
            min-height: 500px;
        }
        
        .conversations-list {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
        }
        
        .conversations-header {
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
        }
        
        .conversations-header h3 {
            margin: 0;
            font-size: 16px;
        }
        
        .conversation-item {
            display: flex;
            gap: 12px;
            padding: 16px 20px;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: background 0.2s ease;
        }
        
        .conversation-item:hover {
            background: #f8fafc;
        }
        
        .conversation-item.active {
            background: #eff6ff;
            border-left: 3px solid #3b82f6;
        }
        
        .conversation-item.unread {
            background: #fefce8;
        }
        
        .conv-avatar {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 16px;
            flex-shrink: 0;
        }
        
        .conv-info {
            flex: 1;
            overflow: hidden;
        }
        
        .conv-info h4 {
            margin: 0 0 4px 0;
            font-size: 14px;
            color: #1e293b;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .conv-info p {
            margin: 0;
            font-size: 12px;
            color: #64748b;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .conv-meta {
            text-align: right;
        }
        
        .conv-time {
            font-size: 11px;
            color: #94a3b8;
        }
        
        .conv-unread-badge {
            background: #3b82f6;
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-top: 4px;
            display: inline-block;
        }
        
        .chat-window {
            background: white;
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            overflow: hidden;
        }
        
        .chat-header {
            padding: 16px 20px;
            background: #f8fafc;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-header-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .chat-header-info h3 {
            margin: 0;
            font-size: 16px;
            color: #1e293b;
        }
        
        .chat-header-info span {
            font-size: 12px;
            color: #64748b;
        }
        
        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8fafc;
        }
        
        .message {
            margin-bottom: 16px;
            display: flex;
            gap: 10px;
        }
        
        .message.sent {
            flex-direction: row-reverse;
        }
        
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #6366f1;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            flex-shrink: 0;
        }
        
        .message.sent .message-avatar {
            background: #10b981;
        }
        
        .message-content {
            max-width: 70%;
        }
        
        .message-bubble {
            background: white;
            padding: 12px 16px;
            border-radius: 16px;
            border-top-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }
        
        .message.sent .message-bubble {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border-radius: 16px;
            border-top-right-radius: 4px;
        }
        
        .message-bubble p {
            margin: 0;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .message-time {
            font-size: 10px;
            color: #94a3b8;
            margin-top: 4px;
        }
        
        .message.sent .message-time {
            text-align: right;
        }
        
        /* System Messages (Introduction Accepted, etc.) */
        .message.system {
            justify-content: center;
            margin: 16px 0;
        }
        
        .system-message-content {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 1px solid #86efac;
            border-radius: 12px;
            padding: 12px 20px;
            text-align: center;
            max-width: 80%;
        }
        
        .system-message-content p {
            margin: 0;
            color: #166534;
            font-size: 13px;
            font-weight: 500;
        }
        
        .system-message-content .message-time {
            color: #22c55e;
            margin-top: 6px;
            display: block;
        }
        
        /* New Conversation Badge */
        .conversation-item.new-conversation {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border-left: 3px solid #10b981;
        }
        
        .new-badge {
            background: #10b981;
            color: white;
            font-size: 9px;
            font-weight: 700;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: 6px;
            text-transform: uppercase;
        }
        
        /* Updated Contact Modal Styles */
        .fcm-success-badge {
            position: absolute;
            top: -10px;
            right: -10px;
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .fcm-status {
            color: #10b981;
            font-weight: 600;
            font-size: 13px;
        }
        
        .fcm-intro-success {
            background: linear-gradient(135deg, #f0fdf4, #dcfce7);
            border: 1px solid #86efac;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }
        
        .intro-success-icon {
            font-size: 40px;
            margin-bottom: 12px;
        }
        
        .fcm-intro-success p {
            margin: 0;
            color: #166534;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .fcm-quote-summary {
            background: #f8fafc;
            border-radius: 8px;
            padding: 12px;
        }
        
        .quote-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .quote-item:last-child {
            border-bottom: none;
        }
        
        .quote-item span {
            color: #64748b;
            font-size: 13px;
        }
        
        .quote-item strong {
            color: #1e293b;
            font-size: 14px;
        }
        
        .fcm-actions-new {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 20px;
        }
        
        .fcm-btn-primary {
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            border: none;
            padding: 14px 24px;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }
        
        .fcm-btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(30, 60, 114, 0.4);
        }
        
        .fcm-btn-secondary {
            background: #f1f5f9;
            color: #64748b;
            border: 1px solid #e2e8f0;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .fcm-btn-secondary:hover {
            background: #e2e8f0;
        }
        
        .chat-input {
            padding: 16px 20px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            gap: 12px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 24px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s ease;
        }
        
        .chat-input input:focus {
            border-color: #3b82f6;
        }
        
        .chat-input button {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }
        
        .chat-input button:hover {
            transform: scale(1.05);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DÃ–KÃœMAN YÃ–NETÄ°MÄ° STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .documents-section {
            padding: 20px 0;
        }
        
        .documents-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }
        
        .document-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }
        
        .document-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
        }
        
        .doc-icon {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            margin-bottom: 16px;
        }
        
        .doc-icon.pdf { background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%); }
        .doc-icon.excel { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); }
        .doc-icon.word { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
        .doc-icon.image { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); }
        
        .document-card h4 {
            margin: 0 0 8px 0;
            font-size: 15px;
            color: #1e293b;
        }
        
        .document-card p {
            margin: 0;
            font-size: 12px;
            color: #64748b;
        }
        
        .doc-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid #f1f5f9;
        }
        
        .doc-size {
            font-size: 12px;
            color: #94a3b8;
        }
        
        .doc-actions {
            display: flex;
            gap: 8px;
        }
        
        .doc-btn {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }
        
        .doc-btn.view {
            background: #eff6ff;
            color: #3b82f6;
        }
        
        .doc-btn.download {
            background: #f0fdf4;
            color: #22c55e;
        }
        
        .doc-btn:hover {
            transform: scale(1.1);
        }
        
        .upload-zone {
            border: 2px dashed #cbd5e1;
            border-radius: 16px;
            padding: 40px;
            text-align: center;
            background: #f8fafc;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-zone:hover {
            border-color: #3b82f6;
            background: #eff6ff;
        }
        
        .upload-zone-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .upload-zone h4 {
            margin: 0 0 8px 0;
            color: #475569;
        }
        
        .upload-zone p {
            margin: 0;
            font-size: 13px;
            color: #94a3b8;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RAPORLAR & Ä°STATÄ°STÄ°KLER STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }
        
        .stat-box {
            background: white;
            border-radius: 16px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
        }
        
        .stat-box-icon {
            width: 56px;
            height: 56px;
            margin: 0 auto 16px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }
        
        .stat-box-icon.blue { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
        .stat-box-icon.green { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); }
        .stat-box-icon.purple { background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%); }
        .stat-box-icon.orange { background: linear-gradient(135deg, #ffedd5 0%, #fed7aa 100%); }
        
        .stat-box h3 {
            font-size: 32px;
            margin: 0 0 4px 0;
            color: #1e293b;
        }
        
        .stat-box p {
            font-size: 13px;
            color: #64748b;
            margin: 0;
        }
        
        .chart-container {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            margin-bottom: 24px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-header h3 {
            margin: 0;
            font-size: 16px;
            color: #1e293b;
        }
        
        .chart-placeholder {
            height: 250px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #94a3b8;
        }
        
        /* Client Tab Content */
        .client-tab-content {
            padding: 0;
        }
        
        .section-header {
            margin-bottom: 24px;
        }
        
        .section-header h2 {
            margin: 0 0 8px 0;
            font-size: 24px;
            color: #1e293b;
        }
        
        .section-header p {
            margin: 0;
            color: #64748b;
            font-size: 14px;
        }
        
        .section-header-with-back {
            display: flex;
            align-items: flex-start;
            gap: 16px;
        }
        
        .back-btn {
            padding: 10px 20px;
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            color: #475569;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .back-btn:hover {
            background: #cbd5e1;
            color: #1e293b;
        }
        
        .empty-offers {
            text-align: center;
            padding: 40px 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 2px dashed #e2e8f0;
        }
        
        .empty-offers span {
            font-size: 40px;
            display: block;
            margin-bottom: 12px;
        }
        
        .empty-offers p {
            margin: 0 0 8px 0;
            color: #475569;
            font-size: 15px;
        }
        
        .empty-offers small {
            color: #94a3b8;
            font-size: 13px;
        }
        
        @media (max-width: 768px) {
            .messages-container {
                grid-template-columns: 1fr;
            }
            .conversations-list {
                max-height: 200px;
                overflow-y: auto;
            }
            .request-details {
                grid-template-columns: repeat(2, 1fr);
            }
            .stats-overview {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AI TEKLÄ°F ANALÄ°ZÄ° STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .ai-offer-analysis {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        .ai-analysis-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .ai-pulse {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, rgba(99,102,241,0.2) 0%, rgba(139,92,246,0.2) 100%);
            border-radius: 8px;
            animation: pulse 2s infinite;
        }
        
        .ai-pulse svg {
            width: 18px;
            height: 18px;
            fill: #a78bfa;
        }
        
        .btn-refresh-ai {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s ease;
        }
        
        .btn-refresh-ai:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .reason-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #94a3b8;
            font-size: 14px;
        }
        
        .reason-item.positive .reason-icon {
            color: #10b981;
        }
        
        .ai-warnings {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .warning-item {
            display: flex;
            gap: 12px;
            padding: 12px 16px;
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 10px;
        }
        
        .warning-icon {
            font-size: 20px;
        }
        
        .warning-text {
            color: #fcd34d;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .warning-text strong {
            color: #fbbf24;
        }
        
        .ai-comparison-table {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
        }
        
        .ai-comparison-table h5 {
            color: #e2e8f0;
            margin: 0 0 16px 0;
            font-size: 14px;
        }
        
        .ai-comparison-table table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .ai-comparison-table th,
        .ai-comparison-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: #94a3b8;
            font-size: 13px;
        }
        
        .ai-comparison-table th {
            color: #64748b;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 11px;
        }
        
        .ai-comparison-table th:first-child,
        .ai-comparison-table td:first-child {
            text-align: left;
        }
        
        .total-row {
            background: rgba(99, 102, 241, 0.1);
        }
        
        .total-row td {
            border-bottom: none;
            color: #e2e8f0;
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AI DÃ–KÃœMAN ANALÄ°ZÄ° STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .ai-document-analysis {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        .ai-doc-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .ai-doc-status {
            color: #64748b;
            font-size: 12px;
        }
        
        .ai-doc-result {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .doc-scan-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .doc-scan-icon {
            font-size: 40px;
        }
        
        .doc-scan-info h4 {
            color: white;
            margin: 0 0 4px 0;
            font-size: 16px;
        }
        
        .scan-status {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 12px;
        }
        
        .scan-status.success {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }
        
        .ai-extracted-data h5 {
            color: #94a3b8;
            font-size: 12px;
            text-transform: uppercase;
            margin: 0 0 12px 0;
        }
        
        .extracted-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }
        
        .extracted-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 8px;
        }
        
        .extracted-item label {
            display: block;
            color: #64748b;
            font-size: 11px;
            margin-bottom: 4px;
        }
        
        .extracted-item span {
            color: #e2e8f0;
            font-size: 13px;
            font-weight: 500;
        }
        
        .ai-doc-warnings {
            margin-top: 20px;
        }
        
        .ai-doc-warnings h5 {
            color: #94a3b8;
            font-size: 12px;
            text-transform: uppercase;
            margin: 0 0 12px 0;
        }
        
        .doc-warning-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px 16px;
            border-radius: 10px;
            margin-bottom: 10px;
        }
        
        .doc-warning-item.error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }
        
        .doc-warning-item.warning {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .doc-warning-item.info {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .warning-badge {
            font-size: 10px;
            padding: 3px 8px;
            border-radius: 6px;
            font-weight: 600;
            white-space: nowrap;
        }
        
        .doc-warning-item.error .warning-badge {
            background: #ef4444;
            color: white;
        }
        
        .doc-warning-item.warning .warning-badge {
            background: #f59e0b;
            color: white;
        }
        
        .doc-warning-item.info .warning-badge {
            background: #3b82f6;
            color: white;
        }
        
        .warning-detail {
            flex: 1;
            color: #cbd5e1;
            font-size: 13px;
            line-height: 1.5;
        }
        
        .warning-detail strong {
            color: white;
        }
        
        .btn-fix {
            margin-left: 12px;
            background: #ef4444;
            color: white;
            border: none;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
        }
        
        .ai-missing-docs {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
        }
        
        .ai-missing-docs h5 {
            color: #e2e8f0;
            font-size: 14px;
            margin: 0 0 16px 0;
        }
        
        .doc-checklist {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .checklist-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 14px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }
        
        .checklist-item.completed .check-icon {
            color: #10b981;
        }
        
        .checklist-item.missing .check-icon {
            color: #ef4444;
        }
        
        .check-label {
            flex: 1;
            color: #cbd5e1;
            font-size: 14px;
        }
        
        .check-status {
            font-size: 12px;
            color: #64748b;
        }
        
        .check-status.urgent {
            color: #ef4444;
            font-weight: 600;
        }
        
        .missing-docs-action {
            margin-top: 16px;
            padding: 16px;
            background: rgba(245, 158, 11, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(245, 158, 11, 0.3);
        }
        
        .missing-docs-action p {
            color: #fcd34d;
            font-size: 13px;
            margin: 0 0 12px 0;
        }
        
        .btn-request-doc {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-request-doc:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(245, 158, 11, 0.4);
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           AI RAPOR INSIGHTS STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .ai-insights-panel {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            border: 1px solid rgba(99, 102, 241, 0.3);
        }
        
        .ai-insights-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .insights-update {
            color: #64748b;
            font-size: 12px;
        }
        
        .insights-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .insight-card {
            display: flex;
            gap: 16px;
            padding: 20px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .insight-card:hover {
            background: rgba(255, 255, 255, 0.06);
            transform: translateY(-2px);
        }
        
        .insight-card.savings { border-left: 4px solid #10b981; }
        .insight-card.trend { border-left: 4px solid #3b82f6; }
        .insight-card.risk { border-left: 4px solid #f59e0b; }
        .insight-card.forecast { border-left: 4px solid #8b5cf6; }
        
        .insight-icon {
            font-size: 32px;
            flex-shrink: 0;
        }
        
        .insight-content h4 {
            color: #e2e8f0;
            font-size: 14px;
            margin: 0 0 8px 0;
        }
        
        .insight-highlight {
            font-size: 20px;
            font-weight: 700;
            margin: 0 0 8px 0;
        }
        
        .insight-card.savings .insight-highlight { color: #10b981; }
        .insight-card.trend .insight-highlight { color: #3b82f6; }
        .insight-card.risk .insight-highlight { color: #f59e0b; }
        .insight-card.forecast .insight-highlight { color: #8b5cf6; }
        
        .insight-content p:last-of-type {
            color: #94a3b8;
            font-size: 13px;
            line-height: 1.5;
            margin: 0 0 12px 0;
        }
        
        .btn-insight-action {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 14px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-insight-action:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .ai-benchmark {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            padding: 20px;
        }
        
        .ai-benchmark h4 {
            color: #e2e8f0;
            font-size: 14px;
            margin: 0 0 20px 0;
        }
        
        .benchmark-bars {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .benchmark-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .benchmark-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .benchmark-label span:first-child {
            color: #cbd5e1;
            font-size: 13px;
        }
        
        .benchmark-value {
            font-size: 12px;
            font-weight: 600;
        }
        
        .benchmark-value.good {
            color: #10b981;
        }
        
        .benchmark-value.bad {
            color: #ef4444;
        }
        
        .benchmark-bar {
            position: relative;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: visible;
        }
        
        .bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease;
        }
        
        .bar-fill.good {
            background: linear-gradient(90deg, #10b981 0%, #34d399 100%);
        }
        
        .bar-marker {
            position: absolute;
            top: -4px;
            width: 2px;
            height: 16px;
            background: #64748b;
            border-radius: 1px;
        }
        
        .benchmark-legend {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: #64748b;
        }
        
        @media (max-width: 900px) {
            .insights-grid {
                grid-template-columns: 1fr;
            }
            .extracted-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            CANLI HAT FÄ°YATLARI STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .forwarder-tab-content {
            display: block;
            visibility: visible !important;
            opacity: 1 !important;
            min-height: 100px;
        }
        
        .forwarder-tab-content.hidden {
            display: none;
        }
        
        .live-rates-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 24px;
        }
        
        .live-rates-header h2 {
            margin: 0 0 4px 0;
            font-size: 24px;
            color: #1e293b;
        }
        
        .live-rates-header p {
            margin: 0;
            color: #64748b;
            font-size: 14px;
        }
        
        .live-rates-update {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 13px;
            color: #64748b;
        }
        
        .update-dot {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }
        
        .rate-search-box {
            background: white;
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
        }
        
        .rate-search-row {
            display: flex;
            gap: 16px;
            align-items: flex-end;
        }
        
        .search-field {
            flex: 1;
        }
        
        .search-field label {
            display: block;
            font-size: 12px;
            font-weight: 600;
            color: #475569;
            margin-bottom: 6px;
        }
        
        .search-field select {
            width: 100%;
            padding: 12px 14px;
            border: 1px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            color: #1e293b;
            background: white;
            cursor: pointer;
        }
        
        .btn-search-rates {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
        }
        
        .btn-search-rates:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(30, 60, 114, 0.3);
        }
        
        .rates-result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .rates-result-header h3 {
            margin: 0;
            font-size: 18px;
            color: #1e293b;
        }
        
        .result-date {
            font-size: 13px;
            color: #64748b;
        }
        
        .carrier-rates-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .carrier-rate-card {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .carrier-rate-card:hover {
            border-color: #3b82f6;
            transform: translateY(-2px);
        }
        
        .carrier-logo {
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 12px;
            color: white;
            margin-bottom: 12px;
            letter-spacing: 1px;
        }
        
        .carrier-logo.maersk { background: linear-gradient(135deg, #00243D 0%, #003A5D 100%); }
        .carrier-logo.msc { background: linear-gradient(135deg, #002B5C 0%, #003F7F 100%); }
        .carrier-logo.cmacgm { background: linear-gradient(135deg, #002B7F 0%, #0047AB 100%); }
        .carrier-logo.hapag { background: linear-gradient(135deg, #FF6600 0%, #FF8533 100%); }
        .carrier-logo.evergreen { background: linear-gradient(135deg, #006400 0%, #228B22 100%); }
        .carrier-logo.one { background: linear-gradient(135deg, #FF1493 0%, #FF69B4 100%); }
        .carrier-logo.arkas { background: linear-gradient(135deg, #1a237e 0%, #3949ab 100%); }
        .carrier-logo.turkon { background: linear-gradient(135deg, #b71c1c 0%, #e53935 100%); }
        
        .carrier-rate-info {
            margin-bottom: 12px;
        }
        
        .carrier-name {
            font-size: 15px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .carrier-service {
            font-size: 12px;
            color: #64748b;
        }
        
        .carrier-rate-details {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .rate-detail {
            flex: 1;
            text-align: center;
        }
        
        .rate-detail .detail-label {
            display: block;
            font-size: 10px;
            color: #94a3b8;
            text-transform: uppercase;
            margin-bottom: 2px;
        }
        
        .rate-detail .detail-value {
            font-size: 13px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .rate-detail .detail-value.available { color: #22c55e; }
        .rate-detail .detail-value.limited { color: #f59e0b; }
        .rate-detail .detail-value.full { color: #ef4444; }
        
        .price-note {
            font-size: 11px;
            color: #94a3b8;
        }
        
        .btn-use-rate {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            transition: all 0.3s ease;
        }
        
        .btn-use-rate:hover:not(.disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(30, 60, 114, 0.3);
        }
        
        .btn-use-rate.disabled {
            background: #cbd5e1;
            color: #94a3b8;
            cursor: not-allowed;
        }
        
        .market-summary {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 16px;
            padding: 24px;
        }
        
        .summary-title {
            color: white;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .summary-item {
            text-align: center;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }
        
        .summary-label {
            display: block;
            font-size: 11px;
            color: #94a3b8;
            margin-bottom: 4px;
        }
        
        .summary-note {
            margin: 0;
            padding: 12px 16px;
            background: rgba(34, 197, 94, 0.1);
            border-radius: 8px;
            font-size: 13px;
            color: #86efac;
        }
        
        @media (max-width: 1100px) {
            .carrier-rates-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .rate-search-row {
                flex-direction: column;
            }
            .carrier-rates-grid {
                grid-template-columns: 1fr;
            }
            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           FORWARDER KONTEYNER TAKÄ°P STÄ°LLERÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .tracking-section-header {
            margin-bottom: 24px;
        }
        
        .tracking-section-header h2 {
            margin: 0 0 4px 0;
            font-size: 24px;
            color: #1e293b;
        }
        
        .tracking-section-header p {
            margin: 0;
            color: #64748b;
            font-size: 14px;
        }
        
        .tracking-lookup-box {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            margin-bottom: 24px;
        }
        
        .lookup-tabs-forwarder {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .lookup-tab-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            background: white;
            color: #64748b;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lookup-tab-btn:hover {
            border-color: #1e3c72;
            color: #1e3c72;
        }
        
        .lookup-tab-btn.active {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            border-color: #1e3c72;
            color: white;
        }
        
        .lookup-input-area {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .lookup-input-area input {
            flex: 1;
            padding: 14px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            font-family: 'Courier New', monospace;
            letter-spacing: 1px;
            transition: border-color 0.3s;
        }
        
        .lookup-input-area input:focus {
            outline: none;
            border-color: #1e3c72;
        }
        
        .btn-lookup-forwarder {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-lookup-forwarder:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(30, 60, 114, 0.3);
        }
        
        .carrier-prefixes {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-wrap: wrap;
        }
        
        .prefix-label {
            font-size: 12px;
            color: #64748b;
        }
        
        .prefix-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .prefix-tag {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 6px;
            font-weight: 500;
        }
        
        .prefix-tag.maersk { background: #e0f2fe; color: #0369a1; }
        .prefix-tag.msc { background: #dbeafe; color: #1d4ed8; }
        .prefix-tag.cma { background: #ede9fe; color: #6d28d9; }
        .prefix-tag.hapag { background: #ffedd5; color: #c2410c; }
        .prefix-tag.cosco { background: #fef3c7; color: #b45309; }
        .prefix-tag.evergreen { background: #dcfce7; color: #15803d; }
        .prefix-tag.one { background: #fce7f3; color: #be185d; }
        .prefix-tag.arkas { background: #e0e7ff; color: #3730a3; }
        .prefix-tag.turkon { background: #fee2e2; color: #b91c1c; }
        
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            AKILLI LÄ°MAN ARAMA (AUTOCOMPLETE)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        
        .port-autocomplete {
            position: relative;
            width: 100%;
        }
        
        .port-autocomplete input {
            width: 100%;
            padding: 12px 16px;
            padding-left: 40px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .port-autocomplete input:focus {
            outline: none;
            border-color: #1e3c72;
            box-shadow: 0 0 0 3px rgba(30, 60, 114, 0.1);
        }
        
        .port-autocomplete .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            fill: #94a3b8;
            pointer-events: none;
        }
        
        .port-autocomplete-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #e2e8f0;
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 350px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }
        
        .port-autocomplete-results.show {
            display: block;
        }
        
        .port-result-group {
            padding: 8px 12px;
            background: #f8fafc;
            font-size: 11px;
            font-weight: 600;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 1px solid #e2e8f0;
            position: sticky;
            top: 0;
        }
        
        .port-result-item {
            padding: 12px 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            border-bottom: 1px solid #f1f5f9;
            transition: background 0.2s;
        }
        
        .port-result-item:hover,
        .port-result-item.selected {
            background: #eff6ff;
        }
        
        .port-result-item .port-flag {
            font-size: 20px;
        }
        
        .port-result-item .port-info {
            flex: 1;
        }
        
        .port-result-item .port-name {
            font-weight: 600;
            color: #1e293b;
            font-size: 14px;
        }
        
        .port-result-item .port-name mark {
            background: #fef08a;
            padding: 0 2px;
            border-radius: 2px;
        }
        
        .port-result-item .port-country {
            font-size: 12px;
            color: #64748b;
        }
        
        .port-result-item .port-code {
            font-family: 'Courier New', monospace;
            font-size: 11px;
            padding: 4px 8px;
            background: #f1f5f9;
            border-radius: 4px;
            color: #64748b;
        }
        
        .port-selected-badge {
            display: none;
            align-items: center;
            gap: 8px;
            margin-top: 8px;
            padding: 8px 12px;
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 8px;
            border: 1px solid #bfdbfe;
        }
        
        .port-selected-badge.show {
            display: flex;
        }
        
        .port-selected-badge .badge-flag {
            font-size: 18px;
        }
        
        .port-selected-badge .badge-text {
            flex: 1;
            font-size: 13px;
            font-weight: 500;
            color: #1e40af;
        }
        
        .port-selected-badge .badge-clear {
            background: none;
            border: none;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            color: #64748b;
            transition: all 0.2s;
        }
        
        .port-selected-badge .badge-clear:hover {
            background: #fee2e2;
            color: #dc2626;
        }
        
        .tracking-result-box {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
            margin-bottom: 24px;
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .container-info h3 {
            margin: 0 0 4px 0;
            font-size: 22px;
            font-family: 'Courier New', monospace;
            color: #1e293b;
        }
        
        .carrier-badge {
            display: inline-block;
            padding: 4px 12px;
            background: #1e3c72;
            color: white;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .status-badge.in-transit {
            background: #dbeafe;
            color: #1d4ed8;
        }
        
        .status-badge.delivered {
            background: #dcfce7;
            color: #15803d;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: currentColor;
            animation: pulse 2s infinite;
        }
        
        .route-summary {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 24px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
        }
        
        .route-point {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .point-icon {
            font-size: 24px;
        }
        
        .point-label {
            display: block;
            font-size: 11px;
            color: #64748b;
            text-transform: uppercase;
        }
        
        .point-info strong {
            display: block;
            font-size: 16px;
            color: #1e293b;
        }
        
        .point-date {
            font-size: 12px;
            color: #94a3b8;
        }
        
        .route-line {
            flex: 1;
            height: 8px;
            background: #cbd5e1;
            border-radius: 4px;
            position: relative;
        }
        
        .route-progress {
            height: 100%;
            background: linear-gradient(90deg, #1e3c72 0%, #3b82f6 100%);
            border-radius: 4px;
            transition: width 1s ease;
        }
        
        .vessel-icon {
            position: absolute;
            top: -10px;
            right: 35%;
            font-size: 20px;
        }
        
        .tracking-details-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .detail-card {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: #f8fafc;
            border-radius: 10px;
        }
        
        .detail-icon {
            font-size: 24px;
        }
        
        .detail-label {
            display: block;
            font-size: 11px;
            color: #64748b;
        }
        
        .detail-info strong {
            font-size: 14px;
            color: #1e293b;
        }
        
        .movement-history {
            padding-top: 20px;
            border-top: 1px solid #f1f5f9;
        }
        
        .movement-history h4 {
            margin: 0 0 16px 0;
            font-size: 16px;
            color: #1e293b;
        }
        
        .timeline {
            display: flex;
            flex-direction: column;
            gap: 0;
        }
        
        .timeline-item {
            display: flex;
            gap: 16px;
            padding-bottom: 20px;
            position: relative;
        }
        
        .timeline-item:not(:last-child)::before {
            content: '';
            position: absolute;
            left: 7px;
            top: 20px;
            bottom: 0;
            width: 2px;
            background: #cbd5e1;
        }
        
        .timeline-item.completed::before {
            background: #22c55e;
        }
        
        .timeline-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #cbd5e1;
            flex-shrink: 0;
            position: relative;
            z-index: 1;
        }
        
        .timeline-item.completed .timeline-dot {
            background: #22c55e;
        }
        
        .timeline-item.active .timeline-dot {
            background: #3b82f6;
            animation: pulse 2s infinite;
        }
        
        .timeline-item.pending .timeline-dot {
            background: #cbd5e1;
            border: 2px dashed #94a3b8;
        }
        
        .timeline-date {
            font-size: 12px;
            color: #64748b;
        }
        
        .timeline-event {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
        }
        
        .timeline-location {
            font-size: 13px;
            color: #64748b;
        }
        
        .recent-lookups {
            background: white;
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
        }
        
        .recent-lookups h4 {
            margin: 0 0 16px 0;
            font-size: 15px;
            color: #1e293b;
        }
        
        .recent-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .recent-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 12px 16px;
            background: #f8fafc;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .recent-item:hover {
            background: #f1f5f9;
            transform: translateX(4px);
        }
        
        .recent-container {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            color: #1e293b;
            min-width: 120px;
        }
        
        .recent-route {
            flex: 1;
            color: #64748b;
            font-size: 13px;
        }
        
        .recent-status {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 10px;
            font-weight: 600;
        }
        
        .recent-status.transit { background: #dbeafe; color: #1d4ed8; }
        .recent-status.delivered { background: #dcfce7; color: #15803d; }
        .recent-status.loading { background: #fef3c7; color: #b45309; }
        
        @media (max-width: 768px) {
            .tracking-details-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .route-summary {
                flex-direction: column;
            }
            .route-line {
                width: 100%;
                height: 4px;
            }
        }
        
        .rates-summary {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }
        
        @media (max-width: 900px) {
            .rates-summary {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 600px) {
            .rates-summary {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .coverage-options {
            background: #f8fafc;
            border-radius: 10px;
            padding: 16px;
            margin: 16px 0;
        }
        
        .coverage-title {
            font-size: 13px;
            font-weight: 600;
            color: #475569;
            display: block;
            margin-bottom: 12px;
        }
        
        .coverage-checkboxes {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
        }
        
        .rate-item-icon.service {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
        }
        
        .rate-item-icon.tax {
            background: linear-gradient(135deg, #ede9fe 0%, #ddd6fe 100%);
        }
        
        .rate-item-icon.insurance {
            background: linear-gradient(135deg, #cffafe 0%, #a5f3fc 100%);
        }
        
        /* Responsive */
        @media (max-width: 900px) {
            .ai-analysis-grid, .ai-demand-grid { grid-template-columns: 1fr; }
            .customs-demo-input { flex-direction: column; }
            .customs-demo-result { grid-template-columns: 1fr; }
        }
    </style>
    
    <!-- Supabase loaded in body for proper timing -->
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LANDING PAGE - Premium Home
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="landingPage" class="landing-container">
    <!-- Language: English Only -->
    <div style="position: absolute; top: 20px; right: 20px; z-index: 100; color: rgba(255,255,255,0.7); font-size: 14px; display: flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.1); padding: 8px 14px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2);">
        <svg width="20" height="14" viewBox="0 0 20 14" style="border-radius: 2px;">
            <rect width="20" height="14" fill="#012169"/>
            <path d="M0,0 L20,14 M20,0 L0,14" stroke="white" stroke-width="2.5"/>
            <path d="M0,0 L20,14 M20,0 L0,14" stroke="#C8102E" stroke-width="1.5"/>
            <path d="M10,0 V14 M0,7 H20" stroke="white" stroke-width="4"/>
            <path d="M10,0 V14 M0,7 H20" stroke="#C8102E" stroke-width="2.5"/>
        </svg>
        <span>EN</span>
    </div>
    
    <style>
    .language-selector {
        position: relative;
    }
    .lang-btn {
        display: flex;
        align-items: center;
        gap: 6px;
        padding: 8px 14px;
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255,255,255,0.25);
        border-radius: 10px;
        color: white;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
    }
    .lang-btn:hover {
        background: rgba(255,255,255,0.25);
    }
    .lang-dropdown {
        position: absolute;
        top: 100%;
        right: 0;
        margin-top: 8px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        overflow: hidden;
        min-width: 140px;
    }
    .lang-dropdown.hidden {
        display: none;
    }
    .lang-option {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 12px 16px;
        cursor: pointer;
        transition: background 0.2s;
        color: #1e293b;
        font-size: 14px;
    }
    .lang-option:hover {
        background: #f1f5f9;
    }
    .lang-option.active {
        background: #e0f2fe;
        color: #0369a1;
    }
    </style>
    
    <div class="landing-bg">
        <div class="landing-gradient"></div>
        <div class="landing-pattern"></div>
    </div>
    
    <div class="landing-content">
        <div class="landing-badge">
            <span class="badge-icon"></span>
            <span data-i18n="landing.badge">Verified Global Freight Network</span>
        </div>
        
        <h1 class="landing-title">
            <span class="title-line" data-i18n="landing.heroLine1">Right Forwarder.</span>
            <span class="title-line" data-i18n="landing.heroLine2">Right Cargo.</span>
            <span class="title-line gradient" data-i18n="landing.heroLine3">Right Lane.</span>
        </h1>
        
        <p class="landing-subtitle" data-i18n="landing.subtitle">
            We connect verified freight forwarders with importers and exporters on the right trade lanes with matched profiles.
        </p>
        
        <p class="landing-philosophy" style="font-size: 14px; color: #94a3b8; margin-top: -8px; margin-bottom: 24px; font-style: italic;" data-i18n="landing.philosophy">
            We don't create competition. We create the right connection.
        </p>
        
        <div class="landing-cta">
            <button class="btn-start" onclick="showLoginFromLanding()">
                <span data-i18n="landing.joinNetwork">Join the Network</span>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </button>
            <button class="btn-demo" onclick="showHowItWorks()">
                <span data-i18n="landing.howItWorks">How It Works</span>
            </button>
        </div>
        
        <div class="landing-features">
            <div class="feature-item">
                <span class="feature-icon">âœ“</span>
                <span data-i18n="landing.verifiedForwarders">Verified Forwarders</span>
            </div>
            <div class="feature-item">
                <span class="feature-icon">âœ“</span>
                <span data-i18n="landing.approvalBased">Approval-Based Access</span>
            </div>
            <div class="feature-item">
                <span class="feature-icon">âœ“</span>
                <span data-i18n="landing.tradeLaneMatching">Trade Lane Matching</span>
            </div>
            <div class="feature-item">
                <span class="feature-icon">âœ“</span>
                <span data-i18n="landing.qualifiedIntros">Qualified Introductions</span>
            </div>
        </div>
    </div>
    
    <div class="landing-footer" style="padding: 30px 20px; text-align: center;">
        <div class="footer-legal-links" style="margin-bottom: 16px;">
            <a onclick="openLegalModal('terms')" style="color: #94a3b8; text-decoration: none; margin: 0 12px; cursor: pointer; font-size: 13px;" data-i18n="legal.terms">Terms of Service</a>
            <span style="color: #475569;">|</span>
            <a onclick="openLegalModal('privacy')" style="color: #94a3b8; text-decoration: none; margin: 0 12px; cursor: pointer; font-size: 13px;" data-i18n="legal.privacy">Privacy Policy</a>
            <span style="color: #475569;">|</span>
            <a onclick="openLegalModal('kvkk')" style="color: #94a3b8; text-decoration: none; margin: 0 12px; cursor: pointer; font-size: 13px;" data-i18n="legal.kvkk">KVKK</a>
            <span style="color: #475569;">|</span>
            <a onclick="openLegalModal('disclaimer')" style="color: #94a3b8; text-decoration: none; margin: 0 12px; cursor: pointer; font-size: 13px;" data-i18n="legal.disclaimer">Disclaimer</a>
            <span style="color: #475569;">|</span>
            <a onclick="openLegalModal('cookies')" style="color: #94a3b8; text-decoration: none; margin: 0 12px; cursor: pointer; font-size: 13px;" data-i18n="legal.cookies">Cookie Policy</a>
        </div>
        <p style="margin: 0; color: #64748b; font-size: 12px;" data-i18n="legal.copyright">Â© 2025 Global Freight Network. All rights reserved.</p>
    </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SERVICES PAGE - Service Selection (After Login)
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="homePage" class="home-container hidden">
    <div class="services-nav">
        <div class="services-logo" onclick="goToLanding()">Global Freight Network</div>
        <div class="services-user" style="display: flex; align-items: center; gap: 16px;">
            <span id="servicesUserName">User</span>
            <button class="btn-logout-small" onclick="doLogout()" data-i18n="dashboard.logout">Logout</button>
        </div>
    </div>
    
    <style>
    .language-selector-small { position: relative; }
    .lang-btn-small {
        display: flex;
        align-items: center;
        gap: 4px;
        padding: 6px 10px;
        background: rgba(255,255,255,0.1);
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 6px;
        color: white;
        font-size: 12px;
        cursor: pointer;
    }
    .lang-btn-small:hover { background: rgba(255,255,255,0.2); }
    </style>
    
    <div class="home-hero">
        <h1 data-i18n="role.welcome">Welcome!</h1>
        <p data-i18n="role.selectRole">Select your role on the platform</p>
    </div>
    
    <!-- ULTRA PREMIUM TWO-BOX SELECTION -->
    <div class="premium-role-selection">
        <!-- FORWARDER BOX -->
        <div class="mega-role-card forwarder-mega" onclick="goToLogin('forwarder')">
            <div class="mega-card-glow"></div>
            <div class="mega-card-content">
                <div class="mega-icon-wrapper">
                    <div class="mega-icon">
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="white">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                        </svg>
                    </div>
                    <div class="mega-badge">
                        <span class="pulse-dot"></span>
                        <span data-i18n="role.activeRequests2400">2,400+ Active Requests</span>
                    </div>
                </div>
                
                <div class="mega-text-content">
                    <div class="mega-label">FORWARDER</div>
                    <h2 class="mega-title" data-i18n="role.imForwarder">I am a Freight Forwarder</h2>
                    <p class="mega-subtitle" data-i18n="role.lookingForCustomers">Looking for Cargo Owners</p>
                    
                    <div class="mega-description" data-i18n="role.forwarderDesc">
                        Join our verified network and connect with qualified cargo owners on matched trade lanes.
                    </div>
                    
                    <div class="mega-features">
                        <div class="mega-feature">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                            </svg>
                            <span data-i18n="role.fwdFeature1">Quote management & tracking</span>
                        </div>
                        <div class="mega-feature">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                            </svg>
                            <span data-i18n="role.fwdFeature2">AI-assisted matching insights</span>
                        </div>
                        <div class="mega-feature">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                            </svg>
                            <span data-i18n="role.fwdFeature3">Access to live carrier rates</span>
                        </div>
                        <div class="mega-feature">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                            </svg>
                            <span data-i18n="role.fwdFeature4">Bulk tariff upload via PDF (Premium)</span>
                        </div>
                    </div>
                </div>
                
                <div class="mega-action">
                    <span data-i18n="role.startAsForwarder">Start as Forwarder</span>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/>
                    </svg>
                </div>
            </div>
        </div>
        
        <!-- CLIENT BOX -->
        <div class="mega-role-card client-mega" onclick="goToLogin('client')">
            <div class="mega-card-glow"></div>
            <div class="mega-card-content">
                <div class="mega-icon-wrapper">
                    <div class="mega-icon">
                        <svg width="80" height="80" viewBox="0 0 24 24" fill="white">
                            <path d="M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
                        </svg>
                    </div>
                    <div class="mega-badge client-badge-color">
                        <span class="pulse-dot green"></span>
                        <span data-i18n="role.forwardersCount">1.850+ Forwarder</span>
                    </div>
                </div>
                
                <div class="mega-text-content">
                    <div class="mega-label client-label">CARGO OWNER</div>
                    <h2 class="mega-title" data-i18n="role.imClient">I am a Cargo Owner</h2>
                    <p class="mega-subtitle" data-i18n="role.lookingForForwarders">Looking for Forwarders</p>
                    
                    <div class="mega-description" data-i18n="role.clientDesc">
                        Find verified forwarders matched to your trade lanes and cargo profile.
                    </div>
                    
                    <div class="mega-features">
                        <div class="mega-feature">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                            </svg>
                            <span data-i18n="role.clientFeature1">Verified forwarder matching</span>
                        </div>
                        <div class="mega-feature">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                            </svg>
                            <span data-i18n="role.clientFeature2">AI-assisted matching recommendations</span>
                        </div>
                        <div class="mega-feature">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                            </svg>
                            <span data-i18n="role.clientFeature3">Real-time shipment tracking</span>
                        </div>
                        <div class="mega-feature">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
                            </svg>
                            <span data-i18n="role.clientFeature4">Secure payment & insurance</span>
                        </div>
                    </div>
                </div>
                
                <div class="mega-action client-action">
                    <span data-i18n="role.startAsClient">Start as Cargo Owner</span>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8-8-8z"/>
                    </svg>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- LOGIN -->
<div id="loginPage" class="auth-container hidden">
    <div class="back-link" onclick="goToLanding()" data-i18n="auth.backToHome">â† Back to Home</div>
    <div class="auth-box">
        <h2 id="loginTitle" data-i18n="auth.loginTitle">Sign In to Your Account</h2>
        
        <div class="social-buttons">
            <div class="social-btn" title="Sign in with Google">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
            </div>
            <div class="social-btn apple-btn" title="Sign in with Apple">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                </svg>
            </div>
            <div class="social-btn" title="Sign in with LinkedIn">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path fill="#0A66C2" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
            </div>
        </div>
        
        <div class="divider" data-i18n="auth.orContinueWith">or continue with email</div>
        
        <form onsubmit="return doLogin(event)">
            <div class="form-group">
                <label data-i18n="auth.email">E-posta</label>
                <input type="email" id="emailInput" data-i18n-placeholder="auth.emailPlaceholder" placeholder="Enter your email address" required>
            </div>
            <div class="form-group">
                <label data-i18n="auth.password">Password</label>
                <input type="password" id="passwordInput" data-i18n-placeholder="auth.passwordPlaceholder" placeholder="Enter your password" required>
            </div>
            <div class="remember-row">
                <input type="checkbox" id="rememberMe">
                <label for="rememberMe" data-i18n="auth.rememberMe">Remember me</label>
            </div>
            <button type="submit" class="btn-primary" data-i18n="auth.login">Sign In</button>
        </form>
        <div class="auth-link">
            <span data-i18n="auth.noAccount">Don't have an account?</span> <a onclick="goToSignUp()" data-i18n="auth.signUp">Sign Up</a>
        </div>
    </div>
</div>

<!-- SIGN UP -->
<div id="signUpPage" class="auth-container hidden">
    <div class="back-link" onclick="goToLanding()" data-i18n="auth.backToHome">â† Back to Home</div>
    <div class="auth-box">
        <h2 id="signUpTitle" data-i18n="auth.signupTitle">Create New Account</h2>
        
        <div class="social-buttons">
            <div class="social-btn" title="Sign up with Google">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                    <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                    <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                    <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                </svg>
            </div>
            <div class="social-btn apple-btn" title="Sign up with Apple">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path fill="currentColor" d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/>
                </svg>
            </div>
            <div class="social-btn" title="Sign up with LinkedIn">
                <svg width="24" height="24" viewBox="0 0 24 24">
                    <path fill="#0A66C2" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
            </div>
        </div>
        
        <div class="divider" data-i18n="auth.orSignupWith">or sign up with email</div>
        
        <form onsubmit="return doSignUp(event)">
            <div class="form-group">
                <label data-i18n="auth.fullName">Ad Soyad</label>
                <input type="text" id="nameInput" data-i18n-placeholder="auth.fullNamePlaceholder" placeholder="Enter your name" required>
            </div>
            <div class="form-group">
                <label data-i18n="auth.email">E-posta</label>
                <input type="email" id="signUpEmail" data-i18n-placeholder="auth.emailPlaceholder" placeholder="Enter your email address" required>
            </div>
            <div class="form-group">
                <label data-i18n="auth.password">Password</label>
                <input type="password" id="signUpPassword" data-i18n-placeholder="auth.createPassword" placeholder="Create password" required>
            </div>
            <div class="form-group">
                <label data-i18n="auth.confirmPassword">Confirm Password</label>
                <input type="password" id="confirmPassword" data-i18n-placeholder="auth.confirmPasswordPlaceholder" placeholder="Confirm your password" required>
            </div>
            <div id="forwarderExtra" class="hidden">
                <div class="form-group">
                    <label data-i18n="auth.companyName">Company Name</label>
                    <input type="text" id="companyName" data-i18n-placeholder="auth.companyNamePlaceholder" placeholder="Your company name">
                </div>
                <div class="form-group">
                    <label data-i18n="auth.companyType">Company Type</label>
                    <select id="companyType">
                        <option value="" data-i18n="auth.selectType">Select type</option>
                        <option value="cargo_owner" data-i18n="auth.cargoOwner">Cargo Owner</option>
                        <option value="forwarder" data-i18n="auth.forwarder">Freight Forwarder</option>
                        <option value="air" data-i18n="auth.airCargo">Air Cargo Specialist</option>
                        <option value="sea" data-i18n="auth.seaCargo">Sea Cargo Specialist</option>
                        <option value="land" data-i18n="auth.landCargo">Land Cargo Specialist</option>
                        <option value="multi" data-i18n="auth.multimodal">Multimodal Services</option>
                    </select>
                </div>
            </div>
            
            <!-- YASAL ONAY CHECKBOX'LARI -->
            <div class="legal-agreements" style="margin: 20px 0; padding: 16px; background: #f8fafc; border-radius: 12px; border: 1px solid #e2e8f0;">
                <div class="agreement-item" style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px;">
                    <input type="checkbox" id="termsAccept" required style="margin-top: 3px; width: 18px; height: 18px; cursor: pointer;">
                    <label for="termsAccept" style="font-size: 13px; color: #334155; cursor: pointer;" data-i18n-html="auth.termsAccept">
                        <a onclick="openLegalModal('terms')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Terms of Service</a>'nÄ± ve 
                        <a onclick="openLegalModal('privacy')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Privacy Policy</a> - I have read and accept. <span style="color: #dc2626;">*</span>
                    </label>
                </div>
                <div class="agreement-item" style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px;">
                    <input type="checkbox" id="disclaimerAccept" required style="margin-top: 3px; width: 18px; height: 18px; cursor: pointer;">
                    <label for="disclaimerAccept" style="font-size: 13px; color: #334155; cursor: pointer;" data-i18n-html="auth.disclaimerAccept">
                        <a onclick="openLegalModal('disclaimer')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Disclaimer</a> - I have read and acknowledge that the platform is only an intermediary and does not assume transportation responsibility. <span style="color: #dc2626;">*</span>
                    </label>
                </div>
                <div class="agreement-item" style="display: flex; align-items: flex-start; gap: 10px; margin-bottom: 12px;">
                    <input type="checkbox" id="kvkkAccept" required style="margin-top: 3px; width: 18px; height: 18px; cursor: pointer;">
                    <label for="kvkkAccept" style="font-size: 13px; color: #334155; cursor: pointer;" data-i18n-html="auth.kvkkAccept">
                        <a onclick="openLegalModal('kvkk')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Data Protection Notice</a> - I have read and consent to the processing of my personal data. <span style="color: #dc2626;">*</span>
                    </label>
                </div>
                <div class="agreement-item" style="display: flex; align-items: flex-start; gap: 10px;">
                    <input type="checkbox" id="marketingAccept" style="margin-top: 3px; width: 18px; height: 18px; cursor: pointer;">
                    <label for="marketingAccept" style="font-size: 13px; color: #64748b; cursor: pointer;" data-i18n="auth.marketingAccept">
                        I want to receive electronic messages for campaigns, announcements and marketing purposes. (Optional)
                    </label>
                </div>
            </div>
            
            <button type="submit" id="signUpButton" class="btn-primary" disabled style="opacity: 0.5; cursor: not-allowed;" data-i18n="auth.createAccount">Create Account</button>
        </form>
        <script>
        // Sign Up button validation
        document.addEventListener('DOMContentLoaded', function() {
            var termsCheck = document.getElementById('termsAccept');
            var disclaimerCheck = document.getElementById('disclaimerAccept');
            var kvkkCheck = document.getElementById('kvkkAccept');
            var signUpBtn = document.getElementById('signUpButton');
            
            function validateSignUpForm() {
                if (termsCheck && disclaimerCheck && kvkkCheck && signUpBtn) {
                    if (termsCheck.checked && disclaimerCheck.checked && kvkkCheck.checked) {
                        signUpBtn.disabled = false;
                        signUpBtn.style.opacity = '1';
                        signUpBtn.style.cursor = 'pointer';
                    } else {
                        signUpBtn.disabled = true;
                        signUpBtn.style.opacity = '0.5';
                        signUpBtn.style.cursor = 'not-allowed';
                    }
                }
            }
            
            if (termsCheck) termsCheck.addEventListener('change', validateSignUpForm);
            if (disclaimerCheck) disclaimerCheck.addEventListener('change', validateSignUpForm);
            if (kvkkCheck) kvkkCheck.addEventListener('change', validateSignUpForm);
        });
        </script>
        <div class="auth-link">
            Already have an account? <a onclick="goToLoginFromSignUp()">Sign In</a>
        </div>
    </div>
</div>

<!-- LEGAL DOCUMENTS MODAL -->
<div id="legalModal" class="legal-modal-overlay" onclick="closeLegalModal(event)">
    <div class="legal-modal-content" onclick="event.stopPropagation()">
        <div class="legal-modal-header">
            <h2 id="legalModalTitle">Legal Document</h2>
            <button class="legal-modal-close" onclick="closeLegalModal()">&times;</button>
        </div>
        <div id="legalModalContent" class="legal-modal-body">
            <!-- Content will be loaded dynamically -->
        </div>
        <div class="legal-modal-footer">
            <span data-i18n="legal.lastUpdate">Last update: December 21, 2025</span>
            <button onclick="closeLegalModal()" class="btn-legal-close" data-i18n="legal.understood">Understood, Close</button>
        </div>
    </div>
</div>

<style>
/* LEGAL MODAL STYLES */
.legal-modal-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.7);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    padding: 20px;
    backdrop-filter: blur(4px);
}

.legal-modal-overlay.active {
    display: flex;
}

.legal-modal-content {
    background: white;
    border-radius: 16px;
    max-width: 800px;
    width: 100%;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
    animation: legalModalIn 0.3s ease;
}

@keyframes legalModalIn {
    from {
        opacity: 0;
        transform: scale(0.95) translateY(-20px);
    }
    to {
        opacity: 1;
        transform: scale(1) translateY(0);
    }
}

.legal-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    border-bottom: 1px solid #e2e8f0;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    border-radius: 16px 16px 0 0;
}

.legal-modal-header h2 {
    margin: 0;
    font-size: 18px;
    color: white;
    font-weight: 600;
}

.legal-modal-close {
    background: rgba(255,255,255,0.2);
    border: none;
    font-size: 24px;
    cursor: pointer;
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
}

.legal-modal-close:hover {
    background: rgba(255,255,255,0.3);
}

.legal-modal-body {
    padding: 24px;
    overflow-y: auto;
    flex: 1;
    line-height: 1.8;
    color: #334155;
    font-size: 14px;
}

.legal-modal-body h3 {
    color: #1e3c72;
    font-size: 16px;
    margin-top: 24px;
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 2px solid #e2e8f0;
}

.legal-modal-body h3:first-child {
    margin-top: 0;
}

.legal-modal-body p {
    margin-bottom: 12px;
}

.legal-modal-body ul {
    margin: 12px 0 12px 20px;
}

.legal-modal-body li {
    margin-bottom: 6px;
}

.legal-modal-footer {
    padding: 16px 24px;
    border-top: 1px solid #e2e8f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #f8fafc;
    border-radius: 0 0 16px 16px;
}

.legal-modal-footer span {
    font-size: 12px;
    color: #64748b;
}

.btn-legal-close {
    padding: 10px 24px;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14px;
    transition: all 0.2s;
}

.btn-legal-close:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(30, 60, 114, 0.3);
}

@media (max-width: 768px) {
    .legal-modal-content {
        max-height: 95vh;
        margin: 10px;
    }
    
    .legal-modal-body {
        padding: 16px;
    }
}
</style>

<!-- CLIENT DASHBOARD -->
<div id="clientDashboard" class="dashboard-container hidden">
    <div class="dashboard-nav enterprise-nav">
        <!-- Ãœst SatÄ±r: Logo ve User -->
        <div class="nav-top-row">
            <div class="nav-brand" onclick="goToLanding()" style="cursor:pointer;" title="Back to Role Selection">
                <div class="nav-brand-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                </div>
                <div class="nav-brand-text">
                    <span class="nav-brand-name">Global Freight Network</span>
                    <span class="nav-brand-tagline">Enterprise Logistics Platform</span>
                </div>
            </div>
            <div class="nav-user-section">
                <div class="nav-user-info">
                    <div class="nav-user-avatar client-avatar" id="clientAvatarInitial">CL</div>
                    <div class="nav-user-details">
                        <span class="nav-user-name" id="clientNameDisplay">User</span>
                        <span class="nav-user-role">Cargo Owner</span>
                    </div>
                </div>
                <button class="btn-logout" onclick="doLogout()" data-i18n="dashboard.logout">Logout</button>
            </div>
        </div>
        <!-- Alt SatÄ±r: MenÃ¼ -->
        <div class="nav-menu-row">
            <div class="nav-menu">
                <div class="nav-menu-item" data-tab="home" onclick="goToLanding()">
                    <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                    <span data-i18n="menu.home">Home</span>
                </div>
                <div class="nav-menu-item active" data-tab="newQuote" onclick="showClientTab('newQuote')">
                    <svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                    <span data-i18n="menu.createRequest">Request Quote</span>
                </div>
                <div class="nav-menu-item" data-tab="myRequests" onclick="showClientTab('myRequests')">
                    <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                    <span data-i18n="menu.myRequests">My RFQs</span>
                </div>
                <div class="nav-menu-item" data-tab="myQuotes" onclick="showClientTab('myQuotes')">
                    <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
                    <span data-i18n="menu.receivedQuotes">Received Quotes</span>
                    <span class="menu-badge rfq-badge" id="quotesBadge" style="display:none;">0</span>
                </div>
                <div class="nav-menu-item" data-tab="shipments" onclick="showClientTab('shipments')">
                    <svg viewBox="0 0 24 24"><path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                    <span data-i18n="menu.myShipments">My Shipments</span>
                </div>
                <div class="nav-menu-item" data-tab="profile" onclick="showClientTab('profile')">
                    <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                    <span data-i18n="menu.profile">Profile</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- BÄ°LDÄ°RÄ°M DROPDOWN -->
    <div id="notificationDropdown" class="notification-dropdown hidden">
        <div class="notif-header">
            <h4 data-i18n="notifications.title">Notifications</h4>
            <button onclick="markAllRead()" data-i18n="notifications.markAllRead">Mark all as read</button>
        </div>
        <div class="notif-list" id="notifList">
            <div class="notif-item unread">
                <div class="notif-icon success"></div>
                <div class="notif-content">
                    <p><strong data-i18n="notifications.newQuote">New quote!</strong> <span data-i18n="notifications.quoteResponse">ABC Logistics sent a commercial quote</span></p>
                    <span class="notif-time">5 min ago</span>
                </div>
            </div>
            <div class="notif-item unread">
                <div class="notif-icon info"></div>
                <div class="notif-content">
                    <p><strong data-i18n="notifications.shipmentUpdated">Shipment updated!</strong> <span>GFN-2024-78542 arrived in Hamburg</span></p>
                    <span class="notif-time">1 hour ago</span>
                </div>
            </div>
            <div class="notif-item unread">
                <div class="notif-icon success"></div>
                <div class="notif-content">
                    <p><strong>2 new quotes!</strong> For your Istanbul â†’ Rotterdam request</p>
                    <span class="notif-time">3 hours ago</span>
                </div>
            </div>
            <div class="notif-item">
                <div class="notif-icon warning"></div>
                <div class="notif-content">
                    <p><strong>Document uploaded:</strong> Bill of Lading ready</p>
                    <span class="notif-time">1 day ago</span>
                </div>
            </div>
            <div class="notif-item">
                <div class="notif-icon info"></div>
                <div class="notif-content">
                    <p><strong>New message:</strong> You have a message from XYZ Shipping</p>
                    <span class="notif-time">2 days ago</span>
                </div>
            </div>
        </div>
        <div class="notif-footer">
            <a onclick="showClientTab('notifications')">See all notifications â†’</a>
        </div>
    </div>
    
    <div class="dashboard-content">
        <div class="welcome-box">
            <div class="welcome-content">
                <div class="welcome-left">
                    <h2>Welcome, <span id="clientWelcomeName">User</span>!</h2>
                    <p>Connect with verified freight forwarders and manage your shipments securely.</p>
                </div>
            </div>
        </div>
        
        <div class="quote-box">
            <div class="quote-box-header">
                <button class="btn-back-form" onclick="goHome()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/></svg>
                    Back to Home
                </button>
            </div>
            <h3>Request Quote</h3>
            
            <form onsubmit="submitQuote(event); return false;">
                <!-- FREIGHT TYPE -->
                <div class="section-label">Transport Type</div>
                <div class="freight-options">
                    <div class="freight-opt" id="opt-air" onclick="pickFreight('air')">
                        <strong>Air</strong>
                        <span>2-5 days</span>
                    </div>
                    <div class="freight-opt active" id="opt-sea" onclick="pickFreight('sea')">
                        <strong>Sea</strong>
                        <span>20-40 days</span>
                    </div>
                </div>
                <input type="hidden" id="freightType" value="sea">
                
                <!-- SHIPMENT MODE (Changes based on freight type) -->
                <div class="section-label">Shipment Mode</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Cargo Type</label>
                        <select id="loadType" required onchange="updateContainerOptions()">
                            <!-- Options populated by JS based on freight type -->
                        </select>
                    </div>
                    <div class="form-group" id="containerGroup">
                        <label id="containerLabel">Konteyner Boyutu</label>
                        <select id="containerSize">
                            <!-- Options populated by JS -->
                        </select>
                    </div>
                </div>

                <!-- AIR CARGO SPECIFIC FIELDS -->
                <div id="airCargoFields" class="freight-specific-fields" style="display: none;">
                    <div class="section-label">Air Cargo Details</div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Dangerous Goods (DG)</label>
                            <select id="airDangerous">
                                <option value="no">No</option>
                                <option value="yes">Yes - DG Certificate Available</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Special Requirements</label>
                            <select id="airSpecial">
                                <option value="none">None</option>
                                <option value="temp">Temperature Controlled</option>
                                <option value="live">Live Animals</option>
                                <option value="valuable">Valuable Cargo</option>
                                <option value="perishable">Perishable Goods</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- INCOTERMS / DELIVERY TERMS -->
                <div class="section-label">Delivery Terms (Incoterms)</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Incoterm</label>
                        <select id="incoterm" required onchange="updateLocationRequirements()">
                            <option value="">Select delivery term</option>
                            <optgroup label="Door to Door">
                                <option value="DDP">DDP - Door to Door (All inclusive)</option>
                                <option value="DAP">DAP - Door to Door (Taxes excluded)</option>
                            </optgroup>
                            <optgroup label="Port/Terminal">
                                <option value="CIF">CIF - Port to Port (Insurance included)</option>
                                <option value="CFR">CFR - Port to Port (Freight only)</option>
                                <option value="FOB">FOB - Free on Board (Loading port)</option>
                                <option value="FCA">FCA - Free Carrier (Starting point)</option>
                            </optgroup>
                            <optgroup label="Starting Point">
                                <option value="EXW">EXW - Ex Works (Pickup from seller)</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Service Level</label>
                        <select id="serviceLevel">
                            <option value="standard">Standard</option>
                            <option value="express">Express (Priority)</option>
                            <option value="economy">Economy (Cost saving)</option>
                        </select>
                    </div>
                </div>
                
                <!-- ORIGIN -->
                <div class="section-label">Origin Point</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Country</label>
                        <input type="text" id="originCountry" placeholder="e.g. Turkey" required>
                    </div>
                    <div class="form-group">
                        <label id="originCityLabel">City / Port</label>
                        <input type="text" id="originCity" placeholder="e.g. Istanbul" required>
                    </div>
                </div>
                <div class="form-row" id="originAddressRow" style="display: none;">
                    <div class="form-group" style="grid-column: 1 / -1;">
                        <label>Pickup Address (For door service)</label>
                        <input type="text" id="originAddress" placeholder="Full address for pickup">
                    </div>
                </div>
                
                <!-- DESTINATION -->
                <div class="section-label">Destination Point</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Country</label>
                        <input type="text" id="destCountry" placeholder="e.g. Germany" required>
                    </div>
                    <div class="form-group">
                        <label id="destCityLabel">City / Port</label>
                        <input type="text" id="destCity" placeholder="e.g. Hamburg" required>
                    </div>
                </div>
                <div class="form-row" id="destAddressRow" style="display: none;">
                    <div class="form-group" style="grid-column: 1 / -1;">
                        <label>Delivery Address (For door service)</label>
                        <input type="text" id="destAddress" placeholder="Full address for delivery">
                    </div>
                </div>
                
                <!-- CARGO DETAILS -->
                <div class="section-label">Cargo Details</div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Cargo Category</label>
                        <select id="cargoCategory" required onchange="updateCargoTypes()">
                            <option value="">Select category</option>
                            <option value="general">General Cargo</option>
                            <option value="fragile">Fragile / High Value</option>
                            <option value="perishable">ğŸ§Š Perishable / Cold Chain</option>
                            <option value="hazardous">â˜¢ï¸ Dangerous Goods</option>
                            <option value="oversized">Oversized / Heavy Cargo</option>
                            <option value="vehicles">ğŸš— Vehicles / Machinery</option>
                            <option value="livestock">ğŸ„ Live Animals</option>
                            <option value="personal">ğŸ  Personal Items / Household Goods</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Cargo Type</label>
                        <select id="cargoType" required>
                            <option value="">Select category first</option>
                        </select>
                    </div>
                </div>
                
                <!-- DIMENSIONS -->
                <div class="form-row">
                    <div class="form-group">
                        <label>Total Weight (kg)</label>
                        <input type="number" id="weight" placeholder="e.g. 1000" required>
                    </div>
                    <div class="form-group">
                        <label>Total Volume (mÂ³)</label>
                        <input type="number" step="0.01" id="volume" placeholder="e.g. 2.5" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Number of Pieces</label>
                        <input type="number" id="packages" placeholder="e.g. 10" value="1">
                    </div>
                    <div class="form-group">
                        <label>Loading Date</label>
                        <input type="date" id="shipDate" required>
                    </div>
                </div>

                <!-- SPECIAL REQUIREMENTS (shown based on cargo type) -->
                <div id="specialRequirements" style="display: none;">
                    <div class="section-label">Special Requirements</div>
                    <div class="form-row" id="tempControlRow" style="display: none;">
                        <div class="form-group">
                            <label>Temperature (Â°C)</label>
                            <select id="tempControl">
                                <option value="frozen">Frozen (-18Â°C to -25Â°C)</option>
                                <option value="chilled">Chilled (0Â°C to 4Â°C)</option>
                                <option value="cool">Cool (8Â°C to 15Â°C)</option>
                                <option value="controlled">Controlled (15Â°C to 25Â°C)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Humidity Control</label>
                            <select id="humidityControl">
                                <option value="no">Not Required</option>
                                <option value="yes">Required</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row" id="hazmatRow" style="display: none;">
                        <div class="form-group">
                            <label>IMO Class</label>
                            <select id="imoClass">
                                <option value="1">Class 1 - Explosives</option>
                                <option value="2">Class 2 - Gases</option>
                                <option value="3">Class 3 - Flammable Liquids</option>
                                <option value="4">Class 4 - Flammable Solids</option>
                                <option value="5">Class 5 - Oxidizers</option>
                                <option value="6">Class 6 - Toxic Substances</option>
                                <option value="7">Class 7 - Radioactive</option>
                                <option value="8">Class 8 - Corrosives</option>
                                <option value="9">Class 9 - Misc Dangerous</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>UN Number</label>
                            <input type="text" id="unNumber" placeholder="e.g. UN1234">
                        </div>
                    </div>
                    <div class="form-row" id="oversizedRow" style="display: none;">
                        <div class="form-group">
                            <label>Max Length (cm)</label>
                            <input type="number" id="maxLength" placeholder="e.g. 600">
                        </div>
                        <div class="form-group">
                            <label>Max Width (cm)</label>
                            <input type="number" id="maxWidth" placeholder="e.g. 240">
                        </div>
                    </div>
                </div>

                <!-- ADDITIONAL SERVICES REMOVED -->
                
                <div class="form-group">
                    <label>Notes (Optional)</label>
                    <textarea id="notes" rows="3" placeholder="Special requirements, shipping instructions or additional information..."></textarea>
                </div>
                
                <button type="submit" class="btn-submit">Request Introduction â†’</button>
            </form>
        </div>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             MY REQUESTS TAB
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="clientMyRequestsTab" class="client-tab-content hidden">
            <div class="section-header">
                <div class="section-header-with-back">
                    <button class="back-btn" onclick="showClientTab('newQuote')">â† Home</button>
                    <div>
                        <h2>My Requests</h2>
                        <p>Your shipping requests and received quotes</p>
                    </div>
                </div>
            </div>
            
            <div class="my-requests-section" id="clientRequestsContainer">
                <!-- Requests will be loaded dynamically from Supabase -->
                <div class="empty-state" style="text-align: center; padding: 60px 20px;">
                    <div style="width: 80px; height: 80px; background: #f1f5f9; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                            <polyline points="14 2 14 8 20 8"/>
                            <line x1="16" y1="13" x2="8" y2="13"/>
                            <line x1="16" y1="17" x2="8" y2="17"/>
                        </svg>
                    </div>
                    <h3 style="color: #334155; margin: 0 0 12px;">No Requests Yet</h3>
                    <p style="color: #64748b; margin: 0;">Create a quote request to get started.</p>
                </div>
            </div>
        </div>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              MESSAGES TAB
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="clientMessagesTab" class="client-tab-content hidden">
            <div class="section-header">
                <div class="section-header-with-back">
                    <button class="back-btn" onclick="showClientTab('newQuote')">â† Home</button>
                    <div>
                        <h2>Messages</h2>
                        <p>Communicate with your forwarder after accepting a quote</p>
                    </div>
                </div>
            </div>
            
            <!-- Empty State - Shown when no accepted quotes -->
            <div id="messagesEmptyState" class="messages-empty-state" style="display: block;">
                <div style="text-align: center; padding: 60px 20px; background: white; border-radius: 16px; border: 2px dashed #e2e8f0;">
                    <div style="width: 80px; height: 80px; background: #f1f5f9; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5">
                            <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"/>
                        </svg>
                    </div>
                    <h3 style="color: #334155; margin: 0 0 12px; font-size: 20px;">No active conversations</h3>
                    <p style="color: #64748b; margin: 0 0 24px; max-width: 400px; margin-left: auto; margin-right: auto;">
                        Messages become available after you accept a quote from a forwarder. Once accepted, you can communicate directly to finalize shipment details.
                    </p>
                    <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                        <button onclick="showClientTab('myQuotes')" style="padding: 12px 24px; background: #1e40af; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">
                            View Received Quotes
                        </button>
                        <button onclick="showClientTab('myRequests')" style="padding: 12px 24px; background: white; color: #1e40af; border: 2px solid #1e40af; border-radius: 8px; cursor: pointer; font-weight: 500;">
                            Check My Requests
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Active Conversations - Shown only when there are accepted quotes -->
            <div id="messagesActiveState" class="messages-container" style="display: none;">
                <div class="conversations-list">
                    <div class="conversations-header">
                        <h3>Conversations</h3>
                    </div>
                    <div id="conversationsList">
                        <!-- Conversations will be dynamically populated based on accepted quotes -->
                    </div>
                </div>
                
                <div class="chat-window">
                    <div class="chat-header" id="chatHeader">
                        <div class="chat-header-info">
                            <div class="conv-avatar" id="activeChatAvatar">--</div>
                            <div>
                                <h3 id="activeChatName">Select a conversation</h3>
                                <span id="activeChatContext">Choose from the list on the left</span>
                            </div>
                        </div>
                        <button class="btn-chat" onclick="viewOfferDetails('offer1')" id="viewQuoteBtn" style="display: none;">View Quote</button>
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div style="text-align: center; padding: 40px; color: #94a3b8;">
                            <p>Select a conversation to view messages</p>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chatInput" placeholder="Type your message..." onkeypress="handleChatKeypress(event)">
                        <button onclick="sendMessage()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             GÃ–NDERÄ°LERÄ°M SEKMESÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="clientShipmentsTab" class="client-tab-content hidden">
            <div class="section-header">
                <div class="section-header-with-back">
                    <button class="back-btn" onclick="showClientTab('newQuote')">â† Home</button>
                    <div>
                        <h2>My Shipments</h2>
                        <p>Track your active and completed shipments</p>
                    </div>
                </div>
            </div>
            
            <!-- Shipments List - Data from Forwarder via Supabase -->
            <div id="clientShipmentsList">
                <!-- Shipments will be dynamically loaded here -->
                
                <!-- Empty State - shown when no shipments -->
                <div id="noClientShipmentsMessage">
                    <div class="empty-state">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/>
                        </svg>
                        <h3>No Active Shipments</h3>
                        <p>When you accept a quote from a forwarder, your shipment will appear here.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             BELGELERÄ°M SEKMESÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="clientDocumentsTab" class="client-tab-content hidden">
            <div class="section-header">
                <div class="section-header-with-back">
                    <button class="back-btn" id="documentsBackBtn" onclick="goBackFromDocuments()">â† Home</button>
                    <div>
                        <h2>My Documents</h2>
                        <p>View shipment documents and contracts</p>
                    </div>
                </div>
            </div>
            
            <div class="upload-zone" onclick="document.getElementById('fileUpload').click()">
                <div class="upload-zone-icon"><svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg></div>
                <h4>Upload Document</h4>
                <p>Drag file or click to select</p>
                <input type="file" id="fileUpload" style="display: none;" multiple onchange="handleFileUpload(event)">
            </div>
            
            <!-- AI DÃ–KÃœMAN ANALÄ°ZÄ° -->
            <div class="ai-document-analysis">
                <div class="ai-doc-header">
                    <div class="ai-badge-animated">
                        <span class="ai-pulse"><svg viewBox="0 0 24 24"><path d="M7.5 5.6L10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.996.996 0 0 0-1.41 0L1.29 18.96a.996.996 0 0 0 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05a.996.996 0 0 0 0-1.41l-2.33-2.35zm-1.03 5.49l-2.12-2.12 2.44-2.44 2.12 2.12-2.44 2.44z"/></svg></span>
                        <span>AI Document Analysis</span>
                    </div>
                    <span class="ai-doc-status">Last analysis: 2 minutes ago</span>
                </div>
                
                <!-- Latest Uploaded Document Analysis -->
                <div class="ai-doc-result">
                    <div class="doc-scan-header">
                        <div class="doc-scan-icon"></div>
                        <div class="doc-scan-info">
                            <h4>Commercial_Invoice_2024.pdf</h4>
                            <span class="scan-status success">Analysis Complete</span>
                        </div>
                    </div>
                    
                    <div class="ai-extracted-data">
                        <h5>Auto-Extracted Data (OCR)</h5>
                        <div class="extracted-grid">
                            <div class="extracted-item">
                                <label>Document Type</label>
                                <span>Commercial Invoice</span>
                            </div>
                            <div class="extracted-item">
                                <label>Seller</label>
                                <span>ABC Textiles Ltd.</span>
                            </div>
                            <div class="extracted-item">
                                <label>Buyer</label>
                                <span>XYZ GmbH, Hamburg</span>
                            </div>
                            <div class="extracted-item">
                                <label>Fatura No</label>
                                <span>INV-2024-4521</span>
                            </div>
                            <div class="extracted-item">
                                <label>Date</label>
                                <span>1December 5, 2025</span>
                            </div>
                            <div class="extracted-item">
                                <label>Amount</label>
                                <span>$48,500.00</span>
                            </div>
                            <div class="extracted-item">
                                <label>HS Kodu</label>
                                <span>6109.10.00</span>
                            </div>
                            <div class="extracted-item">
                                <label>Product</label>
                                <span>Cotton T-Shirt (2,450 adet)</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ai-doc-warnings">
                        <h5>AI Warnings & Recommendations</h5>
                        <div class="doc-warning-item error">
                            <span class="warning-badge"> HATA</span>
                            <div class="warning-detail">
                                <strong>Invoice date mismatch:</strong> Invoice dated December 15 but shipments started December 10. Risk of customs rejection.
                                <button class="btn-fix">Fix</button>
                            </div>
                        </div>
                        <div class="doc-warning-item warning">
                            <span class="warning-badge">UYARI</span>
                            <div class="warning-detail">
                                <strong>HS code verification:</strong> 6109.10.00 (T-shirt) EU customs duty 12%. Reduced to 0% with EUR.1 certificate.
                            </div>
                        </div>
                        <div class="doc-warning-item info">
                            <span class="warning-badge">INFO</span>
                            <div class="warning-detail">
                                <strong>Inconsistency:</strong> Packing list shows 2,500 units, invoice shows 2,450 units. Please verify.
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Missing Documents -->
                <div class="ai-missing-docs" style="background: #ffffff; border: 1px solid #e2e8f0;">
                    <h5 style="color: #475569;">Required Documents for Customs</h5>
                    <div class="doc-checklist">
                        <div class="checklist-item completed">
                            <span class="check-icon" style="color:#10b981;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></span>
                            <span class="check-label" style="color:#334155;">Commercial Invoice</span>
                            <span class="check-status" style="color:#10b981; font-weight:500;">Uploaded</span>
                        </div>
                        <div class="checklist-item completed">
                            <span class="check-icon" style="color:#10b981;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></span>
                            <span class="check-label" style="color:#334155;">Packing List</span>
                            <span class="check-status" style="color:#10b981; font-weight:500;">Uploaded</span>
                        </div>
                        <div class="checklist-item completed">
                            <span class="check-icon" style="color:#10b981;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="20 6 9 17 4 12"/></svg></span>
                            <span class="check-label" style="color:#334155;">Bill of Lading</span>
                            <span class="check-status" style="color:#10b981; font-weight:500;">Uploaded</span>
                        </div>
                        <div class="checklist-item missing" style="background: #fef2f2; border: 1px solid #fee2e2;">
                            <span class="check-icon" style="color:#ef4444;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></span>
                            <span class="check-label" style="color:#991b1b; font-weight:500;">EUR.1 Certificate of Origin</span>
                            <span class="check-status urgent" style="color:#ef4444; font-weight:700;">Missing - Duty Risk!</span>
                        </div>
                        <div class="checklist-item missing">
                            <span class="check-icon" style="color:#94a3b8;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg></span>
                            <span class="check-label" style="color:#64748b;">Insurance Certificate</span>
                            <span class="check-status" style="color:#64748b;">Pending</span>
                        </div>
                    </div>
                    <div class="missing-docs-action" style="background: #fffbeb; border: 1px solid #fcd34d;">
                        <p style="color: #b45309;"><strong>Warning:</strong> Without EUR.1 certificate, applicable customs duty is estimated at <strong>$5,820</strong> for export to EU.</p>
                        <button class="btn-request-doc" onclick="requestMissingDoc('eur1')">Request EUR.1 from Broker</button>
                    </div>
                </div>
            </div>
            
            <div class="documents-section">
                <h3 style="margin-bottom: 16px; color: #1e293b;">Documents for GFN-2024-78542</h3>
                <div class="documents-grid">
                    <div class="document-card">
                        <div class="doc-icon pdf"></div>
                        <h4>Bill of Lading</h4>
                        <p>Bill of Lading - Original</p>
                        <div class="doc-meta">
                            <span class="doc-size">245 KB</span>
                            <div class="doc-actions">
                                <button class="doc-btn view" onclick="viewDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                                <button class="doc-btn download" onclick="downloadDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                </button>                            </div>
                        </div>
                    </div>
                    <div class="document-card">
                        <div class="doc-icon pdf"></div>
                        <h4>Commercial Invoice</h4>
                        <p>Commercial Invoice</p>
                        <div class="doc-meta">
                            <span class="doc-size">128 KB</span>
                            <div class="doc-actions">
                                <button class="doc-btn view" onclick="viewDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                                <button class="doc-btn download" onclick="downloadDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                </button>                            </div>
                        </div>
                    </div>
                    <div class="document-card">
                        <div class="doc-icon excel"></div>
                        <h4>Packing List</h4>
                        <p>Packing List</p>
                        <div class="doc-meta">
                            <span class="doc-size">86 KB</span>
                            <div class="doc-actions">
                                <button class="doc-btn view" onclick="viewDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                                <button class="doc-btn download" onclick="downloadDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                </button>                            </div>
                        </div>
                    </div>
                    <div class="document-card">
                        <div class="doc-icon pdf"></div>
                        <h4>Certificate of Origin</h4>
                        <p>EUR.1 Certificate of Origin</p>
                        <div class="doc-meta">
                            <span class="doc-size">312 KB</span>
                            <div class="doc-actions">
                                <button class="doc-btn view" onclick="viewDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                                <button class="doc-btn download" onclick="downloadDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                </button>                            </div>
                        </div>
                    </div>
                    <div class="document-card">
                        <div class="doc-icon pdf"></div>
                        <h4>Insurance Certificate</h4>
                        <p>Insurance Policy</p>
                        <div class="doc-meta">
                            <span class="doc-size">198 KB</span>
                            <div class="doc-actions">
                                <button class="doc-btn view" onclick="viewDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                                <button class="doc-btn download" onclick="downloadDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                </button>                            </div>
                        </div>
                    </div>
                    <div class="document-card">
                        <div class="doc-icon word"></div>
                        <h4>Shipping Instructions</h4>
                        <p>Shipping Instructions</p>
                        <div class="doc-meta">
                            <span class="doc-size">54 KB</span>
                            <div class="doc-actions">
                                <button class="doc-btn view" onclick="viewDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>
                                </button>
                                <button class="doc-btn download" onclick="downloadDocument('bl')" style="display:flex; align-items:center; justify-content:center;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                                </button>                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- GELEN TEKLÄ°FLER SEKMESÄ° -->
        <div id="clientMyQuotesTab" class="client-tab-content hidden">
            <div class="section-header">
                <div class="section-header-with-back">
                    <button class="back-btn" onclick="showClientTab('newQuote')">â† Home</button>
                    <div>
                        <h2>Received Quotes</h2>
                        <p>Review and accept commercial quotes from forwarders</p>
                    </div>
                </div>
            </div>
            
            <div id="clientQuotesList" class="quotes-list">
                <div class="empty-state">
                    <div class="empty-icon"></div>
                    <p>No quotes received yet</p>
                    <p style="font-size:14px;color:#94a3b8;">When you create shipping requests, you will receive quotes from matched forwarders</p>
                </div>
            </div>
        </div>
        
        <!-- PROFÄ°L / Ä°LETÄ°ÅÄ°M BÄ°LGÄ°LERÄ° SEKMESÄ° -->
        <div id="clientProfileTab" class="client-tab-content hidden">
            <div class="section-header">
                <div class="section-header-with-back">
                    <button class="back-btn" onclick="showClientTab('newQuote')" data-i18n="common.backHome">â† Home</button>
                    <div>
                        <h2 data-i18n="profile.myProfileTitle"> My Profile & Contact Info</h2>
                        <p data-i18n="profile.clientProfileDesc">Update your contact information - When a quote is accepted, the forwarder can access this information</p>
                    </div>
                </div>
            </div>
            
            <div class="contact-form-section">
                <div class="contact-form-header">
                    <h3 data-i18n="profile.companyContactInfo">Company & Contact Information</h3>
                    <span id="clientProfileStatus" class="edit-badge" data-i18n="profile.editing">Editing</span>
                </div>
                
                <form id="clientContactForm" onsubmit="return saveClientContact(event)">
                    <div class="contact-form-grid">
                        <div class="form-group">
                            <label><span data-i18n="profile.companyName">Company Name</span> *</label>
                            <input type="text" id="clientCompanyName" placeholder="e.g. ABC Textiles Inc." required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.contactPerson">Contact Person</span> *</label>
                            <input type="text" id="clientContactPerson" placeholder="e.g. John Smith" required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.email">Email</span> *</label>
                            <input type="email" id="clientEmail" placeholder="e.g. info@company.com" required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.phone">Phone</span> *</label>
                            <input type="tel" id="clientPhone" placeholder="e.g. +1 555 123 4567" required>
                        </div>
                        <div class="form-group full-width">
                            <label><span data-i18n="profile.address">Address</span> *</label>
                            <input type="text" id="clientAddress" placeholder="e.g. 123 Industrial Street" required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.city">City</span> *</label>
                            <input type="text" id="clientCity" placeholder="e.g. New York" required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.country">Country</span> *</label>
                            <select id="clientCountrySelect" onchange="updateClientDocRequirements()" required>
                                <optgroup label="Avrupa BirliÄŸi">
                                    <option value="DE">DE - Germany</option>
                                    <option value="FR">FR - Fransa</option>
                                    <option value="IT">IT - Ä°talya</option>
                                    <option value="ES">ES - Ä°spanya</option>
                                    <option value="NL">NL - Hollanda</option>
                                    <option value="BE">BE - BelÃ§ika</option>
                                    <option value="PL">PL - Polonya</option>
                                    <option value="AT">AT - Avusturya</option>
                                    <option value="GR">GR - Greece</option>
                                </optgroup>
                                <optgroup label="DiÄŸer Avrupa">
                                    <option value="GB">GB - Ä°ngiltere</option>
                                    <option value="CH">CH - Ä°sviÃ§re</option>
                                    <option value="TR" selected>TR - Turkey</option>
                                </optgroup>
                                <optgroup label="Asya & Pasifik">
                                    <option value="CN">CN - Ã‡in</option>
                                    <option value="IN">IN - Hindistan</option>
                                    <option value="SG">SG - Singapur</option>
                                </optgroup>
                                <optgroup label="Amerika">
                                    <option value="US">US - ABD</option>
                                </optgroup>
                                <optgroup label="Orta DoÄŸu">
                                    <option value="AE">AE - BAE</option>
                                    <option value="SA">SA - Suudi Arabistan</option>
                                </optgroup>
                                <option value="OTHER">-- Other Countries</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Tax ID</label>
                            <input type="text" id="clientTaxNumber" placeholder="e.g. 1234567890">
                        </div>
                        <div class="form-group">
                            <label>Website</label>
                            <input type="text" id="clientWebsite" placeholder="e.g. www.company.com">
                        </div>
                    </div>
                    
                    <!-- ÃœLKE BAZLI DOÄRULAMA BELGELERÄ° BÃ–LÃœMÃœ -->
                    <div class="verification-docs-section" style="margin-top: 30px; padding-top: 24px; border-top: 2px solid #e2e8f0;">
                        <h4 style="margin-bottom: 16px; color: #1e293b; display: flex; align-items: center; gap: 8px;">
                            <span style="width: 24px; height: 24px; background: #10b981; border-radius: 6px; display: inline-flex; align-items: center; justify-content: center;"><svg width="14" height="14" viewBox="0 0 24 24" fill="white"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></span>
                            <span data-i18n="docs.verificationTitle">Verification Documents</span>
                            <button type="button" class="btn-info-small" onclick="showVerificationInfo('client')" style="background: #cbd5e1; border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer; font-size: 12px;">?</button>
                        </h4>
                        <p style="font-size: 13px; color: #64748b; margin-bottom: 16px;" id="clientDocDescription" data-i18n="docs.uploadDesc">
                            Upload your documents to get "Verified" badge and gain customer trust.
                        </p>
                        
                        <!-- Dynamic Country-Based Documents -->
                        <div id="clientRequiredDocs" class="verification-docs-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
                            <!-- Documents will be loaded dynamically via JavaScript -->
                        </div>
                        
                        <!-- International/Optional Documents -->
                        <h5 style="margin: 20px 0 12px 0; color: #475569; font-size: 14px;">Optional Documents (Increases Trust Score)</h5>
                        <div class="verification-docs-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                            <div class="doc-upload-item" style="background: #f8fafc; border: 2px dashed #e2e8f0; border-radius: 12px; padding: 14px; text-align: center;">
                                <div style="margin-bottom: 6px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#1e3c72" stroke-width="2"><circle cx="12" cy="8" r="6"/><path d="M12 14l-3 8h6l-3-8z"/></svg></div>
                                <strong style="display: block; font-size: 12px; color: #1e293b;">ISO 9001</strong>
                                <span style="font-size: 10px; color: #64748b;">+15 points</span>
                                <input type="file" id="clientDocISO9001" style="display: none;" accept=".pdf,.jpg,.png">
                                <button type="button" onclick="document.getElementById('clientDocISO9001').click()" style="margin-top: 6px; padding: 4px 10px; background: #64748b; color: white; border: none; border-radius: 6px; font-size: 10px; cursor: pointer;">Upload</button>
                            </div>
                            <div class="doc-upload-item" style="background: #f8fafc; border: 2px dashed #e2e8f0; border-radius: 12px; padding: 14px; text-align: center;">
                                <div style="margin-bottom: 6px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#1e3c72" stroke-width="2"><path d="M3 21h18M5 21V7l7-4 7 4v14M9 21v-6h6v6"/></svg></div>
                                <strong style="display: block; font-size: 12px; color: #1e293b;">Chamber of Commerce Membership</strong>
                                <span style="font-size: 10px; color: #64748b;">+10 points</span>
                                <input type="file" id="clientDocChamber" style="display: none;" accept=".pdf,.jpg,.png">
                                <button type="button" onclick="document.getElementById('clientDocChamber').click()" style="margin-top: 6px; padding: 4px 10px; background: #64748b; color: white; border: none; border-radius: 6px; font-size: 10px; cursor: pointer;">Upload</button>
                            </div>
                            <div class="doc-upload-item" style="background: #f8fafc; border: 2px dashed #e2e8f0; border-radius: 12px; padding: 14px; text-align: center;">
                                <div style="margin-bottom: 6px;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#1e3c72" stroke-width="2"><path d="M3 3v18h18"/><path d="M18 9l-5 5-4-4-3 3"/></svg></div>
                                <strong style="display: block; font-size: 12px; color: #1e293b;">D-U-N-S Number</strong>
                                <span style="font-size: 10px; color: #64748b;">+10 points</span>
                                <input type="file" id="clientDocDUNS" style="display: none;" accept=".pdf,.jpg,.png">
                                <button type="button" onclick="document.getElementById('clientDocDUNS').click()" style="margin-top: 6px; padding: 4px 10px; background: #64748b; color: white; border: none; border-radius: 6px; font-size: 10px; cursor: pointer;">Upload</button>
                            </div>
                        </div>
                        
                        <div style="margin-top: 16px; padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; display: flex; align-items: center; gap: 15px;">
                            <div style="width: 40px; height: 40px; background: #e2e8f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                            </div>
                            
                            <div style="flex: 1;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                    <span style="font-size: 13px; font-weight: 600; color: #1e293b;">Compliance & Verification Status</span>
                                    <span style="font-size: 13px; font-weight: 600; color: #64748b;" id="clientTrustScoreDisplay">Pending</span>
                                </div>
                                <div style="height: 6px; background: #e2e8f0; border-radius: 3px; overflow: hidden;">
                                    <div id="clientTrustBar" style="width: 0%; height: 100%; background: #1e3c72; transition: width 0.5s;"></div>
                                </div>
                                <p style="font-size: 11px; color: #64748b; margin: 6px 0 0 0;">
                                    Complete mandatory document uploads to obtain <strong style="color:#1e3c72">"Verified Entity"</strong> badge.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="form-actions" style="margin-top: 24px;">
                        <button type="submit" class="btn-primary">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                            Save
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div id="quoteResults" class="dashboard-container hidden">
    <div class="dashboard-nav client-nav-premium" style="display: flex; align-items: center; justify-content: space-between; padding: 16px 24px;">
        <div class="nav-logo" style="font-weight: 700; font-size: 18px;">Global Freight Network</div>
        <div class="nav-user" style="display: flex; align-items: center; gap: 16px;">
            <span id="clientNameDisplay2">User</span>
            <button class="btn-logout" onclick="doLogout()" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">Logout</button>
        </div>
    </div>
    
    <div class="dashboard-content" style="padding: 40px; text-align: center;">
        <div style="max-width: 600px; margin: 0 auto; background: white; border-radius: 16px; padding: 48px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);">
            <div style="width: 80px; height: 80px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5">
                    <polyline points="20 6 9 17 4 12"/>
                </svg>
            </div>
            <h2 style="color: #1e293b; margin: 0 0 16px; font-size: 28px;">Request Submitted!</h2>
            <p style="color: #64748b; margin: 0 0 32px; font-size: 16px; line-height: 1.6;">
                Your quote request has been shared with verified freight forwarders on our network. 
                You'll receive commercial quotes directly in your dashboard.
            </p>
            
            <div style="background: #f0fdf4; border: 1px solid #bbf7d0; border-radius: 12px; padding: 20px; margin-bottom: 32px;">
                <h4 style="color: #166534; margin: 0 0 8px; font-size: 14px;">What happens next?</h4>
                <p style="color: #15803d; margin: 0; font-size: 14px;">
                    Verified forwarders will review your request and submit their commercial quotes. 
                    Most quotes arrive within 24 hours.
                </p>
            </div>
            
            <div style="display: flex; gap: 16px; justify-content: center; flex-wrap: wrap;">
                <button onclick="goBackToClientDashboard(); setTimeout(function(){ showClientTab('myQuotes'); }, 100);" 
                    style="padding: 14px 28px; background: #1e40af; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 15px;">
                    View Received Quotes
                </button>
                <button onclick="goBackToClientDashboard();" 
                    style="padding: 14px 28px; background: white; color: #1e40af; border: 2px solid #1e40af; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 15px;">
                    Create Another Request
                </button>
            </div>
        </div>
    </div>
</div>

<!-- CARRIER DASHBOARD (Deniz/Hava/Kara Carrierleri) -->
<div id="carrierDashboard" class="dashboard-container hidden">
    <div class="dashboard-nav">
        <div class="nav-logo" onclick="goHome()" style="cursor:pointer;" title="Back to Home">Global Freight Network</div>
        <div class="nav-menu">
            <div class="nav-menu-item" onclick="goHome()">ğŸ  Home</div>
            <div class="nav-menu-item active" onclick="showCarrierTab('rates')">My Rates</div>
            <div class="nav-menu-item" onclick="showCarrierTab('requests')">ğŸ“¥ RFQ Inbox</div>
            <div class="nav-menu-item" onclick="showCarrierTab('active')">Active Shipments</div>
        </div>
        <div class="nav-user">
            <span id="carrierNameDisplay">Carrier</span>
            <button class="btn-logout" onclick="doLogout()">Logout</button>
        </div>
    </div>
    
    <div class="dashboard-content">
        <div class="welcome-box" id="carrierWelcomeBox">
            <div class="welcome-header">
                <div>
                    <h2>Welcome, <span id="carrierWelcomeName">Carrier</span>!</h2>
                    <p>Enter your rates, manage requests</p>
                </div>
                <div class="carrier-type-badge" id="carrierTypeLabel">Sea Carrier</div>
            </div>
        </div>
        
        
        <!-- Rates Tab -->
        <div id="carrierRatesTab" class="tab-content active">
            <div class="section-header">
                <div class="section-title">My Rate Tariffs</div>
                <button class="btn-add-rate" onclick="openAddRateModal()">+ Add New Rate</button>
            </div>
            
            <div id="carrierRatesList" class="rates-list">
                <!-- Rates will be rendered here -->
            </div>
        </div>
        
        <!-- Requests Tab -->
        <div id="carrierRequestsTab" class="tab-content" style="display:none;">
            <div class="section-title">ğŸ“¥ Size RFQ Inbox</div>
            <div id="carrierRequestsList" class="requests-list">
                <!-- Requests will be rendered here -->
            </div>
        </div>
        
        <!-- Active Tab -->
        <div id="carrierActiveTab" class="tab-content" style="display:none;">
            <div class="section-title">My Active Shipments</div>
            <div class="empty-state">
                <div class="empty-icon"></div>
                <p>No active shipments yet</p>
            </div>
        </div>
    </div>
</div>

<!-- ADD RATE MODAL -->
<div id="addRateModal" class="modal-overlay">
    <div class="modal-container">
        <div class="modal-header">
            <h3>Add New Rate</h3>
            <button class="modal-close" onclick="closeAddRateModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>Origin Point</label>
                <input type="text" id="rateOrigin" placeholder="e.g. Istanbul, Turkey" list="citiesListOrigin">
                <datalist id="citiesListOrigin"></datalist>
            </div>
            
            <div class="form-group">
                <label>Destination Point</label>
                <input type="text" id="rateDestination" placeholder="e.g. Hamburg, Germany" list="citiesListDest">
                <datalist id="citiesListDest"></datalist>
            </div>
            
            <div class="form-group">
                <label> Price (USD / ton)</label>
                <div class="final-price-input">
                    <span class="currency">$</span>
                    <input type="number" id="rateFinalPrice" placeholder="0" min="1">
                    <span class="unit">/ ton</span>
                </div>
            </div>
            
            <div class="form-group">
                <label> Notes (Optional)</label>
                <textarea id="rateNotes" placeholder="Special conditions, included services..." rows="2"></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn-secondary" onclick="closeAddRateModal()">Cancel</button>
            <button class="btn-primary" onclick="saveCarrierRate()">Save Rate</button>
        </div>
    </div>
</div>

<!-- FORWARDER DASHBOARD -->
<div id="forwarderDashboard" class="dashboard-container hidden">
    <div class="dashboard-nav enterprise-nav">
        <!-- Ãœst SatÄ±r: Logo ve User -->
        <div class="nav-top-row">
            <div class="nav-brand" onclick="goToLanding()" style="cursor:pointer;" title="Back to Role Selection">
                <div class="nav-brand-icon">
                    <svg viewBox="0 0 24 24">
                        <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                </div>
                <div class="nav-brand-text">
                    <span class="nav-brand-name">Global Freight Network</span>
                    <span class="nav-brand-tagline">Enterprise Logistics Platform</span>
                </div>
            </div>
            <div class="nav-user-section">
                <div class="nav-user-info">
                    <div class="nav-user-avatar" id="forwarderAvatarInitial">FF</div>
                    <div class="nav-user-details">
                        <span class="nav-user-name" id="forwarderNameDisplay">Forwarder</span>
                        <span class="nav-user-role">Freight Forwarder</span>
                    </div>
                </div>
                <button class="btn-logout" onclick="doLogout()" data-i18n="dashboard.logout">Logout</button>
            </div>
        </div>
        <!-- Alt SatÄ±r: MenÃ¼ -->
        <div class="nav-menu-row">
            <div class="nav-menu">
                <div class="nav-menu-item active" data-tab="home" onclick="goToLanding()">
                    <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
                    <span data-i18n="menu.home">Home</span>
                </div>
                <div class="nav-menu-item" data-tab="tracking" onclick="showForwarderTab('tracking')">
                    <svg viewBox="0 0 24 24"><path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
                    <span>Manage Shipments</span>
                    <span class="menu-badge" id="forwarderShipmentsBadge" style="display:none;">0</span>
                </div>
                <div class="nav-menu-item" data-tab="completed" onclick="showForwarderTab('completed')">
                    <svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                    <span data-i18n="menu.completedRequests">Completed Shipments</span>
                </div>
                <div class="nav-menu-item" data-tab="myQuotes" onclick="showForwarderTab('myQuotes')">
                    <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/></svg>
                    <span data-i18n="menu.myQuotes">My Quotes</span>
                    <span class="menu-badge" id="forwarderQuotesBadge" style="display:none;">0</span>
                </div>
                <div class="nav-menu-item" data-tab="requests" onclick="showForwarderTab('requests')">
                    <svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/></svg>
                    <span data-i18n="menu.rfqInbox">RFQ Inbox</span>
                    <span class="menu-badge rfq-badge" id="rfqInboxBadge" style="display:none;">0</span>
                </div>
                <div class="nav-menu-item" data-tab="profile" onclick="showForwarderTab('profile')">
                    <svg viewBox="0 0 24 24"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                    <span data-i18n="menu.profile">Profile</span>
                </div>
            </div>
        </div>
    </div>
    
    <div class="dashboard-content">
        <div class="welcome-box">
            <div class="welcome-header">
                <div>
                    <h2><span data-i18n="dashboard.welcome">Welcome</span>, <span id="forwarderWelcomeName">Forwarder</span>!</h2>
                    <p data-i18n="dashboard.forwarderSubtitle">Review matched requests and make qualified introductions</p>
                </div>
                <div class="carrier-type-badge" id="forwarderTypeLabel">Freight Forwarder</div>
            </div>
            <div class="mode-filter-info" id="forwarderModeFilter" data-i18n="dashboard.allModes">All Modes</div>
        </div>
        
        <!-- Requests Section (RFQ Inbox) - EN ÃœSTTE -->
        <div id="forwarderRequestsSection" class="forwarder-tab-content quote-box" style="display:block;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                <h3 style="margin: 0;">RFQ Inbox</h3>
                <button onclick="refreshForwarderRequests()" style="display: flex; align-items: center; gap: 6px; padding: 8px 16px; background: #f1f5f9; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 13px; color: #475569; cursor: pointer;" title="Refresh requests from server">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M23 4v6h-6M1 20v-6h6"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></svg>
                    Refresh
                </button>
            </div>
            <p style="color: #64748b; margin-bottom: 12px;">Review matched cargo owner requests and submit commercial quotes</p>
            <!-- Network Info Box -->
            <div style="background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 8px; padding: 12px 16px; margin-bottom: 20px;">
                <p style="margin: 0; font-size: 12px; color: #0369a1; line-height: 1.5;">
                    <strong>Note:</strong> This platform facilitates qualified introductions. It does not support public tenders, bidding, or price competition.
                </p>
            </div>
            <!-- Requests Filter Bar -->
            <div class="requests-filter-bar">
                <button class="requests-filter-btn active" data-filter="open" onclick="setRequestsFilter('open')">
                    <span>Open RFQs</span>
                </button>
                <button class="requests-filter-btn" data-filter="quoted" onclick="setRequestsFilter('quoted')">
                    <span>My Quotes</span>
                </button>
                <button class="requests-filter-btn" data-filter="all" onclick="setRequestsFilter('all')">
                    <span>All</span>
                </button>
            </div>
            <div id="requestsContainer"></div>
        </div>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             FÄ°YAT TARÄ°FELERÄ°M - FORWARDER NAVLUN GÄ°RÄ°Å SÄ°STEMÄ°
             â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- Completed Shipments Section -->
        <div id="forwarderCompletedSection" class="forwarder-tab-content quote-box" style="display:none;">
            <h3 data-i18n="completedShipments.title">Completed Shipments</h3>
            <p style="color: #64748b; margin-bottom: 20px;" data-i18n="completed.subtitle">Your successfully completed shipments</p>
            <div id="completedContainer">
                <div class="completed-list" id="completedShipmentsList">
                    <!-- Completed shipments will be dynamically loaded from Supabase -->
                </div>
                
                <!-- Empty State -->
                <div id="noCompletedShipmentsMessage">
                    <div class="empty-state">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <h3>No Completed Shipments Yet</h3>
                        <p>When shipments are delivered, they will appear here.</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             KONTEYNER TAKÄ°P SEKMESÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="forwarderTrackingTab" class="forwarder-tab-content" style="display:none;">
            <div class="section-header">
                <h2>Manage Shipments</h2>
                <p style="color: #64748b;">Update shipment status for your cargo owners</p>
            </div>
            
            <!-- Active Shipments List - dynamically loaded from Supabase -->
            <div id="forwarderShipmentsList">
                <!-- Shipments will be dynamically loaded here -->
                
                <!-- Empty State - shown when no shipments -->
                <div id="noShipmentsMessage">
                    <div class="empty-state">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/>
                        </svg>
                        <h3>No Active Shipments</h3>
                        <p>When a cargo owner accepts your quote, their shipment will appear here for tracking updates.</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
             VERDÄ°ÄÄ°M TEKLÄ°FLER SEKMESÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="forwarderMyQuotesTab" class="forwarder-tab-content" style="display:none;">
            <div class="section-header">
                <h2>My Submitted Quotes</h2>
                <p>Track all your shared quotes and their status</p>
            </div>
            
            <div id="forwarderQuotesList" class="quotes-list">
                <!-- Dinamik olarak doldurulacak -->
                <div class="empty-state">
                    <div class="empty-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg></div>
                    <h3>HenÃ¼z quote gÃ¶ndermediniz</h3>
                    <p>"RFQ Inbox" tab to submit quotes to RFQs submit</p>
                </div>
            </div>
        </div>
        
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              PROFÄ°L / Ä°LETÄ°ÅÄ°M BÄ°LGÄ°LERÄ° SEKMESÄ°
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div id="forwarderProfileTab" class="forwarder-tab-content" style="display:none;">
            <div class="section-header">
                <h2 data-i18n="profile.myProfileTitle"> My Profile & Contact Info</h2>
                <p data-i18n="profile.forwarderProfileDesc">Update your contact information - When your quote is accepted, the customer can access this information</p>
            </div>
            
            <div class="contact-form-section">
                <div class="contact-form-header">
                    <h3 data-i18n="profile.companyContactInfo">Company & Contact Information</h3>
                    <span id="forwarderProfileStatus" class="edit-badge" data-i18n="profile.editing">Editing</span>
                </div>
                
                <form id="forwarderContactForm" onsubmit="return saveForwarderContact(event)">
                    <div class="contact-form-grid">
                        <div class="form-group">
                            <label><span data-i18n="profile.companyName">Company Name</span> *</label>
                            <input type="text" id="forwarderCompanyName" placeholder="e.g. XYZ Logistics Inc." required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.contactPerson">Contact Person</span> *</label>
                            <input type="text" id="forwarderContactPerson" placeholder="e.g. John Smith" required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.email">Email</span> *</label>
                            <input type="email" id="forwarderEmail" placeholder="e.g. operations@company.com" required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.phone">Phone</span> *</label>
                            <input type="tel" id="forwarderPhone" placeholder="e.g. +1 555 123 4567" required>
                        </div>
                        <div class="form-group full-width">
                            <label><span data-i18n="profile.address">Address</span> *</label>
                            <input type="text" id="forwarderAddress" placeholder="e.g. 45 Port Street" required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.city">City</span> *</label>
                            <input type="text" id="forwarderCity" placeholder="e.g. New York" required>
                        </div>
                        <div class="form-group">
                            <label><span data-i18n="profile.country">Country</span> *</label>
                            <select id="forwarderCountry" onchange="updateForwarderDocRequirements()" required>
                                <optgroup label="Avrupa BirliÄŸi">
                                    <option value="DE">DE - Germany</option>
                                    <option value="FR">FR - Fransa</option>
                                    <option value="IT">IT - Ä°talya</option>
                                    <option value="ES">ES - Ä°spanya</option>
                                    <option value="NL">NL - Hollanda</option>
                                    <option value="BE">BE - BelÃ§ika</option>
                                    <option value="PL">PL - Polonya</option>
                                    <option value="AT">AT - Avusturya</option>
                                    <option value="GR">GR - Greece</option>
                                </optgroup>
                                <optgroup label="DiÄŸer Avrupa">
                                    <option value="GB">GB - Ä°ngiltere</option>
                                    <option value="CH">CH - Ä°sviÃ§re</option>
                                    <option value="TR" selected>TR - Turkey</option>
                                </optgroup>
                                <optgroup label="Asya & Pasifik">
                                    <option value="CN">CN - Ã‡in</option>
                                    <option value="IN">IN - Hindistan</option>
                                    <option value="SG">SG - Singapur</option>
                                </optgroup>
                                <optgroup label="Amerika">
                                    <option value="US">US - ABD</option>
                                </optgroup>
                                <optgroup label="Orta DoÄŸu">
                                    <option value="AE">AE - BAE</option>
                                    <option value="SA">SA - Suudi Arabistan</option>
                                </optgroup>
                                <option value="OTHER">-- Other Countries</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label data-i18n="profile.taxNo">Tax Number</label>
                            <input type="text" id="forwarderTaxNumber" placeholder="e.g. 9876543210">
                        </div>
                        <div class="form-group">
                            <label data-i18n="profile.website">Website</label>
                            <input type="text" id="forwarderWebsite" placeholder="e.g. www.xyzlogistics.com">
                        </div>
                    </div>
                    
                    <!-- ÃœLKE BAZLI DOÄRULAMA BELGELERÄ° -->
                    <div class="verification-docs-section" style="margin-top: 30px; padding-top: 24px; border-top: 2px solid #e2e8f0;">
                        <h4 style="margin-bottom: 16px; color: #1e293b; display: flex; align-items: center; gap: 8px;">
                            <span style="width: 24px; height: 24px; background: #10b981; border-radius: 6px; display: inline-flex; align-items: center; justify-content: center;"><svg width="14" height="14" viewBox="0 0 24 24" fill="white"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg></span>
                            <span data-i18n="docs.verificationTitle">Verification Documents</span>
                            <button type="button" class="btn-info-small" onclick="showVerificationInfo('forwarder')" style="background: #cbd5e1; border: none; border-radius: 50%; width: 20px; height: 20px; cursor: pointer; font-size: 12px;">?</button>
                        </h4>
                        <p style="font-size: 13px; color: #64748b; margin-bottom: 16px;" id="forwarderDocDescription" data-i18n="docs.uploadDescForwarder">
                            Upload your documents to get "Verified Forwarder" badge and gain customer trust.
                        </p>
                        
                        <!-- Ãœlke BazlÄ± Zorunlu Belgeler - Dinamik yÃ¼klenecek -->
                        <div id="forwarderRequiredDocs" class="verification-docs-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px;">
                        </div>
                        
                        <!-- International/Optional Documents -->
                        <h5 id="intlCertsTitle" style="margin: 20px 0 12px 0; color: #475569; font-size: 14px; display: flex; align-items: center; gap: 8px;" data-i18n="docs.internationalCerts">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                            International Certificates (Valid for All Countries)
                        </h5>
                        <div id="forwarderOptionalDocs" class="verification-docs-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;">
                        </div>
                        
                        <div style="margin-top: 16px; padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; display: flex; align-items: center; gap: 15px;">
                            <div style="width: 40px; height: 40px; background: #e2e8f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                            </div>
                            
                            <div style="flex: 1;">
                                <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                                    <span style="font-size: 13px; font-weight: 600; color: #1e293b;">Compliance & Verification Status</span>
                                    <span style="font-size: 13px; font-weight: 600; color: #64748b;" id="forwarderTrustScoreDisplay">Pending</span>
                                </div>
                                <div style="height: 6px; background: #e2e8f0; border-radius: 3px; overflow: hidden;">
                                    <div id="forwarderTrustBar" style="width: 0%; height: 100%; background: #1e3c72; transition: width 0.5s;"></div>
                                </div>
                                <p style="font-size: 11px; color: #64748b; margin: 6px 0 0 0;">
                                    Complete mandatory document uploads to obtain <strong style="color:#1e3c72">"Verified Forwarder"</strong> badge.
                                </p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-actions" style="margin-top: 24px;">
                        <button type="submit" class="btn-primary">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                            <span data-i18n="common.save">Save</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- SHIPMENT TRACKING -->
<div id="trackingPage" class="dashboard-container hidden">
    <div class="dashboard-nav">
        <div class="nav-logo">Global Freight Network</div>
        <div class="nav-menu">
            <div class="nav-menu-item" onclick="goToLanding()">Home</div>
            <div class="nav-menu-item" onclick="backToClientDashboard()">New Quote</div>
            <div class="nav-menu-item" onclick="showMyShipments()">My Shipments</div>
            <div class="nav-menu-item active">Tracking</div>
        </div>
        <div class="nav-user">
            <span id="trackingUserName">User</span>
            <button class="btn-logout" onclick="doLogout()">Logout</button>
        </div>
    </div>
    
    <div class="dashboard-content">
        <!-- Back to My Shipments -->
        <div class="section-header" id="trackingBackHeader" style="display: none;">
            <div class="section-header-with-back">
                <button class="back-btn" onclick="goBackToShipmentsFromTracking()">â† My Shipments</button>
                <div>
                    <h2>Track Shipment</h2>
                    <p>Real-time tracking for your shipment</p>
                </div>
            </div>
        </div>
        
        <!-- Search Box -->
        <div class="tracking-search-box">
            <h2>Track Your Shipment</h2>
            <p>Enter your tracking number for real-time updates</p>
            <div class="tracking-input-wrapper">
                <input type="text" id="trackingInput" placeholder="e.g. GFN-2024-78542" value="GFN-2024-78542">
                <button class="btn-track" onclick="trackShipment()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                        <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
                    </svg>
                    Track
                </button>
            </div>
        </div>

        <!-- Container/B/L Lookup Section -->
        <div class="container-lookup-section">
            <div class="lookup-header">
                <div class="lookup-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="white">
                        <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                </div>
                <div class="lookup-title">
                    <h3>Container / B/L Search</h3>
                    <p>Worldwide herhangi bir containeri gerÃ§ek taÅŸÄ±yÄ±cÄ± verisiyle takip edin</p>
                </div>
            </div>
            
            <div class="lookup-form">
                <div class="lookup-tabs">
                    <button class="lookup-tab active" onclick="switchLookupTab('container')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/>
                        </svg>
                        Konteyner
                    </button>
                    <button class="lookup-tab" onclick="switchLookupTab('bl')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                        </svg>
                        Bill of Lading (B/L)
                    </button>
                </div>
                
                <div class="lookup-input-group">
                    <div class="input-with-icon">
                        <input type="text" id="containerInput" placeholder="Enter Container No (e.g., MRKU1234567)">
                        <div class="carrier-badge" id="carrierBadge"></div>
                    </div>
                    <button class="btn-lookup" onclick="lookupContainer()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="white">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
                        </svg>
                        Track Worldwide
                    </button>
                </div>
                
                <div class="carrier-hints">
                    <span class="hint-label">Desteklenen TaÅŸÄ±yÄ±cÄ±lar:</span>
                    <div class="carrier-logos">
                        <span class="carrier-chip">MAERSK</span>
                        <span class="carrier-chip">MSC</span>
                        <span class="carrier-chip">CMA CGM</span>
                        <span class="carrier-chip">HAPAG</span>
                        <span class="carrier-chip">COSCO</span>
                        <span class="carrier-chip">EVERGREEN</span>
                        <span class="carrier-chip">+200 more</span>
                    </div>
                </div>
            </div>
            
            <!-- Lookup Result Area -->
            <div id="lookupResult" class="lookup-result hidden">
                <div class="lookup-loading" id="lookupLoading">
                    <div class="loading-spinner"></div>
                    <span>Searching global carrier networks...</span>
                </div>
                
                <div class="lookup-data" id="lookupData">
                    <!-- Results will be inserted here -->
                </div>
            </div>
        </div>

        <!-- Tracking Result -->
        <div id="trackingResult" class="tracking-result">
            <!-- Shipment Header -->
            <div class="tracking-header">
                <div class="tracking-header-left">
                    <div class="tracking-number">GFN-2024-78542</div>
                    <div class="tracking-status-badge in-transit">
                        <span class="pulse"></span>
                        In Transit
                    </div>
                </div>
                <div class="tracking-header-right">
                    <div class="eta-box">
                        <div class="eta-label">Estimated Arrival</div>
                        <div class="eta-value">Dec 22, 2024</div>
                        <div class="eta-time">3 days remaining</div>
                    </div>
                </div>
            </div>

            <!-- Map -->
            <div class="tracking-visual">
                <!-- Premium Route Visualization -->
                <div class="route-visualization">
                    <!-- Background decoration -->
                    <div class="route-bg-pattern"></div>
                    
                    <!-- Route Header -->
                    <div class="route-header">
                        <div class="route-cities">
                            <div class="city-from">
                                <span class="city-flag">TR</span>
                                <div class="city-details">
                                    <span class="city-label">ORIGIN</span>
                                    <span class="city-name">Istanbul</span>
                                    <span class="city-port">AmbarlÄ± Port</span>
                                </div>
                            </div>
                            <div class="route-line-visual">
                                <div class="route-line-track">
                                    <div class="route-line-progress" style="width: 68%"></div>
                                    <div class="route-plane-icon" style="left: 68%">
                                        <div class="plane-glow"></div>
                                        <span></span>
                                    </div>
                                </div>
                                <span class="route-distance-label">9,850 km total</span>
                            </div>
                            <div class="city-to">
                                <span class="city-flag">ğŸ‡¨ğŸ‡³</span>
                                <div class="city-details">
                                    <span class="city-label">DESTINATION</span>
                                    <span class="city-name">Shanghai</span>
                                    <span class="city-port">Yangshan Port</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Timeline Progress -->
                    <div class="timeline-container">
                        <div class="timeline-track">
                            <!-- Waypoint 1 - Istanbul (Completed) -->
                            <div class="timeline-waypoint completed" style="left: 0%">
                                <div class="waypoint-marker">
                                    <div class="marker-ring"></div>
                                    <div class="marker-dot">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="white">
                                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="waypoint-content">
                                    <span class="waypoint-title">Istanbul</span>
                                    <span class="waypoint-date">Dec 15, 09:00</span>
                                    <span class="waypoint-status completed">Departed</span>
                                </div>
                            </div>
                            
                            <!-- Waypoint 2 - Suez Canal (Completed) -->
                            <div class="timeline-waypoint completed" style="left: 25%">
                                <div class="waypoint-marker">
                                    <div class="marker-ring"></div>
                                    <div class="marker-dot">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="white">
                                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="waypoint-content">
                                    <span class="waypoint-title">Suez Canal</span>
                                    <span class="waypoint-date">Dec 17, 14:30</span>
                                    <span class="waypoint-status completed">Passed</span>
                                </div>
                            </div>
                            
                            <!-- Current Location Indicator -->
                            <div class="current-location-indicator" style="left: 68%">
                                <div class="current-pulse"></div>
                                <div class="current-marker">
                                    <svg width="28" height="28" viewBox="0 0 24 24" fill="white">
                                        <path d="M20 21c-1.39 0-2.78-.47-4-1.32-2.44 1.71-5.56 1.71-8 0C6.78 20.53 5.39 21 4 21H2v2h2c1.38 0 2.74-.35 4-.99 2.52 1.29 5.48 1.29 8 0 1.26.65 2.62.99 4 .99h2v-2h-2zM3.95 19H4c1.6 0 3.02-.88 4-2 .98 1.12 2.4 2 4 2s3.02-.88 4-2c.98 1.12 2.4 2 4 2h.05l1.89-6.68c.08-.26.06-.54-.06-.78s-.34-.42-.6-.5L20 10.62V6c0-1.1-.9-2-2-2h-3V1H9v3H6c-1.1 0-2 .9-2 2v4.62l-1.29.42c-.26.08-.48.26-.6.5s-.15.52-.06.78L3.95 19zM6 6h12v3.97L12 8 6 9.97V6z"/>
                                    </svg>
                                </div>
                                <div class="current-info">
                                    <span class="current-label">Current Location</span>
                                    <span class="current-place">Red Sea</span>
                                    <span class="current-speed">18 knots â€¢ Clear Weather</span>
                                </div>
                            </div>
                            
                            <!-- Waypoint 3 - Singapore (Upcoming) -->
                            <div class="timeline-waypoint upcoming" style="left: 75%">
                                <div class="waypoint-marker">
                                    <div class="marker-ring"></div>
                                    <div class="marker-dot"></div>
                                </div>
                                <div class="waypoint-content">
                                    <span class="waypoint-title">Singapore</span>
                                    <span class="waypoint-date">Dec 20, ~08:00</span>
                                    <span class="waypoint-status upcoming">Expected</span>
                                </div>
                            </div>
                            
                            <!-- Waypoint 4 - Shanghai (Destination) -->
                            <div class="timeline-waypoint destination" style="left: 100%">
                                <div class="waypoint-marker">
                                    <div class="marker-ring"></div>
                                    <div class="marker-dot">
                                        <svg width="14" height="14" viewBox="0 0 24 24" fill="white">
                                            <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="waypoint-content">
                                    <span class="waypoint-title">Shanghai</span>
                                    <span class="waypoint-date">Dec 22, ~16:00</span>
                                    <span class="waypoint-status destination">Final Stop</span>
                                </div>
                            </div>
                            
                            <!-- Progress Track Lines -->
                            <div class="track-line-bg"></div>
                            <div class="track-line-fill" style="width: 68%"></div>
                        </div>
                    </div>
                    
                    <!-- Stats Cards -->
                    <div class="route-stats-grid">
                        <div class="stat-card">
                            <div class="stat-card-icon" style="background: linear-gradient(135deg, #00d4aa 0%, #00a385 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                                </svg>
                            </div>
                            <div class="stat-card-content">
                                <span class="stat-card-value">3 Days</span>
                                <span class="stat-card-label">Time Remaining</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-card-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/>
                                </svg>
                            </div>
                            <div class="stat-card-content">
                                <span class="stat-card-value">6,698 km</span>
                                <span class="stat-card-label">Distance Traveled</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-card-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/>
                                </svg>
                            </div>
                            <div class="stat-card-content">
                                <span class="stat-card-value">3,152 km</span>
                                <span class="stat-card-label">Distance Left</span>
                            </div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-card-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
                                </svg>
                            </div>
                            <div class="stat-card-content">
                                <span class="stat-card-value">On Time</span>
                                <span class="stat-card-label">Delivery Status</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="tracking-progress">
                <div class="progress-info">
                    <span>Progress</span>
                    <span class="progress-percent">68%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 68%"></div>
                </div>
                <div class="progress-distance">
                    <span>0 km</span>
                    <span>4,200 km traveled of 6,180 km</span>
                    <span>6,180 km</span>
                </div>
            </div>

            <!-- Shipment Details -->
            <div class="tracking-details-grid">
                <div class="tracking-detail-card">
                    <div class="detail-card-icon blue">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#1e3c72">
                            <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4z"/>
                        </svg>
                    </div>
                    <div class="detail-card-content">
                        <div class="detail-card-label">Freight Type</div>
                        <div class="detail-card-value">Sea Freight (FCL)</div>
                    </div>
                </div>
                <div class="tracking-detail-card">
                    <div class="detail-card-icon green">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#00d4aa">
                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                        </svg>
                    </div>
                    <div class="detail-card-content">
                        <div class="detail-card-label">Container</div>
                        <div class="detail-card-value">MSCU-4521876</div>
                    </div>
                </div>
                <div class="tracking-detail-card">
                    <div class="detail-card-icon orange">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#ff6b35">
                            <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                        </svg>
                    </div>
                    <div class="detail-card-content">
                        <div class="detail-card-label">Vessel</div>
                        <div class="detail-card-value">MSC AURORA</div>
                    </div>
                </div>
                <div class="tracking-detail-card">
                    <div class="detail-card-icon purple">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#8250c8">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
                        </svg>
                    </div>
                    <div class="detail-card-content">
                        <div class="detail-card-label">Weight / Volume</div>
                        <div class="detail-card-value">2,500 kg / 12 mÂ³</div>
                    </div>
                </div>
            </div>

            <!-- Timeline -->
            <div class="tracking-timeline">
                <h3>Shipment Timeline</h3>
                <div class="timeline">
                    <div class="timeline-item completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Dec 10, 2024 - 09:30</div>
                            <div class="timeline-title">Order Confirmed</div>
                            <div class="timeline-desc">Shipment booking confirmed. Documents verified.</div>
                        </div>
                    </div>
                    <div class="timeline-item completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Dec 12, 2024 - 14:15</div>
                            <div class="timeline-title">Picked Up</div>
                            <div class="timeline-desc">Cargo collected from shipper's warehouse in Istanbul.</div>
                        </div>
                    </div>
                    <div class="timeline-item completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Dec 13, 2024 - 08:00</div>
                            <div class="timeline-title">Customs Cleared - Origin</div>
                            <div class="timeline-desc">Export customs clearance completed at Istanbul Port.</div>
                        </div>
                    </div>
                    <div class="timeline-item completed">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Dec 14, 2024 - 16:45</div>
                            <div class="timeline-title">Departed Origin Port</div>
                            <div class="timeline-desc">Vessel MSC AURORA departed from Istanbul Port.</div>
                        </div>
                    </div>
                    <div class="timeline-item active">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Dec 18, 2024 - 11:20</div>
                            <div class="timeline-title">In Transit - Red Sea</div>
                            <div class="timeline-desc">Vessel currently passing through Red Sea. On schedule.</div>
                        </div>
                    </div>
                    <div class="timeline-item pending">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Expected: Dec 21, 2024</div>
                            <div class="timeline-title">Arrive Destination Port</div>
                            <div class="timeline-desc">Estimated arrival at Shanghai Port.</div>
                        </div>
                    </div>
                    <div class="timeline-item pending">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Expected: Dec 22, 2024</div>
                            <div class="timeline-title">Customs Cleared - Destination</div>
                            <div class="timeline-desc">Import customs clearance at Shanghai.</div>
                        </div>
                    </div>
                    <div class="timeline-item pending">
                        <div class="timeline-dot"></div>
                        <div class="timeline-content">
                            <div class="timeline-date">Expected: Dec 22-23, 2024</div>
                            <div class="timeline-title">Delivered</div>
                            <div class="timeline-desc">Final delivery to consignee's address.</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Actions removed -->
        </div>
    </div>
</div>

<!-- MY SHIPMENTS -->
<div id="myShipmentsPage" class="dashboard-container hidden">
    <div class="dashboard-nav">
        <div class="nav-logo">Global Freight Network</div>
        <div class="nav-menu">
            <div class="nav-menu-item" onclick="backToClientDashboard()">New Quote</div>
            <div class="nav-menu-item active">My Shipments</div>
        </div>
        <div class="nav-user">
            <span id="shipmentsUserName">User</span>
            <button class="btn-logout" onclick="doLogout()">Logout</button>
        </div>
    </div>
    
    <div class="dashboard-content">
        <div class="welcome-box">
            <h2>My Shipments</h2>
            <p>TÃ¼m shipmentsinizi tek yerde gÃ¶rÃ¼ntÃ¼leyin ve yÃ¶netin</p>
        </div>

        <!-- Filters -->
        <div class="shipments-filters">
            <button class="filter-btn active" onclick="filterShipments('all')">All (8)</button>
            <button class="filter-btn" onclick="filterShipments('active')">Active (3)</button>
            <button class="filter-btn" onclick="filterShipments('completed')">Completed (4)</button>
            <button class="filter-btn" onclick="filterShipments('pending')">Bekleyen (1)</button>
        </div>

        <!-- Shipments List -->
        <div id="shipmentsContainer" class="shipments-list"></div>
    </div>
</div>




<!-- AI CHATBOT -->
<!-- PROPOSAL MODAL with AI Assistant -->
<div id="quoteModal" class="modal-overlay">
    <div class="modal-container quote-modal ai-enhanced">
        <div class="modal-header">
            <h3 id="quoteModalTitle">Submit Quote</h3>
            <div class="modal-header-buttons">
                <button class="modal-expand" onclick="toggleModalSize('quoteModal')" title="BÃ¼yÃ¼t/KÃ¼Ã§Ã¼lt">â›¶</button>
                <button class="modal-close" onclick="closeQuoteModal()">Ã—</button>
            </div>
        </div>
        <div class="modal-body quote-modal-body">
            <!-- Left: Form -->
            <div class="quote-form-section">
                <div class="modal-request-info">
                    <div class="request-badge" id="quoteModalRequestId">REQ-2024-001</div>
                    <div class="request-route-mini" id="quoteModalRoute">Istanbul â†’ Hamburg</div>
                    <div class="request-details-mini" id="quoteModalDetails">Deniz | 18,000 kg | FOB</div>
                </div>
                
                <div class="quote-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label id="quotePriceLabel" for="quotePriceInput">Quote TutarÄ± (USD)</label>
                            <input type="number" id="quotePriceInput" placeholder="Ã¶rn. 2500" min="1" oninput="onQuotePriceChange()">
                        </div>
                        <div class="form-group">
                            <label id="incotermLabel" for="quoteIncoterm">Incoterm</label>
                            <select id="quoteIncoterm" onchange="onIncotermChange()">
                                <option value="FOB">FOB</option>
                                <option value="CIF">CIF</option>
                                <option value="CFR">CFR</option>
                                <option value="DAP">DAP</option>
                                <option value="DDP">DDP</option>
                                <option value="EXW">EXW</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label id="transitLabel" for="transitInput">Transit SÃ¼resi (GÃ¼n)</label>
                            <input type="number" id="transitInput" placeholder="Ã¶rn. 18" min="1" oninput="onTransitTimeChange()">
                        </div>
                        <div class="form-group">
                            <label id="validityLabel" for="validityInput">GeÃ§erlilik (GÃ¼n)</label>
                            <select id="validityInput" onchange="onValidityChange()">
                                <option value="3">3 gÃ¼n</option>
                                <option value="5">5 gÃ¼n</option>
                                <option value="7" selected>7 gÃ¼n</option>
                                <option value="14">14 gÃ¼n</option>
                                <option value="30">30 gÃ¼n</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label id="notesLabel" for="quoteNotes">Notlar (Opsiyonel)</label>
                        <textarea id="quoteNotes" placeholder="Ã–zel koÅŸullar, dahil olan hizmetler..." rows="3" onblur="onNotesBlur()"></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Right: AI Panel (Tier-Based, Event-Driven) -->
            <div class="ai-quote-panel tier-based" id="aiPanel">
                <div class="ai-panel-header" id="aiPanelHeader">
                    <span><svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: middle; margin-right: 6px;"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg><span data-i18n="ai.panelTitle">Quote AsistanÄ±</span></span>
                    <span class="tier-badge" id="aiTierBadge">FREE</span>
                </div>
                
                <!-- Silent State (Default - No triggers fired) -->
                <div class="ai-silent-state" id="aiSilentState">
                    <p class="silent-text" data-i18n="ai.silentText">AI gerektiÄŸinde rehberlik saÄŸlayacaktÄ±r.</p>
                </div>
                
                <!-- Event Message Display (Shows triggered messages) -->
                <div class="ai-event-message" id="aiEventMessage" style="display:none;">
                    <p class="event-text" id="aiEventText"></p>
                </div>
                
                <!-- Pre-Submit Section (Tier-dependent) -->
                <div class="ai-presubmit-section" id="aiPresubmitSection" style="display:none;">
                    
                    <!-- FREE Tier: Premium Upsell -->
                    <div class="presubmit-free" id="presubmitFree" style="display:none;">
                        <p class="upsell-text" data-i18n="ai.upsellText">GeliÅŸmiÅŸ operasyonel inceleme Premium AI ile kullanÄ±labilir.</p>
                    </div>
                    
                    <!-- PREMIUM Tier: Operational Review -->
                    <div class="presubmit-premium" id="presubmitPremium" style="display:none;">
                        <div class="review-header" data-i18n="ai.operationalReview">Operasyonel Ä°nceleme</div>
                        <div class="review-checklist" id="aiReviewChecklist">
                            <!-- Dynamically populated -->
                        </div>
                        
                        <!-- Network Intelligence -->
                        <div class="network-intel" id="aiNetworkIntel" style="display:none;">
                            <p class="intel-text" id="aiIntelText"></p>
                        </div>
                    </div>
                </div>
                
                <!-- Final Confirmation (PREMIUM only, before submit) -->
                <div class="ai-final-confirm" id="aiFinalConfirm" style="display:none;">
                    <p class="confirm-text" data-i18n="ai.finalConfirm">Bu quote operasyonel olarak tutarlÄ± gÃ¶rÃ¼nÃ¼yor. TanÄ±ÅŸtÄ±rma ile devam edebilirsiniz.</p>
                </div>
                
                <!-- Implicit Disclaimer -->
                <div class="ai-disclaimer-implicit">
                    <p data-i18n="ai.implicitDisclaimer">AI quote hazÄ±rlÄ±ÄŸÄ±nÄ± destekler. Ticari landrlar forwarder'a aittir.</p>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button id="quoteCancelBtn" class="btn-secondary" onclick="closeQuoteModal()">Cancel</button>
            <button id="quoteSubmitBtn" class="btn-primary" onclick="submitForwarderQuote()">Submit Quote</button>
        </div>
    </div>
</div>






<script>
// ============================================
// GLOBAL VARIABLES
// ============================================
var userType = 'client';
var currentUser = '';
var currentUserId = ''; // Supabase Auth UUID - PRIMARY IDENTIFIER
var currentUserEmail = ''; // Email for reference
var currentUserType = ''; // client veya forwarder
var currentRequestId = null;
var carrierMode = 'all'; // 'all', 'sea', 'air', 'land'
var currentLanguage = 'en'; // English only for MVP

// ============================================
// STUB DEFINITIONS (Rate module removed)
// ============================================
var forwarderRatesDB = { seaFreight: [], preCarriage: [], onCarriage: [], terminalCharges: [], foreignCustoms: [], customsFees: [] };
function updateMyRatesList() { console.log('Rate module disabled'); }
function saveForwarderRatesToStorage() { return true; }
function populatePortDropdowns() {}
function populateTurkishCities() {}
function initForwarderRatesForms() {}
function showRatesTab() {}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// COMPACT I18N HELPER (t() function)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var I18N = {
    tr: {
        // Quote Modal
        sendQuoteTitle: "Submit Quote",
        submitQuote: "Submit Quote",
        cancel: "Ä°ptal",
        message: "Mesaj",
        quotePrice: "Quote TutarÄ± (USD)",
        incoterm: "Incoterm",
        transitTime: "Transit SÃ¼resi (GÃ¼n)",
        validity: "GeÃ§erlilik (GÃ¼n)",
        notes: "Notlar (Opsiyonel)",
        placeholderNotes: "Ã–zel koÅŸullar, dahil olan hizmetler...",
        pricePlaceholder: "Ã¶rn. 2500",
        transitPlaceholder: "Ã¶rn. 18",
        days: "gÃ¼n",
        submitting: "GÃ¶nderiliyor...",
        quoteSent: "Submit Quoteildi",
        
        // Filter Labels
        openRequests: "Open RFQs",
        myQuotes: "Quotelerim",
        all: "TÃ¼mÃ¼",
        
        // Empty States
        noOpenRequests: "Current open RFQ available.",
        noQuotedRequests: "No RFQs quoted yet.",
        
        // Success Messages
        successQuoteSubmitted: "BaÅŸarÄ±lÄ±: Quote Submitted!",
        
        // Request Card Labels
        from: "Logout",
        to: "VarÄ±ÅŸ",
        transport: "Transport",
        weight: "AÄŸÄ±rlÄ±k",
        volume: "Hacim",
        loadDate: "Load Date",
        cargoType: "Kargo Tipi",
        quotesReceived: "quote alÄ±ndÄ±",
        noQuotesYet: "HenÃ¼z quote yok",
        
        // Freight Types
        sea: "Deniz",
        air: "Hava",
        land: "Kara",
        
        // Services
        insurance: "Insurance",
        customs: "Customs",
        warehouse: "Warehouse",
        packaging: "Paketleme",
        
        // Validation
        warningSelectRequest: "Warning: Please select an RFQ first!",
        warningFillFields: "Warning: LÃ¼tfen fiyat ve transit sÃ¼resini girin!",
        warningRequestNotFound: "Warning: RFQ not found!",
        
        // Messages
        noMessages: "HenÃ¼z mesaj yok"
    },
    en: {
        // Quote Modal
        sendQuoteTitle: "Send Quote",
        submitQuote: "Submit Quote",
        cancel: "Cancel",
        message: "Message",
        quotePrice: "Quote Price (USD)",
        incoterm: "Incoterm",
        transitTime: "Transit Time (Days)",
        validity: "Validity (Days)",
        notes: "Notes (Optional)",
        placeholderNotes: "Special conditions, included services...",
        pricePlaceholder: "e.g. 2500",
        transitPlaceholder: "e.g. 18",
        days: "days",
        submitting: "Submitting...",
        quoteSent: "Quote Submitted",
        
        // Filter Labels
        openRequests: "Open RFQs",
        myQuotes: "My Quotes",
        all: "All",
        
        // Empty States
        noOpenRequests: "No open requests at the moment.",
        noQuotedRequests: "You haven't submitted any quotes yet.",
        
        // Success Messages
        successQuoteSubmitted: "Success: Quote submitted!",
        
        // Request Card Labels
        from: "From",
        to: "To",
        transport: "Transport",
        weight: "Weight",
        volume: "Volume",
        loadDate: "Load Date",
        cargoType: "Cargo Type",
        quotesReceived: "quotes received",
        noQuotesYet: "No quotes yet",
        
        // Freight Types
        sea: "Sea",
        air: "Air",
        land: "Land",
        
        // Services
        insurance: "Insurance",
        customs: "Customs",
        warehouse: "Warehouse",
        packaging: "Packaging",
        
        // Validation
        warningSelectRequest: "Warning: No request selected for quote!",
        warningFillFields: "Warning: Please enter price and transit time!",
        warningRequestNotFound: "Warning: Request not found!",
        
        // Messages
        noMessages: "No messages yet"
    }
};

// Compact translation helper
function t(key) {
    var lang = currentLanguage || 'tr';
    return (I18N[lang] && I18N[lang][key]) ? I18N[lang][key] : key;
}

// Set language (alias for switchLanguage + I18N update)
function setLanguage(lang) {
    currentLanguage = (lang === 'en') ? 'en' : 'tr';
    localStorage.setItem('gfn_language', currentLanguage);
    applyI18n();
    if (typeof applyTranslations === 'function') {
        applyTranslations();
    }
}

// Apply I18N translations to dynamic elements
function applyI18n() {
    // Modal title
    var modalTitle = document.getElementById('quoteModalTitle');
    if (modalTitle) modalTitle.textContent = t('sendQuoteTitle');
    
    // Buttons
    var submitBtn = document.getElementById('quoteSubmitBtn');
    if (submitBtn) submitBtn.textContent = t('submitQuote');
    var cancelBtn = document.getElementById('quoteCancelBtn');
    if (cancelBtn) cancelBtn.textContent = t('cancel');
    
    // Labels
    var priceLabel = document.getElementById('quotePriceLabel');
    if (priceLabel) priceLabel.textContent = t('quotePrice');
    var incotermLabel = document.getElementById('incotermLabel');
    if (incotermLabel) incotermLabel.textContent = t('incoterm');
    var transitLabel = document.getElementById('transitLabel');
    if (transitLabel) transitLabel.textContent = t('transitTime');
    var validityLabel = document.getElementById('validityLabel');
    if (validityLabel) validityLabel.textContent = t('validity');
    var notesLabel = document.getElementById('notesLabel');
    if (notesLabel) notesLabel.textContent = t('notes');
    
    // Placeholders
    var notesInput = document.getElementById('quoteNotes');
    if (notesInput) notesInput.placeholder = t('placeholderNotes');
    
    var priceInput = document.getElementById('quotePriceInput');
    if (priceInput) priceInput.placeholder = t('pricePlaceholder');
    
    var transitInput = document.getElementById('transitInput');
    if (transitInput) transitInput.placeholder = t('transitPlaceholder');
    
    // Validity select options
    var validitySelect = document.getElementById('validityInput');
    if (validitySelect) {
        var dayText = t('days');
        validitySelect.innerHTML = 
            '<option value="3">3 ' + dayText + '</option>' +
            '<option value="5">5 ' + dayText + '</option>' +
            '<option value="7" selected>7 ' + dayText + '</option>' +
            '<option value="14">14 ' + dayText + '</option>' +
            '<option value="30">30 ' + dayText + '</option>';
    }
    
    // Re-render dynamic content that uses t() function
    if (typeof renderForwarderRequests === 'function') {
        renderForwarderRequests();
    }
    if (typeof renderForwarderQuotes === 'function') {
        renderForwarderQuotes();
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Ã‡OK DÄ°LLÄ° DESTEK SÄ°STEMÄ° (i18n)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var translations = {
    tr: {
        // Landing Page
        'landing.badge': 'OnaylÄ± Global Freight Network',
        'landing.heroLine1': 'DoÄŸru Forwarder.',
        'landing.heroLine2': 'Right Cargo.',
        'landing.heroLine3': 'DoÄŸru Hat.',
        'landing.subtitle': 'DoÄŸrulanmÄ±ÅŸ freight forwarder aÄŸÄ± ile ithalatÃ§Ä± ve ihracatÃ§Ä±larÄ± uygun hatlarda ve doÄŸru profillerle buluÅŸturuyoruz.',
        'landing.philosophy': 'Rekabet yaratmÄ±yoruz. DoÄŸru baÄŸlantÄ±yÄ± kuruyoruz.',
        'landing.joinNetwork': 'AÄŸa KatÄ±l',
        'landing.howItWorks': 'NasÄ±l Ã‡alÄ±ÅŸÄ±r?',
        'landing.getStarted': 'AÄŸa KatÄ±l',
        'landing.watchDemo': 'NasÄ±l Ã‡alÄ±ÅŸÄ±r?',
        'landing.verifiedForwarders': 'DoÄŸrulanmÄ±ÅŸ Forwarder\'lar',
        'landing.approvalBased': 'Onay TabanlÄ± EriÅŸim',
        'landing.tradeLaneMatching': 'Hat BazlÄ± EÅŸleÅŸtirme',
        'landing.qualifiedIntros': 'Nitelikli TanÄ±ÅŸtÄ±rmalar',
        'landing.freeSignup': 'DoÄŸrulanmÄ±ÅŸ Forwarder\'lar',
        'landing.instantQuote': 'Onay TabanlÄ± EriÅŸim',
        'landing.liveTracking': 'CanlÄ± Takip',
        
        // Legal
        'legal.terms': 'KullanÄ±m KoÅŸullarÄ±',
        'legal.privacy': 'Gizlilik PolitikasÄ±',
        'legal.kvkk': 'KVKK',
        'legal.disclaimer': 'Disclaimer',
        'legal.cookies': 'Ã‡erez PolitikasÄ±',
        'legal.copyright': 'Â© 2025 Global Freight Network. TÃ¼m haklarÄ± saklÄ±dÄ±r.',
        'legal.lastUpdate': 'Son gÃ¼ncelleme: 21 AralÄ±k 2025',
        'legal.understood': 'AnladÄ±m, Kapat',
        
        // Auth
        'auth.backToHome': 'â† Ana Sayfaya DÃ¶n',
        'auth.loginTitle': 'HesabÄ±nÄ±za LoginÄ±n',
        'auth.signupTitle': 'Yeni Hesap OluÅŸtur',
        'auth.orContinueWith': 'veya e-posta ile devam edin',
        'auth.orSignupWith': 'veya e-posta ile kayÄ±t olun',
        'auth.email': 'E-posta',
        'auth.emailPlaceholder': 'E-posta adresinizi girin',
        'auth.password': 'Åifre',
        'auth.passwordPlaceholder': 'Åifrenizi girin',
        'auth.rememberMe': 'Beni hatÄ±rla',
        'auth.login': 'Login',
        'auth.signUp': 'Sign Up',
        'auth.noAccount': "HesabÄ±nÄ±z yok mu?",
        'auth.hasAccount': 'Zaten hesabÄ±nÄ±z var mÄ±?',
        'auth.fullName': 'Ad Soyad',
        'auth.fullNamePlaceholder': 'AdÄ±nÄ±zÄ± girin',
        'auth.createPassword': 'Åifre oluÅŸturun',
        'auth.confirmPassword': 'Åifre Tekrar',
        'auth.confirmPasswordPlaceholder': 'Åifrenizi tekrar girin',
        'auth.companyName': 'Åirket AdÄ±',
        'auth.companyNamePlaceholder': 'Åirket adÄ±nÄ±z',
        'auth.companyType': 'Åirket Tipi',
        'auth.selectType': 'Tip seÃ§in',
        'auth.airCargo': 'Air Cargo Specialist',
        'auth.seaCargo': '>Sea Cargo UzmanÄ±',
        'auth.landCargo': 'Kara Kargo UzmanÄ±',
        'auth.multimodal': 'Multimodal Hizmetler',
        'auth.createAccount': 'Hesap OluÅŸtur',
        'auth.termsAccept': '<a onclick="openLegalModal(\'terms\')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">KullanÄ±m KoÅŸullarÄ±</a>\'nÄ± ve <a onclick="openLegalModal(\'privacy\')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Gizlilik PolitikasÄ±</a>\'nÄ± okudum ve kabul ediyorum. <span style="color: #dc2626;">*</span>',
        'auth.disclaimerAccept': '<a onclick="openLegalModal(\'disclaimer\')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Disclaimer</a>\'ni okudum ve I understand that the platform is only an intermediary and does not assume transportation liability. <span style="color: #dc2626;">*</span>',
        'auth.kvkkAccept': '<a onclick="openLegalModal(\'kvkk\')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">KVKK AydÄ±nlatma Metni</a>\'ni okudum ve kiÅŸisel verilerimin iÅŸlenmesine onay veriyorum. <span style="color: #dc2626;">*</span>',
        'auth.marketingAccept': 'Kampanya, duyuru ve pazarlama amaÃ§lÄ± elektronik ileti almak istiyorum. (Ä°steÄŸe baÄŸlÄ±)',
        
        // Role Selection
        'role.welcome': 'HoÅŸ Geldiniz!',
        'role.selectRole': 'Platformdaki rolÃ¼nÃ¼zÃ¼ seÃ§in',
        'role.forwarder': 'Freight Forwarder\'Ä±m',
        'role.forwarderDesc': 'Looking for Customers',
        'role.client': 'Kargo GÃ¶ndericisiyim',
        'role.clientDesc': 'Forwarder ArÄ±yorum',
        'role.activeRequests': 'Active RFQs',
        'role.activeRequests2400': '2.400+ Active RFQs',
        'role.forwardersCount': '1.850+ Forwarder',
        'role.imForwarder': 'Freight Forwarder\'Ä±m',
        'role.lookingForCustomers': 'Looking for Customers',
        'role.imClient': 'I am a Client',
        'role.lookingForForwarders': 'Forwarder ArÄ±yorum',
        'role.forwarderDescFull': 'Deniz, air ve land transportcÄ±lÄ±ÄŸÄ±nda uzmanlaÅŸmÄ±ÅŸ forwarder olarak aÄŸÄ±mÄ±za katÄ±lÄ±n ve doÄŸrulanmÄ±ÅŸ yÃ¼k sahipleriyle buluÅŸun.',
        'role.clientDescFull': 'For your cargo, verified forwarder aÄŸÄ±ndan find suitable matches. With qualified introductions reach the right partner.',
        'role.fwdFeature1': 'Quote yÃ¶netimi & takip',
        'role.fwdFeature2': 'AI destekli eÅŸleÅŸtirme quoteleri',
        'role.fwdFeature3': 'CanlÄ± armatÃ¶r tarifelerine eriÅŸim',
        'role.fwdFeature4': 'PDF ile toplu tarife yÃ¼kleme (Premium)',
        'role.clientFeature1': 'DoÄŸrulanmÄ±ÅŸ forwarder eÅŸleÅŸtirmesi',
        'role.clientFeature2': 'AI destekli eÅŸleÅŸtirme quoteleri',
        'role.clientFeature3': 'GerÃ§ek zamanlÄ± sevkiyat takibi',
        'role.clientFeature4': 'GÃ¼venli Ã¶deme & sigorta',
        'role.startAsForwarder': 'Forwarder Olarak BaÅŸla',
        'role.startAsClient': 'Start as Cargo Owner',
        
        // Dashboard - Client
        'dashboard.newQuote': 'New RFQ',
        'dashboard.myShipments': 'SevkiyatlarÄ±m',
        'dashboard.tracking': 'Takip',
        'dashboard.profile': 'Profileim',
        'dashboard.logout': 'Logout Yap',
        'dashboard.activeShipments': 'Aktif Sevkiyat',
        'dashboard.totalSpending': 'Toplam Harcama',
        
        // Request Form (eski Quote Form)
        'quote.title': 'Create New RFQ',
        'quote.from': 'Nereden',
        'quote.to': 'Nereye',
        'quote.cargoType': 'Kargo Tipi',
        'quote.containerType': 'Konteyner Tipi',
        'quote.weight': 'AÄŸÄ±rlÄ±k',
        'quote.getQuotes': 'Request Introduction',
        'quote.seaFreight': 'Deniz Yolu',
        'quote.airFreight': 'Hava Yolu',
        'quote.landFreight': 'Kara Yolu',
        'quote.multimodal': 'Multimodal',
        
        // Matching Results (eski Results)
        'results.title': 'EÅŸleÅŸme Ã–zeti',
        'results.sortBy': 'SÄ±rala',
        'results.cheapest': 'Uygun EÅŸleÅŸme',
        'results.fastest': 'En HÄ±zlÄ±',
        'results.bestRated': 'Best Rated',
        'results.transitTime': 'Transit SÃ¼re',
        'results.days': 'gÃ¼n',
        'results.viewDetails': 'Profilei Ä°ncele',
        'results.selectQuote': 'TanÄ±ÅŸtÄ±rmaya Devam Et',
        
        // Forwarder Dashboard
        'forwarder.dashboard': 'Ana Sayfa',
        'forwarder.requests': 'RFQs',
        'forwarder.myRates': 'My Rates',
        'forwarder.profile': 'Profileim',
        'forwarder.newRequests': 'New RFQler',
        'forwarder.pendingOffers': 'Bekleyen Quoteler',
        'forwarder.wonJobs': 'Onaylanan Ä°ÅŸler',
        
        // Common
        'common.save': 'Kaydet',
        'common.cancel': 'Ä°ptal',
        'common.delete': 'Sil',
        'common.edit': 'DÃ¼zenle',
        'common.search': 'Ara',
        'common.filter': 'Filtre',
        'common.loading': 'Loading...',
        'common.noResults': 'SonuÃ§ bulunamadÄ±',
        'common.success': 'BaÅŸarÄ±lÄ±',
        'common.error': 'Hata',
        'common.confirm': 'Onayla',
        'common.accept': 'Kabul Et',
        'common.reject': 'Reddet',
        'common.contactInfo': 'Ä°letiÅŸim Bilgileri',
        'common.close': 'Kapat',
        'common.yes': 'Evet',
        'common.no': 'HayÄ±r',
        
        // Validation
        'validation.required': 'Bu alan zorunludur',
        'validation.invalidEmail': 'GeÃ§erli bir e-posta adresi girin',
        'validation.passwordMismatch': 'Åifreler eÅŸleÅŸmiyor',
        'validation.acceptTerms': 'Devam etmek iÃ§in tÃ¼m zorunlu yasal belgeleri kabul etmelisiniz.',
        
        // Documents
        'docs.verificationTitle': 'GÃ¼venilirlik DoÄŸrulama Belgeleri',
        'docs.uploadDesc': 'Belgelerinizi yÃ¼kleyerek "DoÄŸrulanmÄ±ÅŸ" rozeti alÄ±n ve gÃ¼ven kazanÄ±n.',
        'docs.uploadDescForwarder': 'Belgelerinizi yÃ¼kleyerek "DoÄŸrulanmÄ±ÅŸ Forwarder" rozeti alÄ±n ve gain customer trust.',
        'docs.internationalCerts': 'UluslararasÄ± Sertifikalar (TÃ¼m Ãœlkeler Ä°Ã§in GeÃ§erli)',
        'docs.trustScore': 'GÃ¼venilirlik PuanÄ±nÄ±z:',
        'docs.verifiedBadgeNote': 'TÃ¼m zorunlu belgeler yÃ¼klendiÄŸinde "DoÄŸrulanmÄ±ÅŸ Forwarder" rozeti alÄ±rsÄ±nÄ±z.',
        
        // Profile
        'profile.companyContactInfo': 'Firma & Ä°letiÅŸim Bilgileri',
        'profile.editing': 'DÃ¼zenleniyor',
        'profile.saved': 'BaÅŸarÄ±lÄ±: KayÄ±tlÄ±',
        'profile.companyName': 'Firma AdÄ±',
        'profile.contactPerson': 'Yetkili KiÅŸi',
        'profile.email': 'E-posta',
        'profile.phone': 'Telefon',
        'profile.address': 'Adres',
        'profile.city': 'Åehir',
        'profile.country': 'Ãœlke',
        'profile.taxNo': 'Vergi No',
        'profile.website': 'Web Sitesi',
        'profile.whyContactInfo': 'Neden iletiÅŸim bilgilerim gerekli?',
        'profile.contactInfoDesc': 'TanÄ±ÅŸtÄ±rma onaylandÄ±ÄŸÄ±nda, doÄŸrudan iletiÅŸime geÃ§ebilmeniz iÃ§in bu bilgiler paylaÅŸÄ±lÄ±r.',
        'profile.myProfileTitle': 'My Profile & Contact Info',
        'profile.clientProfileDesc': 'Update your contact information - Forwarders can access this when introduction is approved',
        'profile.forwarderProfileDesc': 'Update your contact information - Cargo owners can access this when introduction is approved',
        'common.backHome': 'â† Home',
        
        // Menu
        'menu.roleSelect': 'Role Selection',
        'menu.home': 'Home',
        'menu.myRates': 'My Rates',
        'menu.containerTracking': 'Container Tracking',
        'menu.completedRequests': 'Completed RFQs',
        'menu.myQuotes': 'GÃ¶nderdiÄŸim Quoteler',
        'menu.incomingRequests': 'RFQ Inbox',
        'menu.profile': 'Profileim',
        'menu.newQuote': 'New RFQ',
        'menu.myShipments': 'SevkiyatlarÄ±m',
        'menu.tracking': 'Takip',
        'menu.messages': 'Mesajlar',
        'menu.createRequest': 'Request Quote',
        'menu.myRequests': 'RFQsim',
        'menu.receivedQuotes': 'Gelen Quoteler',
        
        // Dashboard
        'dashboard.welcome': 'HoÅŸ Geldiniz',
        'dashboard.logout': 'Logout Yap',
        'dashboard.forwarderSubtitle': 'Review matched RFQs ve make qualified introductions',
        'dashboard.clientSubtitle': 'DoÄŸrulanmÄ±ÅŸ forwarder aÄŸÄ±ndan eÅŸleÅŸmeler alÄ±n',
        'dashboard.allModes': 'TÃ¼m Modlar',
        
        // Request Card
        'request.from': 'NEREDEN',
        'request.to': 'NEREYE',
        'request.transport': 'Transport',
        'request.weight': 'AÄŸÄ±rlÄ±k',
        'request.volume': 'Hacim',
        'request.loadDate': 'Load Date',
        'request.incoterm': 'Incoterm',
        'request.cargoType': 'Cargo Type',
        'request.noQuotesYet': 'HenÃ¼z quote yok - Ä°lk siz gÃ¶nderin!',
        'request.quotesReceived': 'quote alÄ±ndÄ±',
        'request.message': 'Mesaj',
        'request.submitQuote': 'Submit Quote',
        'filter.openRequests': 'Open RFQs',
        'filter.myQuotes': 'Quotelerim',
        'filter.allRequests': 'TÃ¼mÃ¼',
        'request.daysAgo': 'gÃ¼n Ã¶nce',
        'request.hoursAgo': 'saat Ã¶nce',
        'request.justNow': 'Az Ã¶nce',
        
        // Stats
        'stats.totalRequests': 'Total RFQs',
        'stats.pending': 'Bekleyen',
        'stats.won': 'Onaylanan',
        'stats.thisMonth': 'Bu Ay',
        'stats.thisMonthCompleted': 'Bu Ay Completed',
        'stats.thisMonthRevenue': 'Bu Ay Gelir',
        'stats.thisMonthPremium': 'Bu Ay Prim',
        
        // Rates
        'rates.myRatesTitle': 'My Rates',
        'rates.myRatesDesc': 'Freight, land transport, terminal ve foreign customs enter your rates',
        'rates.seaFreight': 'Deniz Freight',
        'rates.foreignCustoms': 'YurtdÄ±ÅŸÄ± Customs',
        'rates.savedRates': 'Saved Rates',
        'rates.manualEntry': 'Manuel GiriÅŸ',
        'rates.aiPdfUpload': 'AI PDF YÃ¼kleme',
        'rates.addSeaFreight': 'Deniz Freight FiyatÄ± Ekle',
        'rates.baseRateStorage': 'Quoteler iÃ§in temel rate depolama',
        'rates.baseFreightRate': 'Temel Freight Ratei (Liman-Liman)',
        'rates.baseRateHelper': 'Bu rate yalnÄ±zca ana okyanus navlun bileÅŸenini temsil eder.',
        'rates.baseRate': 'Temel Rate (USD)',
        'rates.portToPort': 'Port to Port container freight rate',
        'rates.originPort': 'KalkÄ±ÅŸ LimanÄ±',
        'rates.destPort': 'VarÄ±ÅŸ LimanÄ±',
        'rates.shipmentType': 'GÃ¶nderim Ã‡eÅŸidi',
        'rates.containerType': 'Konteyner Tipi',
        'rates.serviceType': 'Servis Tipi',
        'rates.transitTime': 'Transit SÃ¼resi (GÃ¼n)',
        'rates.calculateWithAI': 'AI ile Fiyat Hesapla',
        'rates.autoRates': 'KayÄ±tlÄ± tarifelerinizden otomatik olarak Ã§eker',
        'rates.priceItems': 'Fiyat Kalemleri',
        'rates.manualAdjust': 'Manuel dÃ¼zenleme yapabilirsiniz',
        'rates.navlunOcean': 'Freight (Ocean Freight)',
        'rates.thcOrigin': 'THC Logout',
        'rates.subtotalCost': 'Ara Toplam (Maliyet)',
        'rates.profitMargin': 'Kar MarjÄ±',
        'rates.quotePriceCustomer': 'Quote Price to Customer',
        'rates.validityDate': 'GeÃ§erlilik Tarihi',
        'rates.notesOptional': 'Notlar (Ä°steÄŸe BaÄŸlÄ±)',
        'rates.saveSeaFreight': 'Deniz Freight Tarifesini Kaydet',
        'rates.preCarriage': 'Pre-Carriage',
        'rates.onCarriage': 'On-Carriage',
        'rates.addPreCarriage': 'Add Pre-Carriage Rate',
        'rates.preCarriageDesc': 'Fabrika/Warehouse â†’ YÃ¼kleme LimanÄ± (YurtiÃ§i)',
        'rates.originCity': 'Logout Åehri',
        'rates.freightCost': 'Freight Ãœcreti',
        'rates.validity': 'GeÃ§erlilik',
        'rates.savePreCarriage': 'Save Pre-Carriage',
        'rates.addOnCarriage': 'Add On-Carriage Rate',
        'rates.onCarriageDesc': 'VarÄ±ÅŸ LimanÄ± â†’ AlÄ±cÄ± Warehouse/Fabrika (YurtdÄ±ÅŸÄ±)',
        'rates.country': 'Ãœlke',
        'rates.destCity': 'VarÄ±ÅŸ Åehri',
        'rates.currency': 'Para Birimi',
        'rates.saveOnCarriage': 'Save On-Carriage',
        'rates.addTerminal': 'Terminal / THC Ãœcreti Ekle',
        'rates.terminalDesc': 'Liman terminal handling Ã¼cretleri',
        'rates.port': 'Liman',
        'rates.operationType': 'Operation Type',
        'rates.thcFee': 'THC Ãœcreti',
        'rates.docIncluded': 'DokÃ¼mantasyon dahil',
        'rates.sealIncluded': 'MÃ¼hÃ¼r dahil',
        'rates.ispsIncluded': 'ISPS dahil',
        'rates.saveThc': 'THC Tarifesini Kaydet',
        'rates.addForeignCustoms': 'YurtdÄ±ÅŸÄ± Customs Ãœcreti Ekle',
        'rates.foreignCustomsDesc': 'Partner aracÄ±lÄ±ÄŸÄ±yla foreign customs processing fees',
        'rates.foreignCustomsNote': 'YurtdÄ±ÅŸÄ± gÃ¼mrÃ¼k partnerinizin saÄŸladÄ±ÄŸÄ± tarifeleri girin. Bu tarifeler DDP quotelerinde kullanÄ±lacaktÄ±r.',
        'rates.entryPort': 'GiriÅŸ LimanÄ±',
        'rates.partnerCompany': 'Partner Firma',
        'rates.importCustomsFee': 'Ä°thalat Customs Ãœcreti',
        'rates.processingTime': 'Processing Time (GÃ¼n)',
        'rates.processingFee': 'Processing + document fee',
        'rates.includedServices': 'Dahil Servisler (kapsam netliÄŸi iÃ§in)',
        'rates.includedServicesHelper': 'KapsamÄ± netleÅŸtirmek iÃ§in bu rate\'e dahil servisleri seÃ§in. Fiyat dÃ¶kÃ¼mÃ¼ gerekli deÄŸildir.',
        'rates.tagOriginHaulage': 'Logout taÅŸÄ±masÄ± dahil',
        'rates.tagDestHaulage': 'VarÄ±ÅŸ taÅŸÄ±masÄ± dahil',
        'rates.tagTHC': 'Terminal / THC dahil',
        'rates.tagCustoms': 'Customsleme dahil',
        'rates.tagDocumentation': 'DokÃ¼mantasyon dahil',
        'rates.scopeNotes': 'Kapsam NotlarÄ±',
        'rates.scopeNotesPlaceholder': 'Ä°steÄŸe baÄŸlÄ± kapsam notlarÄ±, istisnalar veya varsayÄ±mlar...',
        'rates.scopeNotesHelper': 'KapsamÄ± netleÅŸtirmek iÃ§in bu alanÄ± kullanÄ±n. Bu, fiyatlandÄ±rma mantÄ±ÄŸÄ±nÄ± etkilemez.',
        'rates.saveRate': 'Rate Kaydet',
        'rates.saveForeignCustoms': 'YurtdÄ±ÅŸÄ± Customs Tarifesini Kaydet',
        'rates.mySavedRates': 'KayÄ±tlÄ± My Rates',
        'rates.noSavedRates': 'HenÃ¼z kayÄ±tlÄ± tarife yok',
        'rates.startAddingRates': 'YukarÄ±daki sekmelerden tarife ekleyerek baÅŸlayÄ±n',
        'rates.thcDest': 'THC VarÄ±ÅŸ',
        'rates.customsDest': 'Customs VarÄ±ÅŸ',
        'rates.transitDays': 'Transit (GÃ¼n)',
        'rates.freightCostUsd': 'Freight Ãœcreti (USD)',
        'rates.thcFeeUsd': 'THC Ãœcreti (USD)',
        'rates.importDeclaration': 'Ä°thalat BeyanÄ±',
        'rates.taxCalculation': 'Vergi Hesaplama',
        'rates.inspectionCoord': 'Muayene Koordinasyonu',
        'rates.freeStorage': '3 GÃ¼n Ãœcretsiz Warehouselama',
        'rates.seaFreight': 'Deniz Freight',
        
        // AI Messaging
        'ai.disclaimer': 'Bu iÃ§gÃ¶rÃ¼ler landr vermeyi desteklemek iÃ§in Ã¼retilmiÅŸtir. Nihai tanÄ±ÅŸtÄ±rmalar ve ticari koÅŸullar ilgili taraflarca belirlenir.',
        'ai.assistedInsights': 'AI Destekli Ä°Ã§gÃ¶rÃ¼ler',
        'ai.suitableMatch': 'Uygun EÅŸleÅŸme',
        'ai.ethicsNote': 'AI, ÅŸeffaflÄ±ÄŸÄ± ve uygunluÄŸu artÄ±rmak iÃ§in kullanÄ±lÄ±r, ticari landrlarÄ± otomatikleÅŸtirmek iÃ§in deÄŸil.',
        
        // AI PANEL - Final Specification (Tier-Based, Event-Driven)
        'ai.panelTitle': 'Quote AsistanÄ±',
        'ai.silentText': 'AI gerektiÄŸinde rehberlik saÄŸlayacaktÄ±r.',
        'ai.operationalReview': 'Operasyonel Ä°nceleme',
        'ai.finalConfirm': 'Bu quote operasyonel olarak tutarlÄ± gÃ¶rÃ¼nÃ¼yor. TanÄ±ÅŸtÄ±rmaya devam edebilirsiniz.',
        'ai.implicitDisclaimer': 'AI quote hazÄ±rlamayÄ± destekler. Ticari landrlar forwarder\'a aittir.',
        'ai.upsellText': 'GeliÅŸmiÅŸ operasyonel inceleme Premium AI ile kullanÄ±labilir.',
        'ai.roleStatementPremium': 'GeliÅŸmiÅŸ operasyonel zeka ve quote kalite asistanÄ±. Daha net, tutarlÄ± ve profesyonel quoteler sunmanÄ±za yardÄ±mcÄ± olur. Fiyat belirlemez, seÃ§enek seÃ§mez veya ticari landrlarÄ±n yerine geÃ§mez.',
        'ai.enhancedLaneIntel': 'GeliÅŸmiÅŸ Ticaret HattÄ± ZekasÄ±',
        'ai.laneNoteEnhanced': 'Bu aÄŸdaki benzer hatlarda, sea taÅŸÄ±macÄ±lÄ±ÄŸÄ± genellikle Ã¶ngÃ¶rÃ¼lebilir programlama iÃ§in tercih edilmektedir. Transit sÃ¼reler liman rotasyonu, aktarma kalÄ±plarÄ± ve mevsimsel faktÃ¶rlere gÃ¶re deÄŸiÅŸebilir.',
        'ai.laneInsight': 'Bu koridorda varÄ±ÅŸ noktasÄ±ndaki iÃ§ hat tÄ±kanÄ±klÄ±k risklerini azaltmak iÃ§in bazen multimodal seÃ§enekler tercih edilmektedir.',
        'ai.laneDisclaimer': 'Hat bilgileri, toplanmÄ±ÅŸ ve anonimleÅŸtirilmiÅŸ platform kalÄ±plarÄ±na ve genel lojistik bilgisine dayanmaktadÄ±r.',
        'ai.advancedConsistency': 'GeliÅŸmiÅŸ Quote TutarlÄ±lÄ±k Ä°ncelemesi',
        'ai.advancedConsistencyIntro': 'Ä°nce kapsam veya beklenti boÅŸluklarÄ±nÄ± belirler. YalnÄ±zca tavsiye niteliÄŸindedir â€” gereksinim deÄŸildir.',
        'ai.checkIncotermAdvanced': 'Incoterm kapsamÄ±: VarÄ±ÅŸ kapsam unsurlarÄ±nÄ± netleÅŸtirmeyi dÃ¼ÅŸÃ¼nebilirsiniz',
        'ai.checkTransitAdvanced': 'Transit sÃ¼re: Tipik hat kalÄ±plarÄ±yla uyumu doÄŸrulamak faydalÄ± olabilir',
        'ai.checkValidityAdvanced': 'GeÃ§erlilik sÃ¼resi: Genel uygulamanÄ±n dÄ±ÅŸÄ±ndaysa aÃ§Ä±klama faydalÄ± olabilir',
        'ai.checkScopeDDPAdvanced': 'DDP seÃ§ildi, aÃ§Ä±k varÄ±ÅŸ kapsamÄ± yok: Vergiler, resimler ve son mil unsurlarÄ±nÄ± doÄŸrulamayÄ± deÄŸerlendirin',
        'ai.checkNotesAdvanced': 'Notlar bÃ¶lÃ¼mÃ¼: Hizmet dahilileri eklemek daha net beklentiler belirlemeye yardÄ±mcÄ± olabilir',
        'ai.operationalConsiderations': 'Operasyonel DeÄŸerlendirmeler',
        'ai.opNoteLane': 'Bu ticaret hattÄ±nda dÃ¼zenli gemi seferleri var. Transit sÃ¼reler liman rotasyonuna ve gÃ¼zergaha baÄŸlÄ± olarak deÄŸiÅŸebilir.',
        'ai.opNoteCustoms': 'VarÄ±ÅŸ noktasÄ±nda gÃ¼mrÃ¼k iÅŸlem sÃ¼releri koÅŸullara baÄŸlÄ± olarak deÄŸiÅŸebilir.',
        'ai.opNoteLastMile': 'DDP sevkiyatlarÄ± ek son mil koordinasyonu gerektirebilir. Dahil edilen hizmetleri doÄŸrulamayÄ± deÄŸerlendirin.',
        'ai.opNoteCargo': 'Bu kargo tipi iÃ§in Ã¶zel kargo elleÃ§leme deÄŸerlendirmeleri geÃ§erli olabilir.',
        'ai.quoteFraming': 'Quote Ã‡erÃ§eveleme ve Beklenti YÃ¶netimi',
        'ai.framingNotePremium': 'Profesyonel yÃ¼k sahipleri genellikle quoteleri kapsam netliÄŸi ve hizmet dahilileri aÃ§Ä±sÄ±ndan inceler. Bu unsurlarÄ± notlar bÃ¶lÃ¼mÃ¼nde netleÅŸtirmek beklentileri uyumlu hale getirmeye yardÄ±mcÄ± olabilir.',
        'ai.framingSuggestion1': 'â€¢ Dahil olan ve olmayan unsurlarÄ± belirtmeyi deÄŸerlendirin',
        'ai.framingSuggestion2': 'â€¢ Transit sÃ¼re baÄŸlamÄ± gerÃ§ekÃ§i beklentiler belirlemeye yardÄ±mcÄ± olabilir',
        'ai.languageTone': 'Dil ve Ton Ä°yileÅŸtirme',
        'ai.toneNote': 'Quote notlarÄ±nda tarafsÄ±z, profesyonel ifadeler netliÄŸi artÄ±rabilir. Promosyon dilinden kaÃ§Ä±nÄ±n; olgusal hizmet aÃ§Ä±klamalarÄ±na odaklanÄ±n.',
        'ai.toneDisclaimer': 'AI otomatik dÃ¼zenleme yapmaz. Quoteler yalnÄ±zca tavsiye niteliÄŸindedir.',
        'ai.yourTariffs': 'Saved Ratesiniz',
        'ai.noSavedRates': 'Bu rota iÃ§in kayÄ±tlÄ± tarife yok.',
        'ai.commercialTermsNotice': 'TÃ¼m ticari koÅŸullar sizin tarafÄ±nÄ±zdan girilir ve gÃ¶nderilir. AI fiyatlandÄ±rmayÄ± etkilemez veya hesaplamaz.',
        'ai.forwarderDisclaimerFull': 'Bu iÃ§gÃ¶rÃ¼ler landr vermeyi desteklemek iÃ§in Ã¼retilmiÅŸtir. Nihai tanÄ±ÅŸtÄ±rmalar ve ticari koÅŸullar ilgili taraflarca belirlenir.',
        'ai.noAIPricing': 'AI fiyat Ã¼retmez veya seÃ§enek belirlemez.',
        
        // AI Client-Side Panel
        'ai.clientPanelTitle': 'AI Destekli Quote Ä°Ã§gÃ¶rÃ¼leri',
        'ai.transparencyBadge': 'ÅeffaflÄ±k KatmanÄ±',
        'ai.serviceScopeTitle': 'Hizmet KapsamÄ± Ã–zeti',
        'ai.serviceScopeIntro': 'AlÄ±nan quoteler hizmet kapsamÄ±nda farklÄ±lÄ±k gÃ¶stermektedir:',
        'ai.scopeDiff1': 'BazÄ± quoteler kapÄ±dan kapÄ±ya hizmet iÃ§ermektedir',
        'ai.scopeDiff2': 'DiÄŸerleri yalnÄ±zca limandan limana kapsam sunmaktadÄ±r',
        'ai.scopeDiff3': 'Customsleme dahil edilmesi deÄŸiÅŸkenlik gÃ¶stermektedir',
        'ai.scopeNote': 'Devam etmeden Ã¶nce her quotenin kapsam detaylarÄ±nÄ± inceleyin.',
        'ai.transitTimingTitle': 'Transit ve Zamanlama NotlarÄ±',
        'ai.transitIntro': 'Bu quoteler transit sÃ¼re ve geÃ§erlilik aÃ§Ä±sÄ±ndan farklÄ±lÄ±k gÃ¶stermektedir:',
        'ai.transitRange': 'Transit aralÄ±ÄŸÄ±:',
        'ai.validityRange': 'GeÃ§erlilik aralÄ±ÄŸÄ±:',
        'ai.transitTradeoff': 'Daha kÄ±sa transit daha dar teslimat pencereleri iÃ§erebilir. Daha uzun transit daha fazla planlama esnekliÄŸi saÄŸlayabilir.',
        'ai.verificationTitle': 'DoÄŸrulama Sinyalleri',
        'ai.verificationIntro': 'Forwarder gÃ¼ven gÃ¶stergeleri:',
        'ai.verifiedForwarders': 'TÃ¼m 5 forwarder doÄŸrulanmÄ±ÅŸ',
        'ai.laneExperience': 'Hat deneyimi forwarder\'lar arasÄ±nda deÄŸiÅŸkenlik gÃ¶stermektedir',
        'ai.reliabilityNote': 'GeÃ§miÅŸ gÃ¼venilirlik gÃ¶stergeleri profillerde mevcuttur',
        'ai.operationalTitle': 'Operasyonel DeÄŸerlendirmeler',
        'ai.opConsider1': 'Incoterm farklÄ±lÄ±klarÄ± risk ve sorumluluk daÄŸÄ±lÄ±mÄ±nÄ± etkiler',
        'ai.opConsider2': 'DokÃ¼mantasyon gereksinimleri forwarder\'a gÃ¶re deÄŸiÅŸebilir',
        'ai.opConsider3': 'TanÄ±ÅŸtÄ±rma sonrasÄ± doÄŸrudan iletiÅŸim mÃ¼mkÃ¼ndÃ¼r',
        'ai.noRankingNotice': 'HiÃ§bir quote sÄ±ralanmamÄ±ÅŸ veya tavsiye edilmemiÅŸtir. Bu panel incelemenizi desteklemek iÃ§in yapÄ±sal farklÄ±lÄ±klarÄ± aÃ§Ä±klar.',
        'ai.clientDisclaimer': 'AI iÃ§gÃ¶rÃ¼leri netlik ve anlayÄ±ÅŸÄ± artÄ±rmak iÃ§in saÄŸlanmÄ±ÅŸtÄ±r. Quoteleri veya ticari landrlarÄ± temsil etmezler. Nihai seÃ§im ve mÃ¼zakere doÄŸrudan taraflar arasÄ±nda yÃ¼rÃ¼tÃ¼lÃ¼r.',
        
        // Introduction Flow
        'intro.title': 'TanÄ±ÅŸtÄ±rma Talebi',
        'intro.pending': 'TanÄ±ÅŸtÄ±rma Bekliyor',
        'intro.approved': 'TanÄ±ÅŸtÄ±rma OnaylandÄ±',
        'intro.quoteShared': 'Quote PaylaÅŸÄ±ldÄ±',
        'intro.underReview': 'Quote Ä°nceleniyor',
        'intro.requestIntroduction': 'Request Introduction',
        'intro.proceedWith': 'TanÄ±ÅŸtÄ±rmaya Devam Et',
        'intro.infoNote': 'TanÄ±ÅŸtÄ±rmalar uyumluluk ve doÄŸrulama durumuna gÃ¶re yapÄ±lÄ±r. Bu platform halka aÃ§Ä±k ihale veya fiyat rekabeti saÄŸlamaz.',
        'intro.qualifiedNote': 'Bu nitelikli bir tanÄ±ÅŸtÄ±rmadÄ±r, halka aÃ§Ä±k bir ihale veya fiyat aÃ§Ä±k artÄ±rmasÄ± deÄŸildir.',
        
        // Completed Section
        'completed.title': 'Completed RFQs',
        'completed.subtitle': 'BaÅŸarÄ±yla tamamlanan sevkiyatlarÄ±nÄ±z',
        'completed.delivered': 'Teslim Edildi',
        'completed.freight': 'Freight',
        'completed.transit': 'Transit',
        'completed.carrier': 'TaÅŸÄ±yÄ±cÄ±',
        'completed.profit': 'Kar',
        
        // Message
        'message.messaging': 'MesajlaÅŸma',
        'message.noMessages': 'HenÃ¼z mesaj yok. Ä°lk mesajÄ± gÃ¶nderin!',
        'message.typeMessage': 'MesajÄ±nÄ±zÄ± yazÄ±n...',
        'chat.aiAssistant': 'AI Asistan',
    },
    
    en: {
        // Landing Page
        'landing.badge': 'Verified Global Freight Network',
        'landing.heroLine1': 'Right Forwarder.',
        'landing.heroLine2': 'Right Cargo.',
        'landing.heroLine3': 'Right Lane.',
        'landing.subtitle': 'We connect verified freight forwarders with importers and exporters on the right trade lanes with matched profiles.',
        'landing.philosophy': 'We don\'t create competition. We create the right connection.',
        'landing.joinNetwork': 'Join the Network',
        'landing.howItWorks': 'How It Works',
        'landing.getStarted': 'Join the Network',
        'landing.watchDemo': 'How It Works',
        'landing.verifiedForwarders': 'Verified Forwarders',
        'landing.approvalBased': 'Approval-Based Access',
        'landing.tradeLaneMatching': 'Trade Lane Matching',
        'landing.qualifiedIntros': 'Qualified Introductions',
        'landing.freeSignup': 'Verified Forwarders',
        'landing.instantQuote': 'Approval-Based Access',
        'landing.liveTracking': 'Live Tracking',
        
        // Legal
        'legal.terms': 'Terms of Service',
        'legal.privacy': 'Privacy Policy',
        'legal.kvkk': 'Data Protection',
        'legal.disclaimer': 'Disclaimer',
        'legal.cookies': 'Cookie Policy',
        'legal.copyright': 'Â© 2025 Global Freight Network. All rights reserved.',
        'legal.lastUpdate': 'Last updated: December 21, 2025',
        'legal.understood': 'I Understand, Close',
        
        // Auth
        'auth.backToHome': 'â† Back to Home',
        'auth.loginTitle': 'Sign In to Your Account',
        'auth.signupTitle': 'Create New Account',
        'auth.orContinueWith': 'or continue with email',
        'auth.orSignupWith': 'or sign up with email',
        'auth.email': 'Email',
        'auth.emailPlaceholder': 'Enter your email address',
        'auth.password': 'Password',
        'auth.passwordPlaceholder': 'Enter your password',
        'auth.rememberMe': 'Remember me',
        'auth.login': 'Sign In',
        'auth.signUp': 'Sign Up',
        'auth.noAccount': 'Don\'t have an account?',
        'auth.hasAccount': 'Already have an account?',
        'auth.fullName': 'Full Name',
        'auth.fullNamePlaceholder': 'Enter your name',
        'auth.createPassword': 'Create a password',
        'auth.confirmPassword': 'Confirm Password',
        'auth.confirmPasswordPlaceholder': 'Re-enter your password',
        'auth.companyName': 'Company Name',
        'auth.companyNamePlaceholder': 'Your company name',
        'auth.companyType': 'Company Type',
        'auth.selectType': 'Select type',
        'auth.airCargo': 'Air Freight Specialist',
        'auth.seaCargo': 'Sea Freight Specialist',
        'auth.landCargo': 'Land Freight Specialist',
        'auth.multimodal': 'Multimodal Services',
        'auth.createAccount': 'Create Account',
        'auth.termsAccept': 'I have read and accept the <a onclick="openLegalModal(\'terms\')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Terms of Service</a> and <a onclick="openLegalModal(\'privacy\')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Privacy Policy</a>. <span style="color: #dc2626;">*</span>',
        'auth.disclaimerAccept': 'I have read the <a onclick="openLegalModal(\'disclaimer\')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Disclaimer</a> and understand that the platform is only an intermediary. <span style="color: #dc2626;">*</span>',
        'auth.kvkkAccept': 'I have read the <a onclick="openLegalModal(\'kvkk\')" style="color: #1e3c72; text-decoration: underline; cursor: pointer;">Data Protection Notice</a> and consent to data processing. <span style="color: #dc2626;">*</span>',
        'auth.marketingAccept': 'I want to receive promotional and marketing communications. (Optional)',
        
        // Role Selection
        'role.welcome': 'Welcome!',
        'role.selectRole': 'Select your role on the platform',
        'role.forwarder': 'I\'m a Freight Forwarder',
        'role.forwarderDesc': 'Looking for Cargo Owners',
        'role.client': 'I\'m a Cargo Owner',
        'role.clientDesc': 'Looking for Forwarders',
        'role.activeRequests': 'Active Requests',
        'role.activeRequests2400': '2,400+ Active Requests',
        'role.forwardersCount': '1,850+ Verified Forwarders',
        'role.imForwarder': 'I\'m a Freight Forwarder',
        'role.lookingForCustomers': 'Looking for Cargo Owners',
        'role.imClient': 'I\'m a Cargo Owner',
        'role.lookingForForwarders': 'Looking for Forwarders',
        'role.forwarderDescFull': 'Join our verified network as a specialized forwarder and connect with qualified cargo owners on matched trade lanes.',
        'role.clientDescFull': 'Find verified forwarders from our trusted network. Get matched based on trade lanes and company profiles.',
        'role.fwdFeature1': 'Quote management & tracking',
        'role.fwdFeature2': 'AI-assisted matching insights',
        'role.fwdFeature3': 'Live carrier rate access',
        'role.fwdFeature4': 'Bulk rate upload via PDF (Premium)',
        'role.clientFeature1': 'Verified forwarder matching',
        'role.clientFeature2': 'AI-assisted matching recommendations',
        'role.clientFeature3': 'Real-time shipment tracking',
        'role.clientFeature4': 'Secure payment & insurance',
        'role.startAsForwarder': 'Start as Forwarder',
        'role.startAsClient': 'Start as Cargo Owner',
        
        // Dashboard - Client
        'dashboard.newQuote': 'New Request',
        'dashboard.myShipments': 'My Shipments',
        'dashboard.tracking': 'Tracking',
        'dashboard.profile': 'My Profile',
        'dashboard.logout': 'Logout',
        'dashboard.activeShipments': 'Active Shipments',
        'dashboard.totalSpending': 'Total Spending',
        
        // Request Form (formerly Quote Form)
        'quote.title': 'Create New Shipping Request',
        'quote.from': 'From',
        'quote.to': 'To',
        'quote.cargoType': 'Cargo Type',
        'quote.containerType': 'Container Type',
        'quote.weight': 'Weight',
        'quote.getQuotes': 'Request Introduction',
        'quote.seaFreight': 'Sea Freight',
        'quote.airFreight': 'Air Freight',
        'quote.landFreight': 'Land Freight',
        'quote.multimodal': 'Multimodal',
        
        // Matching Results (formerly Results)
        'results.title': 'Matching Overview',
        'results.sortBy': 'Sort by',
        'results.cheapest': 'Suitable Match',
        'results.fastest': 'Fastest',
        'results.bestRated': 'Highest Rated',
        'results.transitTime': 'Transit Time',
        'results.days': 'days',
        'results.viewDetails': 'View Profile',
        'results.selectQuote': 'Proceed with Introduction',
        
        // Forwarder Dashboard
        'forwarder.dashboard': 'Dashboard',
        'forwarder.requests': 'Requests',
        'forwarder.myRates': 'My Rates',
        'forwarder.profile': 'My Profile',
        'forwarder.newRequests': 'New Requests',
        'forwarder.pendingOffers': 'Pending Quotes',
        'forwarder.wonJobs': 'Approved Jobs',
        
        // Common
        'common.save': 'Save',
        'common.cancel': 'Cancel',
        'common.delete': 'Delete',
        'common.edit': 'Edit',
        'common.search': 'Search',
        'common.filter': 'Filter',
        'common.loading': 'Loading...',
        'common.noResults': 'No results found',
        'common.success': 'Success',
        'common.error': 'Error',
        'common.confirm': 'Confirm',
        'common.accept': 'Accept',
        'common.reject': 'Reject',
        'common.contactInfo': 'Contact Information',
        'common.close': 'Close',
        'common.yes': 'Yes',
        'common.no': 'No',
        
        // Validation
        'validation.required': 'This field is required',
        'validation.invalidEmail': 'Please enter a valid email address',
        'validation.passwordMismatch': 'Passwords do not match',
        'validation.acceptTerms': 'You must accept all required legal documents to continue.',
        
        // Documents
        'docs.verificationTitle': 'Verification Documents',
        'docs.uploadDesc': 'Upload your documents to get "Verified" badge and gain trust.',
        'docs.uploadDescForwarder': 'Upload your documents to get "Verified Forwarder" badge and gain trust.',
        'docs.internationalCerts': 'International Certificates (Valid for All Countries)',
        'docs.trustScore': 'Trust Score:',
        'docs.verifiedBadgeNote': 'Upload all required documents to get "Verified Forwarder" badge.',
        
        // Profile
        'profile.companyContactInfo': 'Company & Contact Information',
        'profile.editing': 'Editing',
        'profile.saved': 'Success: Saved',
        'profile.companyName': 'Company Name',
        'profile.contactPerson': 'Contact Person',
        'profile.email': 'Email',
        'profile.phone': 'Phone',
        'profile.address': 'Address',
        'profile.city': 'City',
        'profile.country': 'Country',
        'profile.taxNo': 'Tax Number',
        'profile.website': 'Website',
        'profile.whyContactInfo': 'Why is my contact information required?',
        'profile.contactInfoDesc': 'When an introduction is approved, this information will be shared so you can communicate directly.',
        'profile.myProfileTitle': 'My Profile & Contact Info',
        'profile.clientProfileDesc': 'Update your contact information - When an introduction is approved, the forwarder can access this information',
        'profile.forwarderProfileDesc': 'Update your contact information - When an introduction is approved, the cargo owner can access this information',
        'common.backHome': 'â† Home',
        
        // Menu
        'menu.roleSelect': 'Role Selection',
        'menu.home': 'Home',
        'menu.myRates': 'My Rates',
        'menu.containerTracking': 'Container Tracking',
        'menu.completedRequests': 'Completed Shipments',
        'menu.myQuotes': 'My Quotes',
        'menu.incomingRequests': 'RFQ Inbox',
        'menu.profile': 'Profile',
        'menu.newQuote': 'New Request',
        'menu.myShipments': 'My Shipments',
        'menu.tracking': 'Tracking',
        'menu.messages': 'Messages',
        'menu.createRequest': 'Request Quote',
        'menu.myRequests': 'My Requests',
        'menu.receivedQuotes': 'Received Quotes',
        
        // Notifications
        'notifications.title': 'Notifications',
        'notifications.markAllRead': 'Mark all as read',
        'notifications.newQuote': 'New quote!',
        'notifications.quoteResponse': 'ABC Logistics sent a commercial quote',
        'notifications.shipmentUpdated': 'Shipment updated!',
        
        // Dashboard
        'dashboard.welcome': 'Welcome',
        'dashboard.logout': 'Logout',
        'dashboard.forwarderSubtitle': 'Review matched requests and make qualified introductions',
        'dashboard.clientSubtitle': 'Get matched with verified forwarders from our network',
        'dashboard.allModes': 'All Modes',
        
        // Request Card
        'request.from': 'FROM',
        'request.to': 'TO',
        'request.transport': 'Transport',
        'request.weight': 'Weight',
        'request.volume': 'Volume',
        'request.loadDate': 'Load Date',
        'request.incoterm': 'Incoterm',
        'request.cargoType': 'Cargo Type',
        'request.noQuotesYet': 'No quotes yet - Be the first!',
        'request.quotesReceived': 'quotes received',
        'request.message': 'Message',
        'request.submitQuote': 'Submit Quote',
        'filter.openRequests': 'Open RFQs',
        'filter.myQuotes': 'My Quotes',
        'filter.allRequests': 'All',
        'request.daysAgo': 'days ago',
        'request.hoursAgo': 'hours ago',
        'request.justNow': 'Just now',
        
        // Stats
        'stats.totalRequests': 'Total Requests',
        'stats.pending': 'Pending',
        'stats.won': 'Approved',
        'stats.thisMonth': 'This Month',
        'stats.thisMonthCompleted': 'Completed This Month',
        'stats.thisMonthRevenue': 'Revenue This Month',
        'stats.thisMonthPremium': 'Premium This Month',
        
        // Rates
        'rates.myRatesTitle': 'My Rate Tariffs',
        'rates.myRatesDesc': 'Enter your freight, land transport, terminal and customs tariffs',
        'rates.seaFreight': 'Sea Freight',
        'rates.foreignCustoms': 'Foreign Customs',
        'rates.savedRates': 'Saved Rates',
        'rates.manualEntry': 'Manual Entry',
        'rates.aiPdfUpload': 'AI PDF Upload',
        'rates.addSeaFreight': 'Add Sea Freight Rate',
        'rates.baseRateStorage': 'Base rate storage for quotes',
        'rates.baseFreightRate': 'Base Freight Rate (Port-to-Port)',
        'rates.baseRateHelper': 'This rate represents the main ocean freight component only.',
        'rates.baseRate': 'Base Rate (USD)',
        'rates.portToPort': 'Port to port container shipping rate',
        'rates.originPort': 'Origin Port',
        'rates.destPort': 'Destination Port',
        'rates.shipmentType': 'Shipment Type',
        'rates.containerType': 'Container Type',
        'rates.serviceType': 'Service Type',
        'rates.transitTime': 'Transit Time (Days)',
        'rates.calculateWithAI': 'Calculate with AI',
        'rates.autoRates': 'Automatically pulls rates from your saved tariffs',
        'rates.priceItems': 'Price Items',
        'rates.manualAdjust': 'You can make manual adjustments',
        'rates.navlunOcean': 'Ocean Freight',
        'rates.thcOrigin': 'THC Origin',
        'rates.subtotalCost': 'Subtotal (Cost)',
        'rates.profitMargin': 'Profit Margin',
        'rates.quotePriceCustomer': 'Quote Price for Customer',
        'rates.validityDate': 'Validity Date',
        'rates.notesOptional': 'Notes (Optional)',
        'rates.saveSeaFreight': 'Save Sea Freight Rate',
        'rates.preCarriage': 'Pre-Carriage',
        'rates.onCarriage': 'On-Carriage',
        'rates.addPreCarriage': 'Add Pre-Carriage Rate',
        'rates.preCarriageDesc': 'Factory/Warehouse â†’ Loading Port (Domestic)',
        'rates.originCity': 'Origin City',
        'rates.freightCost': 'Freight Cost',
        'rates.validity': 'Validity',
        'rates.savePreCarriage': 'Save Pre-Carriage',
        'rates.addOnCarriage': 'Add On-Carriage Rate',
        'rates.onCarriageDesc': 'Destination Port â†’ Buyer Warehouse/Factory (Overseas)',
        'rates.country': 'Country',
        'rates.destCity': 'Destination City',
        'rates.currency': 'Currency',
        'rates.saveOnCarriage': 'Save On-Carriage',
        'rates.addTerminal': 'Add Terminal / THC Fee',
        'rates.terminalDesc': 'Port terminal handling charges',
        'rates.port': 'Port',
        'rates.operationType': 'Operation Type',
        'rates.thcFee': 'THC Fee',
        'rates.docIncluded': 'Documentation included',
        'rates.sealIncluded': 'Seal included',
        'rates.ispsIncluded': 'ISPS included',
        'rates.saveThc': 'Save THC Rate',
        'rates.addForeignCustoms': 'Add Foreign Customs Fee',
        'rates.foreignCustomsDesc': 'Foreign customs processing fees through partners',
        'rates.foreignCustomsNote': 'Enter the rates your foreign customs partner provides. These rates will be used in DDP quotes.',
        'rates.entryPort': 'Entry Port',
        'rates.partnerCompany': 'Partner Company',
        'rates.importCustomsFee': 'Import Customs Fee',
        'rates.processingTime': 'Processing Time (Days)',
        'rates.processingFee': 'Processing + document fee',
        'rates.includedServices': 'Included Services (for scope clarity)',
        'rates.includedServicesHelper': 'Select services included in this rate to clarify scope. No price breakdown required.',
        'rates.tagOriginHaulage': 'Origin haulage included',
        'rates.tagDestHaulage': 'Destination haulage included',
        'rates.tagTHC': 'Terminal / THC included',
        'rates.tagCustoms': 'Customs clearance included',
        'rates.tagDocumentation': 'Documentation included',
        'rates.scopeNotes': 'Scope Notes',
        'rates.scopeNotesPlaceholder': 'Optional scope notes, exclusions, or assumptions...',
        'rates.scopeNotesHelper': 'Use this field to clarify coverage. This does not affect pricing logic.',
        'rates.saveRate': 'Save Rate',
        'rates.saveForeignCustoms': 'Save Foreign Customs Rate',
        'rates.mySavedRates': 'My Saved Rates',
        'rates.noSavedRates': 'No saved rates yet',
        'rates.startAddingRates': 'Start by adding rates from the tabs above',
        
        // Completed Section
        'completed.title': 'Completed Shipments',
        'completed.subtitle': 'Your successfully completed shipments',
        'completed.delivered': 'Delivered',
        'completed.freight': 'Freight',
        'completed.transit': 'Transit',
        'completed.carrier': 'Carrier',
        'completed.profit': 'Profit',
        'rates.thcDest': 'THC Destination',
        'rates.customsDest': 'Customs Destination',
        'rates.transitDays': 'Transit (Days)',
        'rates.freightCostUsd': 'Freight Cost (USD)',
        'rates.thcFeeUsd': 'THC Fee (USD)',
        'rates.importDeclaration': 'Import Declaration',
        'rates.taxCalculation': 'Tax Calculation',
        'rates.inspectionCoord': 'Inspection Coordination',
        'rates.freeStorage': '3 Days Free Storage',
        'rates.seaFreight': 'Sea Freight',
        
        // AI Messaging
        'ai.disclaimer': 'These insights are generated to support decision-making. Final introductions and commercial terms are determined by the parties involved.',
        'ai.assistedInsights': 'AI-Assisted Insights',
        'ai.suitableMatch': 'Suitable Match',
        'ai.ethicsNote': 'AI is used to enhance transparency and relevance, not to automate commercial decisions.',
        
        // AI PANEL - Final Specification (Tier-Based, Event-Driven)
        'ai.panelTitle': 'Quote Assistant',
        'ai.silentText': 'AI will provide guidance when needed.',
        'ai.operationalReview': 'Operational Review',
        'ai.finalConfirm': 'This quote appears operationally consistent. You may proceed with the introduction.',
        'ai.implicitDisclaimer': 'AI supports quote preparation. Commercial decisions remain with the forwarder.',
        'ai.upsellText': 'Advanced operational review available with Premium AI.',
        'ai.roleStatementPremium': 'Advanced operational intelligence and quote quality assistant. Helps you present clearer, more consistent, and more professional quotes. Does not determine prices, select options, or replace commercial judgment.',
        'ai.enhancedLaneIntel': 'Enhanced Trade Lane Intelligence',
        'ai.laneNoteEnhanced': 'On similar lanes within this network, sea freight is typically used for predictable scheduling. Transit times may vary depending on port rotation, transshipment patterns, and seasonal factors.',
        'ai.laneInsight': 'Multimodal options are sometimes chosen on this corridor to mitigate inland congestion risks at destination.',
        'ai.laneDisclaimer': 'Lane information is based on aggregated, anonymized platform patterns and general logistics knowledge.',
        'ai.advancedConsistency': 'Advanced Quote Consistency Review',
        'ai.advancedConsistencyIntro': 'Identifies subtle scope or expectation gaps. Advisory only â€” not requirements.',
        'ai.checkIncotermAdvanced': 'Incoterm scope: You may consider clarifying destination coverage elements',
        'ai.checkTransitAdvanced': 'Transit time: It may be helpful to confirm alignment with typical lane patterns',
        'ai.checkValidityAdvanced': 'Validity period: May benefit from explanation if outside general practice',
        'ai.checkScopeDDPAdvanced': 'DDP selected without explicit destination scope: Consider confirming duties, taxes, and last-mile elements',
        'ai.checkNotesAdvanced': 'Notes section: Adding service inclusions may help set clearer expectations',
        'ai.operationalConsiderations': 'Operational Considerations',
        'ai.opNoteLane': 'This trade lane has regular vessel schedules. Transit times may vary depending on port rotation and routing.',
        'ai.opNoteCustoms': 'Customs clearance timelines may vary at destination depending on conditions.',
        'ai.opNoteLastMile': 'DDP shipments may require additional last-mile coordination. Consider confirming included services.',
        'ai.opNoteCargo': 'Special cargo handling considerations may apply for this cargo type.',
        'ai.quoteFraming': 'Quote Framing & Expectation Management',
        'ai.framingNotePremium': 'Professional cargo owners typically review quotes for scope clarity and service inclusions. Clarifying these elements in the notes section may help align expectations.',
        'ai.framingSuggestion1': 'â€¢ Consider specifying what is included vs. excluded',
        'ai.framingSuggestion2': 'â€¢ Transit time context may help set realistic expectations',
        'ai.languageTone': 'Language & Tone Refinement',
        'ai.toneNote': 'Neutral, professional wording in quote notes can enhance clarity. Avoid promotional language; focus on factual service descriptions.',
        'ai.toneDisclaimer': 'AI does not auto-edit. Suggestions are advisory only.',
        'ai.yourTariffs': 'Your Saved Tariffs',
        'ai.noSavedRates': 'No saved tariffs for this route.',
        'ai.commercialTermsNotice': 'All commercial terms are entered and submitted by you. AI does not influence or calculate pricing.',
        'ai.forwarderDisclaimerFull': 'These insights are generated to support decision-making. Final introductions and commercial terms are determined by the parties involved.',
        'ai.noAIPricing': 'AI does not generate prices or select options.',
        
        // AI Client-Side Panel
        'ai.clientPanelTitle': 'AI-Assisted Quote Insights',
        'ai.transparencyBadge': 'Transparency Layer',
        'ai.serviceScopeTitle': 'Service Scope Overview',
        'ai.serviceScopeIntro': 'The received quotes vary in their service coverage:',
        'ai.scopeDiff1': 'Some quotes include door-to-door service',
        'ai.scopeDiff2': 'Others cover port-to-port only',
        'ai.scopeDiff3': 'Customs clearance inclusion varies',
        'ai.scopeNote': 'Review each quote\'s scope details before proceeding.',
        'ai.transitTimingTitle': 'Transit & Timing Notes',
        'ai.transitIntro': 'These quotes differ in transit time and validity:',
        'ai.transitRange': 'Transit range:',
        'ai.validityRange': 'Validity range:',
        'ai.transitTradeoff': 'Shorter transit may involve tighter delivery windows. Longer transit may provide more scheduling flexibility.',
        'ai.verificationTitle': 'Verification Signals',
        'ai.verificationIntro': 'Forwarder trust indicators observed:',
        'ai.verifiedForwarders': 'All 5 forwarders are verified',
        'ai.laneExperience': 'Lane experience varies between forwarders',
        'ai.reliabilityNote': 'Historical reliability indicators are available in profiles',
        'ai.operationalTitle': 'Operational Considerations',
        'ai.opConsider1': 'Incoterm differences affect risk and responsibility allocation',
        'ai.opConsider2': 'Documentation requirements may vary by forwarder',
        'ai.opConsider3': 'Direct communication is available after proceeding with introduction',
        'ai.noRankingNotice': 'No quote is ranked or recommended. This panel explains structural differences to support your review.',
        'ai.clientDisclaimer': 'AI insights are provided to improve clarity and understanding. They do not represent recommendations or commercial decisions. Final selection and negotiation are conducted directly between parties.',
        
        // Introduction Flow
        'intro.title': 'Introduction Request',
        'intro.pending': 'Introduction Pending',
        'intro.approved': 'Introduction Approved',
        'intro.quoteShared': 'Quote Shared',
        'intro.underReview': 'Quote Under Review',
        'intro.requestIntroduction': 'Request Introduction',
        'intro.proceedWith': 'Proceed with Introduction',
        'intro.infoNote': 'Introductions are made based on compatibility and verification status. This platform does not facilitate public bidding or price competition.',
        'intro.qualifiedNote': 'This is a qualified introduction, not a public tender or price auction.',
        
        // Message
        'message.messaging': 'Messaging',
        'message.noMessages': 'No messages yet. Send the first message!',
        'message.typeMessage': 'Type your message...',
        'chat.aiAssistant': 'AI Assistant',
    }
};

// Dil deÄŸiÅŸtirme fonksiyonu
function switchLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('gfn_language', lang);
    
    // Bayrak SVG'leri
    var trFlag = '<svg width="20" height="14" viewBox="0 0 20 14" style="border-radius: 2px;"><rect width="20" height="14" fill="#E30A17"/><circle cx="8" cy="7" r="4" fill="white"/><circle cx="9" cy="7" r="3.2" fill="#E30A17"/><polygon points="10,7 13,5.5 11,7 13,8.5" fill="white"/></svg>';
    var enFlag = '<svg width="20" height="14" viewBox="0 0 20 14" style="border-radius: 2px;"><rect width="20" height="14" fill="#012169"/><path d="M0,0 L20,14 M20,0 L0,14" stroke="white" stroke-width="2.5"/><path d="M0,0 L20,14 M20,0 L0,14" stroke="#C8102E" stroke-width="1.5"/><path d="M10,0 V14 M0,7 H20" stroke="white" stroke-width="4"/><path d="M10,0 V14 M0,7 H20" stroke="#C8102E" stroke-width="2.5"/></svg>';
    
    // TÃ¼m dil butonlarÄ±nÄ± gÃ¼ncelle
    var flagBtns = [document.getElementById('currentLangFlag'), document.getElementById('currentLangFlag2')];
    var textBtns = [document.getElementById('currentLangText'), document.getElementById('currentLangText2')];
    
    flagBtns.forEach(function(btn) {
        if (btn) btn.innerHTML = lang === 'tr' ? trFlag : enFlag;
    });
    textBtns.forEach(function(btn) {
        if (btn) btn.textContent = lang === 'tr' ? 'TR' : 'EN';
    });
    
    // TÃ¼m dropdown'larÄ± kapat
    var dropdowns = [document.getElementById('langDropdown'), document.getElementById('langDropdown2')];
    dropdowns.forEach(function(dd) {
        if (dd) dd.classList.add('hidden');
    });
    
    // TÃ¼m Ã§evrilebilir elementleri gÃ¼ncelle
    applyTranslations();
    
    // I18N'i de gÃ¼ncelle (t() fonksiyonu iÃ§in)
    applyI18n();
    
    // Yasal belgeleri gÃ¼ncelle
    updateLegalDocuments();
}

// Ã‡evirileri uygula
function applyTranslations() {
    var lang = currentLanguage;
    var t = translations[lang];
    if (!t) return;
    
    // data-i18n attribute'lu elementleri gÃ¼ncelle
    document.querySelectorAll('[data-i18n]').forEach(function(el) {
        var key = el.getAttribute('data-i18n');
        if (t[key]) {
            el.textContent = t[key];
        }
    });
    
    // data-i18n-html attribute'lu elementleri gÃ¼ncelle (HTML iÃ§erik)
    document.querySelectorAll('[data-i18n-html]').forEach(function(el) {
        var key = el.getAttribute('data-i18n-html');
        if (t[key]) {
            el.innerHTML = t[key];
        }
    });
    
    // data-i18n-placeholder attribute'lu inputlarÄ± gÃ¼ncelle
    document.querySelectorAll('[data-i18n-placeholder]').forEach(function(el) {
        var key = el.getAttribute('data-i18n-placeholder');
        if (t[key]) {
            el.placeholder = t[key];
        }
    });
    
    // Belge bÃ¶lÃ¼mlerini yeniden render et (eÄŸer gÃ¶rÃ¼nÃ¼rse)
    var fwdCountry = document.getElementById('forwarderCountry');
    if (fwdCountry && fwdCountry.value) {
        updateForwarderDocRequirements();
    }
    var clientCountry = document.getElementById('clientCountrySelect');
    if (clientCountry && clientCountry.value) {
        updateClientDocRequirements();
    }
    
    // Re-render forwarder request cards (if visible)
    var requestsContainer = document.getElementById('requestsContainer');
    if (requestsContainer && typeof renderForwarderRequests === 'function') {
        renderForwarderRequests();
    }
}

// Dil menÃ¼sÃ¼nÃ¼ aÃ§/kapa
function toggleLanguageMenu() {
    var dropdown = document.getElementById('langDropdown');
    if (dropdown) dropdown.classList.toggle('hidden');
    // DiÄŸer dropdown'Ä± kapat
    var dropdown2 = document.getElementById('langDropdown2');
    if (dropdown2) dropdown2.classList.add('hidden');
}

function toggleLanguageMenu2() {
    var dropdown = document.getElementById('langDropdown2');
    if (dropdown) dropdown.classList.toggle('hidden');
    // DiÄŸer dropdown'Ä± kapat
    var dropdown1 = document.getElementById('langDropdown');
    if (dropdown1) dropdown1.classList.add('hidden');
}

// Sayfa yÃ¼klendiÄŸinde dil ayarla
document.addEventListener('DOMContentLoaded', function() {
    // KayÄ±tlÄ± dili uygula
    if (currentLanguage) {
        switchLanguage(currentLanguage);
    }
    
    // Sayfa dÄ±ÅŸÄ±na tÄ±klandÄ±ÄŸÄ±nda dropdown kapat
    document.addEventListener('click', function(e) {
        var langSelectors = document.querySelectorAll('.language-selector, .language-selector-small');
        var clickedInside = false;
        langSelectors.forEach(function(sel) {
            if (sel && sel.contains(e.target)) clickedInside = true;
        });
        if (!clickedInside) {
            var dropdowns = [document.getElementById('langDropdown'), document.getElementById('langDropdown2')];
            dropdowns.forEach(function(dd) {
                if (dd) dd.classList.add('hidden');
            });
        }
    });
});

// Yasal belgeleri dile gÃ¶re gÃ¼ncelle
function updateLegalDocuments() {
    if (currentLanguage === 'en') {
        legalDocuments.terms.title = 'Terms of Service';
        legalDocuments.terms.content = getEnglishTerms();
        legalDocuments.privacy.title = 'Privacy Policy';
        legalDocuments.privacy.content = getEnglishPrivacy();
        legalDocuments.disclaimer.title = 'Disclaimer';
        legalDocuments.disclaimer.content = getEnglishDisclaimer();
        legalDocuments.kvkk.title = 'Data Protection Notice';
        legalDocuments.kvkk.content = getEnglishDataProtection();
        legalDocuments.cookies.title = 'Cookie Policy';
        legalDocuments.cookies.content = getEnglishCookies();
    } else {
        // TÃ¼rkÃ§e iÃ§erikleri geri yÃ¼kle (orijinal iÃ§erikler zaten tanÄ±mlÄ±)
        resetTurkishLegalDocuments();
    }
}

function getEnglishTerms() {
    return '<div style="font-family: system-ui, -apple-system, sans-serif;"><h3 style="color: #1e3c72;">1. PARTIES AND DEFINITIONS</h3><p><strong>1.1.</strong> These Terms of Service govern the use of Global Freight Network platform operated by [COMPANY NAME].</p><p><strong>1.2.</strong> Platform: Online logistics intermediary service.</p><p><strong>1.3.</strong> Forwarder: Freight forwarder companies offering services on the Platform.</p><p><strong>1.4.</strong> Client: Individuals or organizations requesting shipping services.</p><h3 style="color: #1e3c72; margin-top: 24px;">2. PLATFORM NATURE AND INTERMEDIARY STATUS</h3><p><strong>2.1.</strong> The Platform is solely an <strong>INTERMEDIARY</strong> facilitating communication between Clients and Forwarders.</p><p><strong>2.2.</strong> The Company is <strong>NOT</strong> a party to transportation transactions.</p><p><strong>2.3.</strong> The transportation contract is established directly between the Client and Forwarder.</p><h3 style="color: #1e3c72; margin-top: 24px;">3. USER OBLIGATIONS</h3><p><strong>3.1.</strong> Users warrant the accuracy of information provided during registration.</p><p><strong>3.2.</strong> Users agree to use the Platform only for lawful purposes.</p><p><strong>3.3.</strong> Users represent that uploaded documents are authentic and current.</p><h3 style="color: #1e3c72; margin-top: 24px;">4. JURISDICTION</h3><p><strong>4.1.</strong> Disputes arising from these terms shall be subject to <strong>Istanbul Courts</strong>.</p><p><strong>4.2.</strong> These Terms are governed by the laws of the Republic of Turkey.</p></div>';
}

function getEnglishPrivacy() {
    return '<div style="font-family: system-ui, -apple-system, sans-serif;"><h3 style="color: #1e3c72;">1. DATA COLLECTED</h3><p>We collect the following personal data:</p><ul style="margin-left: 20px;"><li>Identity information (name, ID number)</li><li>Contact information (email, phone, address)</li><li>Company information (trade name, tax number)</li><li>Financial information (bank account, billing)</li><li>Usage data (IP address, browser info, transaction history)</li></ul><h3 style="color: #1e3c72; margin-top: 24px;">2. DATA PROCESSING PURPOSES</h3><ul style="margin-left: 20px;"><li>Providing Platform services</li><li>User account management</li><li>Client-Forwarder matching</li><li>Legal obligations</li><li>Security and fraud prevention</li></ul><h3 style="color: #1e3c72; margin-top: 24px;">3. DATA SHARING</h3><p>Your data may be shared with relevant Forwarders or Clients for service provision, and with public authorities as required by law.</p><h3 style="color: #1e3c72; margin-top: 24px;">4. DATA SECURITY</h3><p>Your data is protected with SSL encryption, firewalls, and regular security audits.</p></div>';
}

function getEnglishDisclaimer() {
    return '<div style="font-family: system-ui, -apple-system, sans-serif;"><div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 12px; padding: 20px; margin-bottom: 24px;"><h4 style="color: #dc2626; margin: 0 0 12px 0;">IMPORTANT NOTICE</h4><p style="color: #991b1b; margin: 0;">Please read this document carefully before completing registration.</p></div><h3 style="color: #1e3c72;">1. PLATFORM\'S INTERMEDIARY NATURE</h3><p><strong>1.1.</strong> Global Freight Network is an <strong>ONLINE INTERMEDIARY PLATFORM</strong> connecting Clients with Freight Forwarders.</p><p><strong>1.2.</strong> The Platform is <strong>NOT</strong> a party to transportation services.</p><p><strong>1.3.</strong> Transportation contracts are established <strong>DIRECTLY between Client and Forwarder</strong>.</p><h3 style="color: #1e3c72; margin-top: 24px;">2. LIABILITY LIMITATIONS</h3><p>The Platform accepts <strong>NO LIABILITY</strong> for:</p><ul style="margin-left: 20px;"><li>Cargo damages, losses, or delays</li><li>Wrong delivery or non-delivery</li><li>Container damages</li><li>Cold chain breaks</li><li>Forwarder service quality</li><li>Forwarder bankruptcy or payment difficulties</li><li>Price estimates (these are indicative only)</li><li>Transit time estimates (not binding)</li></ul><h3 style="color: #1e3c72; margin-top: 24px;">3. COMPENSATION LIMIT</h3><p>In any case where the Platform may be liable, such liability is limited to <strong>COMMISSIONS RECEIVED IN THE LAST 12 MONTHS</strong>.</p></div>';
}

function getEnglishDataProtection() {
    return '<div style="font-family: system-ui, -apple-system, sans-serif;"><h3 style="color: #1e3c72;">1. DATA CONTROLLER</h3><p><strong>[COMPANY NAME]</strong><br>Address: [COMPANY ADDRESS]<br>Email: privacy@globalfreightnetwork.com</p><h3 style="color: #1e3c72; margin-top: 24px;">2. PERSONAL DATA PROCESSED</h3><p>Identity, contact, financial, and usage data as detailed in our Privacy Policy.</p><h3 style="color: #1e3c72; margin-top: 24px;">3. YOUR RIGHTS</h3><p>Under applicable data protection laws, you have the right to:</p><ul style="margin-left: 20px;"><li>âœ“ Know whether your personal data is being processed</li><li>âœ“ Request information about data processing</li><li>âœ“ Request correction of incomplete or inaccurate data</li><li>âœ“ Request deletion under certain circumstances</li><li>âœ“ Object to processing in certain cases</li><li>âœ“ Request compensation for damages caused by unlawful processing</li></ul><h3 style="color: #1e3c72; margin-top: 24px;">4. CONTACT</h3><p>Email: privacy@globalfreightnetwork.com</p></div>';
}

function getEnglishCookies() {
    return '<div style="font-family: system-ui, -apple-system, sans-serif;"><h3 style="color: #1e3c72;">1. WHAT ARE COOKIES?</h3><p>Cookies are small text files stored on your device when you visit our website.</p><h3 style="color: #1e3c72; margin-top: 24px;">2. TYPES OF COOKIES USED</h3><table style="width: 100%; border-collapse: collapse;"><tr style="background: #f1f5f9;"><th style="border: 1px solid #e2e8f0; padding: 12px;">Cookie Type</th><th style="border: 1px solid #e2e8f0; padding: 12px;">Purpose</th></tr><tr><td style="border: 1px solid #e2e8f0; padding: 12px;">Essential</td><td style="border: 1px solid #e2e8f0; padding: 12px;">Session management, security</td></tr><tr><td style="border: 1px solid #e2e8f0; padding: 12px;">Functional</td><td style="border: 1px solid #e2e8f0; padding: 12px;">Language preference, user settings</td></tr><tr><td style="border: 1px solid #e2e8f0; padding: 12px;">Analytics</td><td style="border: 1px solid #e2e8f0; padding: 12px;">Site usage statistics</td></tr></table><h3 style="color: #1e3c72; margin-top: 24px;">3. MANAGING COOKIES</h3><p>You can manage or delete cookies through your browser settings.</p></div>';
}

function resetTurkishLegalDocuments() {
    // TÃ¼rkÃ§e iÃ§erikler zaten legalDocuments objesinde tanÄ±mlÄ±
    // Bu fonksiyon gerekirse orijinal deÄŸerlere dÃ¶ndÃ¼rÃ¼r
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DÃœNYA LÄ°MAN VE ÅEHÄ°R VERÄ°TABANI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Konteyner Tipleri
var containerTypes = [
    { code: '20DC', name: "20' Dry Container", teu: 1, maxWeight: 21770 },
    { code: '40DC', name: "40' Dry Container", teu: 2, maxWeight: 26780 },
    { code: '40HC', name: "40' High Cube", teu: 2, maxWeight: 26460 },
    { code: '45DC', name: "45' Dry Container", teu: 2.25, maxWeight: 27600 },
    { code: '20RF', name: "20' Reefer", teu: 1, maxWeight: 21000 },
    { code: '40RF', name: "40' Reefer High Cube", teu: 2, maxWeight: 25400 },
    { code: '20OT', name: "20' Open Top", teu: 1, maxWeight: 21750 },
    { code: '40OT', name: "40' Open Top", teu: 2, maxWeight: 26630 },
    { code: '20FR', name: "20' Flat Rack", teu: 1, maxWeight: 22000 },
    { code: '40FR', name: "40' Flat Rack", teu: 2, maxWeight: 40000 },
    { code: '20TK', name: "20' Tank Container", teu: 1, maxWeight: 24000 },
    { code: '40TK', name: "40' Tank Container", teu: 2, maxWeight: 36000 }
];

// DÃ¼nya Konteyner LimanlarÄ±
var worldPorts = {
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // TR - TÃœRKÄ°YE LÄ°MANLARI (Eksiksiz)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    TR: {
        country: 'TÃ¼rkiye',
        ports: [
            // Marmara BÃ¶lgesi
            { code: 'TRAMB', name: 'AmbarlÄ±', city: 'Ä°stanbul', region: 'Marmara', annual_teu: 3200000 },
            { code: 'TRHAY', name: 'HaydarpaÅŸa', city: 'Ä°stanbul', region: 'Marmara', annual_teu: 450000 },
            { code: 'TRMAR', name: 'Marport', city: 'Ä°stanbul', region: 'Marmara', annual_teu: 1800000 },
            { code: 'TRKUM', name: 'Kumport', city: 'Ä°stanbul', region: 'Marmara', annual_teu: 1200000 },
            { code: 'TRYIL', name: 'YÄ±lport', city: 'Ä°stanbul', region: 'Marmara', annual_teu: 600000 },
            { code: 'TRASY', name: 'Asyaport', city: 'TekirdaÄŸ', region: 'Marmara', annual_teu: 1500000 },
            { code: 'TRGEM', name: 'Gemlik', city: 'Bursa', region: 'Marmara', annual_teu: 550000 },
            { code: 'TRGMP', name: 'Gemport', city: 'Bursa', region: 'Marmara', annual_teu: 400000 },
            { code: 'TRBAN', name: 'Bandcomparison', city: 'BalÄ±kesir', region: 'Marmara', annual_teu: 120000 },
            { code: 'TRDER', name: 'Derince', city: 'Kocaeli', region: 'Marmara', annual_teu: 280000 },
            { code: 'TREVY', name: 'Evyap', city: 'Kocaeli', region: 'Marmara', annual_teu: 200000 },
            { code: 'TRYAR', name: 'YarÄ±mca', city: 'Kocaeli', region: 'Marmara', annual_teu: 150000 },
            
            // Ege BÃ¶lgesi
            { code: 'TRIZM', name: 'Ä°zmir (Alsancak)', city: 'Ä°zmir', region: 'Ege', annual_teu: 850000 },
            { code: 'TRNEM', name: 'Nemport', city: 'Ä°zmir', region: 'Ege', annual_teu: 320000 },
            { code: 'TRALI', name: 'AliaÄŸa', city: 'Ä°zmir', region: 'Ege', annual_teu: 450000 },
            { code: 'TRPET', name: 'Petkim', city: 'Ä°zmir', region: 'Ege', annual_teu: 180000 },
            { code: 'TRCES', name: 'Ã‡eÅŸme', city: 'Ä°zmir', region: 'Ege', annual_teu: 50000 },
            
            // Aksea BÃ¶lgesi
            { code: 'TRMER', name: 'Mersin (MIP)', city: 'Mersin', region: 'Aksea', annual_teu: 2100000 },
            { code: 'TRISK', name: 'Ä°skenderun', city: 'Hatay', region: 'Aksea', annual_teu: 350000 },
            { code: 'TRLIM', name: 'Limak Iskenderun', city: 'Hatay', region: 'Aksea', annual_teu: 200000 },
            { code: 'TRANT', name: 'Antalya', city: 'Antalya', region: 'Aksea', annual_teu: 180000 },
            { code: 'TRTAS', name: 'TaÅŸucu', city: 'Mersin', region: 'Aksea', annual_teu: 80000 },
            
            // Karasea BÃ¶lgesi
            { code: 'TRTRA', name: 'Trabzon', city: 'Trabzon', region: 'Karasea', annual_teu: 120000 },
            { code: 'TRSAM', name: 'Samsun', city: 'Samsun', region: 'Karasea', annual_teu: 95000 },
            { code: 'TRGIR', name: 'Giresun', city: 'Giresun', region: 'Karasea', annual_teu: 25000 },
            { code: 'TRRIS', name: 'Rize', city: 'Rize', region: 'Karasea', annual_teu: 30000 },
            { code: 'TRHOP', name: 'Hopa', city: 'Artvin', region: 'Karasea', annual_teu: 45000 },
            { code: 'TRZNG', name: 'Zonguldak', city: 'Zonguldak', region: 'Karasea', annual_teu: 35000 },
            { code: 'TRERE', name: 'EreÄŸli', city: 'Zonguldak', region: 'Karasea', annual_teu: 40000 },
            { code: 'TRSNO', name: 'Sinop', city: 'Sinop', region: 'Karasea', annual_teu: 15000 }
        ],
        cities: ['Ä°stanbul', 'Anland', 'Ä°zmir', 'Bursa', 'Antalya', 'Adana', 'Konya', 'Gaziantep', 'Mersin', 'Kayseri', 'EskiÅŸehir', 'Denizli', 'Kocaeli', 'Manisa', 'Sakarya']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DE - ALMANYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    DE: {
        country: 'Germany',
        ports: [
            { code: 'DEHAM', name: 'Hamburg', city: 'Hamburg', region: 'Kuzey', annual_teu: 8700000 },
            { code: 'DEBRV', name: 'Bremerhaven', city: 'Bremen', region: 'Kuzey', annual_teu: 4800000 },
            { code: 'DEWVN', name: 'Wilhelmshaven', city: 'Wilhelmshaven', region: 'Kuzey', annual_teu: 520000 },
            { code: 'DELBC', name: 'LÃ¼beck', city: 'LÃ¼beck', region: 'Kuzey', annual_teu: 180000 },
            { code: 'DEKEL', name: 'Kiel', city: 'Kiel', region: 'Kuzey', annual_teu: 120000 },
            { code: 'DEROS', name: 'Rostock', city: 'Rostock', region: 'Kuzey', annual_teu: 95000 },
            { code: 'DEDUI', name: 'Duisburg (Inland)', city: 'Duisburg', region: 'BatÄ±', annual_teu: 350000 }
        ],
        cities: ['Hamburg', 'Berlin', 'MÃ¼nih', 'Frankfurt', 'KÃ¶ln', 'DÃ¼sseldorf', 'Stuttgart', 'Dortmund', 'Essen', 'Leipzig']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // NL - HOLLANDA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    NL: {
        country: 'Hollanda',
        ports: [
            { code: 'NLRTM', name: 'Rotterdam', city: 'Rotterdam', region: 'GÃ¼ney', annual_teu: 14500000 },
            { code: 'NLAMS', name: 'Amsterdam', city: 'Amsterdam', region: 'Kuzey', annual_teu: 850000 },
            { code: 'NLMOE', name: 'Moerdijk', city: 'Moerdijk', region: 'GÃ¼ney', annual_teu: 120000 }
        ],
        cities: ['Rotterdam', 'Amsterdam', 'Den Haag', 'Utrecht', 'Eindhoven', 'Tilburg', 'Groningen', 'Almere', 'Breda', 'Nijmegen']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // BE - BELÃ‡Ä°KA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    BE: {
        country: 'BelÃ§ika',
        ports: [
            { code: 'BEANR', name: 'Antwerp', city: 'Antwerp', region: 'Flanders', annual_teu: 12000000 },
            { code: 'BEZEE', name: 'Zeebrugge', city: 'Brugge', region: 'Flanders', annual_teu: 1900000 },
            { code: 'BEGNE', name: 'Gent', city: 'Gent', region: 'Flanders', annual_teu: 350000 }
        ],
        cities: ['Antwerp', 'BrÃ¼ksel', 'Gent', 'Brugge', 'LiÃ¨ge', 'Charleroi', 'Namur', 'Leuven', 'Mons', 'Mechelen']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // GB - Ä°NGÄ°LTERE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    GB: {
        country: 'Ä°ngiltere',
        ports: [
            { code: 'GBFXT', name: 'Felixstowe', city: 'Felixstowe', region: 'DoÄŸu', annual_teu: 3800000 },
            { code: 'GBSOU', name: 'Southampton', city: 'Southampton', region: 'GÃ¼ney', annual_teu: 1900000 },
            { code: 'GBLGW', name: 'London Gateway', city: 'Londra', region: 'GÃ¼ney DoÄŸu', annual_teu: 1600000 },
            { code: 'GBLIV', name: 'Liverpool', city: 'Liverpool', region: 'Kuzey BatÄ±', annual_teu: 850000 },
            { code: 'GBTIL', name: 'Tilbury', city: 'Londra', region: 'GÃ¼ney DoÄŸu', annual_teu: 750000 },
            { code: 'GBIMM', name: 'Immingham', city: 'Immingham', region: 'DoÄŸu', annual_teu: 420000 },
            { code: 'GBHUL', name: 'Hull', city: 'Hull', region: 'DoÄŸu', annual_teu: 280000 },
            { code: 'GBBRS', name: 'Bristol', city: 'Bristol', region: 'GÃ¼ney BatÄ±', annual_teu: 120000 },
            { code: 'GBGRG', name: 'Grangemouth', city: 'Grangemouth', region: 'Ä°skoÃ§ya', annual_teu: 95000 }
        ],
        cities: ['Londra', 'Birmingham', 'Manchester', 'Leeds', 'Liverpool', 'Sheffield', 'Bristol', 'Glasgow', 'Edinburgh', 'Cardiff']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // FR - FRANSA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    FR: {
        country: 'Fransa',
        ports: [
            { code: 'FRLEH', name: 'Le Havre', city: 'Le Havre', region: 'Normandiya', annual_teu: 2900000 },
            { code: 'FRMRS', name: 'Marseille-Fos', city: 'Marsilya', region: 'Provence', annual_teu: 1450000 },
            { code: 'FRDKK', name: 'Dunkirk', city: 'Dunkirk', region: 'Kuzey', annual_teu: 450000 },
            { code: 'FRNTE', name: 'Nantes', city: 'Nantes', region: 'BatÄ±', annual_teu: 280000 },
            { code: 'FRBOD', name: 'Bordeaux', city: 'Bordeaux', region: 'GÃ¼ney BatÄ±', annual_teu: 95000 },
            { code: 'FRSXB', name: 'SÃ¨te', city: 'SÃ¨te', region: 'GÃ¼ney', annual_teu: 65000 }
        ],
        cities: ['Paris', 'Marsilya', 'Lyon', 'Toulouse', 'Nice', 'Nantes', 'Strasbourg', 'Bordeaux', 'Lille', 'Rennes']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ES - Ä°SPANYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ES: {
        country: 'Ä°spanya',
        ports: [
            { code: 'ESVLC', name: 'Valencia', city: 'Valencia', region: 'DoÄŸu', annual_teu: 5600000 },
            { code: 'ESALG', name: 'Algeciras', city: 'Algeciras', region: 'GÃ¼ney', annual_teu: 5100000 },
            { code: 'ESBCN', name: 'Barcelona', city: 'Barcelona', region: 'Katalonya', annual_teu: 3500000 },
            { code: 'ESLPA', name: 'Las Palmas', city: 'Las Palmas', region: 'Kanarya', annual_teu: 1200000 },
            { code: 'ESBIO', name: 'Bilbao', city: 'Bilbao', region: 'Kuzey', annual_teu: 550000 },
            { code: 'ESSCT', name: 'Santa Cruz Tenerife', city: 'Tenerife', region: 'Kanarya', annual_teu: 450000 },
            { code: 'ESCAR', name: 'Cartagena', city: 'Cartagena', region: 'GÃ¼ney DoÄŸu', annual_teu: 180000 },
            { code: 'ESVIG', name: 'Vigo', city: 'Vigo', region: 'Kuzey BatÄ±', annual_teu: 220000 }
        ],
        cities: ['Madrid', 'Barcelona', 'Valencia', 'Sevilla', 'Zaragoza', 'Malaga', 'Murcia', 'Bilbao', 'Alicante', 'Cordoba']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // IT - Ä°TALYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    IT: {
        country: 'Ä°talya',
        ports: [
            { code: 'ITGIT', name: 'Gioia Tauro', city: 'Gioia Tauro', region: 'GÃ¼ney', annual_teu: 3100000 },
            { code: 'ITGOA', name: 'Genova', city: 'Cenova', region: 'Kuzey', annual_teu: 2600000 },
            { code: 'ITLIV', name: 'Livorno', city: 'Livorno', region: 'Toskana', annual_teu: 850000 },
            { code: 'ITLSP', name: 'La Spezia', city: 'La Spezia', region: 'Kuzey', annual_teu: 1400000 },
            { code: 'ITTRS', name: 'Trieste', city: 'Trieste', region: 'Kuzey DoÄŸu', annual_teu: 800000 },
            { code: 'ITNAP', name: 'Napoli', city: 'Napoli', region: 'GÃ¼ney', annual_teu: 650000 },
            { code: 'ITSAL', name: 'Salerno', city: 'Salerno', region: 'GÃ¼ney', annual_teu: 450000 },
            { code: 'ITVCE', name: 'Venezia', city: 'Venedik', region: 'Kuzey DoÄŸu', annual_teu: 550000 },
            { code: 'ITRAN', name: 'Ravenna', city: 'Ravenna', region: 'Kuzey', annual_teu: 220000 },
            { code: 'ITCAG', name: 'Cagliari', city: 'Cagliari', region: 'Sardunya', annual_teu: 600000 }
        ],
        cities: ['Milano', 'Roma', 'Napoli', 'Torino', 'Palermo', 'Cenova', 'Bologna', 'Floransa', 'Venedik', 'Verona']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // GR - YUNANÄ°STAN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    GR: {
        country: 'Greece',
        ports: [
            { code: 'GRPIR', name: 'Pire', city: 'Atina', region: 'Attika', annual_teu: 5650000 },
            { code: 'GRSKG', name: 'Selanik', city: 'Selanik', region: 'Makedonya', annual_teu: 450000 },
            { code: 'GRHAK', name: 'Heraklion', city: 'Heraklion', region: 'Girit', annual_teu: 80000 }
        ],
        cities: ['Atina', 'Selanik', 'Patras', 'Heraklion', 'Larissa', 'Volos', 'Ioannina', 'Kavala', 'Alexandroupolis', 'Kalamata']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // PL - POLONYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PL: {
        country: 'Polonya',
        ports: [
            { code: 'PLGDN', name: 'Gdansk (DCT)', city: 'Gdansk', region: 'Pomorya', annual_teu: 2100000 },
            { code: 'PLGDY', name: 'Gdynia', city: 'Gdynia', region: 'Pomorya', annual_teu: 850000 },
            { code: 'PLSZZ', name: 'Szczecin', city: 'Szczecin', region: 'BatÄ±', annual_teu: 120000 },
            { code: 'PLSWI', name: 'Swinoujscie', city: 'Swinoujscie', region: 'BatÄ±', annual_teu: 80000 }
        ],
        cities: ['VarÅŸova', 'Krakow', 'Lodz', 'Wroclaw', 'Poznan', 'Gdansk', 'Szczecin', 'Lublin', 'Katowice', 'Bialystok']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡µğŸ‡¹ PORTEKÄ°Z
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PT: {
        country: 'Portekiz',
        ports: [
            { code: 'PTSIN', name: 'Sines', city: 'Sines', region: 'Alentejo', annual_teu: 1800000 },
            { code: 'PTLIS', name: 'Lisbon', city: 'Lizbon', region: 'Merkez', annual_teu: 450000 },
            { code: 'PTLEI', name: 'LeixÃµes', city: 'Porto', region: 'Kuzey', annual_teu: 650000 },
            { code: 'PTSET', name: 'SetÃºbal', city: 'SetÃºbal', region: 'GÃ¼ney', annual_teu: 150000 }
        ],
        cities: ['Lizbon', 'Porto', 'Braga', 'Coimbra', 'Funchal', 'Faro', 'Setubal', 'Aveiro', 'Leiria', 'Viseu']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // AT - AVUSTURYA (Inland)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    AT: {
        country: 'Avusturya',
        ports: [
            { code: 'ATVIE', name: 'Vienna (Inland)', city: 'Viyana', region: 'DoÄŸu', annual_teu: 350000 }
        ],
        cities: ['Viyana', 'Graz', 'Linz', 'Salzburg', 'Innsbruck', 'Klagenfurt', 'Villach', 'Wels', 'St. PÃ¶lten', 'Dornbirn']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¨ğŸ‡¿ Ã‡EK CUMHURÄ°YETÄ° (Inland)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CZ: {
        country: 'Ã‡ek Cumhuriyeti',
        ports: [],
        cities: ['Prag', 'Brno', 'Ostrava', 'Pilsen', 'Liberec', 'Olomouc', 'ÄŒeskÃ© BudÄ›jovice', 'Hradec KrÃ¡lovÃ©', 'Pardubice', 'ÃšstÃ­ nad Labem']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡­ğŸ‡º MACARÄ°STAN (Inland)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    HU: {
        country: 'Macaristan',
        ports: [
            { code: 'HUBUD', name: 'Budapest (Inland)', city: 'BudapeÅŸte', region: 'Merkez', annual_teu: 180000 }
        ],
        cities: ['BudapeÅŸte', 'Debrecen', 'Szeged', 'Miskolc', 'PÃ©cs', 'GyÅ‘r', 'NyÃ­regyhÃ¡za', 'KecskemÃ©t', 'SzÃ©kesfehÃ©rvÃ¡r', 'Szombathely']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡·ğŸ‡´ ROMANYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    RO: {
        country: 'Romanya',
        ports: [
            { code: 'ROCON', name: 'Constanta', city: 'KÃ¶stence', region: 'DoÄŸu', annual_teu: 680000 },
            { code: 'ROGAL', name: 'Galati', city: 'Galati', region: 'DoÄŸu', annual_teu: 45000 }
        ],
        cities: ['BÃ¼kreÅŸ', 'Cluj-Napoca', 'TimiÈ™oara', 'IaÈ™i', 'KÃ¶stence', 'Craiova', 'BraÈ™ov', 'GalaÈ›i', 'PloieÈ™ti', 'Oradea']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡§ğŸ‡¬ BULGARÄ°STAN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    BG: {
        country: 'Bulgaristan',
        ports: [
            { code: 'BGVAR', name: 'Varna', city: 'Varna', region: 'DoÄŸu', annual_teu: 180000 },
            { code: 'BGBOJ', name: 'Burgas', city: 'Burgaz', region: 'DoÄŸu', annual_teu: 85000 }
        ],
        cities: ['Sofya', 'Plovdiv', 'Varna', 'Burgaz', 'Ruse', 'Stara Zagora', 'Pleven', 'Sliven', 'Dobrich', 'Shumen']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡·ğŸ‡º RUSYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    RU: {
        country: 'Rusya',
        ports: [
            { code: 'RULED', name: 'St. Petersburg', city: 'St. Petersburg', region: 'Kuzey BatÄ±', annual_teu: 2100000 },
            { code: 'RUNVS', name: 'Novorossiysk', city: 'Novorossiysk', region: 'GÃ¼ney', annual_teu: 850000 },
            { code: 'RUVVO', name: 'Vladivostok', city: 'Vladivostok', region: 'Uzak DoÄŸu', annual_teu: 750000 },
            { code: 'RUKGD', name: 'Kaliningrad', city: 'Kaliningrad', region: 'BatÄ±', annual_teu: 280000 },
            { code: 'RUARH', name: 'Arkhangelsk', city: 'Arkhangelsk', region: 'Kuzey', annual_teu: 45000 },
            { code: 'RUMOW', name: 'Moscow (Inland)', city: 'Moskova', region: 'Merkez', annual_teu: 350000 }
        ],
        cities: ['Moskova', 'St. Petersburg', 'Novosibirsk', 'Yekaterinburg', 'Kazan', 'Nizhny Novgorod', 'Chelyabinsk', 'Samara', 'Omsk', 'Rostov-on-Don']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡ºğŸ‡¦ UKRAYNA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    UA: {
        country: 'Ukrayna',
        ports: [
            { code: 'UAODS', name: 'Odessa', city: 'Odessa', region: 'GÃ¼ney', annual_teu: 650000 },
            { code: 'UAILP', name: 'Ilyichevsk', city: 'Chornomorsk', region: 'GÃ¼ney', annual_teu: 450000 }
        ],
        cities: ['Kiev', 'Kharkiv', 'Odessa', 'Dnipro', 'Donetsk', 'Zaporizhzhia', 'Lviv', 'Kryvyi Rih', 'Mykolaiv', 'Mariupol']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // CN - Ã‡Ä°N
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CN: {
        country: 'Ã‡in',
        ports: [
            { code: 'CNSHA', name: 'Shanghai', city: 'Shanghai', region: 'DoÄŸu', annual_teu: 47000000 },
            { code: 'CNSHE', name: 'Shenzhen (Yantian)', city: 'Shenzhen', region: 'GÃ¼ney', annual_teu: 28000000 },
            { code: 'CNNGB', name: 'Ningbo-Zhoushan', city: 'Ningbo', region: 'DoÄŸu', annual_teu: 31000000 },
            { code: 'CNQIN', name: 'Qingdao', city: 'Qingdao', region: 'Kuzey', annual_teu: 23000000 },
            { code: 'CNTXG', name: 'Tianjin', city: 'Tianjin', region: 'Kuzey', annual_teu: 21000000 },
            { code: 'CNGUA', name: 'Guangzhou (Nansha)', city: 'Guangzhou', region: 'GÃ¼ney', annual_teu: 24000000 },
            { code: 'CNXMN', name: 'Xiamen', city: 'Xiamen', region: 'GÃ¼ney DoÄŸu', annual_teu: 12000000 },
            { code: 'CNLYG', name: 'Lianyungang', city: 'Lianyungang', region: 'DoÄŸu', annual_teu: 5000000 },
            { code: 'CNDAL', name: 'Dalian', city: 'Dalian', region: 'Kuzey DoÄŸu', annual_teu: 8500000 },
            { code: 'CNFUZ', name: 'Fuzhou', city: 'Fuzhou', region: 'GÃ¼ney DoÄŸu', annual_teu: 4000000 },
            { code: 'CNNBO', name: 'Nanjing', city: 'Nanjing', region: 'DoÄŸu', annual_teu: 3000000 },
            { code: 'CNZHU', name: 'Zhuhai', city: 'Zhuhai', region: 'GÃ¼ney', annual_teu: 2500000 }
        ],
        cities: ['Shanghai', 'Pekin', 'Shenzhen', 'Guangzhou', 'Tianjin', 'Wuhan', 'Dongguan', 'Chengdu', 'Hangzhou', 'Suzhou']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡­ğŸ‡° HONG KONG
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    HK: {
        country: 'Hong Kong',
        ports: [
            { code: 'HKHKG', name: 'Hong Kong (Kwai Tsing)', city: 'Hong Kong', region: 'Hong Kong', annual_teu: 17500000 }
        ],
        cities: ['Hong Kong', 'Kowloon', 'Tsuen Wan', 'Sha Tin', 'Tuen Mun', 'Tai Po', 'Sai Kung', 'Yuen Long', 'Fanling', 'Ma On Shan']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¹ğŸ‡¼ TAYVAN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    TW: {
        country: 'Tayvan',
        ports: [
            { code: 'TWKHH', name: 'Kaohsiung', city: 'Kaohsiung', region: 'GÃ¼ney', annual_teu: 9500000 },
            { code: 'TWTPE', name: 'Taipei (Keelung)', city: 'Keelung', region: 'Kuzey', annual_teu: 2800000 },
            { code: 'TWTXG', name: 'Taichung', city: 'Taichung', region: 'Merkez', annual_teu: 1800000 }
        ],
        cities: ['Taipei', 'Kaohsiung', 'Taichung', 'Tainan', 'Hsinchu', 'Keelung', 'Chiayi', 'Changhua', 'Pingtung', 'Yilan']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¯ğŸ‡µ JAPONYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    JP: {
        country: 'Japonya',
        ports: [
            { code: 'JPTYO', name: 'Tokyo', city: 'Tokyo', region: 'Kanto', annual_teu: 4500000 },
            { code: 'JPYOK', name: 'Yokohama', city: 'Yokohama', region: 'Kanto', annual_teu: 2800000 },
            { code: 'JPKOB', name: 'Kobe', city: 'Kobe', region: 'Kansai', annual_teu: 2900000 },
            { code: 'JPNGO', name: 'Nagoya', city: 'Nagoya', region: 'Chubu', annual_teu: 2700000 },
            { code: 'JPOSA', name: 'Osaka', city: 'Osaka', region: 'Kansai', annual_teu: 2400000 },
            { code: 'JPHKT', name: 'Hakata (Fukuoka)', city: 'Fukuoka', region: 'Kyushu', annual_teu: 950000 },
            { code: 'JPSHI', name: 'Shimizu', city: 'Shizuoka', region: 'Chubu', annual_teu: 450000 }
        ],
        cities: ['Tokyo', 'Yokohama', 'Osaka', 'Nagoya', 'Sapporo', 'Fukuoka', 'Kobe', 'Kyoto', 'Kawasaki', 'Saitama']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡°ğŸ‡· GÃœNEY KORE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    KR: {
        country: 'GÃ¼ney Kore',
        ports: [
            { code: 'KRPUS', name: 'Busan', city: 'Busan', region: 'GÃ¼ney DoÄŸu', annual_teu: 22000000 },
            { code: 'KRINC', name: 'Incheon', city: 'Incheon', region: 'BatÄ±', annual_teu: 3200000 },
            { code: 'KRKWG', name: 'Kwangyang', city: 'Gwangyang', region: 'GÃ¼ney', annual_teu: 2400000 },
            { code: 'KRULS', name: 'Ulsan', city: 'Ulsan', region: 'GÃ¼ney DoÄŸu', annual_teu: 1200000 }
        ],
        cities: ['Seul', 'Busan', 'Incheon', 'Daegu', 'Daejeon', 'Gwangju', 'Ulsan', 'Suwon', 'Changwon', 'Seongnam']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // SG - SÄ°NGAPUR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    SG: {
        country: 'Singapur',
        ports: [
            { code: 'SGSIN', name: 'Singapore (PSA)', city: 'Singapur', region: 'Singapur', annual_teu: 37500000 }
        ],
        cities: ['Singapur City', 'Woodlands', 'Tampines', 'Jurong East', 'Bedok', 'Ang Mo Kio', 'Bukit Batok', 'Choa Chu Kang', 'Hougang', 'Yishun']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡²ğŸ‡¾ MALEZYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    MY: {
        country: 'Malezya',
        ports: [
            { code: 'MYPKG', name: 'Port Klang', city: 'Port Klang', region: 'Selangor', annual_teu: 13500000 },
            { code: 'MYTPP', name: 'Tanjung Pelepas', city: 'Johor', region: 'Johor', annual_teu: 11000000 },
            { code: 'MYPEN', name: 'Penang', city: 'Penang', region: 'Penang', annual_teu: 1500000 },
            { code: 'MYKTG', name: 'Kuantan', city: 'Kuantan', region: 'Pahang', annual_teu: 250000 }
        ],
        cities: ['Kuala Lumpur', 'George Town', 'Johor Bahru', 'Ipoh', 'Shah Alam', 'Petaling Jaya', 'Kuching', 'Kota Kinabalu', 'Melaka', 'Alor Setar']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¹ğŸ‡­ TAYLAND
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    TH: {
        country: 'Tayland',
        ports: [
            { code: 'THLCH', name: 'Laem Chabang', city: 'Chonburi', region: 'DoÄŸu', annual_teu: 8500000 },
            { code: 'THBKK', name: 'Bangkok', city: 'Bangkok', region: 'Merkez', annual_teu: 1500000 },
            { code: 'THSGZ', name: 'Songkhla', city: 'Songkhla', region: 'GÃ¼ney', annual_teu: 280000 }
        ],
        cities: ['Bangkok', 'Chiang Mai', 'Pattaya', 'Phuket', 'Nakhon Ratchasima', 'Khon Kaen', 'Hat Yai', 'Chonburi', 'Udon Thani', 'Nonthaburi']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡»ğŸ‡³ VÄ°ETNAM
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    VN: {
        country: 'Vietnam',
        ports: [
            { code: 'VNSGN', name: 'Ho Chi Minh (Cat Lai)', city: 'Ho Chi Minh', region: 'GÃ¼ney', annual_teu: 7500000 },
            { code: 'VNHPH', name: 'Hai Phong', city: 'Hai Phong', region: 'Kuzey', annual_teu: 5500000 },
            { code: 'VNCMT', name: 'Cai Mep', city: 'Ba Ria', region: 'GÃ¼ney', annual_teu: 4000000 },
            { code: 'VNDAN', name: 'Da Nang', city: 'Da Nang', region: 'Merkez', annual_teu: 450000 }
        ],
        cities: ['Ho Chi Minh', 'Hanoi', 'Hai Phong', 'Da Nang', 'Can Tho', 'Bien Hoa', 'Nha Trang', 'Hue', 'Buon Ma Thuot', 'Vung Tau']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // IN - HÄ°NDÄ°STAN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    IN: {
        country: 'Hindistan',
        ports: [
            { code: 'INJNP', name: 'Nair Sheva (JNPT)', city: 'Mumbai', region: 'BatÄ±', annual_teu: 5500000 },
            { code: 'INMUN', name: 'Mundra', city: 'Mundra', region: 'BatÄ±', annual_teu: 6500000 },
            { code: 'INMAA', name: 'Chennai', city: 'Chennai', region: 'GÃ¼ney', annual_teu: 1600000 },
            { code: 'INCCU', name: 'Kolkata (Haldia)', city: 'Kolkata', region: 'DoÄŸu', annual_teu: 750000 },
            { code: 'INKRI', name: 'Krishnapatnam', city: 'Nellore', region: 'GÃ¼ney', annual_teu: 500000 },
            { code: 'INCOK', name: 'Cochin', city: 'Kochi', region: 'GÃ¼ney', annual_teu: 650000 },
            { code: 'INTUT', name: 'Tuticorin', city: 'Thoothukudi', region: 'GÃ¼ney', annual_teu: 750000 },
            { code: 'INVIZ', name: 'Visakhapatnam', city: 'Visakhapatnam', region: 'DoÄŸu', annual_teu: 350000 },
            { code: 'INPIP', name: 'Pipavav', city: 'Pipavav', region: 'BatÄ±', annual_teu: 450000 },
            { code: 'INHZA', name: 'Hazira', city: 'Surat', region: 'BatÄ±', annual_teu: 550000 }
        ],
        cities: ['Mumbai', 'Delhi', 'Bangalore', 'Hyderabad', 'Chennai', 'Kolkata', 'Ahmedabad', 'Pune', 'Surat', 'Jaipur']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // AE - BAE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    AE: {
        country: 'BAE',
        ports: [
            { code: 'AEJEA', name: 'Jebel Ali (Dubai)', city: 'Dubai', region: 'Dubai', annual_teu: 14500000 },
            { code: 'AEABU', name: 'Abu Dhabi (Khalifa)', city: 'Abu Dhabi', region: 'Abu Dhabi', annual_teu: 850000 },
            { code: 'AESHJ', name: 'Sharjah (Khor Fakkan)', city: 'Sharjah', region: 'Sharjah', annual_teu: 450000 },
            { code: 'AEFJR', name: 'Fujairah', city: 'Fujairah', region: 'Fujairah', annual_teu: 350000 }
        ],
        cities: ['Dubai', 'Abu Dhabi', 'Sharjah', 'Al Ain', 'Ajman', 'Ras Al Khaimah', 'Fujairah', 'Umm Al Quwain', 'Khor Fakkan', 'Dibba']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // SA - SUUDÄ° ARABÄ°STAN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    SA: {
        country: 'Suudi Arabistan',
        ports: [
            { code: 'SAJED', name: 'Jeddah', city: 'Cidde', region: 'BatÄ±', annual_teu: 5500000 },
            { code: 'SADMM', name: 'Dammam (King Abdulaziz)', city: 'Dammam', region: 'DoÄŸu', annual_teu: 2100000 },
            { code: 'SAYNB', name: 'Yanbu', city: 'Yanbu', region: 'BatÄ±', annual_teu: 250000 },
            { code: 'SAJUB', name: 'Jubail', city: 'Jubail', region: 'DoÄŸu', annual_teu: 350000 }
        ],
        cities: ['Riyad', 'Cidde', 'Mekke', 'Medine', 'Dammam', 'Dhahran', 'Taif', 'Tabuk', 'Buraidah', 'Khobar']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡´ğŸ‡² UMMAN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    OM: {
        country: 'Umman',
        ports: [
            { code: 'OMSLL', name: 'Salalah', city: 'Salalah', region: 'GÃ¼ney', annual_teu: 4200000 },
            { code: 'OMSOH', name: 'Sohar', city: 'Sohar', region: 'Kuzey', annual_teu: 1200000 },
            { code: 'OMMCT', name: 'Muscat', city: 'Muscat', region: 'Merkez', annual_teu: 350000 }
        ],
        cities: ['Muscat', 'Salalah', 'Sohar', 'Nizwa', 'Sur', 'Ibri', 'Seeb', 'Barka', 'Rustaq', 'Bahla']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡ªğŸ‡¬ MISIR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    EG: {
        country: 'MÄ±sÄ±r',
        ports: [
            { code: 'EGPSD', name: 'Port Said', city: 'Port Said', region: 'Kuzey', annual_teu: 3800000 },
            { code: 'EGALY', name: 'Alexandria', city: 'Ä°skenderiye', region: 'Kuzey', annual_teu: 1800000 },
            { code: 'EGDAM', name: 'Damietta', city: 'Damietta', region: 'Kuzey', annual_teu: 1200000 },
            { code: 'EGSUZ', name: 'Suez (Ain Sokhna)', city: 'Suez', region: 'DoÄŸu', annual_teu: 750000 }
        ],
        cities: ['Kahire', 'Ä°skenderiye', 'Giza', 'Port Said', 'Suez', 'Luxor', 'Aswan', 'Mansoura', 'Tanta', 'Ismailia']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡²ğŸ‡¦ FAS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    MA: {
        country: 'Fas',
        ports: [
            { code: 'MAPTM', name: 'Tanger Med', city: 'Tanger', region: 'Kuzey', annual_teu: 7500000 },
            { code: 'MACAS', name: 'Casablanca', city: 'Casablanca', region: 'BatÄ±', annual_teu: 1200000 },
            { code: 'MAAGA', name: 'Agadir', city: 'Agadir', region: 'GÃ¼ney', annual_teu: 180000 }
        ],
        cities: ['Casablanca', 'Rabat', 'Fez', 'Marrakech', 'Tanger', 'Agadir', 'Meknes', 'Oujda', 'Kenitra', 'Tetouan']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¿ğŸ‡¦ GÃœNEY AFRÄ°KA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ZA: {
        country: 'GÃ¼ney Afrika',
        ports: [
            { code: 'ZADUR', name: 'Durban', city: 'Durban', region: 'KwaZulu-Natal', annual_teu: 2900000 },
            { code: 'ZACPT', name: 'Cape Town', city: 'Cape Town', region: 'BatÄ± Cape', annual_teu: 850000 },
            { code: 'ZAPLZ', name: 'Port Elizabeth (Ngqura)', city: 'Port Elizabeth', region: 'DoÄŸu Cape', annual_teu: 750000 }
        ],
        cities: ['Johannesburg', 'Cape Town', 'Durban', 'Pretoria', 'Port Elizabeth', 'Bloemfontein', 'East London', 'Polokwane', 'Nelspruit', 'Kimberley']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // US - AMERÄ°KA BÄ°RLEÅÄ°K DEVLETLERÄ°
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    US: {
        country: 'ABD',
        ports: [
            // BatÄ± KÄ±yÄ±sÄ±
            { code: 'USLAX', name: 'Los Angeles', city: 'Los Angeles', region: 'California', annual_teu: 9200000 },
            { code: 'USLGB', name: 'Long Beach', city: 'Long Beach', region: 'California', annual_teu: 8500000 },
            { code: 'USOAK', name: 'Oakland', city: 'Oakland', region: 'California', annual_teu: 2500000 },
            { code: 'USSEA', name: 'Seattle', city: 'Seattle', region: 'Washington', annual_teu: 3200000 },
            { code: 'USTAC', name: 'Tacoma', city: 'Tacoma', region: 'Washington', annual_teu: 2200000 },
            // DoÄŸu KÄ±yÄ±sÄ±
            { code: 'USNYC', name: 'New York/New Jersey', city: 'New York', region: 'New York', annual_teu: 8500000 },
            { code: 'USSAV', name: 'Savannah', city: 'Savannah', region: 'Georgia', annual_teu: 5800000 },
            { code: 'USCHS', name: 'Charleston', city: 'Charleston', region: 'South Carolina', annual_teu: 2800000 },
            { code: 'USORF', name: 'Norfolk', city: 'Norfolk', region: 'Virginia', annual_teu: 3500000 },
            { code: 'USMIA', name: 'Miami', city: 'Miami', region: 'Florida', annual_teu: 1200000 },
            { code: 'USJAX', name: 'Jacksonville', city: 'Jacksonville', region: 'Florida', annual_teu: 1400000 },
            { code: 'USBAL', name: 'Baltimore', city: 'Baltimore', region: 'Maryland', annual_teu: 1100000 },
            { code: 'USBOS', name: 'Boston', city: 'Boston', region: 'Massachusetts', annual_teu: 350000 },
            // KÃ¶rfez KÄ±yÄ±sÄ±
            { code: 'USHOU', name: 'Houston', city: 'Houston', region: 'Texas', annual_teu: 3500000 },
            { code: 'USMSY', name: 'New Orleans', city: 'New Orleans', region: 'Louisiana', annual_teu: 650000 },
            { code: 'USMOB', name: 'Mobile', city: 'Mobile', region: 'Alabama', annual_teu: 450000 }
        ],
        cities: ['New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix', 'Philadelphia', 'San Antonio', 'San Diego', 'Dallas', 'San Jose']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¨ğŸ‡¦ KANADA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CA: {
        country: 'Kanada',
        ports: [
            { code: 'CAVAN', name: 'Vancouver', city: 'Vancouver', region: 'British Columbia', annual_teu: 3500000 },
            { code: 'CAMTR', name: 'Montreal', city: 'Montreal', region: 'Quebec', annual_teu: 1800000 },
            { code: 'CAHAL', name: 'Halifax', city: 'Halifax', region: 'Nova Scotia', annual_teu: 550000 },
            { code: 'CAPRI', name: 'Prince Rupert', city: 'Prince Rupert', region: 'British Columbia', annual_teu: 1100000 },
            { code: 'CASJO', name: 'Saint John', city: 'Saint John', region: 'New Brunswick', annual_teu: 120000 }
        ],
        cities: ['Toronto', 'Montreal', 'Vancouver', 'Calgary', 'Edmonton', 'Ottawa', 'Winnipeg', 'Quebec City', 'Hamilton', 'Kitchener']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡²ğŸ‡½ MEKSÄ°KA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    MX: {
        country: 'Meksika',
        ports: [
            { code: 'MXMAN', name: 'Manzanillo', city: 'Manzanillo', region: 'Colima', annual_teu: 3400000 },
            { code: 'MXLZC', name: 'Lazaro Cardenas', city: 'Lazaro Cardenas', region: 'MichoacÃ¡n', annual_teu: 1500000 },
            { code: 'MXVER', name: 'Veracruz', city: 'Veracruz', region: 'Veracruz', annual_teu: 1200000 },
            { code: 'MXALT', name: 'Altamira', city: 'Altamira', region: 'Tamaulipas', annual_teu: 850000 },
            { code: 'MXENS', name: 'Ensenada', city: 'Ensenada', region: 'Baja California', annual_teu: 450000 }
        ],
        cities: ['Mexico City', 'Guadalajara', 'Monterrey', 'Puebla', 'Tijuana', 'LeÃ³n', 'JuÃ¡rez', 'Zapopan', 'MÃ©rida', 'San Luis PotosÃ­']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡§ğŸ‡· BREZÄ°LYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    BR: {
        country: 'Brezilya',
        ports: [
            { code: 'BRSSZ', name: 'Santos', city: 'Santos', region: 'SÃ£o Paulo', annual_teu: 4500000 },
            { code: 'BRPNG', name: 'ParanaguÃ¡', city: 'ParanaguÃ¡', region: 'ParanÃ¡', annual_teu: 950000 },
            { code: 'BRRIO', name: 'Rio Grande', city: 'Rio Grande', region: 'Rio Grande do Sul', annual_teu: 750000 },
            { code: 'BRRIG', name: 'Rio de Janeiro', city: 'Rio de Janeiro', region: 'Rio de Janeiro', annual_teu: 650000 },
            { code: 'BRIBB', name: 'ItajaÃ­', city: 'ItajaÃ­', region: 'Santa Catarina', annual_teu: 1200000 },
            { code: 'BRSSA', name: 'Salvador', city: 'Salvador', region: 'Bahia', annual_teu: 350000 },
            { code: 'BRFOR', name: 'Fortaleza', city: 'Fortaleza', region: 'CearÃ¡', annual_teu: 180000 },
            { code: 'BRMAO', name: 'Manaus', city: 'Manaus', region: 'Amazonas', annual_teu: 250000 }
        ],
        cities: ['SÃ£o Paulo', 'Rio de Janeiro', 'BrasÃ­lia', 'Salvador', 'Fortaleza', 'Belo Horizonte', 'Manaus', 'Curitiba', 'Recife', 'Porto Alegre']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¦ğŸ‡· ARJANTÄ°N
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    AR: {
        country: 'Arjantin',
        ports: [
            { code: 'ARBUE', name: 'Buenos Aires', city: 'Buenos Aires', region: 'Buenos Aires', annual_teu: 1800000 }
        ],
        cities: ['Buenos Aires', 'CÃ³rdoba', 'Rosario', 'Mendoza', 'La Plata', 'San Miguel de TucumÃ¡n', 'Mar del Plata', 'Salta', 'Santa Fe', 'San Juan']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¨ğŸ‡± ÅÄ°LÄ°
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CL: {
        country: 'Åili',
        ports: [
            { code: 'CLSAI', name: 'San Antonio', city: 'San Antonio', region: 'ValparaÃ­so', annual_teu: 1800000 },
            { code: 'CLVAP', name: 'ValparaÃ­so', city: 'ValparaÃ­so', region: 'ValparaÃ­so', annual_teu: 950000 },
            { code: 'CLSVE', name: 'San Vicente', city: 'Talcahuano', region: 'BiobÃ­o', annual_teu: 450000 }
        ],
        cities: ['Santiago', 'ValparaÃ­so', 'ConcepciÃ³n', 'ViÃ±a del Mar', 'Antofagasta', 'Temuco', 'Talca', 'Rancagua', 'Arica', 'Iquique']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡µğŸ‡¦ PANAMA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PA: {
        country: 'Panama',
        ports: [
            { code: 'PABLB', name: 'Balboa', city: 'Panama City', region: 'Panama', annual_teu: 2800000 },
            { code: 'PAONX', name: 'Colon (Cristobal)', city: 'Colon', region: 'Colon', annual_teu: 4500000 },
            { code: 'PAMIT', name: 'Manzanillo Intl', city: 'Colon', region: 'Colon', annual_teu: 2800000 }
        ],
        cities: ['Panama City', 'Colon', 'David', 'La Chorrera', 'Santiago', 'ChitrÃ©', 'PenonomÃ©', 'Aguadulce', 'Bocas del Toro', 'ArraijÃ¡n']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¨ğŸ‡´ KOLOMBÄ°YA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    CO: {
        country: 'Kolombiya',
        ports: [
            { code: 'COCTG', name: 'Cartagena', city: 'Cartagena', region: 'Bolivar', annual_teu: 3200000 },
            { code: 'COBUN', name: 'Buenaventura', city: 'Buenaventura', region: 'Valle del Cauca', annual_teu: 1400000 },
            { code: 'COBAR', name: 'Barranquilla', city: 'Barranquilla', region: 'AtlÃ¡ntico', annual_teu: 250000 },
            { code: 'COSMR', name: 'Santa Marta', city: 'Santa Marta', region: 'Magdalena', annual_teu: 350000 }
        ],
        cities: ['BogotÃ¡', 'MedellÃ­n', 'Cali', 'Barranquilla', 'Cartagena', 'CÃºcuta', 'Bucaramanga', 'Pereira', 'Santa Marta', 'IbaguÃ©']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡µğŸ‡ª PERU
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PE: {
        country: 'Peru',
        ports: [
            { code: 'PECLL', name: 'Callao', city: 'Callao', region: 'Lima', annual_teu: 2600000 },
            { code: 'PEPAI', name: 'Paita', city: 'Paita', region: 'Piura', annual_teu: 350000 }
        ],
        cities: ['Lima', 'Arequipa', 'Trujillo', 'Chiclayo', 'Piura', 'Iquitos', 'Cusco', 'Callao', 'Huancayo', 'Chimbote']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡¦ğŸ‡º AVUSTRALYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    AU: {
        country: 'Avustralya',
        ports: [
            { code: 'AUMEL', name: 'Melbourne', city: 'Melbourne', region: 'Victoria', annual_teu: 2900000 },
            { code: 'AUSYD', name: 'Sydney (Botany)', city: 'Sydney', region: 'NSW', annual_teu: 2700000 },
            { code: 'AUBNE', name: 'Brisbane', city: 'Brisbane', region: 'Queensland', annual_teu: 1400000 },
            { code: 'AUFRE', name: 'Fremantle', city: 'Perth', region: 'Western Australia', annual_teu: 800000 },
            { code: 'AUADL', name: 'Adelaide', city: 'Adelaide', region: 'South Australia', annual_teu: 350000 }
        ],
        cities: ['Sydney', 'Melbourne', 'Brisbane', 'Perth', 'Adelaide', 'Gold Coast', 'Canberra', 'Newcastle', 'Wollongong', 'Hobart']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡³ğŸ‡¿ YENÄ° ZELANDA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    NZ: {
        country: 'Yeni Zelanda',
        ports: [
            { code: 'NZAKL', name: 'Auckland', city: 'Auckland', region: 'Kuzey', annual_teu: 950000 },
            { code: 'NZTRG', name: 'Tauranga', city: 'Tauranga', region: 'Kuzey', annual_teu: 1200000 },
            { code: 'NZLYT', name: 'Lyttelton', city: 'Christchurch', region: 'GÃ¼ney', annual_teu: 450000 }
        ],
        cities: ['Auckland', 'Wellington', 'Christchurch', 'Hamilton', 'Tauranga', 'Napier-Hastings', 'Dunedin', 'Palmerston North', 'Nelson', 'Rotorua']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡®ğŸ‡© ENDONEZYA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    ID: {
        country: 'Endonezya',
        ports: [
            { code: 'IDJKT', name: 'Jakarta (Tanjung Priok)', city: 'Jakarta', region: 'Java', annual_teu: 7200000 },
            { code: 'IDSUB', name: 'Surabaya (Tanjung Perak)', city: 'Surabaya', region: 'Java', annual_teu: 3500000 },
            { code: 'IDBLW', name: 'Belawan', city: 'Medan', region: 'Sumatra', annual_teu: 850000 },
            { code: 'IDSRG', name: 'Semarang', city: 'Semarang', region: 'Java', annual_teu: 450000 },
            { code: 'IDMKR', name: 'Makassar', city: 'Makassar', region: 'Sulawesi', annual_teu: 350000 }
        ],
        cities: ['Jakarta', 'Surabaya', 'Bandung', 'Medan', 'Semarang', 'Makassar', 'Palembang', 'Tangerang', 'Warehousek', 'Bekasi']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡µğŸ‡­ FÄ°LÄ°PÄ°NLER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PH: {
        country: 'Filipinler',
        ports: [
            { code: 'PHMNL', name: 'Manila (MICT)', city: 'Manila', region: 'Luzon', annual_teu: 5500000 },
            { code: 'PHSUB', name: 'Subic Bay', city: 'Olongapo', region: 'Luzon', annual_teu: 450000 },
            { code: 'PHCEB', name: 'Cebu', city: 'Cebu', region: 'Visayas', annual_teu: 380000 },
            { code: 'PHDVO', name: 'Davao', city: 'Davao', region: 'Mindanao', annual_teu: 220000 }
        ],
        cities: ['Manila', 'Quezon City', 'Davao', 'Cebu City', 'Caloocan', 'Zamboanga', 'Taguig', 'Antipolo', 'Pasig', 'Cagayan de Oro']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡§ğŸ‡© BANGLADEÅ
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    BD: {
        country: 'BangladeÅŸ',
        ports: [
            { code: 'BDCGP', name: 'Chittagong', city: 'Chittagong', region: 'Chittagong', annual_teu: 3200000 },
            { code: 'BDMGL', name: 'Mongla', city: 'Mongla', region: 'Khulna', annual_teu: 120000 }
        ],
        cities: ['Dhaka', 'Chittagong', 'Khulna', 'Rajshahi', 'Sylhet', 'Rangpur', 'Comilla', 'Gazipur', 'Narayanganj', 'Mymensingh']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡µğŸ‡° PAKÄ°STAN
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    PK: {
        country: 'Pakistan',
        ports: [
            { code: 'PKKHI', name: 'Karachi', city: 'Karachi', region: 'Sindh', annual_teu: 2200000 },
            { code: 'PKQAS', name: 'Qasim', city: 'Karachi', region: 'Sindh', annual_teu: 1400000 },
            { code: 'PKGWD', name: 'Gwadar', city: 'Gwadar', region: 'Balochistan', annual_teu: 150000 }
        ],
        cities: ['Karachi', 'Lahore', 'Faisalabad', 'Rawalpindi', 'Multan', 'Hyderabad', 'Gujranwala', 'Peshawar', 'Quetta', 'Islamabad']
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // ğŸ‡±ğŸ‡° SRÄ° LANKA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    LK: {
        country: 'Sri Lanka',
        ports: [
            { code: 'LKCMB', name: 'Colombo', city: 'Colombo', region: 'BatÄ±', annual_teu: 7200000 }
        ],
        cities: ['Colombo', 'Dehiwala-Mount Lavinia', 'Moratuwa', 'Sri Jayawardenepura Kotte', 'Negombo', 'Kandy', 'Galle', 'Jaffna', 'Trincomalee', 'Batticaloa']
    }
};

// Insurance Tarifeleri VeritabanÄ± - localStorage ile kalÄ±cÄ±
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// KÃ–K Ã‡Ã–ZÃœM: Sigorta ve GÃ¼mrÃ¼k OranlarÄ± - SUPABASE FIRST
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var insuranceRatesDB = { premiums: [] };
var customsRatesDB = { serviceFees: [], taxRates: [] };

// Sigorta oranlarÄ±nÄ± Supabase'den yÃ¼kle
async function loadInsuranceRatesFromSupabase() {
    if (!supabase) return;
    
    try {
        var result = await supabase
            .from('insurance_rates')
            .select('*')
            .eq('is_active', true);
        
        if (result.data && result.data.length > 0) {
            insuranceRatesDB.premiums = result.data.map(function(r) {
                return {
                    id: r.id,
                    cargoType: r.cargo_type,
                    coverageType: r.coverage_type,
                    rate: r.rate_percentage,
                    minPremium: r.min_premium,
                    currency: r.currency,
                    notes: r.notes
                };
            });
            console.log('âœ… Insurance rates loaded:', insuranceRatesDB.premiums.length);
        }
    } catch(e) {
        console.log('Insurance rates load error:', e.message);
    }
}

// GÃ¼mrÃ¼k oranlarÄ±nÄ± Supabase'den yÃ¼kle
async function loadCustomsRatesFromSupabase() {
    if (!supabase) return;
    
    try {
        var result = await supabase
            .from('customs_rates')
            .select('*')
            .eq('is_active', true);
        
        if (result.data && result.data.length > 0) {
            customsRatesDB.taxRates = result.data.map(function(r) {
                return {
                    id: r.id,
                    countryCode: r.country_code,
                    productCategory: r.product_category,
                    dutyRate: r.duty_rate,
                    vatRate: r.vat_rate,
                    clearanceFee: r.clearance_fee,
                    currency: r.currency,
                    notes: r.notes
                };
            });
            console.log('âœ… Customs rates loaded:', customsRatesDB.taxRates.length);
        }
    } catch(e) {
        console.log('Customs rates load error:', e.message);
    }
}

function saveInsuranceRatesToStorage() {
    // KÃ–K Ã‡Ã–ZÃœM: ArtÄ±k Supabase'e kaydedilecek, localStorage kullanÄ±lmÄ±yor
    console.log('Insurance rates - Supabase only');
}

function saveCustomsRatesToStorage() {
    // KÃ–K Ã‡Ã–ZÃœM: ArtÄ±k Supabase'e kaydedilecek, localStorage kullanÄ±lmÄ±yor
    console.log('Customs rates - Supabase only');
}

// Incoterm TanÄ±mlarÄ± ve Included Services
var incotermDefinitions = {
    EXW: { 
        name: 'Ex Works', 
        description: 'Fabrika teslim',
        sellerPays: [],
        buyerPays: ['preCarriage', 'exportCustoms', 'seaFreight', 'importCustoms', 'onCarriage', 'insurance']
    },
    FCA: { 
        name: 'Free Carrier', 
        description: 'TaÅŸÄ±yÄ±cÄ±ya teslim',
        sellerPays: ['preCarriage', 'exportCustoms'],
        buyerPays: ['seaFreight', 'importCustoms', 'onCarriage', 'insurance']
    },
    FOB: { 
        name: 'Free On Board', 
        description: 'Gemiye yÃ¼kleme',
        sellerPays: ['preCarriage', 'exportCustoms', 'originTHC'],
        buyerPays: ['seaFreight', 'importCustoms', 'onCarriage', 'insurance']
    },
    CFR: { 
        name: 'Cost and Freight', 
        description: 'Freight dahil',
        sellerPays: ['preCarriage', 'exportCustoms', 'originTHC', 'seaFreight'],
        buyerPays: ['destTHC', 'importCustoms', 'onCarriage', 'insurance']
    },
    CIF: { 
        name: 'Cost Insurance Freight', 
        description: 'Freight ve sigorta dahil',
        sellerPays: ['preCarriage', 'exportCustoms', 'originTHC', 'seaFreight', 'insurance'],
        buyerPays: ['destTHC', 'importCustoms', 'onCarriage']
    },
    CPT: { 
        name: 'Carriage Paid To', 
        description: 'TaÅŸÄ±ma Ã¶denmiÅŸ',
        sellerPays: ['preCarriage', 'exportCustoms', 'originTHC', 'seaFreight', 'destTHC'],
        buyerPays: ['importCustoms', 'onCarriage', 'insurance']
    },
    CIP: { 
        name: 'Carriage Insurance Paid', 
        description: 'TaÅŸÄ±ma ve sigorta Ã¶denmiÅŸ',
        sellerPays: ['preCarriage', 'exportCustoms', 'originTHC', 'seaFreight', 'destTHC', 'insurance'],
        buyerPays: ['importCustoms', 'onCarriage']
    },
    DAP: { 
        name: 'Delivered at Place', 
        description: 'Belirlenen yerde teslim',
        sellerPays: ['preCarriage', 'exportCustoms', 'originTHC', 'seaFreight', 'destTHC', 'onCarriage'],
        buyerPays: ['importCustoms', 'insurance']
    },
    DPU: { 
        name: 'Delivered at Place Unloaded', 
        description: 'BoÅŸaltÄ±lmÄ±ÅŸ teslim',
        sellerPays: ['preCarriage', 'exportCustoms', 'originTHC', 'seaFreight', 'destTHC', 'onCarriage', 'unloading'],
        buyerPays: ['importCustoms', 'insurance']
    },
    DDP: { 
        name: 'Delivered Duty Paid', 
        description: 'Customs resmi Ã¶denmiÅŸ teslim',
        sellerPays: ['preCarriage', 'exportCustoms', 'originTHC', 'seaFreight', 'destTHC', 'importCustoms', 'onCarriage', 'insurance'],
        buyerPays: []
    }
};

// Carrier Rates Database - Carrierlerin sisteme girdiÄŸi ratelar (GERÃ‡EK PÄ°YASA FÄ°YATLARI)
var carrierRatesDB = {
    sea: [
        // UluslararasÄ± Deniz RotalarÄ±
        { id: 'SR-001', carrier: 'Aksea Shipping', origin: 'Istanbul, Turkey', destination: 'Hamburg, Germany', minWeight: 5000, maxWeight: 25000, pricePerTon: 95, transitDays: 18, validUntil: '2025-01-15', createdAt: '2024-12-10', rating: 4.8 },
        { id: 'SR-002', carrier: 'Global Maritime', origin: 'Istanbul, Turkey', destination: 'Rotterdam, Hollanda', minWeight: 5000, maxWeight: 20000, pricePerTon: 88, transitDays: 16, validUntil: '2025-01-20', createdAt: '2024-12-12', rating: 4.5 },
        { id: 'SR-003', carrier: 'Bosphorus Lines', origin: 'Mersin, TÃ¼rkiye', destination: 'Felixstowe, Ä°ngiltere', minWeight: 8000, maxWeight: 30000, pricePerTon: 105, transitDays: 22, validUntil: '2025-01-18', createdAt: '2024-12-08', rating: 4.6 },
        { id: 'SR-004', carrier: 'Mediterranean Cargo', origin: 'Istanbul, Turkey', destination: 'Shanghai, Ã‡in', minWeight: 10000, maxWeight: 50000, pricePerTon: 145, transitDays: 28, validUntil: '2025-01-25', createdAt: '2024-12-14', rating: 4.3 },
        { id: 'SR-005', carrier: 'Aegean Shipping', origin: 'Ä°zmir, TÃ¼rkiye', destination: 'Piraeus, Greece', minWeight: 2000, maxWeight: 15000, pricePerTon: 55, transitDays: 3, validUntil: '2025-01-30', createdAt: '2024-12-16', rating: 4.7 },
        { id: 'SR-006', carrier: 'Marmara Denizcilik', origin: 'Istanbul, Turkey', destination: 'Hamburg, Germany', minWeight: 3000, maxWeight: 20000, pricePerTon: 92, transitDays: 19, validUntil: '2025-01-28', createdAt: '2024-12-18', rating: 4.4 },
        { id: 'SR-007', carrier: 'Karasea Lines', origin: 'Istanbul, Turkey', destination: 'Hamburg, Germany', minWeight: 4000, maxWeight: 22000, pricePerTon: 98, transitDays: 17, validUntil: '2025-01-22', createdAt: '2024-12-15', rating: 4.9 }
    ],
    air: [
        // Hava Kargo (kg baÅŸÄ±na $2.5-4.5 = ton baÅŸÄ±na $2500-4500)
        { id: 'AR-001', carrier: 'Turkish Cargo', origin: 'Istanbul, Turkey', destination: 'Frankfurt, Germany', minWeight: 100, maxWeight: 5000, pricePerTon: 2800, transitDays: 1, validUntil: '2025-01-10', createdAt: '2024-12-15', rating: 4.9 },
        { id: 'AR-002', carrier: 'Express Air Freight', origin: 'Istanbul, Turkey', destination: 'Londra, Ä°ngiltere', minWeight: 100, maxWeight: 3000, pricePerTon: 3200, transitDays: 1, validUntil: '2025-01-12', createdAt: '2024-12-14', rating: 4.7 },
        { id: 'AR-003', carrier: 'Sky Cargo TR', origin: 'Istanbul, Turkey', destination: 'Dubai, BAE', minWeight: 200, maxWeight: 8000, pricePerTon: 2400, transitDays: 1, validUntil: '2025-01-20', createdAt: '2024-12-13', rating: 4.5 },
        { id: 'AR-004', carrier: 'Anatolian Air', origin: 'Istanbul, Turkey', destination: 'New York, ABD', minWeight: 500, maxWeight: 10000, pricePerTon: 4200, transitDays: 2, validUntil: '2025-01-15', createdAt: '2024-12-11', rating: 4.6 },
        { id: 'AR-005', carrier: 'Pegasus Cargo', origin: 'Anland, TÃ¼rkiye', destination: 'Amsterdam, Hollanda', minWeight: 50, maxWeight: 2000, pricePerTon: 2950, transitDays: 1, validUntil: '2025-01-18', createdAt: '2024-12-17', rating: 4.4 },
        { id: 'AR-006', carrier: 'Anadolu Jet Cargo', origin: 'Istanbul, Turkey', destination: 'Frankfurt, Germany', minWeight: 50, maxWeight: 4000, pricePerTon: 2650, transitDays: 1, validUntil: '2025-01-25', createdAt: '2024-12-19', rating: 4.3 },
        { id: 'AR-007', carrier: 'FastAir Turkey', origin: 'Istanbul, Turkey', destination: 'Frankfurt, Germany', minWeight: 100, maxWeight: 6000, pricePerTon: 2900, transitDays: 1, validUntil: '2025-01-20', createdAt: '2024-12-16', rating: 4.8 }
    ],
    land: [
        // UluslararasÄ± TIR RotalarÄ±
        { id: 'LR-001', carrier: 'Anadolu Transport', origin: 'Istanbul, Turkey', destination: 'MÃ¼nih, Germany', minWeight: 1000, maxWeight: 24000, pricePerTon: 85, transitDays: 4, validUntil: '2025-01-25', createdAt: '2024-12-11', rating: 4.7 },
        { id: 'LR-002', carrier: 'Euro TIR', origin: 'Istanbul, Turkey', destination: 'Milano, Ä°talya', minWeight: 2000, maxWeight: 24000, pricePerTon: 72, transitDays: 3, validUntil: '2025-01-22', createdAt: '2024-12-13', rating: 4.5 },
        { id: 'LR-003', carrier: 'Balkan Logistics', origin: 'Istanbul, Turkey', destination: 'Sofya, Bulgaristan', minWeight: 500, maxWeight: 24000, pricePerTon: 22, transitDays: 1, validUntil: '2025-01-30', createdAt: '2024-12-09', rating: 4.8 },
        { id: 'LR-004', carrier: 'Trans Europa', origin: 'Istanbul, Turkey', destination: 'Viyana, Avusturya', minWeight: 1500, maxWeight: 24000, pricePerTon: 68, transitDays: 3, validUntil: '2025-01-28', createdAt: '2024-12-15', rating: 4.6 },
        // TÃ¼rkiye Ä°Ã§i Rotalar
        { id: 'LR-005', carrier: 'Ä°Ã§ Anadolu Nakliyat', origin: 'Istanbul, Turkey', destination: 'Anland, TÃ¼rkiye', minWeight: 500, maxWeight: 24000, pricePerTon: 15, transitDays: 1, validUntil: '2025-01-20', createdAt: '2024-12-10', rating: 4.6 },
        { id: 'LR-006', carrier: 'Marmara Lojistik', origin: 'Istanbul, Turkey', destination: 'Ä°zmir, TÃ¼rkiye', minWeight: 500, maxWeight: 24000, pricePerTon: 16, transitDays: 1, validUntil: '2025-01-25', createdAt: '2024-12-12', rating: 4.7 },
        { id: 'LR-007', carrier: 'Karasea Transport', origin: 'Istanbul, Turkey', destination: 'Trabzon, TÃ¼rkiye', minWeight: 1000, maxWeight: 24000, pricePerTon: 38, transitDays: 2, validUntil: '2025-01-22', createdAt: '2024-12-14', rating: 4.4 },
        { id: 'LR-008', carrier: 'Ege Nakliyat', origin: 'Istanbul, Turkey', destination: 'Antalya, TÃ¼rkiye', minWeight: 500, maxWeight: 24000, pricePerTon: 24, transitDays: 1, validUntil: '2025-01-18', createdAt: '2024-12-16', rating: 4.5 },
        { id: 'LR-009', carrier: 'GÃ¼neydoÄŸu Lojistik', origin: 'Istanbul, Turkey', destination: 'Gaziantep, TÃ¼rkiye', minWeight: 1000, maxWeight: 24000, pricePerTon: 42, transitDays: 2, validUntil: '2025-01-30', createdAt: '2024-12-08', rating: 4.3 },
        { id: 'LR-010', carrier: 'Orta Anadolu Express', origin: 'Istanbul, Turkey', destination: 'Kayseri, TÃ¼rkiye', minWeight: 500, maxWeight: 24000, pricePerTon: 26, transitDays: 1, validUntil: '2025-01-28', createdAt: '2024-12-18', rating: 4.8 },
        { id: 'LR-011', carrier: 'HÄ±zlÄ± TaÅŸÄ±macÄ±lÄ±k', origin: 'Istanbul, Turkey', destination: 'Anland, TÃ¼rkiye', minWeight: 300, maxWeight: 24000, pricePerTon: 14, transitDays: 1, validUntil: '2025-01-26', createdAt: '2024-12-17', rating: 4.9 },
        { id: 'LR-012', carrier: 'BaÅŸkent Nakliye', origin: 'Istanbul, Turkey', destination: 'Anland, TÃ¼rkiye', minWeight: 500, maxWeight: 24000, pricePerTon: 16, transitDays: 1, validUntil: '2025-01-24', createdAt: '2024-12-19', rating: 4.5 },
        { id: 'LR-013', carrier: 'Ä°stanbul Express', origin: 'Istanbul, Turkey', destination: 'Ä°zmir, TÃ¼rkiye', minWeight: 200, maxWeight: 24000, pricePerTon: 15, transitDays: 1, validUntil: '2025-01-23', createdAt: '2024-12-20', rating: 4.6 },
        { id: 'LR-014', carrier: 'Trakya Lojistik', origin: 'Istanbul, Turkey', destination: 'Sofya, Bulgaristan', minWeight: 500, maxWeight: 24000, pricePerTon: 24, transitDays: 1, validUntil: '2025-01-27', createdAt: '2024-12-16', rating: 4.7 },
        { id: 'LR-015', carrier: 'Marmara Express', origin: 'Istanbul, Turkey', destination: 'MÃ¼nih, Germany', minWeight: 1000, maxWeight: 24000, pricePerTon: 92, transitDays: 5, validUntil: '2025-01-29', createdAt: '2024-12-14', rating: 4.4 },
        { id: 'LR-016', carrier: 'TÃ¼rk TIR', origin: 'Istanbul, Turkey', destination: 'MÃ¼nih, Germany', minWeight: 2000, maxWeight: 24000, pricePerTon: 88, transitDays: 4, validUntil: '2025-01-21', createdAt: '2024-12-12', rating: 4.6 }
    ]
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PLATFORM AI ANALÄ°Z SÄ°STEMÄ°
// Platformdaki gerÃ§ek verilere dayalÄ± akÄ±llÄ± analiz
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var PlatformAI = {
    
    // Åehir normalizasyonu
    normalizeCity: function(city) {
        if (!city) return '';
        return city.toLowerCase()
            .split(',')[0]
            .trim()
            .replace(/Ä°/gi, 'i').replace(/I/g, 'i').replace(/Ä±/g, 'i')
            .replace(/Ä/gi, 'g').replace(/ÄŸ/g, 'g')
            .replace(/Ãœ/gi, 'u').replace(/Ã¼/g, 'u')
            .replace(/Å/gi, 's').replace(/ÅŸ/g, 's')
            .replace(/Ã–/gi, 'o').replace(/Ã¶/g, 'o')
            .replace(/Ã‡/gi, 'c').replace(/Ã§/g, 'c');
    },
    
    // Rota bazlÄ± platform istatistikleri
    getRouteStats: function(origin, dest, mode) {
        var self = this;
        var o = self.normalizeCity(origin);
        var d = self.normalizeCity(dest);
        
        // TÃ¼m modlarÄ± veya tek modu kontrol et
        var modes = mode ? [mode] : ['sea', 'air', 'land'];
        var matchingRates = [];
        
        modes.forEach(function(m) {
            var rates = carrierRatesDB[m] || [];
            rates.forEach(function(rate) {
                var ro = self.normalizeCity(rate.origin);
                var rd = self.normalizeCity(rate.destination);
                if (ro === o && rd === d) {
                    matchingRates.push({
                        mode: m,
                        price: rate.pricePerTon,
                        transit: rate.transitDays,
                        carrier: rate.carrier,
                        rating: rate.rating || 4.5,
                        id: rate.id
                    });
                }
            });
        });
        
        if (matchingRates.length === 0) {
            return null;
        }
        
        // Ä°statistik hesapla
        var prices = matchingRates.map(function(r) { return r.price; });
        var minPrice = Math.min.apply(null, prices);
        var maxPrice = Math.max.apply(null, prices);
        var avgPrice = Math.round(prices.reduce(function(a,b) { return a+b; }, 0) / prices.length);
        
        var transits = matchingRates.map(function(r) { return r.transit; });
        var minTransit = Math.min.apply(null, transits);
        var avgTransit = Math.round(transits.reduce(function(a,b) { return a+b; }, 0) / transits.length);
        
        var ratings = matchingRates.map(function(r) { return r.rating; });
        var maxRating = Math.max.apply(null, ratings);
        
        return {
            count: matchingRates.length,
            minPrice: minPrice,
            maxPrice: maxPrice,
            avgPrice: avgPrice,
            minTransit: minTransit,
            avgTransit: avgTransit,
            maxRating: maxRating,
            rates: matchingRates,
            bestPrice: matchingRates.find(function(r) { return r.price === minPrice; }),
            fastestDelivery: matchingRates.find(function(r) { return r.transit === minTransit; }),
            topRated: matchingRates.find(function(r) { return r.rating === maxRating; })
        };
    },
    
    // Quote analizi - platform verilerine gÃ¶re
    analyzeOffer: function(origin, dest, mode, price) {
        var stats = this.getRouteStats(origin, dest, mode);
        
        if (!stats) {
            return {
                hasData: false,
                message: 'Bu rota iÃ§in henÃ¼z platform verisi yok'
            };
        }
        
        var position = '';
        var positionClass = '';
        var percentDiff = 0;
        
        if (price <= stats.minPrice) {
            position = 'En DÃ¼ÅŸÃ¼k Fiyat ';
            positionClass = 'best';
            percentDiff = Math.round(((stats.avgPrice - price) / stats.avgPrice) * 100);
        } else if (price < stats.avgPrice) {
            position = 'OrtalamanÄ±n AltÄ±nda';
            positionClass = 'good';
            percentDiff = Math.round(((stats.avgPrice - price) / stats.avgPrice) * 100);
        } else if (price === stats.avgPrice) {
            position = 'Piyasa OrtalamasÄ±';
            positionClass = 'average';
            percentDiff = 0;
        } else if (price <= stats.maxPrice) {
            position = 'OrtalamanÄ±n ÃœstÃ¼nde';
            positionClass = 'above';
            percentDiff = Math.round(((price - stats.avgPrice) / stats.avgPrice) * 100);
        } else {
            position = 'Piyasa ÃœstÃ¼ ';
            positionClass = 'high';
            percentDiff = Math.round(((price - stats.avgPrice) / stats.avgPrice) * 100);
        }
        
        return {
            hasData: true,
            stats: stats,
            position: position,
            positionClass: positionClass,
            percentDiff: percentDiff,
            recommendation: price <= stats.avgPrice ? 
                'Bu rate platformdaki ortalamaya gÃ¶re uygun.' : 
                'Daha dÃ¼ÅŸÃ¼k ratelÄ± alternatifler mevcut.'
        };
    },
    
    // MÃ¼ÅŸteri iÃ§in en iyi quoteleri bul
    findBestOffers: function(origin, dest, mode) {
        var stats = this.getRouteStats(origin, dest, mode);
        if (!stats) return null;
        
        return {
            cheapest: stats.bestPrice,
            fastest: stats.fastestDelivery,
            topRated: stats.topRated,
            stats: stats
        };
    },
    
    // Carrier request analysis
    getDemandAnalysis: function(origin, dest, mode) {
        var self = this;
        var o = self.normalizeCity(origin);
        var d = self.normalizeCity(dest);
        
        // TÃ¼m rotalardaki quote sayÄ±larÄ±nÄ± hesapla
        var allRoutes = {};
        var modes = mode ? [mode] : ['sea', 'air', 'land'];
        
        modes.forEach(function(m) {
            var rates = carrierRatesDB[m] || [];
            rates.forEach(function(rate) {
                var ro = self.normalizeCity(rate.origin);
                var rd = self.normalizeCity(rate.destination);
                var key = ro + '-' + rd;
                if (!allRoutes[key]) {
                    allRoutes[key] = { count: 0, mode: m, origin: rate.origin, dest: rate.destination };
                }
                allRoutes[key].count++;
            });
        });
        
        // En popÃ¼ler rotalarÄ± bul
        var sortedRoutes = Object.keys(allRoutes).map(function(k) {
            return allRoutes[k];
        }).sort(function(a, b) { return b.count - a.count; });
        
        var currentKey = o + '-' + d;
        var currentRoute = allRoutes[currentKey];
        var rank = sortedRoutes.findIndex(function(r) { 
            return self.normalizeCity(r.origin) + '-' + self.normalizeCity(r.dest) === currentKey;
        }) + 1;
        
        return {
            totalRoutes: sortedRoutes.length,
            topRoutes: sortedRoutes.slice(0, 5),
            currentRoute: currentRoute,
            rank: rank || 'Yeni',
            demandLevel: currentRoute ? (currentRoute.count >= 3 ? 'YÃ¼ksek' : currentRoute.count >= 2 ? 'Orta' : 'DÃ¼ÅŸÃ¼k') : 'Veri Yok',
            suggestion: rank <= 3 ? 'Bu rota Ã§ok popÃ¼ler, rekabetÃ§i rate verin!' : 
                        rank <= 10 ? 'Medium demand, good rate advantage.' :
                        'DÃ¼ÅŸÃ¼k rekabet, pazar payÄ± kazanma fÄ±rsatÄ±!'
        };
    },
    
    // YÃ¼k tipine gÃ¶re taÅŸÄ±yÄ±cÄ± quotesi (Forwarder iÃ§in)
    recommendCarrierType: function(weight, cargoType, urgency, origin, dest) {
        var recommendations = [];
        
        // AÄŸÄ±rlÄ±ÄŸa gÃ¶re
        if (weight < 500) {
            recommendations.push({ mode: 'air', reason: 'KÃ¼Ã§Ã¼k yÃ¼k - air kargo uygun', score: urgency === 'urgent' ? 95 : 70 });
            recommendations.push({ mode: 'land', reason: 'Parsiyel land transportcÄ±lÄ±ÄŸÄ±', score: 60 });
        } else if (weight < 5000) {
            recommendations.push({ mode: 'land', reason: 'Orta yÃ¼k - TIR ekonomik', score: 80 });
            recommendations.push({ mode: 'sea', reason: 'LCL sea taÅŸÄ±macÄ±lÄ±ÄŸÄ±', score: urgency === 'urgent' ? 40 : 75 });
            recommendations.push({ mode: 'air', reason: 'Hava kargo (acil ise)', score: urgency === 'urgent' ? 90 : 50 });
        } else {
            recommendations.push({ mode: 'sea', reason: 'BÃ¼yÃ¼k yÃ¼k - FCL sea en ekonomik', score: urgency === 'urgent' ? 50 : 90 });
            recommendations.push({ mode: 'land', reason: 'Komple TIR', score: 70 });
        }
        
        // Kargo tipine gÃ¶re ayarla
        if (cargoType === 'perishable' || cargoType === 'soÄŸuk') {
            recommendations.forEach(function(r) {
                if (r.mode === 'sea') r.score -= 20;
                if (r.mode === 'air') r.score += 15;
            });
            recommendations.push({ mode: 'land', reason: 'Frigorifik TIR - soÄŸuk zincir', score: 85 });
        }
        
        if (cargoType === 'hazardous' || cargoType === 'tehlikeli') {
            recommendations.forEach(function(r) {
                if (r.mode === 'air') r.score -= 30;
            });
            recommendations.push({ mode: 'land', reason: 'ADR sertifikalÄ± TIR', score: 85 });
        }
        
        if (cargoType === 'fragile' || cargoType === 'kÄ±rÄ±lÄ±r') {
            recommendations.forEach(function(r) {
                if (r.mode === 'air') r.score += 10;
            });
        }
        
        // Aciliyete gÃ¶re
        if (urgency === 'urgent' || urgency === 'acil') {
            recommendations.forEach(function(r) {
                if (r.mode === 'air') r.score += 25;
                if (r.mode === 'sea') r.score -= 25;
            });
        }
        
        // SÄ±rala
        recommendations.sort(function(a, b) { return b.score - a.score; });
        
        // Platformdaki ratelarÄ± ekle
        var self = this;
        recommendations.forEach(function(rec) {
            var stats = self.getRouteStats(origin, dest, rec.mode);
            if (stats) {
                rec.platformData = {
                    avgPrice: stats.avgPrice,
                    minPrice: stats.minPrice,
                    offerCount: stats.count
                };
            }
        });
        
        return {
            recommended: recommendations[0],
            alternatives: recommendations.slice(1, 3),
            all: recommendations
        };
    },
    
    // Customs belge quotesi
    getRequiredDocuments: function(origin, dest, cargoType, hsCode) {
        var docs = {
            required: [
                { name: 'Ticari Fatura (Commercial Invoice)', icon: '' },
                { name: 'Packing List (Packing List)', icon: '' },
                { name: 'Certificate of Origin (Certificate of Origin)', icon: '' }
            ],
            transport: [],
            special: [],
            customs: []
        };
        
        // TaÅŸÄ±ma moduna gÃ¶re
        docs.transport.push({ name: 'Bill of Lading (B/L) or CMR', icon: '' });
        
        // VarÄ±ÅŸ Ã¼lkesine gÃ¶re
        var destCountry = this.normalizeCity(dest);
        
        if (destCountry.includes('almanya') || destCountry.includes('germany') || 
            destCountry.includes('fransa') || destCountry.includes('italya') ||
            destCountry.includes('hollanda') || destCountry.includes('avusturya')) {
            docs.customs.push({ name: 'EUR.1 DolaÅŸÄ±m Belgesi', icon: 'ğŸ‡ªğŸ‡º' });
            docs.customs.push({ name: 'CE Uygunluk Belgesi', icon: '' });
        }
        
        if (destCountry.includes('ingiltere') || destCountry.includes('uk') || destCountry.includes('londra')) {
            docs.customs.push({ name: 'UK Customs BeyanÄ±', icon: 'EN' });
        }
        
        if (destCountry.includes('abd') || destCountry.includes('usa') || destCountry.includes('new york')) {
            docs.customs.push({ name: 'FDA Registration (food/medicine)', icon: 'ğŸ‡ºğŸ‡¸' });
            docs.customs.push({ name: 'ISF Filing (10+2)', icon: '' });
        }
        
        // Kargo tipine gÃ¶re
        if (cargoType === 'food' || cargoType === 'gÄ±da') {
            docs.special.push({ name: 'Health Certificate', icon: 'ğŸ¥' });
            docs.special.push({ name: 'Bitki Health Certificate', icon: 'ğŸŒ¿' });
            docs.special.push({ name: 'Helal SertifikasÄ± (gerekirse)', icon: 'â˜ªï¸' });
        }
        
        if (cargoType === 'textile' || cargoType === 'tekstil') {
            docs.special.push({ name: 'Tekstil GÃ¶zetim Belgesi', icon: 'ğŸ‘•' });
        }
        
        if (cargoType === 'chemical' || cargoType === 'kimyasal') {
            docs.special.push({ name: 'MSDS (GÃ¼venlik Bilgi Formu)', icon: 'âš—ï¸' });
            docs.special.push({ name: 'ADR Belgesi (tehlikeli madde)', icon: 'â˜£ï¸' });
        }
        
        if (cargoType === 'machinery' || cargoType === 'makine') {
            docs.special.push({ name: 'Teknik DokÃ¼manlar', icon: '' });
            docs.special.push({ name: 'Garanti Belgesi', icon: 'ğŸ”§' });
        }
        
        if (cargoType === 'wood' || cargoType === 'ahÅŸap') {
            docs.special.push({ name: 'Fumigation Certificate (ISPM-15)', icon: 'ğŸªµ' });
        }
        
        // HS koduna gÃ¶re Ã¶zel gereksinimler
        if (hsCode) {
            var hs2 = hsCode.substring(0, 2);
            if (['01', '02', '03', '04', '05'].includes(hs2)) {
                docs.special.push({ name: 'Veteriner Health Certificate', icon: 'ğŸ„' });
            }
            if (['84', '85'].includes(hs2)) {
                docs.special.push({ name: 'CE Certificate', icon: '' });
            }
        }
        
        return {
            required: docs.required,
            transport: docs.transport,
            special: docs.special.length > 0 ? docs.special : [{ name: 'Ã–zel belge gerekmiyor', icon: 'âœ“' }],
            customs: docs.customs.length > 0 ? docs.customs : [{ name: 'Standart gÃ¼mrÃ¼k prosedÃ¼rÃ¼', icon: 'âœ“' }],
            totalCount: docs.required.length + docs.transport.length + docs.special.length + docs.customs.length
        };
    },
    
    // Platform genel istatistikleri
    getPlatformStats: function() {
        var totalSea = carrierRatesDB.sea ? carrierRatesDB.sea.length : 0;
        var totalAir = carrierRatesDB.air ? carrierRatesDB.air.length : 0;
        var totalLand = carrierRatesDB.land ? carrierRatesDB.land.length : 0;
        
        var allRates = [].concat(
            carrierRatesDB.sea || [],
            carrierRatesDB.air || [],
            carrierRatesDB.land || []
        );
        
        var uniqueCarriers = [];
        var uniqueRoutes = [];
        
        allRates.forEach(function(r) {
            if (uniqueCarriers.indexOf(r.carrier) === -1) uniqueCarriers.push(r.carrier);
            var route = r.origin + '-' + r.destination;
            if (uniqueRoutes.indexOf(route) === -1) uniqueRoutes.push(route);
        });
        
        return {
            totalOffers: allRates.length,
            seaOffers: totalSea,
            airOffers: totalAir,
            landOffers: totalLand,
            uniqueCarriers: uniqueCarriers.length,
            uniqueRoutes: uniqueRoutes.length
        };
    }
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AI UI FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// 1. MÃœÅTERÄ° - Quote KarÅŸÄ±laÅŸtcomparison Panelini GÃ¼ncelle
function updateClientAIPanel(origin, dest, mode) {
    try {
        var stats = PlatformAI.getRouteStats(origin, dest, mode);
        
        // Platform verileri
        var aiRouteOffers = document.getElementById('aiRouteOffers');
        var aiPriceRange = document.getElementById('aiPriceRange');
        var aiAvgPrice = document.getElementById('aiAvgPrice');
        
        if (aiRouteOffers) aiRouteOffers.textContent = stats ? stats.count + ' quote' : 'Veri yok';
        if (aiPriceRange) aiPriceRange.textContent = stats ? '$' + stats.minPrice + ' - $' + stats.maxPrice + '/ton' : '-';
        if (aiAvgPrice) aiAvgPrice.textContent = stats ? '$' + stats.avgPrice + '/ton' : '-';
        
        // En iyi quoteler
        var bestPriceEl = document.getElementById('aiBestPrice');
        var fastestEl = document.getElementById('aiFastest');
        var topRatedEl = document.getElementById('aiTopRated');
        var conclusionEl = document.getElementById('aiConclusion');
        
        if (stats && stats.count > 0) {
            if (bestPriceEl) {
                var bpVal = bestPriceEl.querySelector('.rec-value');
                if (bpVal) bpVal.textContent = stats.bestPrice ? stats.bestPrice.carrier + ' - $' + stats.bestPrice.price + '/ton' : '-';
            }
            
            if (fastestEl) {
                var fVal = fastestEl.querySelector('.rec-value');
                if (fVal) fVal.textContent = stats.fastestDelivery ? stats.fastestDelivery.carrier + ' - ' + stats.fastestDelivery.transit + ' days' : '-';
            }
            
            if (topRatedEl) {
                var trVal = topRatedEl.querySelector('.rec-value');
                if (trVal) trVal.textContent = stats.topRated ? stats.topRated.carrier + ' -' + stats.topRated.rating : '-';
            }
            
            // AI SonuÃ§
            if (conclusionEl) {
                var diff = stats.maxPrice - stats.minPrice;
                var diffPercent = Math.round((diff / stats.avgPrice) * 100);
                
                if (diff === 0) {
                    conclusionEl.innerHTML = 'Success: All quotes on this route are similar. You can choose based on service quality.';
                } else if (diffPercent > 30) {
                    conclusionEl.innerHTML = 'Quoteler arasÄ±nda <strong>%' + diffPercent + '</strong> fark var. Lowest rate olan <strong>$' + stats.minPrice + '/ton</strong> (' + (stats.bestPrice ? stats.bestPrice.carrier : '') + ') iyi bir seÃ§im olabilir.';
                } else {
                    conclusionEl.innerHTML = 'Quotes are close (Â±%' + diffPercent + '). Transit sÃ¼resi ve firma puanÄ±na gÃ¶re deÄŸerlendirin.';
                }
            }
        } else {
            // Veri yok durumu
            if (bestPriceEl) {
                var bpVal = bestPriceEl.querySelector('.rec-value');
                if (bpVal) bpVal.textContent = 'Bu rota iÃ§in veri yok';
            }
            if (fastestEl) {
                var fVal = fastestEl.querySelector('.rec-value');
                if (fVal) fVal.textContent = 'Bu rota iÃ§in veri yok';
            }
            if (topRatedEl) {
                var trVal = topRatedEl.querySelector('.rec-value');
                if (trVal) trVal.textContent = 'Bu rota iÃ§in veri yok';
            }
            if (conclusionEl) {
                conclusionEl.innerHTML = 'Warning: Bu rota iÃ§in henÃ¼z platform verisi yok. Forwarder quotelerini reviewsniz quotelir.';
            }
        }
    } catch(e) {
        console.log('updateClientAIPanel error:', e);
    }
}

// 2. CARRIER - Update Request Analysis Panel
function updateCarrierAIPanel() {
    try {
        var platformStats = PlatformAI.getPlatformStats();
        
        // Platform istatistikleri
        var totalOffersEl = document.getElementById('aiTotalOffers');
        var totalCarriersEl = document.getElementById('aiTotalCarriers');
        var totalRoutesEl = document.getElementById('aiTotalRoutes');
        
        if (totalOffersEl) totalOffersEl.textContent = platformStats.totalOffers;
        if (totalCarriersEl) totalCarriersEl.textContent = platformStats.uniqueCarriers;
        if (totalRoutesEl) totalRoutesEl.textContent = platformStats.uniqueRoutes;
        
        // En popÃ¼ler rotalarÄ± bul
        var allRoutes = {};
        ['sea', 'air', 'land'].forEach(function(mode) {
            var rates = carrierRatesDB[mode] || [];
            rates.forEach(function(rate) {
                var key = rate.origin.split(',')[0] + ' â†’ ' + rate.destination.split(',')[0];
                if (!allRoutes[key]) {
                    allRoutes[key] = { name: key, count: 0 };
                }
                allRoutes[key].count++;
            });
        });
        
        var sortedRoutes = Object.values(allRoutes).sort(function(a, b) { return b.count - a.count; });
        var topRoutesHTML = '';
        
        sortedRoutes.slice(0, 3).forEach(function(route, idx) {
            topRoutesHTML += '<div class="top-route-item">' +
                '<span class="route-rank">' + (idx + 1) + '</span>' +
                '<span class="route-name">' + route.name + '</span>' +
                '<span class="route-count">' + route.count + ' quote</span>' +
            '</div>';
        });
        
        var topRoutesEl = document.getElementById('aiTopRoutes');
        if (topRoutesEl) topRoutesEl.innerHTML = topRoutesHTML;
        
        // AI Quotesi - dÃ¼ÅŸÃ¼k rekabetli rota bul
        var suggestionEl = document.getElementById('aiCarrierSuggestion');
        if (suggestionEl) {
            var lowCompRoutes = sortedRoutes.filter(function(r) { return r.count <= 2; });
            if (lowCompRoutes.length > 0) {
                var suggestedRoute = lowCompRoutes[Math.floor(Math.random() * Math.min(3, lowCompRoutes.length))];
                suggestionEl.innerHTML = 
                    '<strong>' + suggestedRoute.name + '</strong> rotasÄ±nda sadece ' + suggestedRoute.count + ' forwarder var. ' +
                    'Add rates to this route to increase your market share!';
            } else {
                suggestionEl.innerHTML = 
                    'Platform bÃ¼yÃ¼yor! Yeni rotalar ekleyerek mÃ¼ÅŸteri tabanÄ±nÄ±zÄ± geniÅŸletin.';
            }
        }
    } catch(e) {
        console.log('updateCarrierAIPanel error:', e);
    }
}

// 3. GÃœMRÃœKÃ‡Ãœ - Belge Quotesi GÃ¼ncelle
function updateAIDocuments() {
    try {
        var cargoTypeEl = document.getElementById('aiCargoTypeDemo');
        var destCountryEl = document.getElementById('aiDestCountryDemo');
        
        if (!cargoTypeEl || !destCountryEl) return;
        
        var cargoType = cargoTypeEl.value;
        var destCountry = destCountryEl.value;
        
        var docs = PlatformAI.getRequiredDocuments('Ä°stanbul', destCountry, cargoType, null);
        
        // Ã–zel belgeler
        var specialDocsDiv = document.getElementById('aiSpecialDocs');
        var specialDocsList = document.getElementById('aiSpecialDocsList');
        
        if (specialDocsDiv && specialDocsList) {
            if (docs.special.length > 0 && docs.special[0].name !== 'Ã–zel belge gerekmiyor') {
                specialDocsDiv.classList.remove('hidden');
                specialDocsList.innerHTML = docs.special.map(function(d) {
                    return '<li>' + d.icon + ' ' + d.name + '</li>';
                }).join('');
            } else {
                specialDocsDiv.classList.add('hidden');
            }
        }
    } catch(e) {
        console.log('updateAIDocuments error:', e);
    }
}

// 4. Quote kartlarÄ±na AI rozeti ekle
function addAIBadgesToQuotes(quotes, origin, dest, mode) {
    var stats = PlatformAI.getRouteStats(origin, dest, mode);
    if (!stats) return quotes;
    
    quotes.forEach(function(quote) {
        // En ucuz mu?
        if (quote.price === stats.minPrice) {
            quote.aiBadge = { type: 'best', text: 'Suitable Match' };
        }
        // En yÃ¼ksek puan mÄ±?
        else if (quote.rating === stats.maxRating) {
            quote.aiBadge = { type: 'rated', text: 'Best Rated' };
        }
    });
    
    return quotes;
}

// Dashboard aÃ§Ä±ldÄ±ÄŸÄ±nda AI panellerini gÃ¼ncelle
function initializeAIPanels() {
    // Carrier paneli
    if (document.getElementById('carrierAIPanel')) {
        updateCarrierAIPanel();
    }
}

// Sayfa yÃ¼klendiÄŸinde
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(initializeAIPanels, 500);
});

// Current user's rates
var myCarrierRates = [];

// Current rate being edited
var currentRateAI = {
    totalCost: 0,
    suggestedPrice: 0
};

// Show carrier tab
function showCarrierTab(tab) {
    document.querySelectorAll('#carrierDashboard .tab-content').forEach(function(t) {
        t.style.display = 'none';
    });
    document.querySelectorAll('#carrierDashboard .nav-menu-item').forEach(function(item, idx) {
        item.classList.remove('active');
        if ((tab === 'rates' && idx === 1) || (tab === 'requests' && idx === 2) || (tab === 'active' && idx === 3)) {
            item.classList.add('active');
        }
    });
    
    if (tab === 'rates') {
        document.getElementById('carrierRatesTab').style.display = 'block';
    } else if (tab === 'requests') {
        document.getElementById('carrierRequestsTab').style.display = 'block';
        renderCarrierRequests();
    } else if (tab === 'active') {
        document.getElementById('carrierActiveTab').style.display = 'block';
    }
}

// Render carrier's own rates
function renderCarrierRates() {
    var container = document.getElementById('carrierRatesList');
    if (!container) return;
    
    // Get rates for current carrier mode
    var rates = carrierRatesDB[carrierMode] || [];
    
    // Filter by current user (in real app)
    // For demo, show all rates of this mode
    
    if (rates.length === 0) {
        container.innerHTML = '<div class="empty-state"><div class="empty-icon"></div><p>HenÃ¼z rate eklemediniz</p><p style="font-size:14px;color:#94a3b8;">Yeni rate ekleyerek mÃ¼ÅŸterilere ulaÅŸÄ±n</p></div>';
        document.getElementById('carrierRateCount').textContent = '0';
        return;
    }
    
    document.getElementById('carrierRateCount').textContent = rates.length;
    
    var html = '';
    rates.forEach(function(rate) {
        html += '<div class="rate-card">';
        html += '<div class="rate-card-header">';
        html += '<div class="rate-route">' + rate.origin.split(',')[0] + ' â†’ ' + rate.destination.split(',')[0] + '</div>';
        html += '<div class="rate-price">$' + rate.pricePerTon + '<small> / ton</small></div>';
        html += '</div>';
        
        html += '<div class="rate-details">';
        html += '<div class="rate-detail">âš–ï¸ <strong>' + numberFormat(rate.minWeight) + ' - ' + numberFormat(rate.maxWeight) + '</strong> kg</div>';
        html += '<div class="rate-detail"> <strong>' + rate.transitDays + '</strong> days</div>';
        html += '<div class="rate-detail">ğŸ¢ <strong>' + rate.carrier + '</strong></div>';
        html += '</div>';
        
        html += '<div class="rate-card-footer">';
        html += '<div class="rate-validity">Validity: ' + rate.validUntil + '</div>';
        html += '<div class="rate-actions">';
        html += '<button class="btn-edit-rate" onclick="editRate(\'' + rate.id + '\')"> DÃ¼zenle</button>';
        html += '<button class="btn-delete-rate" onclick="deleteRate(\'' + rate.id + '\')"> Sil</button>';
        html += '</div>';
        html += '</div>';
        html += '</div>';
    });
    
    container.innerHTML = html;
}

// Render carrier requests
function renderCarrierRequests() {
    var container = document.getElementById('carrierRequestsList');
    if (!container) return;
    
    // Filter network requests by carrier mode
    var requests = networkRequests.filter(function(r) {
        return r.freight === carrierMode && r.status === 'open';
    });
    
    if (requests.length === 0) {
        container.innerHTML = '<div class="empty-state"><div class="empty-icon">ğŸ“¥</div><p>Current ' + (carrierMode === 'sea' ? 'sea' : carrierMode === 'air' ? 'air' : 'land') + ' transport - no RFQs available</p></div>';
        return;
    }
    
    var countEl = document.getElementById('carrierRequestCount');
    if (countEl) countEl.textContent = requests.length;
    
    var html = '';
    requests.forEach(function(req) {
        var freightIcon = req.freight === 'sea' ? '' : req.freight === 'air' ? '' : '';
        var loadLabel = getLoadTypeLabel(req.freight, req.loadType);
        var timeAgo = getTimeAgo(req.createdAt);
        var quoteCount = req.quotes ? req.quotes.length : 0;
        
        html += '<div class="request-card network">';
        html += '<div class="request-header">';
        html += '<span class="request-id-badge">' + req.id + '</span>';
        html += '<span class="request-time">' + timeAgo + '</span>';
        html += '</div>';
        
        html += '<div class="request-route">';
        html += '<div class="route-from"><span class="route-label">Nereden</span><strong>' + req.origin.split(',')[0] + '</strong></div>';
        html += '<div class="route-arrow">' + freightIcon + ' â†’</div>';
        html += '<div class="route-to"><span class="route-label">Nereye</span><strong>' + req.destination.split(',')[0] + '</strong></div>';
        html += '</div>';
        
        html += '<div class="request-details-grid">';
        html += '<div class="detail-item"><span class="detail-label">Transport</span><span class="detail-value">' + loadLabel + '</span></div>';
        html += '<div class="detail-item"><span class="detail-label">AÄŸÄ±rlÄ±k</span><span class="detail-value">' + numberFormat(req.weight) + ' kg</span></div>';
        html += '<div class="detail-item"><span class="detail-label">Volume</span><span class="detail-value">' + (req.volume || '-') + ' mÂ³</span></div>';
        html += '<div class="detail-item"><span class="detail-label">Load Date</span><span class="detail-value">' + formatDate(req.loadDate) + '</span></div>';
        if (req.incoterm) {
            html += '<div class="detail-item"><span class="detail-label">Incoterm</span><span class="detail-value">' + req.incoterm + '</span></div>';
        }
        if (req.cargoType) {
            html += '<div class="detail-item"><span class="detail-label">Cargo Type</span><span class="detail-value">' + req.cargoType + '</span></div>';
        }
        html += '</div>';
        
        if (req.notes) {
            html += '<div class="request-notes"> ' + req.notes + '</div>';
        }
        
        // Footer with quote count and action buttons
        html += '<div class="request-footer">';
        html += '<div class="quote-count">';
        if (quoteCount > 0) {
            html += '<span class="count-badge">' + quoteCount + '</span> quote gÃ¶nderildi';
        } else {
            html += '<span class="no-quotes">HenÃ¼z quote yok - Ä°lk siz gÃ¶nderin!</span>';
        }
        html += '</div>';
        html += '<div class="request-actions">';
        html += '<button class="btn-quote" onclick="openQuoteModal(\'' + req.id + '\')">Submit Quote</button>';
        html += '</div>';
        html += '</div>';
        
        html += '</div>';
    });
    
    container.innerHTML = html;
}

// Open add rate modal
function openAddRateModal() {
    document.getElementById('addRateModal').classList.add('active');
    resetRateForm();
    recalculateAIRate();
}

// Close add rate modal
function closeAddRateModal() {
    document.getElementById('addRateModal').classList.remove('active');
}

// Toggle modal size (expand/collapse)
function toggleModalSize(modalId) {
    var modal = document.getElementById(modalId);
    if (!modal) return;
    
    var container = modal.querySelector('.modal-container');
    if (!container) return;
    
    container.classList.toggle('expanded');
    
    var expandBtn = modal.querySelector('.modal-expand');
    if (expandBtn) {
        if (container.classList.contains('expanded')) {
            expandBtn.textContent = 'â›¶'; // KÃ¼Ã§Ã¼lt simgesi
            expandBtn.title = 'KÃ¼Ã§Ã¼lt';
        } else {
            expandBtn.textContent = 'â›¶'; // BÃ¼yÃ¼t simgesi
            expandBtn.title = 'BÃ¼yÃ¼t';
        }
    }
}

// Reset rate form
function resetRateForm() {
    var els = ['rateOrigin', 'rateDestination', 'rateMinWeight', 'rateMaxWeight', 'rateTransitDays', 'rateFinalPrice', 'rateNotes'];
    els.forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.value = '';
    });
}

// Åehirler arasÄ± mesafe veritabanÄ± (km) - Normalized keys (ASCII)
var distanceDB = {
    // TÃ¼rkiye iÃ§i
    'istanbul-anland': 450,
    'istanbul-izmir': 480,
    'istanbul-bursa': 155,
    'istanbul-kayseri': 770,
    'istanbul-antalya': 725,
    'istanbul-konya': 660,
    'istanbul-adana': 940,
    'istanbul-mersin': 950,
    'istanbul-trabzon': 1070,
    'istanbul-gaziantep': 1135,
    'istanbul-sivas': 870,
    'istanbul-erzurum': 1260,
    'istanbul-diyarbakir': 1400,
    'istanbul-malatya': 1050,
    'istanbul-samsun': 750,
    'istanbul-eskisehir': 330,
    'istanbul-seali': 600,
    'istanbul-van': 1700,
    'istanbul-elazig': 1200,
    'istanbul-hatay': 1100,
    'anland-izmir': 580,
    'anland-antalya': 480,
    'anland-kayseri': 320,
    'anland-sivas': 450,
    'anland-konya': 260,
    'anland-adana': 490,
    'anland-trabzon': 780,
    'anland-erzurum': 900,
    'anland-eskisehir': 240,
    'anland-bursa': 400,
    'izmir-antalya': 450,
    'izmir-seali': 250,
    'izmir-bursa': 330,
    'mersin-gaziantep': 300,
    'mersin-adana': 70,
    'adana-gaziantep': 220,
    'adana-hatay': 190,
    'kayseri-sivas': 200,
    'sivas-erzurum': 480,
    'trabzon-erzurum': 325,
    'antalya-konya': 300,
    'bursa-eskisehir': 155,
    
    // UluslararasÄ± (Ä°stanbul'dan) - KARA
    'istanbul-hamburg': 2400,
    'istanbul-rotterdam': 2650,
    'istanbul-milano': 1850,
    'istanbul-milan': 1850,
    'istanbul-munih': 1900,
    'istanbul-munich': 1900,
    'istanbul-viyana': 1600,
    'istanbul-vienna': 1600,
    'istanbul-sofya': 550,
    'istanbul-sofia': 550,
    'istanbul-bukres': 650,
    'istanbul-bucharest': 650,
    'istanbul-atina': 1100,
    'istanbul-athens': 1100,
    'istanbul-londra': 2900,
    'istanbul-london': 2900,
    'istanbul-paris': 2600,
    'istanbul-frankfurt': 2200,
    'istanbul-berlin': 2300,
    'istanbul-varÅŸova': 1850,
    'istanbul-warsaw': 1850,
    'istanbul-prag': 2000,
    'istanbul-prague': 2000,
    'istanbul-budapeste': 1400,
    'istanbul-budapest': 1400,
    'istanbul-belgrad': 900,
    'istanbul-belgrade': 900,
    'istanbul-tahran': 2500,
    'istanbul-tehran': 2500,
    'istanbul-dubai': 3200,
    'istanbul-sanghay': 8500,
    'istanbul-shanghai': 8500,
    
    // Anland'dan uluslararasÄ±
    'anland-sofya': 800,
    'anland-sofia': 800,
    'anland-bukres': 900,
    
    // Ä°zmir'den
    'izmir-atina': 600,
    'izmir-athens': 600,
    
    // Deniz mesafeleri (sea mili)
    'istanbul-hamburg-sea': 3200,
    'istanbul-rotterdam-sea': 3400,
    'istanbul-felixstowe-sea': 3800,
    'istanbul-londra-sea': 4000,
    'istanbul-london-sea': 4000,
    'mersin-hamburg-sea': 4200,
    'istanbul-sanghay-sea': 8500,
    'istanbul-shanghai-sea': 8500,
    'istanbul-dubai-sea': 3500,
    'istanbul-pire-sea': 350,
    'istanbul-piraeus-sea': 350,
    'izmir-pire-sea': 250
};

// Mesafe hesaplama fonksiyonu - BasitleÅŸtirilmiÅŸ ve gÃ¼venilir
function calculateDistance(origin, dest, mode) {
    // TÃ¼rkÃ§e landkter normalizasyonu fonksiyonu
    function normalize(str) {
        if (!str) return '';
        return str.toLowerCase()
            .replace(/Ä°/gi, 'i').replace(/I/g, 'i').replace(/Ä±/g, 'i')
            .replace(/Ä/gi, 'g').replace(/ÄŸ/g, 'g')
            .replace(/Ãœ/gi, 'u').replace(/Ã¼/g, 'u')
            .replace(/Å/gi, 's').replace(/ÅŸ/g, 's')
            .replace(/Ã–/gi, 'o').replace(/Ã¶/g, 'o')
            .replace(/Ã‡/gi, 'c').replace(/Ã§/g, 'c')
            .trim();
    }
    
    var o = normalize(origin.split(',')[0]);
    var d = normalize(dest.split(',')[0]);
    
    // AynÄ± ÅŸehir
    if (o === d) return 50;
    
    // Direkt key oluÅŸtur
    var key1 = o + '-' + d;
    var key2 = d + '-' + o;
    
    // Deniz modu iÃ§in
    if (mode === 'sea') {
        var seaKey1 = key1 + '-sea';
        var seaKey2 = key2 + '-sea';
        
        if (distanceDB[seaKey1]) {
            console.log('Sea distance found:', distanceDB[seaKey1], 'for', seaKey1);
            return distanceDB[seaKey1];
        }
        if (distanceDB[seaKey2]) {
            console.log('Sea distance found:', distanceDB[seaKey2], 'for', seaKey2);
            return distanceDB[seaKey2];
        }
        // Deniz rotasÄ± bulunamazsa land mesafesinin 1.5 katÄ±
        var landDist = distanceDB[key1] || distanceDB[key2];
        if (landDist) return Math.round(landDist * 1.5);
        return 3000; // Default sea
    }
    
    // Kara/Hava modu - direkt arama
    if (distanceDB[key1]) {
        console.log('Distance found:', distanceDB[key1], 'km for', key1);
        return distanceDB[key1];
    }
    if (distanceDB[key2]) {
        console.log('Distance found:', distanceDB[key2], 'km for', key2);
        return distanceDB[key2];
    }
    
    // KÄ±smi eÅŸleÅŸme dene
    for (var key in distanceDB) {
        if (key.includes('-sea')) continue; // Deniz rotalarÄ±nÄ± atla
        
        var parts = key.split('-');
        var city1 = parts[0];
        var city2 = parts[1];
        
        // Åehir isimlerinde kÄ±smi eÅŸleÅŸme
        var match1 = (city1.includes(o) || o.includes(city1)) && o.length >= 3;
        var match2 = (city2.includes(d) || d.includes(city2)) && d.length >= 3;
        var match1Rev = (city1.includes(d) || d.includes(city1)) && d.length >= 3;
        var match2Rev = (city2.includes(o) || o.includes(city2)) && o.length >= 3;
        
        if ((match1 && match2) || (match1Rev && match2Rev)) {
            console.log('Partial match:', distanceDB[key], 'km for', key);
            return distanceDB[key];
        }
    }
    
    // BulunamadÄ± - TÃ¼rkiye iÃ§i mi kontrol et
    var turkishCities = ['istanbul', 'anland', 'izmir', 'bursa', 'antalya', 'konya', 'adana', 'mersin', 'kayseri', 'trabzon', 'gaziantep', 'eskisehir', 'samsun', 'seali', 'sivas', 'erzurum', 'diyarbakir', 'malatya', 'van', 'elazig', 'hatay'];
    var oIsTurkish = turkishCities.indexOf(o) > -1;
    var dIsTurkish = turkishCities.indexOf(d) > -1;
    
    console.log('No exact match. Origin Turkish:', oIsTurkish, 'Dest Turkish:', dIsTurkish);
    
    if (oIsTurkish && dIsTurkish) {
        return 600; // TÃ¼rkiye iÃ§i ortalama
    } else if (oIsTurkish || dIsTurkish) {
        return 2000; // UluslararasÄ± ortalama
    }
    return 1500; // Bilinmeyen
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PAZAR VERÄ°TABANI - GÃ¼ncel Piyasa Verileri (Kaynak: Freightos, Drewry, IRU)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// Son GÃ¼ncelleme: AralÄ±k 2025
// Kaynaklar:
// - Drewry World Container Index (WCI)
// - Freightos Baltic Index (FBX)
// - IRU European Road Freight Benchmark
// - Xeneta Market Intelligence
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var marketDatabase = {
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DENÄ°Z TAÅIMACILIÄI - USD/Ton (TEU bazÄ±nda, ~18 ton)
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    sea: {
        // TÃ¼rkiye â†’ Avrupa (BatÄ± Aksea / Kuzey Avrupa)
        'istanbul-hamburg': { min: 65, avg: 85, max: 115, winning: 78, offers: 47, competitors: 23, popularity: 5, trend: 12 },
        'istanbul-rotterdam': { min: 60, avg: 82, max: 110, winning: 75, offers: 52, competitors: 25, popularity: 5, trend: 15 },
        'istanbul-antwerp': { min: 62, avg: 84, max: 112, winning: 77, offers: 38, competitors: 20, popularity: 4, trend: 8 },
        'istanbul-felixstowe': { min: 70, avg: 92, max: 125, winning: 85, offers: 28, competitors: 15, popularity: 4, trend: 5 },
        'istanbul-le havre': { min: 68, avg: 88, max: 118, winning: 82, offers: 22, competitors: 12, popularity: 3, trend: 3 },
        'istanbul-cenova': { min: 45, avg: 58, max: 78, winning: 52, offers: 35, competitors: 18, popularity: 4, trend: 10 },
        'istanbul-barcelona': { min: 42, avg: 55, max: 72, winning: 50, offers: 30, competitors: 16, popularity: 4, trend: 7 },
        'istanbul-pire': { min: 28, avg: 38, max: 52, winning: 35, offers: 45, competitors: 22, popularity: 5, trend: 18 },
        'istanbul-trieste': { min: 48, avg: 62, max: 82, winning: 58, offers: 25, competitors: 14, popularity: 3, trend: 5 },
        'istanbul-valencia': { min: 50, avg: 65, max: 85, winning: 60, offers: 20, competitors: 11, popularity: 3, trend: 4 },
        
        // Mersin Ã§Ä±kÄ±ÅŸlÄ± rotalar
        'mersin-hamburg': { min: 68, avg: 88, max: 118, winning: 82, offers: 35, competitors: 18, popularity: 4, trend: 10 },
        'mersin-rotterdam': { min: 65, avg: 85, max: 115, winning: 78, offers: 40, competitors: 20, popularity: 4, trend: 12 },
        'mersin-felixstowe': { min: 72, avg: 95, max: 128, winning: 88, offers: 22, competitors: 12, popularity: 3, trend: 6 },
        'mersin-cenova': { min: 48, avg: 62, max: 82, winning: 58, offers: 28, competitors: 15, popularity: 3, trend: 8 },
        'mersin-pire': { min: 25, avg: 35, max: 48, winning: 32, offers: 38, competitors: 19, popularity: 4, trend: 15 },
        
        // Ä°zmir Ã§Ä±kÄ±ÅŸlÄ± rotalar
        'izmir-hamburg': { min: 62, avg: 82, max: 108, winning: 75, offers: 32, competitors: 17, popularity: 4, trend: 9 },
        'izmir-rotterdam': { min: 58, avg: 78, max: 105, winning: 72, offers: 36, competitors: 19, popularity: 4, trend: 11 },
        'izmir-pire': { min: 22, avg: 32, max: 45, winning: 28, offers: 42, competitors: 21, popularity: 5, trend: 20 },
        'izmir-cenova': { min: 42, avg: 55, max: 72, winning: 50, offers: 25, competitors: 13, popularity: 3, trend: 6 },
        
        // Ä°skenderun Ã§Ä±kÄ±ÅŸlÄ± rotalar
        'iskenderun-hamburg': { min: 72, avg: 92, max: 122, winning: 85, offers: 18, competitors: 10, popularity: 2, trend: 4 },
        'iskenderun-rotterdam': { min: 70, avg: 90, max: 120, winning: 82, offers: 20, competitors: 11, popularity: 2, trend: 5 },
        
        // Uzak DoÄŸu rotalarÄ±
        'istanbul-sanghay': { min: 120, avg: 155, max: 195, winning: 142, offers: 28, competitors: 14, popularity: 3, trend: -5 },
        'istanbul-ningbo': { min: 118, avg: 152, max: 192, winning: 140, offers: 22, competitors: 12, popularity: 3, trend: -3 },
        'istanbul-shenzhen': { min: 125, avg: 160, max: 200, winning: 148, offers: 18, competitors: 10, popularity: 2, trend: -8 },
        'istanbul-singapur': { min: 95, avg: 125, max: 165, winning: 115, offers: 25, competitors: 13, popularity: 3, trend: 2 },
        'istanbul-busan': { min: 130, avg: 168, max: 210, winning: 155, offers: 15, competitors: 8, popularity: 2, trend: -2 },
        'mersin-sanghay': { min: 125, avg: 162, max: 205, winning: 150, offers: 20, competitors: 11, popularity: 2, trend: -6 },
        
        // Orta DoÄŸu rotalarÄ±
        'istanbul-dubai': { min: 55, avg: 72, max: 95, winning: 65, offers: 35, competitors: 18, popularity: 4, trend: 15 },
        'istanbul-cidde': { min: 48, avg: 62, max: 82, winning: 58, offers: 28, competitors: 14, popularity: 3, trend: 12 },
        'mersin-dubai': { min: 50, avg: 65, max: 85, winning: 60, offers: 30, competitors: 15, popularity: 4, trend: 18 },
        
        // Kuzey Afrika
        'istanbul-iskenderiye': { min: 35, avg: 48, max: 65, winning: 42, offers: 32, competitors: 16, popularity: 4, trend: 8 },
        'mersin-iskenderiye': { min: 32, avg: 45, max: 60, winning: 40, offers: 28, competitors: 14, popularity: 3, trend: 10 },
        
        // Amerika rotalarÄ±
        'istanbul-new york': { min: 145, avg: 185, max: 240, winning: 170, offers: 15, competitors: 8, popularity: 2, trend: 5 },
        'istanbul-houston': { min: 155, avg: 198, max: 255, winning: 182, offers: 12, competitors: 6, popularity: 2, trend: 3 }
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // KARA TAÅIMACILIÄI - USD/Ton
    // Kaynak: IRU/Upply Q4 2024, TÃ¼rkiye forwarder piyasasÄ± araÅŸtcomparisonsÄ±
    // TÃ¼rkiye iÃ§ hat: ~$0.03-0.04/ton-km (Avrupa'dan ucuz)
    // UluslararasÄ±: ~$0.04-0.05/ton-km
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    land: {
        // TÃ¼rkiye Ä°Ã§i (Mesafe Ã— $0.035/ton-km ortalama)
        'istanbul-anland': { min: 12, avg: 16, max: 22, winning: 14, offers: 85, competitors: 45, popularity: 5, trend: 5 },      // 450 km
        'istanbul-izmir': { min: 13, avg: 17, max: 24, winning: 15, offers: 72, competitors: 38, popularity: 5, trend: 8 },       // 480 km
        'istanbul-bursa': { min: 5, avg: 7, max: 10, winning: 6, offers: 95, competitors: 50, popularity: 5, trend: 3 },          // 150 km
        'istanbul-antalya': { min: 20, avg: 26, max: 35, winning: 23, offers: 48, competitors: 25, popularity: 4, trend: 10 },    // 700 km
        'istanbul-adana': { min: 28, avg: 36, max: 48, winning: 32, offers: 42, competitors: 22, popularity: 4, trend: 7 },       // 940 km
        'istanbul-mersin': { min: 28, avg: 38, max: 50, winning: 34, offers: 55, competitors: 28, popularity: 4, trend: 12 },     // 950 km
        'istanbul-gaziantep': { min: 35, avg: 45, max: 58, winning: 40, offers: 38, competitors: 20, popularity: 4, trend: 15 },  // 1150 km
        'istanbul-konya': { min: 18, avg: 24, max: 32, winning: 21, offers: 52, competitors: 27, popularity: 4, trend: 6 },       // 660 km
        'istanbul-kayseri': { min: 22, avg: 28, max: 38, winning: 25, offers: 45, competitors: 24, popularity: 4, trend: 8 },     // 770 km
        'istanbul-samsun': { min: 22, avg: 28, max: 38, winning: 25, offers: 35, competitors: 18, popularity: 3, trend: 5 },      // 750 km
        'istanbul-trabzon': { min: 32, avg: 42, max: 55, winning: 38, offers: 28, competitors: 15, popularity: 3, trend: 4 },     // 1100 km
        'istanbul-diyarbakir': { min: 42, avg: 52, max: 68, winning: 48, offers: 22, competitors: 12, popularity: 2, trend: 6 },  // 1400 km
        'istanbul-erzurum': { min: 38, avg: 48, max: 62, winning: 44, offers: 18, competitors: 10, popularity: 2, trend: 3 },     // 1300 km
        'anland-izmir': { min: 15, avg: 20, max: 28, winning: 18, offers: 55, competitors: 28, popularity: 4, trend: 5 },         // 580 km
        'anland-antalya': { min: 12, avg: 16, max: 22, winning: 14, offers: 48, competitors: 25, popularity: 4, trend: 7 },       // 480 km
        'anland-mersin': { min: 12, avg: 16, max: 22, winning: 14, offers: 42, competitors: 22, popularity: 4, trend: 8 },        // 490 km
        'izmir-antalya': { min: 10, avg: 14, max: 20, winning: 12, offers: 45, competitors: 24, popularity: 4, trend: 6 },        // 400 km
        'mersin-gaziantep': { min: 8, avg: 11, max: 16, winning: 10, offers: 52, competitors: 27, popularity: 4, trend: 10 },     // 300 km
        
        // TÃ¼rkiye â†’ Avrupa (UluslararasÄ±) - ~$0.04/ton-km
        'istanbul-sofya': { min: 18, avg: 24, max: 32, winning: 21, offers: 65, competitors: 32, popularity: 5, trend: 12 },      // 570 km
        'istanbul-bukres': { min: 22, avg: 28, max: 38, winning: 25, offers: 48, competitors: 24, popularity: 4, trend: 8 },      // 650 km
        'istanbul-belgrad': { min: 35, avg: 45, max: 58, winning: 40, offers: 42, competitors: 21, popularity: 4, trend: 10 },    // 1000 km
        'istanbul-budapes te': { min: 48, avg: 62, max: 82, winning: 56, offers: 35, competitors: 18, popularity: 4, trend: 7 },  // 1400 km
        'istanbul-viyana': { min: 58, avg: 75, max: 98, winning: 68, offers: 38, competitors: 19, popularity: 4, trend: 9 },      // 1700 km
        'istanbul-munih': { min: 75, avg: 98, max: 128, winning: 88, offers: 42, competitors: 21, popularity: 4, trend: 11 },     // 2200 km
        'istanbul-frankfurt': { min: 85, avg: 110, max: 145, winning: 100, offers: 35, competitors: 18, popularity: 4, trend: 8 },// 2400 km
        'istanbul-hamburg': { min: 95, avg: 125, max: 162, winning: 112, offers: 32, competitors: 16, popularity: 4, trend: 6 },  // 2700 km
        'istanbul-rotterdam': { min: 105, avg: 138, max: 180, winning: 125, offers: 28, competitors: 14, popularity: 3, trend: 5 },// 2900 km
        'istanbul-milano': { min: 68, avg: 88, max: 115, winning: 80, offers: 38, competitors: 19, popularity: 4, trend: 10 },    // 2000 km
        'istanbul-paris': { min: 98, avg: 128, max: 168, winning: 115, offers: 25, competitors: 13, popularity: 3, trend: 4 },    // 2800 km
        'istanbul-londra': { min: 115, avg: 150, max: 195, winning: 135, offers: 18, competitors: 9, popularity: 2, trend: 2 },   // 3200 km
        'istanbul-varÅŸova': { min: 62, avg: 80, max: 105, winning: 72, offers: 32, competitors: 16, popularity: 3, trend: 8 },    // 1800 km
        'istanbul-prag': { min: 58, avg: 75, max: 98, winning: 68, offers: 28, competitors: 14, popularity: 3, trend: 6 },        // 1700 km
        
        // DiÄŸer TR Ã§Ä±kÄ±ÅŸlÄ± uluslararasÄ±
        'izmir-munih': { min: 78, avg: 102, max: 132, winning: 92, offers: 25, competitors: 13, popularity: 3, trend: 7 },        // 2300 km
        'mersin-munih': { min: 88, avg: 115, max: 150, winning: 105, offers: 22, competitors: 11, popularity: 3, trend: 5 },      // 2600 km
        'anland-sofya': { min: 25, avg: 32, max: 42, winning: 29, offers: 35, competitors: 18, popularity: 3, trend: 8 },         // 750 km
        'bursa-munih': { min: 72, avg: 95, max: 125, winning: 85, offers: 28, competitors: 14, popularity: 3, trend: 9 },         // 2150 km
        
        // TÃ¼rkiye â†’ Orta DoÄŸu / KÃ¶rfez
        'istanbul-tahran': { min: 145, avg: 188, max: 245, winning: 175, offers: 15, competitors: 8, popularity: 2, trend: -5 },
        'istanbul-bagdat': { min: 165, avg: 215, max: 280, winning: 198, offers: 12, competitors: 6, popularity: 2, trend: -8 },
        'mersin-halep': { min: 85, avg: 110, max: 145, winning: 102, offers: 8, competitors: 4, popularity: 1, trend: -15 },
        'gaziantep-halep': { min: 45, avg: 58, max: 78, winning: 52, offers: 10, competitors: 5, popularity: 1, trend: -12 }
    },
    
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // HAVA TAÅIMACILIÄI - USD/Ton (Kaynak: Freightos FAX Index)
    // Global ortalama: $3-7/kg = $3,000-7,000/ton
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    air: {
        // Avrupa rotalarÄ±
        'istanbul-frankfurt': { min: 2200, avg: 2800, max: 3600, winning: 2600, offers: 35, competitors: 18, popularity: 5, trend: 8 },
        'istanbul-amsterdam': { min: 2400, avg: 3000, max: 3850, winning: 2800, offers: 28, competitors: 14, popularity: 4, trend: 6 },
        'istanbul-londra': { min: 2500, avg: 3200, max: 4100, winning: 2950, offers: 32, competitors: 16, popularity: 4, trend: 5 },
        'istanbul-paris': { min: 2450, avg: 3100, max: 3950, winning: 2850, offers: 25, competitors: 13, popularity: 4, trend: 4 },
        'istanbul-milano': { min: 2100, avg: 2650, max: 3400, winning: 2450, offers: 22, competitors: 11, popularity: 3, trend: 7 },
        'istanbul-munih': { min: 2150, avg: 2700, max: 3450, winning: 2500, offers: 20, competitors: 10, popularity: 3, trend: 5 },
        
        // Orta DoÄŸu
        'istanbul-dubai': { min: 2800, avg: 3500, max: 4500, winning: 3250, offers: 42, competitors: 21, popularity: 5, trend: 15 },
        'istanbul-doha': { min: 2900, avg: 3650, max: 4700, winning: 3400, offers: 28, competitors: 14, popularity: 4, trend: 12 },
        'istanbul-riyad': { min: 3000, avg: 3800, max: 4900, winning: 3500, offers: 22, competitors: 11, popularity: 3, trend: 10 },
        'istanbul-tel aviv': { min: 2200, avg: 2800, max: 3600, winning: 2600, offers: 18, competitors: 9, popularity: 3, trend: -5 },
        
        // Uzak DoÄŸu
        'istanbul-hong kong': { min: 3200, avg: 4000, max: 5200, winning: 3700, offers: 25, competitors: 13, popularity: 3, trend: 5 },
        'istanbul-sanghay': { min: 3400, avg: 4300, max: 5500, winning: 4000, offers: 22, competitors: 11, popularity: 3, trend: 3 },
        'istanbul-singapur': { min: 3100, avg: 3900, max: 5000, winning: 3600, offers: 20, competitors: 10, popularity: 3, trend: 6 },
        'istanbul-tokyo': { min: 3800, avg: 4800, max: 6200, winning: 4450, offers: 15, competitors: 8, popularity: 2, trend: 2 },
        'istanbul-seul': { min: 3600, avg: 4500, max: 5800, winning: 4200, offers: 12, competitors: 6, popularity: 2, trend: 4 },
        
        // Amerika
        'istanbul-new york': { min: 4200, avg: 5300, max: 6800, winning: 4900, offers: 25, competitors: 13, popularity: 3, trend: 8 },
        'istanbul-los angeles': { min: 4500, avg: 5700, max: 7300, winning: 5300, offers: 18, competitors: 9, popularity: 2, trend: 5 },
        'istanbul-chicago': { min: 4400, avg: 5500, max: 7100, winning: 5100, offers: 15, competitors: 8, popularity: 2, trend: 4 },
        'istanbul-miami': { min: 4300, avg: 5400, max: 6900, winning: 5000, offers: 12, competitors: 6, popularity: 2, trend: 6 },
        
        // Afrika
        'istanbul-johannesburg': { min: 3800, avg: 4800, max: 6200, winning: 4450, offers: 12, competitors: 6, popularity: 2, trend: 8 },
        'istanbul-kahire': { min: 2000, avg: 2500, max: 3200, winning: 2300, offers: 28, competitors: 14, popularity: 4, trend: 12 },
        'istanbul-lagos': { min: 4200, avg: 5300, max: 6800, winning: 4900, offers: 10, competitors: 5, popularity: 1, trend: 10 }
    }
};

// Sezon faktÃ¶rleri (aylar: 0-11)
var seasonFactors = {
    sea: {
        0: { factor: 0.95, name: 'Ã‡in Yeni YÄ±lÄ± Ã¶ncesi' },
        1: { factor: 0.85, name: 'ğŸŠ Ã‡in Yeni YÄ±lÄ± - DÃ¼ÅŸÃ¼k hacim' },
        2: { factor: 0.90, name: 'Yeni yÄ±l sonrasÄ± toparlanma' },
        3: { factor: 1.00, name: 'Normal dÃ¶nem' },
        4: { factor: 1.00, name: 'Normal dÃ¶nem' },
        5: { factor: 1.05, name: 'Yaz Ã¶ncesi artÄ±ÅŸ' },
        6: { factor: 1.10, name: 'â˜€ï¸ Yaz sezonu baÅŸlangÄ±cÄ±' },
        7: { factor: 1.15, name: 'ğŸ”¥ Summer season - High demand' },
        8: { factor: 1.20, name: 'ğŸ”¥ Peak season baÅŸlangÄ±cÄ±' },
        9: { factor: 1.25, name: 'ğŸ”¥ Q4 YoÄŸun sezon' },
        10: { factor: 1.30, name: 'ğŸ”¥ Black Friday / YÄ±lsonu' },
        11: { factor: 1.20, name: 'ğŸ„ YÄ±lsonu kapanÄ±ÅŸÄ±' }
    },
    land: {
        0: { factor: 0.90, name: 'KÄ±ÅŸ koÅŸullarÄ±' },
        1: { factor: 0.92, name: 'KÄ±ÅŸ koÅŸullarÄ±' },
        2: { factor: 0.98, name: 'Bahar baÅŸlangÄ±cÄ±' },
        3: { factor: 1.00, name: 'Normal dÃ¶nem' },
        4: { factor: 1.00, name: 'Normal dÃ¶nem' },
        5: { factor: 1.02, name: 'Yaz Ã¶ncesi' },
        6: { factor: 1.05, name: 'â˜€ï¸ Yaz sezonu' },
        7: { factor: 0.95, name: 'Holiday season - Low demand' },
        8: { factor: 1.00, name: 'Yaz sonu' },
        9: { factor: 1.08, name: 'ğŸ”¥ Q4 baÅŸlangÄ±cÄ±' },
        10: { factor: 1.12, name: 'ğŸ”¥ YoÄŸun dÃ¶nem' },
        11: { factor: 1.15, name: 'ğŸ„ YÄ±lsonu yoÄŸunluÄŸu' }
    },
    air: {
        0: { factor: 0.95, name: 'YÄ±lbaÅŸÄ± sonrasÄ±' },
        1: { factor: 0.90, name: 'DÃ¼ÅŸÃ¼k sezon' },
        2: { factor: 0.95, name: 'Bahar baÅŸlangÄ±cÄ±' },
        3: { factor: 1.00, name: 'Normal dÃ¶nem' },
        4: { factor: 1.00, name: 'Normal dÃ¶nem' },
        5: { factor: 1.05, name: 'E-ticaret artÄ±ÅŸÄ±' },
        6: { factor: 1.00, name: 'Normal dÃ¶nem' },
        7: { factor: 0.95, name: 'Yaz tatili' },
        8: { factor: 1.10, name: 'Back-to-school' },
        9: { factor: 1.15, name: 'ğŸ”¥ E-ticaret peak' },
        10: { factor: 1.25, name: 'ğŸ”¥ Black Friday / 11.11' },
        11: { factor: 1.30, name: 'ğŸ„ Holiday season' }
    }
};

// Piyasa verisi lookup fonksiyonu
function getMarketData(origin, dest, mode) {
    var o = normalizeCity(origin.split(',')[0].toLowerCase().trim());
    var d = normalizeCity(dest.split(',')[0].toLowerCase().trim());
    
    var db = marketDatabase[mode] || marketDatabase.land;
    
    // Direkt anahtar dene
    var key1 = o + '-' + d;
    var key2 = d + '-' + o;
    
    if (db[key1]) return { data: db[key1], key: key1, reversed: false };
    if (db[key2]) return { data: db[key2], key: key2, reversed: true };
    
    // KÄ±smi eÅŸleÅŸme dene
    for (var key in db) {
        var parts = key.split('-');
        if ((parts[0].includes(o) || o.includes(parts[0])) && 
            (parts[1].includes(d) || d.includes(parts[1]))) {
            return { data: db[key], key: key, reversed: false };
        }
        if ((parts[0].includes(d) || d.includes(parts[0])) && 
            (parts[1].includes(o) || o.includes(parts[1]))) {
            return { data: db[key], key: key, reversed: true };
        }
    }
    
    return null;
}

// Åehir ismi normalizasyonu
function normalizeCity(city) {
    return city
        .replace(/Ä°/gi, 'i').replace(/I/g, 'i').replace(/Ä±/g, 'i')
        .replace(/Ä/gi, 'g').replace(/ÄŸ/g, 'g')
        .replace(/Ãœ/gi, 'u').replace(/Ã¼/g, 'u')
        .replace(/Å/gi, 's').replace(/ÅŸ/g, 's')
        .replace(/Ã–/gi, 'o').replace(/Ã¶/g, 'o')
        .replace(/Ã‡/gi, 'c').replace(/Ã§/g, 'c')
        .replace(/shanghai/g, 'sanghay')
        .replace(/munich/g, 'munih')
        .replace(/vienna/g, 'viyana')
        .replace(/bucharest/g, 'bukres')
        .replace(/sofia/g, 'sofya')
        .replace(/budapest/g, 'budapes')
        .replace(/warsaw/g, 'varsova')
        .replace(/prague/g, 'prag')
        .replace(/london/g, 'londra')
        .replace(/cairo/g, 'kahire')
        .replace(/alexandria/g, 'iskenderiye')
        .replace(/jeddah/g, 'cidde')
        .replace(/tehran/g, 'tahran')
        .replace(/baghdad/g, 'bagdat')
        .replace(/aleppo/g, 'halep')
        .trim();
}

// Recalculate AI Market Intelligence - Maliyet hesabÄ± YOK, sadece piyasa verileri
function recalculateAIRate() {
    try {
        var mode = carrierMode || 'land';
        if (mode === 'all') mode = 'land';
        
        var originEl = document.getElementById('rateOrigin');
        var destEl = document.getElementById('rateDestination');
        
        if (!originEl || !destEl) {
            console.log('Form elements not found');
            return;
        }
        
        var origin = originEl.value || 'Ä°stanbul';
        var dest = destEl.value || 'Anland';
        
        console.log('AI Rate Calc - Mode:', mode, 'Origin:', origin, 'Dest:', dest);
        
        var distance = calculateDistance(origin, dest, mode);
        console.log('ğŸ“ Distance:', distance);
        
        // Rota bilgisini gÃ¼ncelle
        var modeLabel = mode === 'sea' ? 'Deniz' : mode === 'air' ? 'Hava' : 'Kara';
        var distanceUnit = mode === 'sea' ? 'sea mili' : 'km';
        var routeEl = document.getElementById('aiRouteDistance');
        if (routeEl) {
            routeEl.textContent = origin.split(',')[0] + ' â†’ ' + dest.split(',')[0] + ' | ' + distance.toLocaleString() + ' ' + distanceUnit + ' ' + modeLabel;
        }
    
    // VERÄ°TABANINDAN PÄ°YASA VERÄ°LERÄ°NÄ° Ã‡EK
    var marketResult = getMarketData(origin, dest, mode);
    var month = new Date().getMonth();
    var seasonData = seasonFactors[mode] ? seasonFactors[mode][month] : { factor: 1.0, name: 'Normal dÃ¶nem' };
    
    var marketLow, marketAvg, marketHigh, winningAvg, offerCount, competitors, popularity, trendPercent;
    var dataSource = 'database'; // veya 'estimated'
    
    if (marketResult && marketResult.data) {
        // VERÄ°TABANINDA BULUNDU - GerÃ§ek piyasa verileri
        var data = marketResult.data;
        
        // Sezon faktÃ¶rÃ¼ uygula
        marketLow = Math.round(data.min * seasonData.factor);
        marketAvg = Math.round(data.avg * seasonData.factor);
        marketHigh = Math.round(data.max * seasonData.factor);
        winningAvg = Math.round(data.winning * seasonData.factor);
        offerCount = data.offers;
        competitors = data.competitors;
        popularity = data.popularity;
        trendPercent = data.trend;
        
        console.log('Market data found:', marketResult.key, data);
    } else {
        // VERÄ°TABANINDA YOK - Mesafeye gÃ¶re tahmin
        dataSource = 'estimated';
        console.log('Warning: VeritabanÄ±nda bulunamadÄ±, tahmin yapÄ±lÄ±yor:', origin, '->', dest);
        
        // Mod ve mesafeye gÃ¶re base rate tahmini
        var basePriceEstimate;
        if (mode === 'sea') {
            basePriceEstimate = 50 + Math.round(distance * 0.012);
        } else if (mode === 'air') {
            basePriceEstimate = 2000 + Math.round(distance * 0.4);
        } else {
            basePriceEstimate = 20 + Math.round(distance * 0.045);
        }
        
        marketLow = Math.round(basePriceEstimate * 0.78 * seasonData.factor);
        marketAvg = Math.round(basePriceEstimate * seasonData.factor);
        marketHigh = Math.round(basePriceEstimate * 1.35 * seasonData.factor);
        winningAvg = Math.round(basePriceEstimate * 0.90 * seasonData.factor);
        offerCount = 5 + Math.floor(Math.random() * 10);
        competitors = 3 + Math.floor(Math.random() * 8);
        popularity = Math.min(3, Math.max(1, Math.round(offerCount / 6)));
        trendPercent = Math.floor(Math.random() * 20) - 5;
    }
    
    // CurrentlarÄ± sakla
    currentRateAI.marketLow = marketLow;
    currentRateAI.marketAvg = marketAvg;
    currentRateAI.marketHigh = marketHigh;
    currentRateAI.basePriceEstimate = marketAvg;
    currentRateAI.dataSource = dataSource;
    
    // UI GÃ¼ncellemeleri - Fiyat aralÄ±klarÄ±
    var lowEl = document.getElementById('marketRangeLow');
    var avgEl = document.getElementById('marketRangeAvg');
    var highEl = document.getElementById('marketRangeHigh');
    if (lowEl) lowEl.textContent = '$' + marketLow;
    if (avgEl) avgEl.textContent = '$' + marketAvg;
    if (highEl) highEl.textContent = '$' + marketHigh;
    
    // Trend analizi
    var trendText, trendClass;
    if (trendPercent > 5) {
        trendText = 'â†‘ %' + trendPercent + ' artÄ±ÅŸ';
        trendClass = 'trend-up';
    } else if (trendPercent < -5) {
        trendText = 'â†“ %' + Math.abs(trendPercent) + ' dÃ¼ÅŸÃ¼ÅŸ';
        trendClass = 'trend-down';
    } else {
        trendText = 'â†’ Stabil';
        trendClass = '';
    }
    
    // Piyasa verileri UI
    var offersEl = document.getElementById('aiMarketOffers');
    var rangeEl = document.getElementById('aiMarketRange');
    var trendEl = document.getElementById('aiDemandTrend');
    var seasonEl = document.getElementById('aiSeasonStatus');
    
    if (offersEl) offersEl.textContent = offerCount + ' quote' + (dataSource === 'estimated' ? ' (tahmini)' : '');
    if (rangeEl) rangeEl.textContent = '$' + marketLow + ' - $' + marketHigh + '/ton';
    if (trendEl) {
        trendEl.textContent = trendText;
        trendEl.className = 'intel-value ' + trendClass;
    }
    if (seasonEl) seasonEl.textContent = seasonData.name;
    
    // Rota istatistikleri
    var winPriceEl = document.getElementById('aiWinningPrice');
    var compCountEl = document.getElementById('aiCompetitorCount');
    var popularityEl = document.getElementById('aiRoutePopularity');
    var responseEl = document.getElementById('aiAvgResponseTime');
    
    if (winPriceEl) winPriceEl.textContent = '$' + winningAvg + '/ton';
    if (compCountEl) compCountEl.textContent = competitors;
    if (popularityEl) {
        popularityEl.textContent = 'â˜…'.repeat(popularity) + 'â˜†'.repeat(5 - popularity);
    }
    if (responseEl) responseEl.textContent = (1.5 + Math.random() * 2.5).toFixed(1) + ' saat';
    
    // User performansÄ± (demo veriler - gerÃ§ek sistemde kullanÄ±cÄ± veritabanÄ±ndan gelir)
    var userWinRate = 25 + Math.floor(Math.random() * 40);
    var userOffers = Math.floor(Math.random() * 20);
    var userWins = Math.round(userOffers * userWinRate / 100);
    
    var winRateEl = document.getElementById('perfWinRate');
    var winRateBarEl = document.getElementById('perfWinRateBar');
    var totalOffersEl = document.getElementById('perfTotalOffers');
    var wonJobsEl = document.getElementById('perfWonJobs');
    
    if (winRateEl) winRateEl.textContent = '%' + userWinRate;
    if (winRateBarEl) winRateBarEl.style.width = userWinRate + '%';
    if (totalOffersEl) totalOffersEl.textContent = userOffers;
    if (wonJobsEl) wonJobsEl.textContent = userWins;
    
    // AkÄ±llÄ± quoteler gÃ¼ncelle
    updateSmartSuggestions(origin, dest, mode, marketAvg, trendPercent);
    
    // Pozisyon gÃ¼ncelle
    updateMarketPosition();
    
    console.log('Success: AI Rate calculation completed');
    
    } catch (error) {
        console.error('Error: AI Rate calculation error:', error);
    }
}

// AkÄ±llÄ± quoteleri gÃ¼ncelle
function updateSmartSuggestions(origin, dest, mode, basePrice, demandChange) {
    var speedEl = document.getElementById('suggSpeed');
    var priceEl = document.getElementById('suggPrice');
    var routeEl = document.getElementById('suggRoute');
    var timingEl = document.getElementById('suggTiming');
    
    // HÄ±z quotesi
    var speedTips = [
        'HÄ±zlÄ± quote gÃ¶nderen firmalar %40 daha fazla kazanÄ±yor',
        'Ä°lk 3 quotes %60 daha yÃ¼ksek kazanma ÅŸansÄ±na sahip',
        'Respond within 2 hours - success rate increases 2x'
    ];
    if (speedEl) speedEl.textContent = speedTips[Math.floor(Math.random() * speedTips.length)];
    
    // Fiyat quotesi - girilen ratea gÃ¶re
    var userPrice = parseInt(document.getElementById('rateFinalPrice')?.value) || 0;
    if (priceEl) {
        if (userPrice <= 0) {
            priceEl.textContent = 'Fiyat girin - quotemizi gÃ¶relim';
        } else if (userPrice < basePrice * 0.85) {
            priceEl.textContent = 'Ã‡ok rekabetÃ§i! HÄ±zlÄ± kazanabilirsiniz';
        } else if (userPrice < basePrice * 1.05) {
            priceEl.textContent = 'âœ“ Ä°yi rate - kazanma ÅŸansÄ± yÃ¼ksek';
        } else if (userPrice < basePrice * 1.25) {
            priceEl.textContent = 'â–³ Ortalama Ã¼stÃ¼ - rekabet zor olabilir';
        } else {
            priceEl.textContent = 'âœ— Ã‡ok yÃ¼ksek - rateÄ± dÃ¼ÅŸÃ¼rmeyi dÃ¼ÅŸÃ¼nÃ¼n';
        }
    }
    
    // Benzer rota quotesi
    var similarRoutes = {
        'istanbul': 'Mersin-Hamburg, Ä°zmir-Rotterdam',
        'mersin': 'Ä°stanbul-Hamburg, Ä°skenderun-Cenova',
        'izmir': 'Ä°stanbul-Pire, Mersin-Milano'
    };
    var o = origin.split(',')[0].toLowerCase();
    if (routeEl) {
        routeEl.textContent = 'Benzer popÃ¼ler rota: ' + (similarRoutes[o] || 'Mersin-Hamburg');
    }
    
    // Zamanlama quotesi
    var days = ['Pazar', 'Pazartesi', 'SalÄ±', 'Ã‡arÅŸamba', 'PerÅŸembe', 'Cuma', 'Cumartesi'];
    var bestDay = days[1 + Math.floor(Math.random() * 4)]; // Pazartesi-PerÅŸembe arasÄ±
    var increase = 15 + Math.floor(Math.random() * 20);
    if (timingEl) {
        timingEl.textContent = 'Best day: ' + bestDay + ' (%' + increase + ' more demand)';
    }
}

// Update market position indicator and win probability
function updateMarketPosition() {
    var priceEl = document.getElementById('rateFinalPrice');
    var price = parseInt(priceEl ? priceEl.value : 0) || 0;
    
    var marketLow = currentRateAI.marketLow || 50;
    var marketAvg = currentRateAI.marketAvg || 100;
    var marketHigh = currentRateAI.marketHigh || 150;
    var basePrice = currentRateAI.basePriceEstimate || 100;
    
    // Piyasa Ã§ubuÄŸu pozisyonu
    var position = 50; // default orta
    if (price > 0) {
        position = ((price - marketLow) / (marketHigh - marketLow)) * 100;
        position = Math.min(Math.max(position, 5), 95);
    }
    
    var indicator = document.getElementById('marketIndicator');
    if (indicator) indicator.style.left = position + '%';
    
    // Kazanma olasÄ±lÄ±ÄŸÄ± hesapla
    var winProb = 0;
    var probClass = '';
    var probHint = '';
    
    if (price <= 0) {
        winProb = 0;
        probHint = 'Fiyat girin';
    } else if (price < marketLow) {
        winProb = 92;
        probClass = 'high';
        probHint = 'Ã‡ok rekabetÃ§i! HÄ±zlÄ± kazanabilirsiniz';
    } else if (price <= basePrice * 0.95) {
        winProb = 85 - Math.round((price - marketLow) / (basePrice * 0.95 - marketLow) * 15);
        probClass = 'high';
        probHint = 'âœ“ RekabetÃ§i rate - yÃ¼ksek kazanma ÅŸansÄ±';
    } else if (price <= basePrice * 1.10) {
        winProb = 70 - Math.round((price - basePrice * 0.95) / (basePrice * 0.15) * 20);
        probClass = 'high';
        probHint = 'âœ“ Ä°yi rate';
    } else if (price <= basePrice * 1.25) {
        winProb = 50 - Math.round((price - basePrice * 1.10) / (basePrice * 0.15) * 15);
        probClass = 'medium';
        probHint = 'â—‹ Ortalama seviyede';
    } else if (price <= marketHigh) {
        winProb = 35 - Math.round((price - basePrice * 1.25) / (marketHigh - basePrice * 1.25) * 20);
        probClass = 'medium';
        probHint = 'â–³ PiyasanÄ±n Ã¼stÃ¼nde - rekabet zor';
    } else {
        winProb = 12;
        probClass = 'low';
        probHint = 'âœ— Ã‡ok yÃ¼ksek - kazanma ÅŸansÄ± dÃ¼ÅŸÃ¼k';
    }
    
    winProb = Math.max(5, Math.min(95, winProb));
    
    // Kazanma olasÄ±lÄ±ÄŸÄ± UI
    var fillEl = document.getElementById('winProbFill');
    var percentEl = document.getElementById('winProbPercent');
    var hintEl = document.getElementById('winProbHint');
    
    if (fillEl) fillEl.style.width = winProb + '%';
    if (percentEl) {
        percentEl.textContent = '%' + winProb;
        percentEl.className = 'win-prob-value ' + probClass;
    }
    if (hintEl) hintEl.textContent = probHint;
    
    // Piyasa pozisyon text
    var positionText = '';
    if (price <= 0) {
        positionText = 'Fiyat girin';
    } else if (price < marketLow) {
        positionText = 'Warning: PiyasanÄ±n altÄ±nda - Ã§ok rekabetÃ§i';
    } else if (price < basePrice) {
        positionText = 'ğŸ’š RekabetÃ§i rate';
    } else if (price < basePrice * 1.15) {
        positionText = 'ğŸ’› Ortalama piyasa';
    } else if (price < marketHigh) {
        positionText = 'ğŸŸ  OrtalamanÄ±n Ã¼stÃ¼nde';
    } else {
        positionText = 'ğŸ”´ PiyasanÄ±n Ã§ok Ã¼stÃ¼nde';
    }
    
    var posTextEl = document.getElementById('marketPositionText');
    if (posTextEl) posTextEl.textContent = positionText;
    
    // Fiyat quotesini de gÃ¼ncelle
    var suggPriceEl = document.getElementById('suggPrice');
    if (suggPriceEl) {
        if (price <= 0) {
            suggPriceEl.textContent = 'Fiyat girin - quotemizi gÃ¶relim';
        } else if (price < basePrice * 0.85) {
            suggPriceEl.textContent = 'Ã‡ok rekabetÃ§i! HÄ±zlÄ± kazanabilirsiniz';
        } else if (price < basePrice * 1.05) {
            suggPriceEl.textContent = 'âœ“ Ä°yi rate - kazanma ÅŸansÄ± yÃ¼ksek';
        } else if (price < basePrice * 1.25) {
            suggPriceEl.textContent = 'â–³ Ortalama Ã¼stÃ¼ - rekabet zor olabilir';
        } else {
            suggPriceEl.textContent = 'âœ— Ã‡ok yÃ¼ksek - rateÄ± dÃ¼ÅŸÃ¼rmeyi dÃ¼ÅŸÃ¼nÃ¼n';
        }
    }
}

// Apply AI suggested rate - artÄ±k kullanÄ±lmÄ±yor ama buton iÃ§in kalabilir
function applyAISuggestedRate() {
    // Piyasa ortalamasÄ±nÄ± Ã¶ner
    var avgPrice = currentRateAI.basePriceEstimate || 100;
    var priceEl = document.getElementById('rateFinalPrice');
    if (priceEl) priceEl.value = avgPrice;
    updateMarketPosition();
    showNotification('Quote: Piyasa ortalamasÄ± uygulandÄ±: $' + avgPrice + '/ton', 'success');
}

// Save carrier rate
function saveCarrierRate() {
    var origin = document.getElementById('rateOrigin').value;
    var dest = document.getElementById('rateDestination').value;
    var finalPrice = document.getElementById('rateFinalPrice').value;
    var notes = document.getElementById('rateNotes').value || '';
    
    if (!origin || !dest || !finalPrice) {
        showNotification('Warning: LÃ¼tfen kalkÄ±ÅŸ, varÄ±ÅŸ ve rate bilgilerini girin!', 'error');
        return;
    }
    
    // carrierMode 'all' ise varsayÄ±lan olarak 'land' kullan
    var mode = carrierMode;
    if (!mode || mode === 'all') {
        mode = 'land';
    }
    
    var newRate = {
        id: mode.toUpperCase().charAt(0) + 'R-' + Date.now(),
        carrier: currentUser || 'Anonim User',
        origin: origin,
        destination: dest,
        pricePerTon: parseInt(finalPrice),
        notes: notes,
        validUntil: new Date(Date.now() + 30*24*60*60*1000).toISOString().split('T')[0],
        createdAt: new Date().toISOString().split('T')[0]
    };
    
    // VeritabanÄ±na ekle
    if (!carrierRatesDB[mode]) {
        carrierRatesDB[mode] = [];
    }
    carrierRatesDB[mode].push(newRate);
    
    closeAddRateModal();
    renderCarrierRates();
    showNotification('Success: Price saved: ' + origin + ' â†’ ' + dest + ' = $' + finalPrice + '/ton', 'success');
}

// Edit rate
function editRate(rateId) {
    showNotification('DÃ¼zenleme Ã¶zelliÄŸi yakÄ±nda!', 'info');
}

// Delete rate
function deleteRate(rateId) {
    if (confirm('Are you sure you want to delete this rate?')) {
        carrierRatesDB[carrierMode] = carrierRatesDB[carrierMode].filter(function(r) {
            return r.id !== rateId;
        });
        renderCarrierRates();
        showNotification(' Fiyat silindi', 'success');
    }
}

// Sample incoming requests for forwarders
var incomingRequests = [
    { id: 'RQ-2024-001', date: '2024-01-15', origin: 'Istanbul, Turkey', dest: 'Hamburg, Germany', freight: 'Sea', weight: '2500 kg', volume: '12 mÂ³', cargo: 'General', status: 'pending', client: 'ABC Trading Co.' },
    { id: 'RQ-2024-002', date: '2024-01-15', origin: 'Shanghai, China', dest: 'Los Angeles, USA', freight: 'Air', weight: '500 kg', volume: '3 mÂ³', cargo: 'Fragile', status: 'pending', client: 'XYZ Electronics' },
    { id: 'RQ-2024-003', date: '2024-01-14', origin: 'Rotterdam, Netherlands', dest: 'Dubai, UAE', freight: 'Sea', weight: '15000 kg', volume: '45 mÂ³', cargo: 'General', status: 'quoted', client: 'Global Imports Ltd.' },
    { id: 'RQ-2024-004', date: '2024-01-14', origin: 'Mumbai, India', dest: 'London, UK', freight: 'Air', weight: '200 kg', volume: '1.5 mÂ³', cargo: 'Perishable', status: 'pending', client: 'Fresh Foods Inc.' },
    { id: 'RQ-2024-005', date: '2024-01-13', origin: 'Tokyo, Japan', dest: 'New York, USA', freight: 'Air', weight: '1000 kg', volume: '5 mÂ³', cargo: 'Fragile', status: 'accepted', client: 'Tech Solutions' }
];

// Landing page'e git
function goToLanding() {
    hideAllPages();
    document.getElementById('landingPage').classList.remove('hidden');
}

// Landing'den login'e
function showLoginFromLanding() {
    hideAllPages();
    document.getElementById('homePage').classList.remove('hidden');
}

// "How It Works" / "NasÄ±l Ã‡alÄ±ÅŸÄ±r?" modal
function showHowItWorks() {
    var lang = currentLanguage || 'tr';
    
    var content = {
        tr: {
            title: 'AÄŸ NasÄ±l Ã‡alÄ±ÅŸÄ±r?',
            subtitle: 'DoÄŸru baÄŸlantÄ± iÃ§in tasarlandÄ±.',
            steps: [
                {
                    icon: 'ğŸ“',
                    number: '01',
                    title: 'BaÅŸvuru',
                    desc: 'Forwarder veya yÃ¼k sahibi olarak baÅŸvurunuzu gÃ¶nderin. BaÅŸvurular incelenir. EriÅŸim otomatik deÄŸildir.',
                    highlight: null
                },
                {
                    icon: 'âœ…',
                    number: '02',
                    title: 'DoÄŸrulama',
                    desc: 'Åirket belgeleri incelenir. Profileler doÄŸrulanÄ±r. AÄŸ kalitesi korunur.',
                    highlight: 'Her baÅŸvuru onaylanmaz.'
                },
                {
                    icon: 'ğŸ”—',
                    number: '03',
                    title: 'AÄŸ EriÅŸimi',
                    desc: 'Onaylanan kullanÄ±cÄ±lar doÄŸrulanmÄ±ÅŸ aÄŸa eriÅŸim saÄŸlar. GÃ¶rÃ¼nÃ¼rlÃ¼k hacme deÄŸil, uygunluÄŸa baÄŸlÄ±dÄ±r.',
                    highlight: null
                },
                {
                    icon: 'ğŸ¯',
                    number: '04',
                    title: 'Nitelikli EÅŸleÅŸtirme',
                    desc: 'EÅŸleÅŸtirme, ticaret hatlarÄ± ve yÃ¼k profillerine gÃ¶re yapÄ±lÄ±r. TanÄ±ÅŸtÄ±rmalar kontrollÃ¼ ve kasÄ±tlÄ±dÄ±r.',
                    highlight: 'Daha fazla eÅŸleÅŸme deÄŸil, doÄŸru eÅŸleÅŸme.'
                }
            ],
            disclaimer: 'Bu bir marketplace veya fiyat karÅŸÄ±laÅŸtÄ±rma platformu deÄŸildir. AÄŸ, halka aÃ§Ä±k ihaleler veya fiyat rekabeti yerine nitelikli tanÄ±ÅŸtÄ±rmalarÄ± kolaylaÅŸtÄ±rÄ±r.',
            cta: 'AÄŸa KatÄ±l'
        },
        en: {
            title: 'How the Network Works',
            subtitle: 'Designed for the right connection.',
            steps: [
                {
                    icon: 'ğŸ“',
                    number: '01',
                    title: 'Application',
                    desc: 'Apply as a forwarder or cargo owner. Applications are reviewed. Access is not automatic.',
                    highlight: null
                },
                {
                    icon: 'âœ…',
                    number: '02',
                    title: 'Verification',
                    desc: 'Company documents are reviewed. Profiles are validated. Network quality is protected.',
                    highlight: 'Not every application is approved.'
                },
                {
                    icon: 'ğŸ”—',
                    number: '03',
                    title: 'Network Access',
                    desc: 'Approved users gain access to the verified network. Visibility depends on relevance, not volume.',
                    highlight: null
                },
                {
                    icon: 'ğŸ¯',
                    number: '04',
                    title: 'Qualified Matching',
                    desc: 'Matching is based on trade lanes and cargo profiles. Introductions are controlled and intentional.',
                    highlight: 'Right match over more matches.'
                }
            ],
            disclaimer: 'This is not a marketplace or price comparison platform. The network facilitates qualified introductions, not public tenders or price competition.',
            cta: 'Join the Network'
        }
    };
    
    var c = content[lang] || content.en;
    
    var modal = document.createElement('div');
    modal.className = 'how-it-works-modal';
    modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(15, 23, 42, 0.8); display: flex; align-items: center; justify-content: center; z-index: 1500; padding: 20px; backdrop-filter: blur(4px);';
    
    var stepsHtml = c.steps.map(function(step) {
        var highlightHtml = step.highlight ? '<div style="margin-top: 8px; padding: 8px 12px; background: rgba(30, 60, 114, 0.08); border-radius: 6px; border-left: 3px solid #1e3c72;"><span style="color: #1e3c72; font-size: 12px; font-weight: 600;">' + step.highlight + '</span></div>' : '';
        return '<div style="display: flex; gap: 16px; margin-bottom: 24px; padding-bottom: 24px; border-bottom: 1px solid #f1f5f9;">' +
            '<div style="flex-shrink: 0;">' +
            '<div style="width: 52px; height: 52px; background: linear-gradient(135deg, #1e3c72, #2a5298); border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 22px; box-shadow: 0 4px 12px rgba(30, 60, 114, 0.3);">' + step.icon + '</div>' +
            '<div style="text-align: center; margin-top: 6px; font-size: 11px; font-weight: 700; color: #94a3b8; letter-spacing: 1px;">' + step.number + '</div>' +
            '</div>' +
            '<div style="flex: 1;">' +
            '<h4 style="margin: 0 0 6px 0; color: #0f172a; font-size: 16px; font-weight: 600;">' + step.title + '</h4>' +
            '<p style="margin: 0; color: #64748b; font-size: 13px; line-height: 1.6;">' + step.desc + '</p>' +
            highlightHtml +
            '</div>' +
            '</div>';
    }).join('');
    
    modal.innerHTML = '<div style="background: white; border-radius: 24px; padding: 36px; max-width: 560px; width: 100%; box-shadow: 0 25px 60px rgba(0,0,0,0.3); max-height: 90vh; overflow-y: auto;">' +
        '<div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">' +
        '<div>' +
        '<h2 style="margin: 0; color: #0f172a; font-size: 24px; font-weight: 700;">' + c.title + '</h2>' +
        '<p style="margin: 6px 0 0 0; color: #64748b; font-size: 14px;">' + c.subtitle + '</p>' +
        '</div>' +
        '<button onclick="this.closest(\'.how-it-works-modal\').remove()" style="background: #f1f5f9; border: none; width: 36px; height: 36px; border-radius: 10px; font-size: 20px; cursor: pointer; color: #64748b; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background=\'#e2e8f0\'" onmouseout="this.style.background=\'#f1f5f9\'">&times;</button>' +
        '</div>' +
        '<div style="margin: 28px 0;">' + stepsHtml + '</div>' +
        '<div style="background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 12px; padding: 18px 20px; margin: 0 0 24px 0; border: 1px solid #fcd34d;">' +
        '<div style="display: flex; align-items: flex-start; gap: 12px;">' +
        '<span style="font-size: 18px;">âš ï¸</span>' +
        '<p style="margin: 0; color: #92400e; font-size: 13px; line-height: 1.65; font-weight: 500;">' + c.disclaimer + '</p>' +
        '</div>' +
        '</div>' +
        '<button onclick="this.closest(\'.how-it-works-modal\').remove(); showLoginFromLanding();" style="width: 100%; padding: 16px 24px; background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; border: none; border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px; box-shadow: 0 4px 14px rgba(30, 60, 114, 0.4); transition: all 0.3s;" onmouseover="this.style.transform=\'translateY(-2px)\'; this.style.boxShadow=\'0 6px 20px rgba(30, 60, 114, 0.5)\'" onmouseout="this.style.transform=\'translateY(0)\'; this.style.boxShadow=\'0 4px 14px rgba(30, 60, 114, 0.4)\'">' +
        c.cta + ' <span style="font-size: 18px;">â†’</span>' +
        '</button>' +
        '</div>';
    
    modal.addEventListener('click', function(e) {
        if (e.target === modal) modal.remove();
    });
    
    document.body.appendChild(modal);
}

// Services page'den dashboard'a (zaten login olmuÅŸ kullanÄ±cÄ±)
function selectService(type) {
    userType = type;
    hideAllPages();
    
    var name = currentUser || 'User';
    
    if (userType === 'client') {
        document.getElementById('clientDashboard').classList.remove('hidden');
        document.getElementById('clientNameDisplay').textContent = name;
        document.getElementById('clientWelcomeName').textContent = name;
        setupAutocomplete();
        
    } else if (userType === 'forwarder') {
        document.getElementById('forwarderDashboard').classList.remove('hidden');
        document.getElementById('forwarderNameDisplay').textContent = name;
        document.getElementById('forwarderWelcomeName').textContent = name;
        document.getElementById('forwarderTypeLabel').textContent = 'Freight Forwarder';
        document.getElementById('forwarderModeFilter').textContent = translations[currentLanguage]['dashboard.allModes'] || 'All Modes';
        carrierMode = 'all';
        // VarsayÄ±lan tab'Ä± gÃ¶ster
        showForwarderTab('home');
        
        // localStorage'dan yÃ¼klenen tarifeleri gÃ¶ster
        setTimeout(function() {
            updateMyRatesList();
            populateForwarderPorts();
            setDefaultDates();
        }, 100);
    } else if (userType === 'seaCarrier') {
        document.getElementById('carrierDashboard').classList.remove('hidden');
        document.getElementById('carrierNameDisplay').textContent = name;
        document.getElementById('carrierWelcomeName').textContent = name;
        document.getElementById('carrierTypeLabel').textContent = 'Sea Carrier';
        document.getElementById('carrierWelcomeBox').className = 'welcome-box sea-carrier-gradient';
        carrierMode = 'sea';
        renderCarrierRates();
        
        updateCarrierAIPanel();
    } else if (userType === 'airCarrier') {
        document.getElementById('carrierDashboard').classList.remove('hidden');
        document.getElementById('carrierNameDisplay').textContent = name;
        document.getElementById('carrierWelcomeName').textContent = name;
        document.getElementById('carrierTypeLabel').textContent = 'Air Carrier';
        document.getElementById('carrierWelcomeBox').className = 'welcome-box air-carrier-gradient';
        carrierMode = 'air';
        renderCarrierRates();
        
        updateCarrierAIPanel();
    } else if (userType === 'landCarrier') {
        document.getElementById('carrierDashboard').classList.remove('hidden');
        document.getElementById('carrierNameDisplay').textContent = name;
        document.getElementById('carrierWelcomeName').textContent = name;
        document.getElementById('carrierTypeLabel').textContent = 'Kara Carriersi';
        document.getElementById('carrierWelcomeBox').className = 'welcome-box land-carrier-gradient';
        carrierMode = 'land';
        renderCarrierRates();
        
        updateCarrierAIPanel();
    }
    // Note: Insurance, Customs, Warehouse, Packaging dashboards removed for MVP
}

function goHome() {
    hideAllPages();
    document.getElementById('homePage').classList.remove('hidden');
}

// Received Quotes sayfasÄ±ndan mÃ¼ÅŸteri dashboard'una dÃ¶n
function goBackToClientDashboard() {
    hideAllPages();
    document.getElementById('clientDashboard').classList.remove('hidden');
    showClientTab('newQuote');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// MÃœÅTERÄ° SEKMELERÄ° VE BÄ°LDÄ°RÄ°M FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function showClientTab(tab) {
    console.log('showClientTab:', tab);
    
    // Update nav menu
    var menuItems = document.querySelectorAll('#clientDashboard .nav-menu-item');
    menuItems.forEach(function(item) {
        item.classList.remove('active');
        var itemTab = item.getAttribute('data-tab');
        if (itemTab === tab || (tab === 'newQuote' && (itemTab === 'newQuote' || itemTab === 'home'))) {
            item.classList.add('active');
        }
    });
    
    // Hide all contents
    var quoteBox = document.querySelector('#clientDashboard .quote-box');
    var aiToolsBar = document.querySelector('#clientDashboard .ai-tools-bar');
    
    var tabContents = document.querySelectorAll('.client-tab-content');
    tabContents.forEach(function(content) {
        content.style.cssText = 'display: none !important;';
    });
    
    // Show selected tab
    if (tab === 'newQuote') {
        if (quoteBox) quoteBox.style.cssText = 'display: block !important;';
        if (aiToolsBar) aiToolsBar.style.display = 'flex';
    } else {
        if (quoteBox) quoteBox.style.cssText = 'display: none !important;';
        if (aiToolsBar) aiToolsBar.style.display = 'none';
        
        var tabMap = {
            'myRequests': 'clientMyRequestsTab',
            'myQuotes': 'clientMyQuotesTab',
            'messages': 'clientMessagesTab',
            'shipments': 'clientShipmentsTab',
            'documents': 'clientDocumentsTab',
            'profile': 'clientProfileTab'
        };
        
        var tabEl = document.getElementById(tabMap[tab]);
        if (tabEl) {
            tabEl.style.cssText = 'display: block !important;';
            console.log('Showing client tab:', tabMap[tab]);
        }
        
        // Tab-specific operations
        if (tab === 'myQuotes' && typeof renderClientQuotes === 'function') {
            renderClientQuotes();
        }
        if (tab === 'myRequests' && typeof renderClientRequests === 'function') {
            renderClientRequests();
        }
        if (tab === 'profile' && typeof loadClientProfile === 'function') {
            loadClientProfile();
        }
        // Messages tab - check for accepted quotes
        if (tab === 'messages') {
            updateMessagesTabState();
        }
        // Shipments tab - load latest data from forwarder
        if (tab === 'shipments' && typeof loadCargoOwnerShipments === 'function') {
            loadCargoOwnerShipments();
        }
    }
    
    // Close notification dropdown
    var notifDropdown = document.getElementById('notificationDropdown');
    if (notifDropdown) notifDropdown.classList.add('hidden');
}

// Check for accepted quotes and update Messages tab state
function updateMessagesTabState() {
    var hasAcceptedQuotes = checkForAcceptedQuotes();
    var emptyState = document.getElementById('messagesEmptyState');
    var activeState = document.getElementById('messagesActiveState');
    
    if (hasAcceptedQuotes) {
        if (emptyState) emptyState.style.display = 'none';
        if (activeState) activeState.style.display = 'flex';
        populateConversationsFromAccepted();
    } else {
        if (emptyState) emptyState.style.display = 'block';
        if (activeState) activeState.style.display = 'none';
    }
}

// Check if there are any accepted quotes - SUPABASE VERSION
async function checkForAcceptedQuotes() {
    // Ã–nce quotesDB'den kontrol et (zaten Supabase'den yÃ¼klendi)
    if (quotesDB && quotesDB.length > 0) {
        var userEmail = currentUserEmail || localStorage.getItem('currentUserEmail');
        var accepted = quotesDB.filter(function(q) {
            return q.status === 'accepted' && (q.clientId === currentUser || q.clientId === userEmail);
        });
        return accepted.length > 0;
    }
    return false;
}

// Get accepted quotes from Supabase
async function getAcceptedQuotesFromSupabase() {
    if (!supabase) return [];
    
    var userEmail = currentUserEmail || localStorage.getItem('currentUserEmail');
    var userId = currentUserId || localStorage.getItem('currentUserId');
    
    try {
        var result = await supabase
            .from('quotes')
            .select('*')
            .eq('status', 'accepted')
            .or('client_id.eq.' + currentUser + ',client_id.eq.' + (userEmail || ''));
        
        if (result.error) {
            console.log('Accepted quotes load error:', result.error.message);
            return [];
        }
        
        return (result.data || []).map(function(q) {
            return {
                id: q.quote_id || q.id,
                requestId: q.request_id,
                forwarderName: q.forwarder_name,
                forwarderCompany: q.forwarder_company,
                route: q.origin + ' â†’ ' + q.destination,
                totalPrice: q.total_price,
                acceptedDate: q.updated_at || q.created_at,
                shipmentNo: 'GFN-' + (q.quote_id || q.id).substring(0, 8).toUpperCase()
            };
        });
    } catch(e) {
        console.log('Accepted quotes exception:', e.message);
        return [];
    }
}

// Populate conversations list from accepted quotes - SUPABASE VERSION
async function populateConversationsFromAccepted() {
    var conversationsList = document.getElementById('conversationsList');
    if (!conversationsList) return;
    
    var acceptedQuotes = await getAcceptedQuotesFromSupabase();
    
    if (acceptedQuotes.length === 0) {
        conversationsList.innerHTML = '<div style="padding: 20px; text-align: center; color: #666;">No accepted quotes yet</div>';
        return;
    }
    
    var html = '';
    acceptedQuotes.forEach(function(quote, index) {
        var isActive = index === 0 ? 'active' : '';
        var avatar = quote.forwarderName ? quote.forwarderName.substring(0, 2).toUpperCase() : 'FW';
        html += '<div class="conversation-item ' + isActive + '" onclick="selectAcceptedConversation(\'' + quote.id + '\')" data-quote-id="' + quote.id + '">' +
            '<div class="conv-avatar">' + avatar + '</div>' +
            '<div class="conv-info">' +
                '<h4>' + (quote.forwarderName || 'Forwarder') + '</h4>' +
                '<p>' + (quote.route || 'Shipment') + '</p>' +
            '</div>' +
            '<div class="conv-meta">' +
                '<span class="conv-time">' + (quote.acceptedDate || 'Recently') + '</span>' +
            '</div>' +
        '</div>';
    });
    
    conversationsList.innerHTML = html;
    
    // Select first conversation by default
    if (acceptedQuotes.length > 0) {
        selectAcceptedConversation(acceptedQuotes[0].id);
    }
}

// Select a conversation from accepted quotes - SUPABASE VERSION
async function selectAcceptedConversation(quoteId) {
    var acceptedQuotes = await getAcceptedQuotesFromSupabase();
    var quote = acceptedQuotes.find(function(p) { return p.id === quoteId; });
    
    if (!quote) return;
    
    // Update active state
    var items = document.querySelectorAll('#conversationsList .conversation-item');
    items.forEach(function(item) {
        item.classList.remove('active');
        if (item.getAttribute('data-quote-id') === quoteId) {
            item.classList.add('active');
        }
    });
    
    // Update chat header
    var avatar = document.getElementById('activeChatAvatar');
    var name = document.getElementById('activeChatName');
    var context = document.getElementById('activeChatContext');
    var viewBtn = document.getElementById('viewQuoteBtn');
    
    if (avatar) avatar.textContent = quote.forwarderName ? quote.forwarderName.substring(0, 2).toUpperCase() : 'FW';
    if (name) name.textContent = quote.forwarderName || 'Forwarder';
    if (context) context.textContent = 'Shipment: ' + (quote.route || 'In Progress');
    if (viewBtn) viewBtn.style.display = 'block';
    
    // Load conversation messages
    loadConversationMessages(quoteId);
}

// KÃ–K Ã‡Ã–ZÃœM: Mesajlar iÃ§in in-memory cache (Supabase messages tablosu hazÄ±r olunca oradan yÃ¼klenecek)
var conversationMessagesCache = {};

// Load messages for a specific conversation
async function loadConversationMessages(quoteId) {
    var chatMessages = document.getElementById('chatMessages');
    if (!chatMessages) return;
    
    // Ã–nce cache'e bak
    var messages = conversationMessagesCache[quoteId] || [];
    
    // Supabase'den yÃ¼klemeyi dene (messages tablosu varsa)
    if (supabase && messages.length === 0) {
        try {
            var result = await supabase
                .from('messages')
                .select('*')
                .eq('conversation_id', quoteId)
                .order('created_at', { ascending: true });
            
            if (result.data && result.data.length > 0) {
                messages = result.data.map(function(m) {
                    return {
                        from: m.sender_type === 'client' ? 'me' : 'forwarder',
                        text: m.message_text,
                        time: new Date(m.created_at).toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }),
                        avatar: m.sender_name ? m.sender_name.substring(0, 2).toUpperCase() : 'FW'
                    };
                });
                conversationMessagesCache[quoteId] = messages;
                console.log('âœ… Messages loaded from Supabase:', messages.length);
            }
        } catch(e) {
            // messages tablosu yoksa sessizce devam et
            console.log('Messages table not available yet');
        }
    }
    
    if (messages.length === 0) {
        // Show welcome message for new conversations
        chatMessages.innerHTML = '<div style="text-align: center; padding: 40px; color: #64748b;">' +
            '<div style="width: 60px; height: 60px; background: #f1f5f9; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px;">' +
                '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="2"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>' +
            '</div>' +
            '<p style="margin: 0 0 8px; font-weight: 500;">Start your conversation</p>' +
            '<p style="margin: 0; font-size: 13px;">Send a message to coordinate your shipment details with the forwarder.</p>' +
        '</div>';
    } else {
        var html = '';
        messages.forEach(function(msg) {
            var isSent = msg.from === 'me';
            html += '<div class="message ' + (isSent ? 'sent' : '') + '">' +
                '<div class="message-avatar">' + (isSent ? 'ME' : msg.avatar || 'FW') + '</div>' +
                '<div class="message-content">' +
                    '<div class="message-bubble"><p>' + msg.text + '</p></div>' +
                    '<span class="message-time">' + msg.time + '</span>' +
                '</div>' +
            '</div>';
        });
        chatMessages.innerHTML = html;
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
}

// KÃ–K Ã‡Ã–ZÃœM: MesajÄ± Supabase'e kaydet
async function saveMessageToSupabase(conversationId, messageText, senderType) {
    if (!supabase) return;
    
    try {
        var messageData = {
            conversation_id: conversationId,
            sender_id: currentUser || 'unknown',
            sender_type: senderType,
            sender_name: currentUser,
            message_text: messageText,
            message_type: 'text',
            created_at: new Date().toISOString()
        };
        
        var result = await supabase
            .from('messages')
            .insert([messageData]);
        
        if (result.error) {
            // Tablo yoksa sessizce devam et
            console.log('Message save: table not ready');
        } else {
            console.log('âœ… Message saved to Supabase');
        }
    } catch(e) {
        console.log('Message save error:', e.message);
    }
}

// Bildirim dropdown toggle
function toggleNotifications() {
    var dropdown = document.getElementById('notificationDropdown');
    if (dropdown) {
        dropdown.classList.toggle('hidden');
    }
}

// Mark all notifications as read
function markAllRead() {
    var unreadItems = document.querySelectorAll('.notif-item.unread');
    unreadItems.forEach(function(item) {
        item.classList.remove('unread');
    });
    var badge = document.getElementById('notifBadge');
    if (badge) badge.style.display = 'none';
    showRateNotification('All notifications marked as read', 'success');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MESAJLAÅMA FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function selectConversation(id) {
    var items = document.querySelectorAll('.conversation-item');
    items.forEach(function(item) {
        item.classList.remove('active');
    });
    
    // Find the clicked item by data-conv-id or by onclick parameter
    var clickedItem = document.querySelector('.conversation-item[data-conv-id="' + id + '"]');
    if (!clickedItem && event && event.currentTarget) {
        clickedItem = event.currentTarget;
    }
    
    if (clickedItem) {
        clickedItem.classList.add('active');
        clickedItem.classList.remove('unread');
        clickedItem.classList.remove('new-conversation');
        
        // Remove "NEW" badge
        var newBadge = clickedItem.querySelector('.new-badge');
        if (newBadge) newBadge.remove();
        
        // Unread badge'Ä± kaldÄ±r
        var badge = clickedItem.querySelector('.conv-unread-badge');
        if (badge) badge.remove();
    }
    
    // Mesaj iÃ§eriÄŸini gÃ¼ncelle
    updateChatContent(id);
}

// Sohbet iÃ§eriÄŸini gÃ¼ncelle
function updateChatContent(conversationId) {
    var chatHeader = document.querySelector('.chat-header');
    var chatMessages = document.getElementById('chatMessages');
    
    if (!chatMessages) return; // Chat UI yoksa Ã§Ä±k
    
    // First check dynamic conversations (from accepted introductions)
    if (activeConversations && activeConversations[conversationId]) {
        renderDynamicConversation(conversationId, chatHeader, chatMessages);
        return;
    }
    
    // Demo konuÅŸma verileri (static)
    var conversations = {
        'abc': {
            name: 'ABC Logistics',
            route: 'About Istanbul â†’ Hamburg quote',
            avatar: 'AL',
            messages: [
                { from: 'them', text: 'ğŸ‘‹ Merhaba! Ä°stanbul - Hamburg rotasÄ± iÃ§in quotenizi inceliyoruz.', time: '14:30' },
                { from: 'me', text: 'Merhaba, quote hakkÄ±nda sorularÄ±nÄ±z varsa yanÄ±tlamaktan memnuniyet duyarÄ±z.', time: '14:32' },
                { from: 'them', text: 'Thank you for your quote, container...yutu konusunda esneklik var mÄ±?', time: '14:32' }
            ]
        },
        'xyz': {
            name: 'XYZ Shipping',
            route: 'Ä°zmir â†’ Rotterdam quotesi hakkÄ±nda',
            avatar: 'XY',
            messages: [
                { from: 'them', text: 'Hello, we updated our rates...eni quotemizi inceleyebilir misiniz?', time: '12:15' },
                { from: 'me', text: 'TeÅŸekkÃ¼rler, inceliyorum.', time: '12:18' }
            ]
        },
        'global': {
            name: 'Global Lines',
            route: 'Mersin â†’ Felixstowe rotasÄ±',
            avatar: 'GL',
            messages: [
                { from: 'them', text: 'Information about our express service...mak ister misiniz?', time: 'DÃ¼n' },
                { from: 'me', text: 'Evet, transit sÃ¼releri nedir?', time: 'DÃ¼n' },
                { from: 'them', text: 'Express servisimizle 8-10 days iÃ§inde teslimat saÄŸlÄ±yoruz.', time: 'DÃ¼n' }
            ]
        },
        'customs': {
            name: 'GÃ¼ven Customs',
            route: 'Customs iÅŸlemleri hakkÄ±nda',
            avatar: 'GM',
            messages: [
                { from: 'them', text: 'EUR.1 document ready, waiting for your approval...kliyoruz.', time: '2 gÃ¼n' },
                { from: 'me', text: 'Belgeyi kontrol ediyorum.', time: '2 gÃ¼n' }
            ]
        }
    };
    
    var conv = conversations[conversationId];
    if (!conv) return;
    
    // Header gÃ¼ncelle
    if (chatHeader) {
        chatHeader.innerHTML = 
            '<div class="chat-user-info">' +
                '<div class="chat-avatar">' + conv.avatar + '</div>' +
                '<div class="chat-user-details">' +
                    '<h4>' + conv.name + '</h4>' +
                    '<span>' + conv.route + '</span>' +
                '</div>' +
            '</div>' +
            '<button class="btn-view-quote">View Quote</button>';
    }
    
    // MessagesÄ± gÃ¼ncelle
    if (chatMessages) {
        var html = '';
        conv.messages.forEach(function(msg) {
            if (msg.from === 'me') {
                html += '<div class="message sent">' +
                    '<div class="message-avatar">BN</div>' +
                    '<div class="message-content">' +
                        '<div class="message-bubble"><p>' + msg.text + '</p></div>' +
                        '<span class="message-time">' + msg.time + '</span>' +
                    '</div>' +
                '</div>';
            } else {
                html += '<div class="message">' +
                    '<div class="message-avatar">' + conv.avatar + '</div>' +
                    '<div class="message-content">' +
                        '<div class="message-bubble"><p>' + msg.text + '</p></div>' +
                        '<span class="message-time">' + msg.time + '</span>' +
                    '</div>' +
                '</div>';
            }
        });
        chatMessages.innerHTML = html;
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
}

// Render dynamic conversation from activeConversations
function renderDynamicConversation(conversationId, chatHeader, chatMessages) {
    var conv = activeConversations[conversationId];
    if (!conv) return;
    
    // Update header
    if (chatHeader) {
        chatHeader.innerHTML = 
            '<div class="chat-header-info">' +
                '<div class="conv-avatar" style="background: linear-gradient(135deg, #10b981, #059669);">' + conv.avatar + '</div>' +
                '<div>' +
                    '<h3>' + conv.name + '</h3>' +
                    '<span>' + conv.route + '</span>' +
                '</div>' +
            '</div>' +
            '<button class="btn-chat" onclick="viewQuoteDetails(\'' + conversationId + '\')">View Quote</button>';
    }
    
    // Render messages
    if (chatMessages) {
        var html = '';
        conv.messages.forEach(function(msg) {
            if (msg.type === 'system') {
                // System message (introduction accepted notification)
                html += '<div class="message system">' +
                    '<div class="system-message-content">' +
                        '<p>' + msg.text + '</p>' +
                        '<span class="message-time">' + msg.time + '</span>' +
                    '</div>' +
                '</div>';
            } else if (msg.from === 'me') {
                html += '<div class="message sent">' +
                    '<div class="message-content">' +
                        '<div class="message-bubble"><p>' + msg.text + '</p></div>' +
                        '<span class="message-time">' + msg.time + '</span>' +
                    '</div>' +
                    '<div class="message-avatar">BN</div>' +
                '</div>';
            } else {
                html += '<div class="message">' +
                    '<div class="message-avatar" style="background: linear-gradient(135deg, #1e3c72, #2a5298);">' + conv.avatar + '</div>' +
                    '<div class="message-content">' +
                        '<div class="message-bubble"><p>' + msg.text + '</p></div>' +
                        '<span class="message-time">' + msg.time + '</span>' +
                    '</div>' +
                '</div>';
            }
        });
        chatMessages.innerHTML = html;
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }
}

// View quote details for dynamic conversation
function viewQuoteDetails(conversationId) {
    var conv = activeConversations[conversationId];
    if (!conv) return;
    
    var t = translations[currentLanguage] || translations.en;
    
    alert((currentLanguage === 'tr' ? 'Quote Details' : 'Quote Details') + '\n\n' +
        (currentLanguage === 'tr' ? 'Forwarder: ' : 'Forwarder: ') + conv.name + '\n' +
        (currentLanguage === 'tr' ? 'Rota: ' : 'Route: ') + conv.route.replace('About ', '').replace(' quote', '') + '\n' +
        (currentLanguage === 'tr' ? 'Ticari KoÅŸullar: ' : 'Commercial Terms: ') + '$' + (conv.price ? conv.price.toLocaleString() : 'N/A') + '\n' +
        (currentLanguage === 'tr' ? 'Durum: ' : 'Status: ') + (currentLanguage === 'tr' ? 'TanÄ±ÅŸtÄ±rma Kabul Edildi' : 'Introduction Accepted') + '\n\n' +
        (currentLanguage === 'tr' ? 'Ä°letiÅŸim: ' : 'Contact: ') + (conv.contact ? conv.contact.email : 'N/A'));
}

function openChat(company) {
    showClientTab('messages');
    // Ä°lgili konuÅŸmayÄ± seÃ§
    var items = document.querySelectorAll('.conversation-item');
    items.forEach(function(item) {
        item.classList.remove('active');
        if (item.textContent.toLowerCase().includes(company.toLowerCase().substring(0, 3))) {
            item.classList.add('active');
        }
    });
}

function sendMessage() {
    var input = document.getElementById('chatInput');
    var message = input ? input.value.trim() : '';
    
    if (!message) return;
    
    var chatMessages = document.getElementById('chatMessages');
    if (!chatMessages) return;
    
    var currentTime = new Date().toLocaleTimeString('en-US', {hour: '2-digit', minute:'2-digit'});
    
    // Find active conversation from accepted quotes
    var activeConvItem = document.querySelector('#conversationsList .conversation-item.active');
    var quoteId = activeConvItem ? activeConvItem.getAttribute('data-quote-id') : null;
    
    // Get forwarder info from quotesDB (Supabase'den yÃ¼klendi)
    var activeQuote = quoteId ? quotesDB.find(function(q) { return q.id === quoteId && q.status === 'accepted'; }) : null;
    var avatar = activeQuote && activeQuote.forwarderName ? activeQuote.forwarderName.substring(0, 2).toUpperCase() : 'FW';
    
    // Add message to UI
    var newMessage = document.createElement('div');
    newMessage.className = 'message sent';
    newMessage.innerHTML = 
        '<div class="message-content">' +
            '<div class="message-bubble"><p>' + message + '</p></div>' +
            '<span class="message-time">' + currentTime + '</span>' +
        '</div>' +
        '<div class="message-avatar">ME</div>';
    
    chatMessages.appendChild(newMessage);
    chatMessages.scrollTop = chatMessages.scrollHeight;
    input.value = '';
    
    // KÃ–K Ã‡Ã–ZÃœM: MesajÄ± cache'e ve Supabase'e kaydet
    if (quoteId) {
        if (!conversationMessagesCache[quoteId]) conversationMessagesCache[quoteId] = [];
        conversationMessagesCache[quoteId].push({
            from: 'me',
            text: message,
            time: currentTime
        });
        
        // Supabase'e kaydet (messages tablosu varsa)
        saveMessageToSupabase(quoteId, message, 'client');
    }
    
    // Forwarder auto-reply (simulated)
    setTimeout(function() {
        var replies = [
            'Thank you for your message. I will review and get back to you shortly.',
            'Noted. Let me check this with our operations team and respond within the hour.',
            'Thank you for the information. We will update our quote accordingly.',
            'Understood. Is there anything else you would like to know about our services?'
        ];
        var replyText = replies[Math.floor(Math.random() * replies.length)];
        
        var autoReply = document.createElement('div');
        autoReply.className = 'message';
        autoReply.innerHTML = 
            '<div class="message-avatar" style="background: linear-gradient(135deg, #1e3c72, #2a5298);">' + avatar + '</div>' +
            '<div class="message-content">' +
                '<div class="message-bubble"><p>' + replyText + '</p></div>' +
                '<span class="message-time">' + currentTime + '</span>' +
            '</div>';
        chatMessages.appendChild(autoReply);
        chatMessages.scrollTop = chatMessages.scrollHeight;
        
        // KÃ–K Ã‡Ã–ZÃœM: Auto-reply'Ä± cache'e ve Supabase'e kaydet
        if (quoteId) {
            if (!conversationMessagesCache[quoteId]) conversationMessagesCache[quoteId] = [];
            conversationMessagesCache[quoteId].push({
                from: 'forwarder',
                text: replyText,
                time: currentTime,
                avatar: avatar
            });
            
            // Supabase'e kaydet
            saveMessageToSupabase(quoteId, replyText, 'forwarder');
        }
    }, 1500);
}

function handleChatKeypress(e) {
    if (e.key === 'Enter') {
        sendMessage();
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PROPOSAL ACCEPTANCE FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function viewOfferDetails(offerId) {
    // Navigate to Received Quotes tab
    showClientTab('myQuotes');
}

function acceptOffer(offerId) {
    // Eski demo sistemi - yeni handleAcceptQuote'a yÃ¶nlendir
    console.log('acceptOffer called for:', offerId);
    
    // EÄŸer gerÃ§ek quote ID ise handleAcceptQuote kullan
    if (offerId && offerId.startsWith('QT-')) {
        handleAcceptQuote(offerId);
        return;
    }
    
    // Demo offer iÃ§in - Received Quotes'a yÃ¶nlendir
    alert('Please use the Received Quotes tab to accept quotes.');
    showClientTab('myQuotes');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DOCUMENT FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function handleFileUpload(event) {
    var files = event.target.files;
    if (files.length > 0) {
        var fileNames = [];
        for (var i = 0; i < files.length; i++) {
            fileNames.push(files[i].name);
        }
        showRateNotification('Uploading ' + files.length + ' file(s): ' + fileNames.join(', '), 'success');
        
        setTimeout(function() {
            showRateNotification('Files uploaded successfully!', 'success');
        }, 2000);
    }
}

function viewDocument(docType) {
    var docNames = {
        'bl': 'Bill of Lading',
        'invoice': 'Commercial Invoice',
        'packing': 'Packing List',
        'origin': 'Certificate of Origin',
        'insurance': 'Insurance Certificate',
        'instructions': 'Shipping Instructions'
    };
    alert(docNames[docType] + ' viewing...\n\nIn the real application, PDF viewer will open.');
}

function downloadDocument(docType) {
    var docNames = {
        'bl': 'Bill_of_Lading',
        'invoice': 'Commercial_Invoice',
        'packing': 'Packing_List',
        'origin': 'Certificate_of_Origin',
        'insurance': 'Insurance_Certificate',
        'instructions': 'Shipping_Instructions'
    };
    showRateNotification('Downloading ' + docNames[docType] + '.pdf...', 'success');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AI ANALÄ°Z FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function refreshAIAnalysis() {
    var t = translations[currentLanguage] || translations.en;
    showRateNotification(currentLanguage === 'tr' ? 'AI referans verileri gÃ¼ncelleniyor...' : 'Refreshing AI reference data...', 'success');
    
    // Update reference ranges based on modal data
    var route = document.getElementById('quoteModalRoute');
    if (route) {
        var routeText = route.textContent || '';
        updateAIReferenceRanges(routeText);
    }
    
    setTimeout(function() {
        showRateNotification(currentLanguage === 'tr' ? 'âœ“ AI referans verileri gÃ¼ncellendi' : 'âœ“ AI reference data updated', 'success');
    }, 1500);
}

// Update AI Reference Ranges based on trade lane
function updateAIReferenceRanges(routeText) {
    // Reference ranges for common trade lanes (non-binding, anonymized historical data)
    var referenceData = {
        'istanbul-hamburg': { sea: [1200, 1600], multi: [1400, 1750] },
        'istanbul-rotterdam': { sea: [1150, 1550], multi: [1350, 1700] },
        'istanbul-felixstowe': { sea: [1300, 1700], multi: [1500, 1850] },
        'mersin-hamburg': { sea: [1100, 1500], multi: [1300, 1650] },
        'izmir-antwerp': { sea: [1180, 1580], multi: [1380, 1730] },
        'default': { sea: [1000, 1800], multi: [1200, 2000] }
    };
    
    // Find matching route
    var routeKey = 'default';
    var routeLower = routeText.toLowerCase();
    Object.keys(referenceData).forEach(function(key) {
        if (key !== 'default') {
            var parts = key.split('-');
            if (routeLower.includes(parts[0]) && routeLower.includes(parts[1])) {
                routeKey = key;
            }
        }
    });
    
    var data = referenceData[routeKey];
    
    // Update UI elements
    var seaRange = document.getElementById('aiSeaFreightRange');
    var multiRange = document.getElementById('aiMultimodalRange');
    
    if (seaRange) {
        seaRange.textContent = '$' + data.sea[0].toLocaleString() + ' â€“ $' + data.sea[1].toLocaleString();
    }
    if (multiRange) {
        multiRange.textContent = '$' + data.multi[0].toLocaleString() + ' â€“ $' + data.multi[1].toLocaleString();
    }
    
    // Update operational notes based on incoterm
    updateOperationalNotes();
}

// Update operational notes based on selected incoterm
function updateOperationalNotes() {
    var incotermSelect = document.querySelector('#quoteModal select[name="incoterm"], #quoteModal #modalIncoterm');
    var incoterm = incotermSelect ? incotermSelect.value : '';
    
    var ddpNote = document.getElementById('opNoteLastMile');
    if (ddpNote) {
        ddpNote.style.display = (incoterm === 'DDP' || incoterm === 'DAP') ? 'flex' : 'none';
    }
}

// Update consistency signals based on forwarder input
function updateConsistencySignals() {
    var transitInput = document.querySelector('#quoteModal input[name="transit"], #quoteModal #transitDays');
    var validityInput = document.querySelector('#quoteModal input[name="validity"], #quoteModal #validUntil');
    
    var checkTransit = document.getElementById('checkTransit');
    var checkValidity = document.getElementById('checkValidity');
    var checkScope = document.getElementById('checkScope');
    
    // Transit time check
    if (transitInput && transitInput.value && checkTransit) {
        var transit = parseInt(transitInput.value);
        var icon = checkTransit.querySelector('.check-icon');
        var text = checkTransit.querySelector('.check-text');
        
        if (transit >= 15 && transit <= 25) {
            icon.className = 'check-icon positive';
            icon.textContent = 'âœ“';
            text.textContent = currentLanguage === 'tr' ? 
                'Transit sÃ¼resi: Bu hat iÃ§in tipik aralÄ±kta' : 
                'Transit time: Aligns with typical range for this lane';
        } else if (transit < 15) {
            icon.className = 'check-icon warning';
            icon.textContent = '!';
            text.textContent = currentLanguage === 'tr' ? 
                'Transit sÃ¼resi: Tipik aralÄ±ÄŸÄ±n altÄ±nda - doÄŸrulayÄ±n' : 
                'Transit time: Below typical range - verify feasibility';
        } else {
            icon.className = 'check-icon warning';
            icon.textContent = '!';
            text.textContent = currentLanguage === 'tr' ? 
                'Transit sÃ¼resi: Tipik aralÄ±ÄŸÄ±n Ã¼stÃ¼nde' : 
                'Transit time: Above typical range for this lane';
        }
    }
    
    // Validity period check
    if (validityInput && validityInput.value && checkValidity) {
        var validDate = new Date(validityInput.value);
        var today = new Date();
        var diffDays = Math.ceil((validDate - today) / (1000 * 60 * 60 * 24));
        
        var icon = checkValidity.querySelector('.check-icon');
        var text = checkValidity.querySelector('.check-text');
        
        if (diffDays >= 7 && diffDays <= 30) {
            icon.className = 'check-icon positive';
            icon.textContent = 'âœ“';
            text.textContent = currentLanguage === 'tr' ? 
                'GeÃ§erlilik: Piyasa pratiÄŸiyle uyumlu' : 
                'Validity: Consistent with market practice';
        } else if (diffDays < 7) {
            icon.className = 'check-icon warning';
            icon.textContent = '!';
            text.textContent = currentLanguage === 'tr' ? 
                'GeÃ§erlilik: Tipik piyasa pratiÄŸinden kÄ±sa' : 
                'Validity: Shorter than typical market practice';
        } else {
            icon.className = 'check-icon positive';
            icon.textContent = 'âœ“';
            text.textContent = currentLanguage === 'tr' ? 
                'GeÃ§erlilik: Uzun vadeli (30+ gÃ¼n)' : 
                'Validity: Extended period (30+ days)';
        }
    }
}

function requestMissingDoc(docType) {
    var docNames = {
        'eur1': 'EUR.1 MenÅŸe Belgesi',
        'insurance': 'Insurance SertifikasÄ±',
        'phyto': 'Bitki Health Certificate'
    };
    showRateNotification('ğŸ“¨ ' + docNames[docType] + ' talebi gÃ¼mrÃ¼kÃ§Ã¼ye shipmentsldi!', 'success');
}

function showConsolidationOptions() {
    alert('Consolidation Options\n\n' +
        'Hamburg rotasÄ± iÃ§in aylÄ±k konsolidasyon:\n' +
        'â”œâ”€â”€ Her ayÄ±n 1. ve 15. gÃ¼nÃ¼ toplama\n' +
        'â”œâ”€â”€ 8-10 CBM minimum\n' +
        'â”œâ”€â”€ Konteyner baÅŸÄ± $525 tasarruf\n' +
        'â””â”€â”€ Transit +3 days\n\n' +
        'In the real application, a detailed modal will open.');
}

function showAnnualContracts() {
    alert('Annual Agreement Opportunities\n\n' +
        'ABC Logistics - Hacim Ä°ndirimi:\n' +
        'â”œâ”€â”€ 50+ container/yÄ±l: %5 indirim\n' +
        'â”œâ”€â”€ 100+ container/yÄ±l: %10 indirim\n' +
        'â”œâ”€â”€ Garanti rate (12 ay sabit)\n' +
        'â””â”€â”€ Ã–ncelikli yer aycomparison\n\n' +
        'GerÃ§ek uygulamada anlaÅŸma detaylarÄ± gÃ¶sterilir.');
}

function showAlternativeForwarders() {
    alert('Alternative Forwarder Suggestions\n\n' +
        '1. XYZ Shipping\n' +
        '   â””â”€â”€ Hamburg rotasÄ±, %8 daha ucuz\n\n' +
        '2. Global Lines\n' +
        '   â””â”€â”€ %12 daha hÄ±zlÄ± transit\n\n' +
        '3. Maritime Express\n' +
        '   â””â”€â”€ En yÃ¼ksek gÃ¼venilirlik (%99)\n\n' +
        'GerÃ§ek uygulamada karÅŸÄ±laÅŸtcomparison tablosu gÃ¶sterilir.');
}

function downloadForecastReport() {
    showRateNotification('Ocak 2025 Tahmin Raporu hazÄ±rlanÄ±yor...', 'success');
    setTimeout(function() {
        showRateNotification('â¬‡ï¸ Forecast_Report_Jan2025.pdf indiriliyor...', 'success');
    }, 1500);
}

function hideAllPages() {
    var landingPage = document.getElementById('landingPage');
    if (landingPage) landingPage.classList.add('hidden');
    
    document.getElementById('homePage').classList.add('hidden');
    document.getElementById('loginPage').classList.add('hidden');
    document.getElementById('signUpPage').classList.add('hidden');
    document.getElementById('clientDashboard').classList.add('hidden');
    document.getElementById('forwarderDashboard').classList.add('hidden');
    document.getElementById('quoteResults').classList.add('hidden');
    document.getElementById('trackingPage').classList.add('hidden');
    document.getElementById('myShipmentsPage').classList.add('hidden');
    
    // Carrier Dashboard
    var carrierDash = document.getElementById('carrierDashboard');
    if (carrierDash) carrierDash.classList.add('hidden');
}

function goToLogin(type) {
    // Rol kartÄ±na tÄ±klandÄ±ÄŸÄ±nda HER ZAMAN login sayfasÄ±nÄ± gÃ¶ster
    userType = type;
    hideAllPages();
    document.getElementById('loginPage').classList.remove('hidden');
    
    // LOGIN FORMU TEMÄ°ZLE
    document.getElementById('loginEmail').value = '';
    document.getElementById('loginPassword').value = '';
    
    var titles = {
        'client': 'Client',
        'forwarder': 'Freight Forwarder',
        'seaCarrier': 'Sea Carrier',
        'airCarrier': 'Air Carrier',
        'landCarrier': 'Kara Carriersi GiriÅŸi',
        'insurance': 'Insurance Companyi GiriÅŸi',
        'customs': 'Customs MÃ¼ÅŸaviri GiriÅŸi',
        'warehouse': 'Warehouse SaÄŸlayÄ±cÄ± GiriÅŸi',
        'packaging': 'Paketleme Companyi GiriÅŸi'
    };
    
    document.getElementById('loginTitle').textContent = titles[type] || 'GiriÅŸ';
}

function goToSignUp() {
    document.getElementById('loginPage').classList.add('hidden');
    document.getElementById('signUpPage').classList.remove('hidden');
    
    // FORM TEMÄ°ZLE - Ã¶nceki kullanÄ±cÄ±nÄ±n verileri gÃ¶rÃ¼nmesin
    document.getElementById('signUpName').value = '';
    document.getElementById('signUpEmail').value = '';
    document.getElementById('signUpPassword').value = '';
    document.getElementById('signUpConfirmPassword').value = '';
    
    // Checkbox'larÄ± da temizle
    var checkboxes = document.querySelectorAll('#signUpPage input[type="checkbox"]');
    checkboxes.forEach(function(cb) { cb.checked = false; });
    
    // Submit butonunu devre dÄ±ÅŸÄ± bÄ±rak
    var signUpBtn = document.getElementById('signUpButton');
    if (signUpBtn) {
        signUpBtn.disabled = true;
        signUpBtn.style.opacity = '0.5';
    }
    
    var signUpTitles = {
        'client': 'Cargo Owner Registration',
        'forwarder': 'Freight Forwarder Registration',
        'seaCarrier': 'Sea Carrier Registration',
        'airCarrier': 'Air Carrier Registration',
        'landCarrier': 'Land Carrier Registration',
        'insurance': 'Insurance Company Registration',
        'customs': 'Customs Broker Registration',
        'warehouse': 'Warehouse Provider Registration',
        'packaging': 'Packaging Company Registration'
    };
    document.getElementById('signUpTitle').textContent = signUpTitles[userType] || 'Registration';
    
    // Show extra fields for carriers and forwarders
    var showExtra = ['forwarder', 'seaCarrier', 'airCarrier', 'landCarrier'].includes(userType);
    if (showExtra) {
        document.getElementById('forwarderExtra').classList.remove('hidden');
    } else {
        document.getElementById('forwarderExtra').classList.add('hidden');
    }
}

function goToLoginFromSignUp() {
    document.getElementById('signUpPage').classList.add('hidden');
    document.getElementById('loginPage').classList.remove('hidden');
}

async function doLogin(e) {
    e.preventDefault();
    var email = document.getElementById('emailInput').value;
    var password = document.getElementById('passwordInput').value;
    
    // Loading state
    var loginBtn = e.target.querySelector('button[type="submit"]');
    var originalText = loginBtn ? loginBtn.textContent : 'Login';
    if (loginBtn) {
        loginBtn.disabled = true;
        loginBtn.textContent = 'Signing in...';
    }
    
    try {
        // Supabase Auth ile giriÅŸ yap
        if (supabase && supabase.auth) {
            var authResult = await supabase.auth.signInWithPassword({
                email: email,
                password: password
            });
            
            if (authResult.error) {
                console.log('Auth error:', authResult.error.message);
                alert('Login failed: ' + authResult.error.message);
                if (loginBtn) {
                    loginBtn.disabled = false;
                    loginBtn.textContent = originalText;
                }
                return false;
            } else if (authResult.data && authResult.data.user) {
                console.log('Supabase login successful');
                
                // KALICI Ã‡Ã–ZÃœM: Ã–NCEKÄ° KULLANICININ VERÄ°LERÄ°NÄ° TEMÄ°ZLE
                localStorage.clear();
                networkRequests = [];
                quotesDB = [];
                userContactsDB = {};
                
                // YENÄ° KULLANICININ UUID'sini kaydet
                currentUserId = authResult.data.user.id;
                currentUserEmail = authResult.data.user.email;
                localStorage.setItem('currentUserId', currentUserId);
                localStorage.setItem('currentUserEmail', currentUserEmail);
                console.log('User UUID:', currentUserId);
                
                // ğŸ”‘ KÃ–K Ã‡Ã–ZÃœM: TÃœM PROFÄ°LLERÄ° SUPABASE'DEN Ã‡EK VE CACHE'LE
                await loadAllProfilesFromSupabase();
                
                // ğŸ”‘ KÃ–K Ã‡Ã–ZÃœM: TÃœM QUOTES'LARI YÃœKLE
                await loadQuotesFromSupabase();
                
                // ğŸ”‘ KÃ–K Ã‡Ã–ZÃœM: TÃœM REQUESTS'LERÄ° YÃœKLE
                await loadNetworkFromSupabase();
                
                // ğŸ”‘ KÃ–K Ã‡Ã–ZÃœM: SÄ°GORTA VE GÃœMRÃœK ORANLARINI YÃœKLE
                await loadInsuranceRatesFromSupabase();
                await loadCustomsRatesFromSupabase();
                
                console.log('âœ… All data loaded from Supabase');
            }
        }
    } catch (authError) {
        console.log('Auth exception:', authError);
        alert('Login error. Please try again.');
        if (loginBtn) {
            loginBtn.disabled = false;
            loginBtn.textContent = originalText;
        }
        return false;
    }
    
    // Restore button
    if (loginBtn) {
        loginBtn.disabled = false;
        loginBtn.textContent = originalText;
    }
    
    var name = email.split('@')[0];
    name = name.charAt(0).toUpperCase() + name.slice(1);
    currentUser = name;
    currentUserType = userType; // Mevcut kullanÄ±cÄ± tipi
    currentUserEmail = email;
    
    // Session bilgilerini localStorage'a kaydet
    localStorage.setItem('currentUser', currentUser);
    localStorage.setItem('currentUserType', currentUserType);
    localStorage.setItem('userEmail', email);
    
    console.log('GiriÅŸ yapÄ±ldÄ±:', currentUser, 'userType:', currentUserType);
    
    hideAllPages();
    
    // Landing page'den geldiyse services sayfasÄ±na yÃ¶nlendir
    if (!userType) {
        document.getElementById('homePage').classList.remove('hidden');
        document.getElementById('servicesUserName').textContent = name;
        return false;
    }
    
    if (userType === 'client') {
        document.getElementById('clientDashboard').classList.remove('hidden');
        
        // Profile varsa profildeki ismi, yoksa email'den tÃ¼retilen ismi gÃ¶ster
        var clientContact = getUserContact(name, 'client');
        var displayName = (clientContact && clientContact.contactPerson) ? clientContact.contactPerson : name;
        
        document.getElementById('clientNameDisplay').textContent = displayName;
        document.getElementById('clientWelcomeName').textContent = displayName;
        
        // Avatar initiallerini ayarla
        var initials = displayName.split(' ').map(function(n) { return n[0]; }).join('').toUpperCase().substring(0,2);
        var avatarEl = document.getElementById('clientAvatarInitial');
        if (avatarEl) avatarEl.textContent = initials || 'CL';
        
        setupAutocomplete();
        
        // Profilei yÃ¼kle
        loadClientProfile();
        
        // Supabase'den quoteleri yÃ¼kle ve gÃ¶ster
        loadQuotesForClient(currentUser).then(function() {
            renderClientQuotes();
        });
        
        // Setup realtime subscriptions for new quotes
        setupRealtimeSubscriptions();
        
        console.log('MÃ¼ÅŸteri olarak giriÅŸ yapÄ±ldÄ±. clientId:', currentUser, 'displayName:', displayName);
    } else if (userType === 'forwarder') {
        document.getElementById('forwarderDashboard').classList.remove('hidden');
        
        // Profile varsa profildeki ismi, yoksa email'den tÃ¼retilen ismi gÃ¶ster
        var forwarderContact = getUserContact(name, 'forwarder');
        var displayName = (forwarderContact && forwarderContact.contactPerson) ? forwarderContact.contactPerson : name;
        
        document.getElementById('forwarderNameDisplay').textContent = displayName;
        document.getElementById('forwarderWelcomeName').textContent = displayName;
        document.getElementById('forwarderTypeLabel').textContent = 'Freight Forwarder';
        document.getElementById('forwarderModeFilter').textContent = translations[currentLanguage]['dashboard.allModes'] || 'All Modes';
        
        // Avatar initiallerini ayarla
        var initials = displayName.split(' ').map(function(n) { return n[0]; }).join('').toUpperCase().substring(0,2);
        var avatarEl = document.getElementById('forwarderAvatarInitial');
        if (avatarEl) avatarEl.textContent = initials || 'FF';
        
        carrierMode = 'all';
        
        // Clear and reload submitted quotes for new user
        mySubmittedQuotes = {};
        loadSubmittedQuotes();
        
        // Supabase'den tÃ¼m talepleri yÃ¼kle (tÃ¼m cargo owner'lardan)
        loadAllRequestsForForwarder().then(function() {
            // VarsayÄ±lan tab'Ä± gÃ¶ster
            showForwarderTab('home');
        });
        
        // Setup realtime subscriptions for new requests
        setupRealtimeSubscriptions();
        
        // Profilei yÃ¼kle
        loadForwarderProfile();
        // VerdiÄŸi quoteleri yÃ¼kle
        renderForwarderQuotes();
        // Shipments badge'ini gÃ¼ncelle
        if (typeof loadForwarderShipments === 'function') loadForwarderShipments();
        console.log('Forwarder olarak giriÅŸ yapÄ±ldÄ±. forwarderId:', currentUser, 'displayName:', displayName);
    } else if (userType === 'seaCarrier') {
        document.getElementById('carrierDashboard').classList.remove('hidden');
        document.getElementById('carrierNameDisplay').textContent = name;
        document.getElementById('carrierWelcomeName').textContent = name;
        document.getElementById('carrierTypeLabel').textContent = 'Sea Carrier';
        document.getElementById('carrierWelcomeBox').className = 'welcome-box sea-carrier-gradient';
        carrierMode = 'sea';
        renderCarrierRates();
        
    } else if (userType === 'airCarrier') {
        document.getElementById('carrierDashboard').classList.remove('hidden');
        document.getElementById('carrierNameDisplay').textContent = name;
        document.getElementById('carrierWelcomeName').textContent = name;
        document.getElementById('carrierTypeLabel').textContent = 'Air Carrier';
        document.getElementById('carrierWelcomeBox').className = 'welcome-box air-carrier-gradient';
        carrierMode = 'air';
        renderCarrierRates();
        
    } else if (userType === 'landCarrier') {
        document.getElementById('carrierDashboard').classList.remove('hidden');
        document.getElementById('carrierNameDisplay').textContent = name;
        document.getElementById('carrierWelcomeName').textContent = name;
        document.getElementById('carrierTypeLabel').textContent = 'Kara Carriersi';
        document.getElementById('carrierWelcomeBox').className = 'welcome-box land-carrier-gradient';
        carrierMode = 'land';
        renderCarrierRates();
        
    }
    // Note: Insurance, Customs, Warehouse, Packaging removed for MVP
    
    return false;
}

async function doSignUp(e) {
    e.preventDefault();
    var name = document.getElementById('nameInput').value;
    var email = document.getElementById('signUpEmail') ? document.getElementById('signUpEmail').value : '';
    var pass = document.getElementById('signUpPassword').value;
    var confirm = document.getElementById('confirmPassword').value;
    
    if (pass !== confirm) {
        alert('Passwords do not match!');
        return false;
    }
    
    // YASAL ONAY KONTROLÃœ
    var termsAccepted = document.getElementById('termsAccept').checked;
    var disclaimerAccepted = document.getElementById('disclaimerAccept').checked;
    var kvkkAccepted = document.getElementById('kvkkAccept').checked;
    
    if (!termsAccepted || !disclaimerAccepted || !kvkkAccepted) {
        alert('âš ï¸ You must accept all required legal documents to continue.\n\nâœ“ Terms of Service\nâœ“ Disclaimer\nâœ“ Data Protection Notice');
        return false;
    }
    
    // Loading state
    var signUpBtn = e.target.querySelector('button[type="submit"]');
    var originalText = signUpBtn ? signUpBtn.textContent : 'Sign Up';
    if (signUpBtn) {
        signUpBtn.disabled = true;
        signUpBtn.textContent = 'Creating account...';
    }
    
    try {
        // Supabase Auth ile kayÄ±t ol
        if (supabase && supabase.auth && email) {
            var signupResult = await supabase.auth.signUp({
                email: email,
                password: pass,
                options: {
                    data: {
                        full_name: name,
                        user_type: userType
                    }
                }
            });
            
            if (signupResult.error) {
                console.log('Signup: Demo mode active');
            } else if (signupResult.data && signupResult.data.user) {
                console.log('Supabase signup successful');
                // KALICI Ã‡Ã–ZÃœM: Ã–NCEKÄ° KULLANICININ TÃœM VERÄ°LERÄ°NÄ° TEMÄ°ZLE
                localStorage.clear();
                networkRequests = [];
                quotesDB = [];
                userContactsDB = {};
                
                // YENÄ° KULLANICININ UUID'sini kaydet
                currentUserId = signupResult.data.user.id;
                currentUserEmail = signupResult.data.user.email;
                localStorage.setItem('currentUserId', currentUserId);
                localStorage.setItem('currentUserEmail', currentUserEmail);
                console.log('New user UUID:', currentUserId);
                
                // ğŸ”‘ KÃ–K Ã‡Ã–ZÃœM: TÃœM VERÄ°LERÄ° SUPABASE'DEN YÃœKLE
                await loadAllProfilesFromSupabase();
                await loadQuotesFromSupabase();
                await loadNetworkFromSupabase();
                await loadInsuranceRatesFromSupabase();
                await loadCustomsRatesFromSupabase();
                console.log('âœ… All data loaded for new user');
            }
        }
    } catch (authError) {
        console.log('Demo mode active');
    }
    
    // Restore button
    if (signUpBtn) {
        signUpBtn.disabled = false;
        signUpBtn.textContent = originalText;
    }
    
    // Yasal onaylarÄ± kaydet
    var legalConsent = {
        termsAccepted: true,
        disclaimerAccepted: true,
        kvkkAccepted: true,
        marketingAccepted: document.getElementById('marketingAccept').checked,
        acceptedAt: new Date().toISOString(),
        userAgent: navigator.userAgent
    };
    localStorage.setItem('legalConsent', JSON.stringify(legalConsent));
    console.log('Legal consent recorded:', legalConsent);
    
    currentUser = name;
    currentUserType = userType;
    currentUserEmail = email;
    
    // Session bilgilerini localStorage'a kaydet
    localStorage.setItem('currentUser', currentUser);
    localStorage.setItem('currentUserType', currentUserType);
    localStorage.setItem('currentUserEmail', currentUserEmail);
    
    hideAllPages();
    
    if (userType === 'client') {
        document.getElementById('clientDashboard').classList.remove('hidden');
        document.getElementById('clientNameDisplay').textContent = name;
        document.getElementById('clientWelcomeName').textContent = name;
        setupAutocomplete();
        
    } else if (userType === 'forwarder') {
        document.getElementById('forwarderDashboard').classList.remove('hidden');
        document.getElementById('forwarderNameDisplay').textContent = name;
        document.getElementById('forwarderWelcomeName').textContent = name;
        
        // Clear and reload submitted quotes for new user
        mySubmittedQuotes = {};
        loadSubmittedQuotes();
        
        showForwarderTab('home');
        
    }
    // Note: Insurance, Customs, Warehouse, Packaging removed for MVP
    
    // Save profile to Supabase
    var companyName = document.getElementById('companyName') ? document.getElementById('companyName').value : '';
    var profileData = {
        userId: name,
        userType: userType,
        companyName: companyName || name,
        contactPerson: name,
        email: email,
        phone: '',
        city: '',
        country: ''
    };
    
    saveProfileToSupabase(profileData).then(function(result) {
        console.log('Profile saved:', result);
    });
    
    return false;
}

async function doLogout() {
    try {
        // Supabase oturumunu kapat
        if (supabase && supabase.auth) {
            await supabase.auth.signOut();
            console.log('Supabase session closed');
        }
    } catch (error) {
        console.log('Logout completed');
    }
    
    // localStorage'daki session verilerini temizle
    localStorage.removeItem('currentUser');
    localStorage.removeItem('currentUserType');
    localStorage.removeItem('currentUserId'); // KALICI Ã‡Ã–ZÃœM: UUID temizle
    localStorage.removeItem('currentUserEmail');
    localStorage.removeItem('userEmail');
    localStorage.removeItem('supabaseSession');
    
    // Global deÄŸiÅŸkenleri temizle
    hideAllPages();
    currentUser = null;
    currentUserId = null; // KALICI Ã‡Ã–ZÃœM: UUID temizle
    currentUserEmail = null;
    userType = null;
    currentUserType = null;
    mySubmittedQuotes = {}; // Clear submitted quotes on logout
    
    // Landing page'e yÃ¶nlendir
    document.getElementById('landingPage').classList.remove('hidden');
    
    console.log('User logged out successfully');
}

async function submitQuote(e) {
    e.preventDefault();
    
    // Profile validation for cargo owner
    var clientContact = getUserContact(currentUser, 'client');
    if (!clientContact || !clientContact.email || !clientContact.companyName) {
        alert('Please complete your profile before creating a quote request.\n\nGo to Profile tab and fill in your Company Name, Contact Person, Email, and Phone.');
        showClientTab('profile');
        return false;
    }
    
    var freight = document.getElementById('freightType').value;
    var loadType = document.getElementById('loadType').value;
    var containerSize = document.getElementById('containerSize').value;
    var incoterm = document.getElementById('incoterm').value;
    var originCity = document.getElementById('originCity').value;
    var destCity = document.getElementById('destCity').value;
    var weight = document.getElementById('weight').value;
    var volume = document.getElementById('volume').value;
    var cargoCategory = document.getElementById('cargoCategory').value;
    var cargoType = document.getElementById('cargoType').value;
    
    hideAllPages();
    document.getElementById('quoteResults').classList.remove('hidden');
    
    // Get load type label
    var loadTypeLabel = '';
    var loadOpts = loadTypeOptions[freight] || [];
    loadOpts.forEach(function(opt) {
        if (opt.value === loadType) loadTypeLabel = opt.label;
    });
    
    document.getElementById('clientNameDisplay2').textContent = currentUser;
    
    // Yeni talebi oluÅŸtur
    var newRequestId = 'REQ-' + Date.now();
    
    // Profiledeki ismi al - already validated above
    var shipperName = clientContact.contactPerson || currentUser;
    var companyName = clientContact.companyName || (currentUser + ' Company');
    
    var newRequest = {
        id: newRequestId,
        shipper: shipperName,
        shipperCompany: companyName,
        clientId: currentUser || 'demo-client',
        origin: originCity,
        destination: destCity,
        freight: freight,
        loadType: loadType,
        containerType: containerSize || (freight === 'sea' ? '40HC' : 'standard'),
        weight: parseInt(weight) || 1000,
        volume: volume || '10',
        cargoCategory: cargoCategory,
        cargoType: cargoType || 'General Cargo',
        incoterm: incoterm,
        loadDate: new Date(Date.now() + 14*24*60*60*1000).toISOString().split('T')[0],
        targetDate: new Date(Date.now() + 14*24*60*60*1000).toISOString().split('T')[0],
        budget: '$2,000 - $4,000',
        status: 'open',
        quotes: [],
        createdAt: new Date().toISOString(),
        notes: 'Created via online request form'
    };
    
    // Supabase DAL ile kaydet (localStorage fallback dahil)
    try {
        var result = await saveRequestToSupabase(newRequest);
        console.log('Request saved:', result.source, newRequestId);
    } catch(e) {
        // Fallback: localStorage'a zaten kaydedildi
        console.log('Request saved to localStorage');
    }
    
    generateAIRecommendation(freight, weight, cargoCategory, incoterm, loadType);
    generateQuotes(freight, weight, loadType, containerSize);
    
    // AI Platform Analizi gÃ¼ncelle
    try {
        updateClientAIPanel(originCity, destCity, freight);
    } catch(e) {
        console.log('AI Panel update skipped');
    }
    
    return false;
}

function generateAIRecommendation(freight, weight, cargoCategory, incoterm, loadType) {
    var recommendations = [];
    
    // AÄŸÄ±rlÄ±k bazlÄ± quoteler
    if (freight === 'air' && parseInt(weight) > 500) {
        recommendations.push('500kg Ã¼zeri yÃ¼kler iÃ§in Deniz Yolu (LCL veya FCL) maliyette %60\'a kadar tasarruf saÄŸlayabilir. Transit 2-3 hafta uzar.');
    }
    if (freight === 'sea' && parseInt(weight) < 100) {
        recommendations.push('100kg altÄ± yÃ¼kler iÃ§in Hava Yolu daha hÄ±zlÄ± teslimat (2-5 days) ve rekabetÃ§i ratelar sunar.');
    }
    
    // YÃ¼k tipi quoteleri
    if (loadType === 'lcl' && parseInt(weight) > 12000) {
        recommendations.push('YÃ¼k hacminiz iÃ§in FCL (Dolu Konteyner) LCL\'den daha ekonomik olabilir. 20\' veya 40\' container dÃ¼ÅŸÃ¼nÃ¼n.');
    }
    if (loadType === 'ltl' && parseInt(weight) > 15000) {
        recommendations.push('Bu aÄŸÄ±rlÄ±k iÃ§in FTL (Dolu TIR) parsiyelden daha ekonomik olacaktÄ±r.');
    }
    
    // Kargo kategorisi quoteleri
    if (cargoCategory === 'perishable') {
        recommendations.push('SoÄŸuk zincir taÅŸÄ±macÄ±lÄ±ÄŸÄ± seÃ§ildi. Listelenen tÃ¼m forwarder\'lar soÄŸuk zincir sertifikalÄ±dÄ±r.');
    }
    if (cargoCategory === 'hazardous') {
        recommendations.push('Tehlikeli maddeler sertifikalÄ± taÅŸÄ±yÄ±cÄ± gerektirir. TÃ¼m forwarder\'lar IMDG/IATA DGR sertifikalÄ±dÄ±r.');
    }
    if (cargoCategory === 'oversized') {
        recommendations.push('Ã–zel ekipman ve izinler gerekebilir. Forwarder\'larÄ±mÄ±z proje kargosu Ã§Ã¶zÃ¼mleri sunacaktÄ±r.');
    }
    
    // Incoterm quoteleri
    if (incoterm === 'EXW') {
        recommendations.push('EXW seÃ§ildi - SatÄ±cÄ± lokasyonundan itibaren tÃ¼m sorumluluk sizde. Daha kolay ihracat iÃ§in FCA dÃ¼ÅŸÃ¼nebilirsiniz.');
    }
    if (incoterm === 'DDP') {
        recommendations.push('DDP tÃ¼m vergi ve gÃ¼mrÃ¼k dahil kapÄ±dan kapÄ±ya hizmet sunar - alÄ±cÄ±lar iÃ§in en pratik seÃ§enek.');
    }
    
    var defaultRec = 'Based on your shipment profile, 5 verified forwarders found. The featured option offers the best value for your route.';
    
    var aiRecEl = document.getElementById('aiRecommendation');
    if (aiRecEl) {
        aiRecEl.innerHTML = recommendations.length > 0 
            ? '<strong>AI Quotesi:</strong> ' + recommendations[0] + ' ' + defaultRec
            : '<strong>AI Quotesi:</strong> ' + defaultRec;
    }
}

function generateQuotes(freight, weight, loadType, containerSize) {
    var basePrice;
    
    // Calculate base price based on freight type and load type
    if (freight === 'sea') {
        if (loadType === 'fcl') {
            // FCL pricing based on container size
            var containerPrices = { '20gp': 1800, '40gp': 2800, '40hc': 3200, '45hc': 3800, '20rf': 3500, '40rf': 5500 };
            basePrice = containerPrices[containerSize] || 2500;
        } else {
            // LCL pricing per CBM
            basePrice = parseInt(weight) * 0.08 + 200;
        }
    } else if (freight === 'air') {
        if (loadType === 'express') {
            basePrice = parseInt(weight) * 5.5;
        } else if (loadType === 'charter') {
            basePrice = parseInt(weight) * 8;
        } else {
            basePrice = parseInt(weight) * 3.5;
        }
    } else {
        // Land freight
        if (loadType === 'ftl') {
            basePrice = 1500 + parseInt(weight) * 0.05;
        } else {
            basePrice = parseInt(weight) * 0.12 + 150;
        }
    }
    
    var forwarders = [
        { name: 'Global Express Logistics', rating: 4.9, reviews: 2847, factor: 0.95, transit: freight === 'air' ? '3-4 gÃ¼n' : freight === 'sea' ? '18-22 gÃ¼n' : '8-10 days', verified: true, fast: true, eco: false, best: true },
        { name: 'Ocean Star Shipping', rating: 4.8, reviews: 1923, factor: 1.0, transit: freight === 'air' ? '4-5 days' : freight === 'sea' ? '20-25 days' : '10-12 gÃ¼n', verified: true, fast: false, eco: true, best: false },
        { name: 'Swift Cargo International', rating: 4.7, reviews: 1456, factor: 1.08, transit: freight === 'air' ? '2-3 days' : freight === 'sea' ? '16-20 gÃ¼n' : '7-9 gÃ¼n', verified: true, fast: true, eco: false, best: false },
        { name: 'Pacific Trade Solutions', rating: 4.6, reviews: 987, factor: 0.92, transit: freight === 'air' ? '5-6 gÃ¼n' : freight === 'sea' ? '22-28 gÃ¼n' : '12-15 days', verified: true, fast: false, eco: true, best: false },
        { name: 'Euro Freight Partners', rating: 4.8, reviews: 2156, factor: 1.05, transit: freight === 'air' ? '3-5 days' : freight === 'sea' ? '19-24 gÃ¼n' : '9-11 gÃ¼n', verified: true, fast: false, eco: false, best: false }
    ];
    
    // FiyatlarÄ± hesapla ve sÄ±rala
    var quotesData = forwarders.map(function(f) {
        return {
            name: f.name,
            rating: f.rating,
            reviews: f.reviews,
            price: Math.round(basePrice * f.factor),
            transit: f.transit,
            transitDays: parseInt(f.transit.split('-')[0]),
            verified: f.verified,
            fast: f.fast,
            eco: f.eco,
            best: f.best
        };
    });
    
    // AI Panel gÃ¼ncelle
    updateAIPanelWithQuotes(quotesData);
    
    var html = '';
    quotesData.forEach(function(f) {
        html += '<div class="quote-card">';
        html += '<div class="quote-card-header">';
        html += '<div><div class="forwarder-name">' + f.name + '</div>';
        html += '<div class="forwarder-rating">â˜… ' + f.rating + ' <span class="forwarder-reviews">(' + f.reviews.toLocaleString() + ' reviews)</span></div></div>';
        html += '<div class="quote-price"><div class="price-amount">$' + f.price.toLocaleString() + '</div><div class="price-label">Toplam Fiyat</div></div>';
        html += '</div>';
        html += '<div class="quote-details">';
        html += '<div class="quote-detail"><strong>Transit Time</strong>' + f.transit + '</div>';
        html += '<div class="quote-detail"><strong>Insurance</strong>Dahil Edilebilir</div>';
        html += '<div class="quote-detail"><strong>Takip</strong>GerÃ§ek ZamanlÄ±</div>';
        html += '</div>';
        html += '<div class="quote-badges">';
        if (f.verified) html += '<span class="badge badge-verified">âœ“ Verified</span>';
        if (f.eco) html += '<span class="badge badge-eco">ğŸŒ¿ Ã‡evre Dostu</span>';
        html += '</div>';
        html += '<button class="btn-select-forwarder" onclick="selectQuote(\'' + f.name + '\', ' + f.price + ')">Proceed with Introduction</button>';
        html += '</div>';
    });
    
    document.getElementById('quotesContainer').innerHTML = html;
}

// AI Panelini quotelerle gÃ¼ncelle
function updateAIPanelWithQuotes(quotes) {
    if (!quotes || quotes.length === 0) return;
    
    // FiyatlarÄ± hesapla
    var prices = quotes.map(function(q) { return q.price; });
    var minPrice = Math.min.apply(null, prices);
    var maxPrice = Math.max.apply(null, prices);
    var avgPrice = Math.round(prices.reduce(function(a, b) { return a + b; }, 0) / prices.length);
    
    // En iyi quoteleri bul
    var cheapest = quotes.find(function(q) { return q.price === minPrice; });
    var fastest = quotes.reduce(function(a, b) { return a.transitDays < b.transitDays ? a : b; });
    var topRated = quotes.reduce(function(a, b) { return a.rating > b.rating ? a : b; });
    
    // Platform Verileri gÃ¼ncelle
    var aiRouteOffers = document.getElementById('aiRouteOffers');
    var aiPriceRange = document.getElementById('aiPriceRange');
    var aiAvgPrice = document.getElementById('aiAvgPrice');
    
    if (aiRouteOffers) aiRouteOffers.textContent = quotes.length + ' quote';
    if (aiPriceRange) aiPriceRange.textContent = '$' + minPrice.toLocaleString() + ' - $' + maxPrice.toLocaleString();
    if (aiAvgPrice) aiAvgPrice.textContent = '$' + avgPrice.toLocaleString();
    
    // AI Quoteleri gÃ¼ncelle
    var bestPriceEl = document.getElementById('aiBestPrice');
    var fastestEl = document.getElementById('aiFastest');
    var topRatedEl = document.getElementById('aiTopRated');
    
    if (bestPriceEl) {
        var bpVal = bestPriceEl.querySelector('.rec-value');
        if (bpVal) bpVal.textContent = cheapest.name.split(' ')[0] + ' - $' + cheapest.price.toLocaleString();
    }
    
    if (fastestEl) {
        var fVal = fastestEl.querySelector('.rec-value');
        if (fVal) fVal.textContent = fastest.name.split(' ')[0] + ' - ' + fastest.transit;
    }
    
    if (topRatedEl) {
        var trVal = topRatedEl.querySelector('.rec-value');
        if (trVal) trVal.textContent = topRated.name.split(' ')[0] + ' -' + topRated.rating;
    }
    
    // AI SonuÃ§ gÃ¼ncelle
    var conclusionEl = document.getElementById('aiConclusion');
    if (conclusionEl) {
        var diff = maxPrice - minPrice;
        var diffPercent = Math.round((diff / avgPrice) * 100);
        
        if (diffPercent < 10) {
            conclusionEl.innerHTML = 'Success: On this route <strong>' + quotes.length + ' forwarder</strong> shared quotes. Quotes are close (Â±%' + diffPercent + '). You can choose based on service quality and transit time.';
        } else if (diffPercent < 25) {
            conclusionEl.innerHTML = 'On this route <strong>' + quotes.length + ' forwarder</strong> shared quotes. Lowest rate <strong>$' + minPrice.toLocaleString() + '</strong> ile ' + cheapest.name.split(' ')[0] + '\'dan.';
        } else {
            conclusionEl.innerHTML = 'Quoteler arasÄ±nda <strong>%' + diffPercent + '</strong> fark var! Lowest rate <strong>$' + minPrice.toLocaleString() + '</strong> (' + cheapest.name.split(' ')[0] + ') iyi bir seÃ§im olabilir.';
        }
    }
}

// Forwarder iletiÅŸim bilgileri veritabanÄ±
var forwarderContactDB = {
    'Global Express Logistics': {
        phone: '+90 212 555 0101',
        email: 'info@globalexpress.com.tr',
        address: 'Maslak Mah. AOS 55. Sk. 42 Maslak, SarÄ±yer/Ä°stanbul',
        website: 'www.globalexpress.com.tr',
        contactPerson: 'Ahmet YÄ±lmaz',
        workingHours: '09:00 - 18:00 (Hafta iÃ§i)'
    },
    'Pacific Trade Solutions': {
        phone: '+90 216 444 0202',
        email: 'sales@pacifictrade.com.tr',
        address: 'Altunizade Mah. KÄ±sÄ±klÄ± Cd. No:28, ÃœskÃ¼dar/Ä°stanbul',
        website: 'www.pacifictrade.com.tr',
        contactPerson: 'Mehmet Demir',
        workingHours: '08:30 - 17:30 (Hafta iÃ§i)'
    },
    'Swift Cargo International': {
        phone: '+90 232 333 0303',
        email: 'contact@swiftcargo.com.tr',
        address: 'Alsancak Mah. AtatÃ¼rk Cd. No:156, Konak/Ä°zmir',
        website: 'www.swiftcargo.com.tr',
        contactPerson: 'AyÅŸe Kaya',
        workingHours: '08:00 - 18:00 (Hafta iÃ§i)'
    },
    'Ocean Star Shipping': {
        phone: '+90 324 222 0404',
        email: 'info@oceanstar.com.tr',
        address: 'Aksea Mah. Liman Cd. No:45, Aksea/Mersin',
        website: 'www.oceanstar.com.tr',
        contactPerson: 'Ali Ã–ztÃ¼rk',
        workingHours: '08:00 - 17:00 (Hafta iÃ§i)'
    },
    'Euro Freight Partners': {
        phone: '+90 212 666 0505',
        email: 'info@eurofreight.com.tr',
        address: 'Ataturk Airport Serbest BÃ¶lge, YeÅŸilkÃ¶y/Ä°stanbul',
        website: 'www.eurofreight.com.tr',
        contactPerson: 'Zeynep Arslan',
        workingHours: '09:00 - 18:00 (Hafta iÃ§i)'
    }
};

// Active conversations storage (dynamically updated when introductions are accepted)
var activeConversations = {};

function selectQuote(name, price) {
    var contact = forwarderContactDB[name] || {
        phone: '+90 212 000 0000',
        email: 'info@forwarder.com',
        address: 'Istanbul, Turkey',
        website: 'www.forwarder.com',
        contactPerson: 'Yetkili KiÅŸi',
        workingHours: '09:00 - 18:00'
    };
    
    // Generate conversation ID from forwarder name
    var convId = name.toLowerCase().replace(/\s+/g, '_').substring(0, 20);
    var avatar = name.split(' ').map(function(w) { return w[0]; }).join('').substring(0,2).toUpperCase();
    var route = document.getElementById('summaryRoute') ? document.getElementById('summaryRoute').textContent : 'Trade Lane';
    var currentTime = new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute:'2-digit'});
    
    // Add to active conversations
    activeConversations[convId] = {
        name: name,
        avatar: avatar,
        route: 'About ' + route + ' quote',
        price: price,
        contact: contact,
        status: 'introduction_accepted',
        messages: [
            { 
                from: 'system', 
                text: currentLanguage === 'tr' 
                    ? 'âœ… TanÄ±ÅŸtÄ±rma kabul edildi. ' + name + ' ile artÄ±k doÄŸrudan iletiÅŸim kurabilirsiniz.'
                    : 'âœ… Introduction accepted. You can now communicate directly with ' + name + '.', 
                time: currentTime,
                type: 'system'
            },
            { 
                from: 'them', 
                text: currentLanguage === 'tr'
                    ? 'Merhaba! ' + route + ' rotasÄ± iÃ§in talebinizi aldÄ±k. Quotemiz $' + price.toLocaleString() + ' (CIF). Detaylar hakkÄ±nda sorularÄ±nÄ±z varsa yanÄ±tlamaktan memnuniyet duyarÄ±z.'
                    : 'Hello! We received your request for the ' + route + ' route. Our quote is $' + price.toLocaleString() + ' (CIF). Feel free to ask if you have any questions about the details.',
                time: currentTime
            }
        ],
        acceptedAt: new Date().toISOString()
    };
    
    // Add conversation to the UI list
    addConversationToList(convId, activeConversations[convId]);
    
    // Modal HTML oluÅŸtur
    var t = translations[currentLanguage] || translations.en;
    var modalHTML = '<div id="forwarderContactModal" class="forwarder-contact-modal">' +
        '<div class="fcm-content">' +
        '<button class="fcm-close" onclick="closeForwarderModal()">Ã—</button>' +
        '<div class="fcm-header">' +
        '<div class="fcm-success-badge">âœ“</div>' +
        '<div class="fcm-logo">' + avatar + '</div>' +
        '<div class="fcm-title">' +
        '<h2>' + name + '</h2>' +
        '<p class="fcm-status">' + (currentLanguage === 'tr' ? 'TanÄ±ÅŸtÄ±rma Kabul Edildi' : 'Introduction Accepted') + '</p>' +
        '</div>' +
        '</div>' +
        '<div class="fcm-body">' +
        
        // Introduction Success Message
        '<div class="fcm-intro-success">' +
        '<div class="intro-success-icon">ğŸ¤</div>' +
        '<p>' + (currentLanguage === 'tr' 
            ? 'ArtÄ±k ' + name + ' ile doÄŸrudan iletiÅŸim kurabilirsiniz. Mesajlar bÃ¶lÃ¼mÃ¼nde yeni bir konuÅŸma baÅŸlatÄ±ldÄ±.'
            : 'You can now communicate directly with ' + name + '. A new conversation has been started in Messages.') + '</p>' +
        '</div>' +
        
        // Quote Summary
        '<div class="fcm-section">' +
        '<h4>ğŸ“‹ ' + (currentLanguage === 'tr' ? 'Quote Ã–zeti' : 'Quote Summary') + '</h4>' +
        '<div class="fcm-quote-summary">' +
        '<div class="quote-item"><span>' + (currentLanguage === 'tr' ? 'Rota' : 'Route') + ':</span><strong>' + route + '</strong></div>' +
        '<div class="quote-item"><span>' + (currentLanguage === 'tr' ? 'Ticari KoÅŸullar' : 'Commercial Terms') + ':</span><strong>$' + price.toLocaleString() + '</strong></div>' +
        '</div>' +
        '</div>' +
        
        // Contact Information
        '<div class="fcm-section">' +
        '<h4>ğŸ“ ' + (currentLanguage === 'tr' ? 'Ä°letiÅŸim Bilgileri' : 'Contact Information') + '</h4>' +
        '<div class="fcm-info-grid">' +
        '<div class="fcm-info-item">' +
        '<span class="fcm-icon">ğŸ‘¤</span>' +
        '<div class="fcm-info-content">' +
        '<label>' + (currentLanguage === 'tr' ? 'Yetkili KiÅŸi' : 'Contact Person') + '</label>' +
        '<span>' + contact.contactPerson + '</span>' +
        '</div>' +
        '</div>' +
        '<div class="fcm-info-item clickable" onclick="window.open(\'tel:' + contact.phone + '\')">' +
        '<span class="fcm-icon">ğŸ“±</span>' +
        '<div class="fcm-info-content">' +
        '<label>' + (currentLanguage === 'tr' ? 'Telefon' : 'Phone') + '</label>' +
        '<span class="fcm-link">' + contact.phone + '</span>' +
        '</div>' +
        '</div>' +
        '<div class="fcm-info-item clickable" onclick="window.open(\'mailto:' + contact.email + '\')">' +
        '<span class="fcm-icon">âœ‰ï¸</span>' +
        '<div class="fcm-info-content">' +
        '<label>E-posta</label>' +
        '<span class="fcm-link">' + contact.email + '</span>' +
        '</div>' +
        '</div>' +
        '</div>' +
        '</div>' +
        
        // Action Buttons
        '<div class="fcm-actions-new">' +
        '<button class="fcm-btn fcm-btn-primary" onclick="closeForwarderModal(); goToConversation(\'' + convId + '\');">' +
        '<svg width="20" height="20" viewBox="0 0 24 24" fill="white"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg> ' + 
        (currentLanguage === 'tr' ? 'MesajlaÅŸmaya Git' : 'Go to Messages') + 
        '</button>' +
        '<button class="fcm-btn fcm-btn-secondary" onclick="closeForwarderModal();">' +
        (currentLanguage === 'tr' ? 'Daha Sonra' : 'Later') +
        '</button>' +
        '</div>' +
        
        // Platform Note
        '<div class="fcm-note">' +
        '<svg width="16" height="16" viewBox="0 0 24 24" fill="#64748b"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>' +
        '<span>' + (currentLanguage === 'tr' 
            ? 'TÃ¼m gÃ¶rÃ¼ÅŸmeler ve anlaÅŸmalar doÄŸrudan taraflar arasÄ±nda yÃ¼rÃ¼tÃ¼lÃ¼r.'
            : 'All negotiations and agreements are conducted directly between the parties.') + '</span>' +
        '</div>' +
        '</div>' +
        '</div>' +
        '</div>';
    
    // Mevcut modal varsa kaldÄ±r
    var existingModal = document.getElementById('forwarderContactModal');
    if (existingModal) existingModal.remove();
    
    // Modal'Ä± ekle
    document.body.insertAdjacentHTML('beforeend', modalHTML);
    
    // Animation iÃ§in
    setTimeout(function() {
        document.getElementById('forwarderContactModal').classList.add('active');
    }, 10);
    
    // Show notification
    showNotification(
        currentLanguage === 'tr' 
            ? 'âœ… ' + name + ' ile tanÄ±ÅŸtÄ±rma kabul edildi!' 
            : 'âœ… Introduction accepted with ' + name + '!', 
        'success'
    );
}

// Add new conversation to the sidebar list
function addConversationToList(convId, convData) {
    var convList = document.querySelector('.conversations-list');
    if (!convList) return;
    
    // Check if already exists
    var existing = document.querySelector('.conversation-item[data-conv-id="' + convId + '"]');
    if (existing) return;
    
    var currentTime = new Date().toLocaleTimeString('tr-TR', {hour: '2-digit', minute:'2-digit'});
    
    var newConvHTML = '<div class="conversation-item new-conversation" data-conv-id="' + convId + '" onclick="selectConversation(\'' + convId + '\')">' +
        '<div class="conv-avatar" style="background: linear-gradient(135deg, #10b981, #059669);">' + convData.avatar + '</div>' +
        '<div class="conv-info">' +
        '<h4>' + convData.name + ' <span class="new-badge">NEW</span></h4>' +
        '<p>' + (currentLanguage === 'tr' ? 'TanÄ±ÅŸtÄ±rma kabul edildi' : 'Introduction accepted') + '</p>' +
        '</div>' +
        '<div class="conv-meta">' +
        '<span class="conv-time">' + currentTime + '</span>' +
        '<span class="conv-unread-badge">1</span>' +
        '</div>' +
        '</div>';
    
    // Insert at the top after header
    var header = convList.querySelector('.conversations-header');
    if (header) {
        header.insertAdjacentHTML('afterend', newConvHTML);
    }
}

// Navigate to specific conversation
function goToConversation(convId) {
    showClientTab('messages');
    setTimeout(function() {
        selectConversation(convId);
    }, 100);
}

function closeForwarderModal() {
    var modal = document.getElementById('forwarderContactModal');
    if (modal) {
        modal.classList.remove('active');
        setTimeout(function() {
            modal.remove();
        }, 300);
    }
}

function backToDashboard() {
    hideAllPages();
    document.getElementById('clientDashboard').classList.remove('hidden');
}

// ==================== PROVIDER DATA & RENDER FUNCTIONS ====================

// Insurance Requests Data
var insuranceRequests = [
    { id: 'INS-2024-001', client: 'ABC Trade Co.', route: 'Shanghai â†’ Rotterdam', cargoValue: 125000, cargoType: 'Electronics', coverage: 'All Risks', date: '2024-12-18', status: 'pending' },
    { id: 'INS-2024-002', client: 'Global Export Ltd', route: 'Mumbai â†’ Hamburg', cargoValue: 78000, cargoType: 'Textile', coverage: 'All Risks', date: '2024-12-17', status: 'pending' },
    { id: 'INS-2024-003', client: 'Tech Solutions Inc', route: 'Shenzhen â†’ Los Angeles', cargoValue: 450000, cargoType: 'High Value Electronics', coverage: 'All Risks + War', date: '2024-12-17', status: 'quoted' },
    { id: 'INS-2024-004', client: 'Fresh Food Co.', route: 'Bangkok â†’ Dubai', cargoValue: 35000, cargoType: 'Perishable Goods', coverage: 'All Risks + Refrigeration', date: '2024-12-16', status: 'pending' }
];

function renderInsuranceRequests() {
    var container = document.getElementById('insuranceRequestsContainer');
    if (!container) return;
    
    var html = '';
    insuranceRequests.forEach(function(req) {
        var statusClass = req.status === 'pending' ? 'status-pending' : 'status-quoted';
        var statusText = req.status === 'pending' ? 'PENDING' : 'QUOTED';
        html += '<div class="request-card">';
        html += '<div class="request-header">';
        html += '<span class="request-id">' + req.id + '</span>';
        html += '<span class="request-status ' + statusClass + '">' + statusText + '</span>';
        html += '</div>';
        html += '<div class="request-client">ğŸ¢ ' + req.client + '</div>';
        html += '<div class="request-route-simple">Teminat: ' + req.coverage + '</div>';
        html += '<div class="request-info-row">';
        html += '<span>ğŸ“ ' + req.route + '</span>';
        html += '<span>' + req.cargoType + '</span>';
        html += '</div>';
        html += '<div class="request-info-row">';
        html += '<span class="cargo-value">Kargo DeÄŸeri: $' + req.cargoValue.toLocaleString() + '</span>';
        html += '<span>' + req.date + '</span>';
        html += '</div>';
        html += '<button class="btn-quote" onclick="openInsuranceQuoteModal(\'' + req.id + '\')">Prim Quotesi GÃ¶nder</button>';
        html += '</div>';
    });
    container.innerHTML = html;
}

// Customsleme Jobs Data
var customsJobs = [
    { id: 'CLR-2024-001', client: 'Import Masters Ltd', route: 'China â†’ Turkey', hsCode: '8471.30', goodsDesc: 'Laptop Computer', value: 89000, clearanceType: 'Import', date: '2024-12-18', status: 'pending' },
    { id: 'CLR-2024-002', client: 'Textile World Co', route: 'Turkey â†’ Germany', hsCode: '6109.10', goodsDesc: 'Cotton T-Shirt', value: 45000, clearanceType: 'Export', date: '2024-12-18', status: 'pending' },
    { id: 'CLR-2024-003', client: 'Auto Parts Inc', route: 'Japan â†’ USA', hsCode: '8708.99', goodsDesc: 'Auto Spare Parts', value: 156000, clearanceType: 'Import', date: '2024-12-17', status: 'in-progress' },
    { id: 'CLR-2024-004', client: 'Food Importers LLC', route: 'Brazil â†’ UAE', hsCode: '0901.21', goodsDesc: 'Roasted Coffee', value: 28000, clearanceType: 'Import', date: '2024-12-17', status: 'pending' }
];

function renderCustomsJobs() {
    var container = document.getElementById('customsJobsContainer');
    if (!container) return;
    
    var html = '';
    customsJobs.forEach(function(job) {
        var statusClass = job.status === 'pending' ? 'status-pending' : job.status === 'in-progress' ? 'status-inprogress' : 'status-completed';
        var statusText = job.status === 'pending' ? 'PENDING' : job.status === 'in-progress' ? 'IN PROGRESS' : 'COMPLETED';
        html += '<div class="request-card">';
        html += '<div class="request-header">';
        html += '<span class="request-id">' + job.id + '</span>';
        html += '<span class="request-status ' + statusClass + '">' + statusText + '</span>';
        html += '</div>';
        html += '<div class="request-client">ğŸ¢ ' + job.client + '</div>';
        html += '<div class="request-route-simple">' + job.clearanceType + ' Customslemesi</div>';
        html += '<div class="request-info-row">';
        html += '<span>ğŸ“ ' + job.route + '</span>';
        html += '<span>ğŸ·ï¸ HS: ' + job.hsCode + '</span>';
        html += '</div>';
        html += '<div class="request-info-row">';
        html += '<span>' + job.goodsDesc + '</span>';
        html += '<span>$' + job.value.toLocaleString() + '</span>';
        html += '</div>';
        html += '<button class="btn-quote" onclick="openCustomsQuoteModal(\'' + job.id + '\')">Submit Quote</button>';
        html += '</div>';
    });
    container.innerHTML = html;
}

// Warehouse Requests Data
var warehouseRequests = [
    { id: 'WH-2024-001', client: 'E-Ticaret Plus', location: 'Ä°stanbul', space: '150 CBM', duration: '30 days', type: 'Standart', services: ['Toplama & Paketleme', 'Etiketleme'], date: '2024-12-18', status: 'pending' },
    { id: 'WH-2024-002', client: 'Taze Ä°thalat A.Å.', location: 'Ä°stanbul', space: '80 CBM', duration: '14 days', type: 'SoÄŸuk Warehouse', services: ['SÄ±caklÄ±k KontrolÃ¼'], date: '2024-12-18', status: 'pending' },
    { id: 'WH-2024-003', client: 'Oto DistribÃ¼tÃ¶rleri', location: 'Mersin', space: '500 CBM', duration: '90 gÃ¼n', type: 'Antrepo', services: ['Stok YÃ¶netimi', 'Cross-Docking'], date: '2024-12-17', status: 'quoted' }
];

function renderWarehouseRequests() {
    var container = document.getElementById('warehouseRequestsContainer');
    if (!container) return;
    
    var html = '';
    warehouseRequests.forEach(function(req) {
        var statusClass = req.status === 'pending' ? 'status-pending' : 'status-quoted';
        var statusText = req.status === 'pending' ? 'PENDING' : 'QUOTED';
        html += '<div class="request-card">';
        html += '<div class="request-header">';
        html += '<span class="request-id">' + req.id + '</span>';
        html += '<span class="request-status ' + statusClass + '">' + statusText + '</span>';
        html += '</div>';
        html += '<div class="request-client">ğŸ¢ ' + req.client + '</div>';
        html += '<div class="request-route-simple">ğŸ­ ' + req.type + ' - ' + req.location + '</div>';
        html += '<div class="request-info-row">';
        html += '<span>' + req.space + '</span>';
        html += '<span>' + req.duration + '</span>';
        html += '</div>';
        html += '<div class="request-info-row">';
        html += '<span>ğŸ”§ ' + req.services.join(', ') + '</span>';
        html += '</div>';
        html += '<button class="btn-quote" onclick="openWarehouseQuoteModal(\'' + req.id + '\')">Submit Quote</button>';
        html += '</div>';
    });
    container.innerHTML = html;
}

// Packaging Jobs Data
var packagingJobs = [
    { id: 'PKG-2024-001', client: 'Sanat Galerisi A.Å.', items: 'Tablolar & Heykeller', qty: '25 parÃ§a', packType: 'Ã–zel SandÄ±klama', special: ['KÄ±rÄ±lacak', 'Ä°klim KontrolÃ¼'], date: '2024-12-18', status: 'pending' },
    { id: 'PKG-2024-002', client: 'Makine Aletleri Ltd', items: 'EndÃ¼striyel Makine', qty: '3 adet', packType: 'AhÅŸap SandÄ±k', special: ['AÄŸÄ±r YÃ¼k', 'FÃ¼migasyon'], date: '2024-12-18', status: 'pending' },
    { id: 'PKG-2024-003', client: 'Elektronik Ä°hracat', items: 'Sunucu EkipmanlarÄ±', qty: '50 palet', packType: 'Paletleme', special: ['Anti-Statik', 'Su GeÃ§irmez'], date: '2024-12-17', status: 'in-progress' }
];

function renderPackagingJobs() {
    var container = document.getElementById('packagingJobsContainer');
    if (!container) return;
    
    var html = '';
    packagingJobs.forEach(function(job) {
        var statusClass = job.status === 'pending' ? 'status-pending' : job.status === 'in-progress' ? 'status-inprogress' : 'status-completed';
        var statusText = job.status === 'pending' ? 'PENDING' : job.status === 'in-progress' ? 'IN PROGRESS' : 'COMPLETED';
        html += '<div class="request-card">';
        html += '<div class="request-header">';
        html += '<span class="request-id">' + job.id + '</span>';
        html += '<span class="request-status ' + statusClass + '">' + statusText + '</span>';
        html += '</div>';
        html += '<div class="request-client">ğŸ¢ ' + job.client + '</div>';
        html += '<div class="request-route-simple">' + job.packType + '</div>';
        html += '<div class="request-info-row">';
        html += '<span>ğŸ ' + job.items + '</span>';
        html += '<span>' + job.qty + '</span>';
        html += '</div>';
        html += '<div class="request-info-row">';
        html += '<span>' + job.special.join(', ') + '</span>';
        html += '</div>';
        html += '<button class="btn-quote" onclick="openPackagingQuoteModal(\'' + job.id + '\')">Submit Quote</button>';
        html += '</div>';
    });
    container.innerHTML = html;
}

// Provider Quote Modal Functions (placeholders)
function openInsuranceQuoteModal(id) {
    alert('Insurance Quote - ' + id + '\n\nFeatures coming soon:\nâ€¢ Premium rate calculator\nâ€¢ Coverage terms\nâ€¢ Policy conditions');
}

function openCustomsQuoteModal(id) {
    alert('Customs Quote - ' + id + '\n\nFeatures coming soon:\nâ€¢ Customs clearance fee\nâ€¢ Time estimate\nâ€¢ Document list');
}

function openWarehouseQuoteModal(id) {
    alert('Warehouse Quote - ' + id + '\n\nFeatures coming soon:\nâ€¢ Storage fee\nâ€¢ Handling fees\nâ€¢ Availability calendar');
}

function openPackagingQuoteModal(id) {
    alert('Packaging Quote - ' + id + '\n\nFeatures coming soon:\nâ€¢ Material costs\nâ€¢ Labor estimate\nâ€¢ Timeline');
}

// Note: showInsuranceTab and showCustomsTab are defined in their respective sections below
// Tab switch functions for warehouse and packaging dashboards

function showWarehouseTab(tab) {
    var menu = document.querySelectorAll('#warehouseDashboard .nav-menu-item');
    menu.forEach(function(item) { item.classList.remove('active'); });
    event.target.classList.add('active');
    
    document.getElementById('warehouseRequestsTab').style.display = 'none';
    document.getElementById('warehouseInventoryTab').style.display = 'none';
    document.getElementById('warehouseSpaceTab').style.display = 'none';
    
    if (tab === 'requests') {
        document.getElementById('warehouseRequestsTab').style.display = 'block';
    } else if (tab === 'inventory') {
        document.getElementById('warehouseInventoryTab').style.display = 'block';
    } else if (tab === 'space') {
        document.getElementById('warehouseSpaceTab').style.display = 'block';
    }
}

function showPackagingTab(tab) {
    var menu = document.querySelectorAll('#packagingDashboard .nav-menu-item');
    menu.forEach(function(item) { item.classList.remove('active'); });
    event.target.classList.add('active');
    
    document.getElementById('packagingJobsTab').style.display = 'none';
    document.getElementById('packagingProgressTab').style.display = 'none';
    document.getElementById('packagingMaterialsTab').style.display = 'none';
    
    if (tab === 'jobs') {
        document.getElementById('packagingJobsTab').style.display = 'block';
    } else if (tab === 'progress') {
        document.getElementById('packagingProgressTab').style.display = 'block';
    } else if (tab === 'materials') {
        document.getElementById('packagingMaterialsTab').style.display = 'block';
    }
}

function showForwarderTab(tabName) {
    console.log('showForwarderTab:', tabName);
    
    // TÃ¼m section ID'leri
    var allSectionIds = [
        'forwarderRequestsSection',
        'forwarderTrackingTab',
        'forwarderCompletedSection',
        'forwarderMyQuotesTab',
        'forwarderProfileTab'
    ];
    
    // TÃ¼m section'larÄ± gizle
    allSectionIds.forEach(function(id) {
        var el = document.getElementById(id);
        if (el) el.style.display = 'none';
    });
    
    // Nav menu aktif state gÃ¼ncelle
    var menuItems = document.querySelectorAll('#forwarderDashboard .nav-menu-item');
    menuItems.forEach(function(item) {
        item.classList.remove('active');
        var itemTab = item.getAttribute('data-tab');
        if (itemTab === tabName) {
            item.classList.add('active');
        }
        // home ve requests aynÄ± section'Ä± gÃ¶steriyor
        if (tabName === 'home' && itemTab === 'home') {
            item.classList.add('active');
        }
        if (tabName === 'requests' && itemTab === 'requests') {
            item.classList.add('active');
        }
    });
    
    // Hedef section'Ä± gÃ¶ster
    var show = function(id) {
        var el = document.getElementById(id);
        if (el) {
            el.style.display = 'block';
            el.style.visibility = 'visible';
            el.style.opacity = '1';
            el.style.height = 'auto';
            console.log('Section shown:', id);
        } else {
            console.log('Section not found:', id);
        }
    };
    
    switch(tabName) {
        case 'requests':
            show('forwarderRequestsSection');
            if (typeof renderForwarderRequests === 'function') renderForwarderRequests();
            break;
        case 'tracking':
            show('forwarderTrackingTab');
            if (typeof loadForwarderShipments === 'function') loadForwarderShipments();
            break;
        case 'completed':
            show('forwarderCompletedSection');
            if (typeof loadCompletedShipments === 'function') loadCompletedShipments();
            break;
        case 'quotes':
        case 'myQuotes':
            show('forwarderMyQuotesTab');
            if (typeof renderForwarderQuotes === 'function') renderForwarderQuotes();
            break;
        case 'profile':
            show('forwarderProfileTab');
            if (typeof loadForwarderProfile === 'function') loadForwarderProfile();
            break;
        case 'home':
        default:
            show('forwarderRequestsSection');
            if (typeof renderForwarderRequests === 'function') renderForwarderRequests();
            break;
    }
}

// Shipment data storage (would be in database in production)
var shipmentUpdates = {};

// Load completed shipments for forwarder
async function loadCompletedShipments() {
    var container = document.getElementById('completedShipmentsList');
    var emptyMessage = document.getElementById('noCompletedShipmentsMessage');
    
    if (!container) return;
    
    var forwarderId = currentUser;
    if (!forwarderId) {
        console.log('No forwarder ID');
        return;
    }
    
    console.log('Loading completed shipments for forwarder:', forwarderId);
    
    var shipments = [];
    
    if (supabase) {
        try {
            var result = await supabase
                .from('shipments')
                .select('*')
                .eq('forwarder_id', forwarderId)
                .eq('status', 'completed')
                .order('created_at', { ascending: false });
            
            if (!result.error && result.data) {
                shipments = result.data;
                console.log('Loaded', shipments.length, 'completed shipments');
            }
        } catch (e) {
            console.log('Completed shipments error:', e.message);
        }
    }
    
    if (shipments.length === 0) {
        container.innerHTML = '';
        if (emptyMessage) emptyMessage.style.display = 'block';
        return;
    }
    
    if (emptyMessage) emptyMessage.style.display = 'none';
    
    var html = '';
    shipments.forEach(function(s) {
        var completedDate = s.delivered_at ? new Date(s.delivered_at).toLocaleDateString('en-US', {month: 'short', day: 'numeric', year: 'numeric'}) : 'N/A';
        
        html += '<div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-left: 4px solid #10b981;">';
        
        // Header
        html += '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">';
        html += '<div>';
        html += '<span style="font-weight: 600; color: #1e3c72;">' + s.shipment_id + '</span>';
        html += '<span style="background: #10b981; color: white; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 10px;">âœ“ Completed</span>';
        html += '</div>';
        html += '<span style="font-size: 12px; color: #64748b;">Delivered: ' + completedDate + '</span>';
        html += '</div>';
        
        // Route
        html += '<div style="display: flex; align-items: center; gap: 10px; color: #475569; font-size: 14px; margin-bottom: 10px;">';
        html += '<span>' + (s.origin || 'Origin') + '</span>';
        html += '<span>â†’</span>';
        html += '<span>' + (s.destination || 'Destination') + '</span>';
        html += '</div>';
        
        // Details
        html += '<div style="display: flex; gap: 20px; font-size: 13px; color: #64748b;">';
        html += '<span>Client: <strong>' + (s.client_id || 'N/A') + '</strong></span>';
        if (s.total_price) {
            html += '<span>Value: <strong style="color: #059669;">$' + Number(s.total_price).toLocaleString() + '</strong></span>';
        }
        html += '</div>';
        
        html += '</div>';
    });
    
    container.innerHTML = html;
}

// Load and render forwarder shipments from Supabase
async function loadForwarderShipments() {
    var container = document.getElementById('forwarderShipmentsList');
    var emptyMessage = document.getElementById('noShipmentsMessage');
    
    if (!container) return;
    
    var forwarderId = currentUser;
    if (!forwarderId) {
        console.log('No forwarder ID');
        return;
    }
    
    console.log('Loading shipments for forwarder:', forwarderId);
    
    // Check auto-complete for delivered shipments
    await checkAndAutoCompleteShipments();
    
    // Try to load from Supabase
    var shipments = [];
    
    if (supabase) {
        try {
            // TÃ¼m aktif statuslarÄ± al (completed hariÃ§)
            var result = await supabase
                .from('shipments')
                .select('*')
                .eq('forwarder_id', forwarderId)
                .neq('status', 'completed')
                .order('created_at', { ascending: false });
            
            if (!result.error && result.data) {
                shipments = result.data;
                console.log('Loaded', shipments.length, 'active shipments from Supabase');
            }
        } catch (e) {
            console.log('Supabase shipments error:', e.message);
        }
    }
    
    // Update badge
    var badge = document.getElementById('forwarderShipmentsBadge');
    if (badge) {
        badge.textContent = shipments.length;
        badge.style.display = shipments.length > 0 ? 'inline-flex' : 'none';
    }
    
    // Render shipments or show empty state
    if (shipments.length === 0) {
        container.innerHTML = '<div id="noShipmentsMessage" style="text-align: center; padding: 40px; color: #64748b;"><p>No active shipments</p></div>';
        return;
    }
    
    var statusTexts = {
        'booked': 'Booked',
        'confirmed': 'Confirmed',
        'picked_up': 'Picked Up',
        'at_origin_port': 'At Origin',
        'in_transit': 'In Transit',
        'at_transit_port': 'Transit Port',
        'at_destination_port': 'At Destination',
        'customs_clearance': 'Customs',
        'out_for_delivery': 'Out for Delivery',
        'delivered': 'Delivered'
    };
    
    var statusColors = {
        'booked': '#3b82f6',
        'confirmed': '#6366f1',
        'picked_up': '#8b5cf6',
        'at_origin_port': '#a855f7',
        'in_transit': '#f59e0b',
        'at_transit_port': '#f97316',
        'at_destination_port': '#14b8a6',
        'customs_clearance': '#06b6d4',
        'out_for_delivery': '#22c55e',
        'delivered': '#10b981'
    };
    
    var html = '';
    shipments.forEach(function(s) {
        var statusText = statusTexts[s.status] || s.status || 'Booked';
        var statusColor = statusColors[s.status] || '#3b82f6';
        var progressPercent = s.progress_percent || 0;
        
        html += '<div class="shipment-tracking-card" data-shipment-id="' + s.shipment_id + '" style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);">';
        
        // Header
        html += '<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">';
        html += '<div class="shipment-id-badge" style="font-weight: 600; color: #1e3c72;">' + s.shipment_id + '</div>';
        html += '<span class="shipment-status-badge" style="background: ' + statusColor + '; color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px;">' + statusText + '</span>';
        html += '</div>';
        
        // Route
        html += '<div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px; color: #475569;">';
        html += '<span style="font-weight: 500;">' + (s.origin || 'Origin') + '</span>';
        html += '<span>â†’</span>';
        html += '<span style="font-weight: 500;">' + (s.destination || 'Destination') + '</span>';
        html += '</div>';
        
        // Client info
        html += '<div style="font-size: 13px; color: #64748b; margin-bottom: 15px;">Client: <strong>' + (s.client_id || 'N/A') + '</strong></div>';
        
        // Progress bar
        html += '<div style="margin-bottom: 20px;">';
        html += '<div style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 5px;"><span>Progress</span><span id="progressLabel-' + s.shipment_id + '">' + progressPercent + '%</span></div>';
        html += '<div style="height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden;">';
        html += '<div style="height: 100%; width: ' + progressPercent + '%; background: linear-gradient(90deg, #3b82f6, #10b981); transition: width 0.3s;"></div>';
        html += '</div></div>';
        
        // Update form
        html += '<div style="background: #f8fafc; border-radius: 8px; padding: 15px;">';
        html += '<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 12px;">';
        
        // Status dropdown
        html += '<div><label style="font-size: 11px; color: #64748b; display: block; margin-bottom: 4px;">Status</label>';
        html += '<select id="status-' + s.shipment_id + '" style="width: 100%; padding: 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 13px;">';
        html += '<option value="booked"' + (s.status === 'booked' ? ' selected' : '') + '>Booked</option>';
        html += '<option value="confirmed"' + (s.status === 'confirmed' ? ' selected' : '') + '>Confirmed</option>';
        html += '<option value="picked_up"' + (s.status === 'picked_up' ? ' selected' : '') + '>Picked Up</option>';
        html += '<option value="at_origin_port"' + (s.status === 'at_origin_port' ? ' selected' : '') + '>At Origin Port</option>';
        html += '<option value="in_transit"' + (s.status === 'in_transit' ? ' selected' : '') + '>In Transit</option>';
        html += '<option value="at_transit_port"' + (s.status === 'at_transit_port' ? ' selected' : '') + '>At Transit Port</option>';
        html += '<option value="at_destination_port"' + (s.status === 'at_destination_port' ? ' selected' : '') + '>At Destination Port</option>';
        html += '<option value="customs_clearance"' + (s.status === 'customs_clearance' ? ' selected' : '') + '>Customs Clearance</option>';
        html += '<option value="out_for_delivery"' + (s.status === 'out_for_delivery' ? ' selected' : '') + '>Out for Delivery</option>';
        html += '<option value="delivered"' + (s.status === 'delivered' ? ' selected' : '') + '>Delivered</option>';
        html += '</select></div>';
        
        // Location
        html += '<div><label style="font-size: 11px; color: #64748b; display: block; margin-bottom: 4px;">Current Location</label>';
        html += '<input type="text" id="location-' + s.shipment_id + '" value="' + (s.current_location || '') + '" placeholder="e.g. Port of Rotterdam" style="width: 100%; padding: 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 13px;"></div>';
        
        // ETA
        html += '<div><label style="font-size: 11px; color: #64748b; display: block; margin-bottom: 4px;">ETA</label>';
        html += '<input type="date" id="eta-' + s.shipment_id + '" value="' + (s.eta || '') + '" style="width: 100%; padding: 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 13px;"></div>';
        
        // Container (hidden fields for compatibility)
        html += '<input type="hidden" id="container-' + s.shipment_id + '" value="' + (s.container_number || '') + '">';
        html += '<input type="hidden" id="vessel-' + s.shipment_id + '" value="' + (s.vessel_name || '') + '">';
        html += '<input type="hidden" id="progress-' + s.shipment_id + '" value="' + progressPercent + '">';
        
        html += '</div>';
        
        // Notes
        html += '<div style="margin-bottom: 12px;"><label style="font-size: 11px; color: #64748b; display: block; margin-bottom: 4px;">Update Notes</label>';
        html += '<textarea id="notes-' + s.shipment_id + '" rows="2" placeholder="Add notes for cargo owner..." style="width: 100%; padding: 8px; border: 1px solid #e2e8f0; border-radius: 6px; font-size: 13px; resize: none;"></textarea></div>';
        
        // Update button
        html += '<button onclick="saveShipmentUpdate(\'' + s.shipment_id + '\')" style="width: 100%; padding: 10px; background: linear-gradient(135deg, #1e3c72, #2a5298); color: white; border: none; border-radius: 6px; font-weight: 500; cursor: pointer;">Update Shipment</button>';
        
        // Last update info
        if (s.last_update) {
            var lastUpdateDate = new Date(s.last_update);
            html += '<div class="last-update" style="text-align: center; font-size: 11px; color: #94a3b8; margin-top: 10px;">Last updated: ' + lastUpdateDate.toLocaleString() + '</div>';
        }
        
        html += '</div></div>';
    });
    
    container.innerHTML = html;
}

// Update progress label when slider changes
function updateProgressLabel(shipmentId, value) {
    var label = document.getElementById('progressLabel-' + shipmentId);
    if (label) label.textContent = value + '%';
}

// Save shipment update (Forwarder side) - KÃ–K Ã‡Ã–ZÃœM: Supabase'e kaydet
async function saveShipmentUpdate(shipmentId) {
    var status = document.getElementById('status-' + shipmentId).value;
    var location = document.getElementById('location-' + shipmentId).value;
    var container = document.getElementById('container-' + shipmentId).value;
    var vessel = document.getElementById('vessel-' + shipmentId).value;
    var eta = document.getElementById('eta-' + shipmentId).value;
    var progress = document.getElementById('progress-' + shipmentId).value;
    var notes = document.getElementById('notes-' + shipmentId).value;
    
    var now = new Date();
    var formattedDate = now.toLocaleDateString('en-US', {month: 'short', day: 'numeric', year: 'numeric'});
    var formattedTime = now.toLocaleTimeString('en-US', {hour: '2-digit', minute: '2-digit'});
    
    // Status progress mapping
    var statusProgress = {
        'booked': 5,
        'confirmed': 10,
        'picked_up': 20,
        'at_origin_port': 30,
        'in_transit': 50,
        'at_transit_port': 60,
        'at_destination_port': 75,
        'customs_clearance': 85,
        'out_for_delivery': 95,
        'delivered': 100
    };
    
    // Auto-set progress based on status
    var autoProgress = statusProgress[status] || parseInt(progress) || 0;
    
    // Save to local storage for UI sync
    shipmentUpdates[shipmentId] = {
        status: status,
        location: location,
        container: container,
        vessel: vessel,
        eta: eta,
        progress: autoProgress,
        notes: notes,
        lastUpdate: now.toISOString(),
        lastUpdateFormatted: formattedDate + ' ' + formattedTime
    };
    
    var statusTexts = {
        'booked': 'Booked',
        'confirmed': 'Confirmed',
        'picked_up': 'Picked Up',
        'at_origin_port': 'At Origin Port',
        'in_transit': 'In Transit',
        'at_transit_port': 'At Transit Port',
        'at_destination_port': 'At Destination',
        'customs_clearance': 'Customs Clearance',
        'out_for_delivery': 'Out for Delivery',
        'delivered': 'Delivered',
        'completed': 'Completed'
    };
    
    // ========================================
    // SUPABASE'E KAYDET - KÃ–K Ã‡Ã–ZÃœM
    // ========================================
    if (supabase) {
        try {
            var updateData = {
                status: status,
                current_location: location,
                eta: eta || null,
                progress_percent: autoProgress,
                last_update: now.toISOString()
            };
            
            // Delivered olduÄŸunda delivered_at timestamp'i kaydet
            if (status === 'delivered') {
                updateData.delivered_at = now.toISOString();
            }
            
            var result = await supabase
                .from('shipments')
                .update(updateData)
                .eq('shipment_id', shipmentId);
            
            if (result.error) {
                console.log('Shipment update error:', result.error.message);
            } else {
                console.log('âœ… Shipment updated in Supabase');
                
                // Tracking history'e ekle
                await addTrackingHistory(shipmentId, status, location, notes);
            }
        } catch(e) {
            console.log('Supabase update error:', e.message);
        }
    }
    
    // Update Forwarder side status badge
    var statusBadge = document.querySelector('[data-shipment-id="' + shipmentId + '"] .shipment-status-badge');
    if (statusBadge) {
        statusBadge.textContent = statusTexts[status] || status;
        statusBadge.className = 'shipment-status-badge ' + (status === 'delivered' ? 'delivered' : 'in-transit');
    }
    
    // Update Forwarder side last update timestamp
    var lastUpdateEl = document.querySelector('[data-shipment-id="' + shipmentId + '"] .last-update');
    if (lastUpdateEl) {
        lastUpdateEl.textContent = 'Last updated: ' + formattedDate + ' ' + formattedTime;
    }
    
    // ========================================
    // SYNC WITH CARGO OWNER VIEW
    // ========================================
    updateCargoOwnerShipmentView(shipmentId, shipmentUpdates[shipmentId], statusTexts);
    
    // Show notification
    showRateNotification('Shipment status updated! Cargo owner will see the changes.', 'success');
    
    console.log('Shipment update saved and synced:', shipmentUpdates[shipmentId]);
}

// Add tracking history entry
async function addTrackingHistory(shipmentId, status, location, notes) {
    if (!supabase) return;
    
    try {
        var trackingData = {
            shipment_id: shipmentId,
            status: status,
            location: location || '',
            notes: notes || '',
            updated_by: currentUser,
            created_at: new Date().toISOString()
        };
        
        await supabase
            .from('shipment_tracking')
            .insert([trackingData]);
        
        console.log('Tracking history added');
    } catch(e) {
        console.log('Tracking history error:', e.message);
    }
}

// Check and auto-complete delivered shipments (24 hour rule)
async function checkAndAutoCompleteShipments() {
    if (!supabase) return;
    
    try {
        var twentyFourHoursAgo = new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString();
        
        // Delivered olup 24 saatten fazla sÃ¼rmÃ¼ÅŸ shipment'larÄ± bul
        var result = await supabase
            .from('shipments')
            .select('shipment_id, delivered_at')
            .eq('status', 'delivered')
            .lt('delivered_at', twentyFourHoursAgo);
        
        if (result.data && result.data.length > 0) {
            console.log('Auto-completing', result.data.length, 'shipments');
            
            for (var i = 0; i < result.data.length; i++) {
                await supabase
                    .from('shipments')
                    .update({ status: 'completed' })
                    .eq('shipment_id', result.data[i].shipment_id);
            }
            
            console.log('âœ… Shipments auto-completed');
        }
    } catch(e) {
        console.log('Auto-complete check error:', e.message);
    }
}

// Run auto-complete check on page load and every hour
setInterval(checkAndAutoCompleteShipments, 60 * 60 * 1000); // Her saat

// Update Cargo Owner's shipment view with forwarder data
function updateCargoOwnerShipmentView(shipmentId, data, statusTexts) {
    // Status badge
    var clientStatus = document.getElementById('clientStatus-' + shipmentId);
    if (clientStatus) {
        clientStatus.textContent = statusTexts[data.status] || data.status;
        clientStatus.className = 'shipment-status-badge ' + (data.status === 'delivered' ? 'delivered' : 'in-transit');
    }
    
    // Progress bar
    var clientProgress = document.getElementById('clientProgress-' + shipmentId);
    if (clientProgress) {
        clientProgress.style.width = data.progress + '%';
    }
    
    // Progress marker position
    var progressMarker = document.querySelector('#shipmentCard-' + shipmentId + ' .progress-marker');
    if (progressMarker) {
        progressMarker.style.left = data.progress + '%';
    }
    
    // Progress text
    var clientProgressText = document.getElementById('clientProgressText-' + shipmentId);
    if (clientProgressText) {
        clientProgressText.textContent = data.progress + '%';
    }
    
    // Location
    var clientLocation = document.getElementById('clientLocation-' + shipmentId);
    if (clientLocation) {
        clientLocation.textContent = data.location || '-';
    }
    
    // Container
    var clientContainer = document.getElementById('clientContainer-' + shipmentId);
    if (clientContainer) {
        clientContainer.textContent = data.container || '-';
    }
    
    // Vessel
    var clientVessel = document.getElementById('clientVessel-' + shipmentId);
    if (clientVessel) {
        clientVessel.textContent = data.vessel || '-';
    }
    
    // ETA
    var clientETA = document.getElementById('clientETA-' + shipmentId);
    if (clientETA && data.eta) {
        var etaDate = new Date(data.eta);
        clientETA.textContent = etaDate.toLocaleDateString('en-US', {month: 'short', day: 'numeric', year: 'numeric'});
    }
    
    // Note
    var clientNoteText = document.getElementById('clientNoteText-' + shipmentId);
    if (clientNoteText) {
        clientNoteText.textContent = data.notes || 'No updates yet.';
    }
    
    // Note date
    var clientNoteDate = document.getElementById('clientNoteDate-' + shipmentId);
    if (clientNoteDate) {
        clientNoteDate.textContent = data.lastUpdateFormatted || '';
    }
    
    // Last updated
    var clientLastUpdate = document.getElementById('clientLastUpdate-' + shipmentId);
    if (clientLastUpdate) {
        clientLastUpdate.textContent = 'Last updated: ' + (data.lastUpdateFormatted || '-');
    }
}

// Get shipment tracking data (Cargo Owner side)
function getShipmentTracking(shipmentId) {
    return shipmentUpdates[shipmentId] || null;
}

// Load cargo owner shipments on tab show - KÃ–K Ã‡Ã–ZÃœM: DetaylÄ± tracking view
async function loadCargoOwnerShipments() {
    console.log('Loading cargo owner shipments from Supabase...');
    
    var shipmentsContainer = document.getElementById('clientShipmentsList');
    var noShipmentsMsg = document.getElementById('noClientShipmentsMessage');
    
    if (!shipmentsContainer) {
        console.log('Shipments container not found');
        return;
    }
    
    // Supabase'den shipments Ã§ek
    if (!supabase) {
        console.log('Supabase not available');
        return;
    }
    
    try {
        var clientId = currentUser || 'Fatma';
        var userEmail = currentUserEmail || localStorage.getItem('currentUserEmail');
        
        console.log('Loading shipments for client:', clientId);
        
        // Aktif shipment'larÄ± Ã§ek (completed hariÃ§)
        var result = await supabase
            .from('shipments')
            .select('*')
            .or('client_id.eq.' + clientId + ',client_id.eq.' + (userEmail ? userEmail.split('@')[0] : ''))
            .neq('status', 'completed')
            .order('created_at', { ascending: false });
        
        if (result.error) {
            console.log('Shipments load error:', result.error.message);
            return;
        }
        
        var shipments = result.data || [];
        console.log('Loaded shipments:', shipments.length);
        
        if (shipments.length === 0) {
            shipmentsContainer.innerHTML = '<div id="noClientShipmentsMessage" style="text-align: center; padding: 60px 20px;"><div style="width: 80px; height: 80px; background: #f1f5f9; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;"><svg width="40" height="40" fill="none" stroke="#94a3b8" stroke-width="1.5" viewBox="0 0 24 24"><path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/></svg></div><h3 style="margin: 0 0 10px; color: #1e293b;">No Active Shipments</h3><p style="color: #64748b; margin: 0;">Your shipments will appear here once you accept a quote.</p></div>';
            return;
        }
        
        // Status configuration
        var allStatuses = ['booked', 'confirmed', 'picked_up', 'in_transit', 'customs_clearance', 'delivered'];
        var statusLabels = {
            'booked': 'Booked',
            'confirmed': 'Confirmed', 
            'picked_up': 'Picked Up',
            'at_origin_port': 'At Origin',
            'in_transit': 'In Transit',
            'at_transit_port': 'Transit Port',
            'at_destination_port': 'At Destination',
            'customs_clearance': 'Customs',
            'out_for_delivery': 'Out for Delivery',
            'delivered': 'Delivered'
        };
        
        var statusColors = {
            'booked': '#3b82f6',
            'confirmed': '#6366f1',
            'picked_up': '#8b5cf6',
            'in_transit': '#f59e0b',
            'customs_clearance': '#06b6d4',
            'delivered': '#10b981'
        };
        
        // Shipments'Ä± render et
        var html = '';
        shipments.forEach(function(ship) {
            var currentStatus = ship.status || 'booked';
            var statusColor = statusColors[currentStatus] || '#3b82f6';
            var progressPercent = ship.progress_percent || 0;
            var currentStatusIndex = allStatuses.indexOf(currentStatus);
            if (currentStatusIndex === -1) currentStatusIndex = 0;
            
            html += '<div id="shipmentCard-' + ship.shipment_id + '" class="shipment-card" style="background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);">';
            
            // Header
            html += '<div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 20px;">';
            html += '<div>';
            html += '<h3 style="margin: 0 0 5px 0; color: #1e293b; font-size: 18px; font-weight: 600;">' + (ship.shipment_id || 'Shipment') + '</h3>';
            html += '<p style="margin: 0; color: #64748b; font-size: 14px;">Forwarder: <strong>' + (ship.forwarder_name || ship.forwarder_id || 'N/A') + '</strong></p>';
            html += '</div>';
            html += '<span id="clientStatus-' + ship.shipment_id + '" style="background: ' + statusColor + '; color: white; padding: 6px 14px; border-radius: 20px; font-size: 13px; font-weight: 500;">' + (statusLabels[currentStatus] || currentStatus) + '</span>';
            html += '</div>';
            
            // Route display
            html += '<div style="background: linear-gradient(135deg, #f8fafc, #f1f5f9); padding: 16px; border-radius: 12px; margin-bottom: 20px;">';
            html += '<div style="display: flex; align-items: center; justify-content: space-between;">';
            html += '<div style="text-align: left;"><span style="font-size: 11px; color: #94a3b8; text-transform: uppercase;">Origin</span><br><strong style="color: #1e293b;">' + (ship.origin || 'Origin') + '</strong></div>';
            html += '<div style="flex: 1; margin: 0 20px; position: relative;">';
            html += '<div style="height: 4px; background: #e2e8f0; border-radius: 2px;"><div id="clientProgress-' + ship.shipment_id + '" style="height: 100%; width: ' + progressPercent + '%; background: linear-gradient(90deg, #3b82f6, #10b981); border-radius: 2px;"></div></div>';
            html += '<div class="progress-marker" style="position: absolute; top: -10px; left: ' + progressPercent + '%; transform: translateX(-50%); width: 24px; height: 24px; background: white; border-radius: 50%; box-shadow: 0 2px 8px rgba(0,0,0,0.15); display: flex; align-items: center; justify-content: center;"><span style="font-size: 12px; color: #10b981; font-weight: bold;">&#8594;</span></div>';
            html += '</div>';
            html += '<div style="text-align: right;"><span style="font-size: 11px; color: #94a3b8; text-transform: uppercase;">Destination</span><br><strong style="color: #1e293b;">' + (ship.destination || 'Destination') + '</strong></div>';
            html += '</div>';
            html += '<div style="text-align: center; margin-top: 10px;"><span id="clientProgressText-' + ship.shipment_id + '" style="font-size: 13px; color: #10b981; font-weight: 600;">' + progressPercent + '% Complete</span></div>';
            html += '</div>';
            
            // Status Timeline
            html += '<div style="margin-bottom: 20px;">';
            html += '<h4 style="margin: 0 0 15px 0; font-size: 14px; color: #475569;">Shipment Progress</h4>';
            html += '<div style="display: flex; justify-content: space-between; position: relative;">';
            
            // Timeline line
            html += '<div style="position: absolute; top: 12px; left: 20px; right: 20px; height: 2px; background: #e2e8f0; z-index: 0;"></div>';
            html += '<div style="position: absolute; top: 12px; left: 20px; height: 2px; background: #10b981; z-index: 1; width: ' + (currentStatusIndex / (allStatuses.length - 1) * 100) + '%;"></div>';
            
            allStatuses.forEach(function(status, index) {
                var isCompleted = index <= currentStatusIndex;
                var isCurrent = index === currentStatusIndex;
                
                html += '<div style="text-align: center; z-index: 2; flex: 1;">';
                html += '<div style="width: 24px; height: 24px; border-radius: 50%; margin: 0 auto 8px; display: flex; align-items: center; justify-content: center; ';
                
                if (isCompleted) {
                    html += 'background: #10b981; color: white;';
                } else {
                    html += 'background: #e2e8f0; color: #94a3b8;';
                }
                
                if (isCurrent) {
                    html += 'box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2);';
                }
                
                html += '">';
                html += isCompleted ? 'âœ“' : (index + 1);
                html += '</div>';
                html += '<span style="font-size: 10px; color: ' + (isCompleted ? '#10b981' : '#94a3b8') + ';">' + statusLabels[status] + '</span>';
                html += '</div>';
            });
            
            html += '</div></div>';
            
            // Shipment Details Grid
            html += '<div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 20px;">';
            
            html += '<div style="background: #f8fafc; padding: 12px; border-radius: 8px; text-align: center;">';
            html += '<span style="font-size: 10px; color: #94a3b8; text-transform: uppercase; display: block; margin-bottom: 4px;">Location</span>';
            html += '<strong id="clientLocation-' + ship.shipment_id + '" style="font-size: 13px; color: #1e293b;">' + (ship.current_location || '-') + '</strong>';
            html += '</div>';
            
            html += '<div style="background: #f8fafc; padding: 12px; border-radius: 8px; text-align: center;">';
            html += '<span style="font-size: 10px; color: #94a3b8; text-transform: uppercase; display: block; margin-bottom: 4px;">ETA</span>';
            html += '<strong id="clientETA-' + ship.shipment_id + '" style="font-size: 13px; color: #1e293b;">' + (ship.eta ? new Date(ship.eta).toLocaleDateString('en-US', {month: 'short', day: 'numeric'}) : '-') + '</strong>';
            html += '</div>';
            
            html += '<div style="background: #f8fafc; padding: 12px; border-radius: 8px; text-align: center;">';
            html += '<span style="font-size: 10px; color: #94a3b8; text-transform: uppercase; display: block; margin-bottom: 4px;">Container</span>';
            html += '<strong id="clientContainer-' + ship.shipment_id + '" style="font-size: 13px; color: #1e293b;">' + (ship.container_type || '-') + '</strong>';
            html += '</div>';
            
            html += '<div style="background: #f8fafc; padding: 12px; border-radius: 8px; text-align: center;">';
            html += '<span style="font-size: 10px; color: #94a3b8; text-transform: uppercase; display: block; margin-bottom: 4px;">Value</span>';
            html += '<strong style="font-size: 13px; color: #059669;">$' + (ship.total_price ? Number(ship.total_price).toLocaleString() : '0') + '</strong>';
            html += '</div>';
            
            html += '</div>';
            
            // Last update note
            if (ship.last_update) {
                html += '<div style="background: #fffbeb; border: 1px solid #fcd34d; border-radius: 8px; padding: 12px;">';
                html += '<div style="display: flex; align-items: center; gap: 8px; margin-bottom: 6px;">';
                html += '<span style="font-size: 14px; color: #92400e; font-weight: bold;">*</span>';
                html += '<strong style="font-size: 12px; color: #92400e;">Latest Update</strong>';
                html += '<span id="clientNoteDate-' + ship.shipment_id + '" style="font-size: 11px; color: #b45309; margin-left: auto;">' + new Date(ship.last_update).toLocaleString() + '</span>';
                html += '</div>';
                html += '<p id="clientNoteText-' + ship.shipment_id + '" style="margin: 0; font-size: 13px; color: #78350f; line-height: 1.5;">Shipment is being tracked. Updates will appear here.</p>';
                html += '</div>';
            }
            
            // Last updated footer
            html += '<div id="clientLastUpdate-' + ship.shipment_id + '" style="text-align: center; font-size: 11px; color: #94a3b8; margin-top: 15px;">Last updated: ' + (ship.last_update ? new Date(ship.last_update).toLocaleString() : 'Not yet updated') + '</div>';
            
            html += '</div>';
        });
        
        shipmentsContainer.innerHTML = html;
        
    } catch(e) {
        console.log('Shipments load exception:', e.message);
    }
}

// Forwarder container takip tab deÄŸiÅŸtirme - removed, using Manage Shipments instead

function switchForwarderLookupTab(tab) {
    // Legacy function - no longer needed
}

// Forwarder container sorgulama
function forwarderLookupContainer() {
    var containerNo = document.getElementById('forwarderContainerInput').value.trim().toUpperCase();
    
    if (!containerNo) {
        showRateNotification('Warning: LÃ¼tfen container veya B/L numarasÄ± girin', 'error');
        return;
    }
    
    showRateNotification('AranÄ±yor: Konteyner sorgulanÄ±yor...', 'success');
    
    // Demo sonuÃ§ gÃ¶ster
    setTimeout(function() {
        document.getElementById('forwarderTrackingResult').style.display = 'block';
        document.getElementById('resultContainerNo').textContent = containerNo;
        
        // Carrier detect
        var prefix = containerNo.substring(0, 4);
        var carriers = {
            'MRKU': 'Maersk Line',
            'MAEU': 'Maersk Line',
            'MSCU': 'MSC',
            'MEDU': 'MSC',
            'CMAU': 'CMA CGM',
            'HLCU': 'Hapag-Lloyd',
            'COSU': 'COSCO',
            'EGLV': 'Evergreen',
            'ONEY': 'ONE',
            'ARKU': 'Arkas Line',
            'TRKU': 'Turkon Line'
        };
        document.getElementById('resultCarrier').textContent = carriers[prefix] || 'Bilinmeyen Hat';
        
        showRateNotification('Success: Container found!', 'success');
    }, 1500);
}

// HÄ±zlÄ± sorgulama
function quickLookup(containerNo) {
    document.getElementById('forwarderContainerInput').value = containerNo;
    forwarderLookupContainer();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  AKILLI LÄ°MAN ARAMA SÄ°STEMÄ°
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// DÃ¼nya limanlarÄ± veritabanÄ±
var worldPortsDB = [
    // TR - Turkey - Marmara
    { code: 'TRIST', name: 'Ä°stanbul (AmbarlÄ±)', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    { code: 'TRISP', name: 'Ä°stanbul (HaydarpaÅŸa)', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    { code: 'TRISK', name: 'Ä°stanbul (Kumport)', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    { code: 'TRISM', name: 'Ä°stanbul (Marport)', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    { code: 'TRGEM', name: 'Gemlik', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    { code: 'TRYAR', name: 'Yalova', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    { code: 'TRTEK', name: 'TekirdaÄŸ', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    { code: 'TRBND', name: 'Bandcomparison', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    { code: 'TRIZO', name: 'Ä°zmit', country: 'TÃ¼rkiye', flag: 'TR', region: 'Marmara' },
    // TR - Turkey - Ege
    { code: 'TRIZM', name: 'Ä°zmir', country: 'TÃ¼rkiye', flag: 'TR', region: 'Ege' },
    { code: 'TRALI', name: 'AliaÄŸa', country: 'TÃ¼rkiye', flag: 'TR', region: 'Ege' },
    { code: 'TRKUS', name: 'KuÅŸadasÄ±', country: 'TÃ¼rkiye', flag: 'TR', region: 'Ege' },
    { code: 'TRBOD', name: 'Bodrum', country: 'TÃ¼rkiye', flag: 'TR', region: 'Ege' },
    // TR - Turkey - Aksea
    { code: 'TRMER', name: 'Mersin', country: 'TÃ¼rkiye', flag: 'TR', region: 'Aksea' },
    { code: 'TRISD', name: 'Ä°skenderun', country: 'TÃ¼rkiye', flag: 'TR', region: 'Aksea' },
    { code: 'TRALA', name: 'Antalya', country: 'TÃ¼rkiye', flag: 'TR', region: 'Aksea' },
    // TR - Turkey - Karasea
    { code: 'TRSAM', name: 'Samsun', country: 'TÃ¼rkiye', flag: 'TR', region: 'Karasea' },
    { code: 'TRTRA', name: 'Trabzon', country: 'TÃ¼rkiye', flag: 'TR', region: 'Karasea' },
    { code: 'TRHOP', name: 'Hopa', country: 'TÃ¼rkiye', flag: 'TR', region: 'Karasea' },
    { code: 'TRZGD', name: 'Zonguldak', country: 'TÃ¼rkiye', flag: 'TR', region: 'Karasea' },
    // DE - Germany
    { code: 'DEHAM', name: 'Hamburg', country: 'Germany', flag: 'ğŸ‡©ğŸ‡ª', region: 'Kuzey Avrupa' },
    { code: 'DEBRV', name: 'Bremerhaven', country: 'Germany', flag: 'ğŸ‡©ğŸ‡ª', region: 'Kuzey Avrupa' },
    // NL - Hollanda
    { code: 'NLRTM', name: 'Rotterdam', country: 'Hollanda', flag: 'ğŸ‡³ğŸ‡±', region: 'Kuzey Avrupa' },
    { code: 'NLAMS', name: 'Amsterdam', country: 'Hollanda', flag: 'ğŸ‡³ğŸ‡±', region: 'Kuzey Avrupa' },
    // BE - BelÃ§ika
    { code: 'BEANR', name: 'Antwerp', country: 'BelÃ§ika', flag: 'ğŸ‡§ğŸ‡ª', region: 'Kuzey Avrupa' },
    { code: 'BEZEE', name: 'Zeebrugge', country: 'BelÃ§ika', flag: 'ğŸ‡§ğŸ‡ª', region: 'Kuzey Avrupa' },
    // GB - Ä°ngiltere
    { code: 'GBFXT', name: 'Felixstowe', country: 'Ä°ngiltere', flag: 'EN', region: 'Kuzey Avrupa' },
    { code: 'GBSOU', name: 'Southampton', country: 'Ä°ngiltere', flag: 'EN', region: 'Kuzey Avrupa' },
    { code: 'GBLGP', name: 'London Gateway', country: 'Ä°ngiltere', flag: 'EN', region: 'Kuzey Avrupa' },
    { code: 'GBLIV', name: 'Liverpool', country: 'Ä°ngiltere', flag: 'EN', region: 'Kuzey Avrupa' },
    // FR - Fransa
    { code: 'FRLEH', name: 'Le Havre', country: 'Fransa', flag: 'ğŸ‡«ğŸ‡·', region: 'Kuzey Avrupa' },
    { code: 'FRMAR', name: 'Marsilya', country: 'Fransa', flag: 'ğŸ‡«ğŸ‡·', region: 'GÃ¼ney Avrupa' },
    // ES - Ä°spanya
    { code: 'ESBCN', name: 'Barcelona', country: 'Ä°spanya', flag: 'ğŸ‡ªğŸ‡¸', region: 'GÃ¼ney Avrupa' },
    { code: 'ESVLC', name: 'Valencia', country: 'Ä°spanya', flag: 'ğŸ‡ªğŸ‡¸', region: 'GÃ¼ney Avrupa' },
    { code: 'ESALG', name: 'Algeciras', country: 'Ä°spanya', flag: 'ğŸ‡ªğŸ‡¸', region: 'GÃ¼ney Avrupa' },
    // IT - Ä°talya
    { code: 'ITGOA', name: 'Cenova', country: 'Ä°talya', flag: 'ğŸ‡®ğŸ‡¹', region: 'GÃ¼ney Avrupa' },
    { code: 'ITLIV', name: 'Livorno', country: 'Ä°talya', flag: 'ğŸ‡®ğŸ‡¹', region: 'GÃ¼ney Avrupa' },
    { code: 'ITNAP', name: 'Napoli', country: 'Ä°talya', flag: 'ğŸ‡®ğŸ‡¹', region: 'GÃ¼ney Avrupa' },
    { code: 'ITGIT', name: 'Gioia Tauro', country: 'Ä°talya', flag: 'ğŸ‡®ğŸ‡¹', region: 'GÃ¼ney Avrupa' },
    { code: 'ITTRS', name: 'Trieste', country: 'Ä°talya', flag: 'ğŸ‡®ğŸ‡¹', region: 'GÃ¼ney Avrupa' },
    // GR - Greece
    { code: 'GRPIR', name: 'Pire', country: 'Greece', flag: 'ğŸ‡¬ğŸ‡·', region: 'DoÄŸu Avrupa' },
    { code: 'GRTSK', name: 'Selanik', country: 'Greece', flag: 'ğŸ‡¬ğŸ‡·', region: 'DoÄŸu Avrupa' },
    // ğŸ‡·ğŸ‡´ Romanya
    { code: 'ROCND', name: 'KÃ¶stence', country: 'Romanya', flag: 'ğŸ‡·ğŸ‡´', region: 'Karasea' },
    // ğŸ‡§ğŸ‡¬ Bulgaristan
    { code: 'BGVAR', name: 'Varna', country: 'Bulgaristan', flag: 'ğŸ‡§ğŸ‡¬', region: 'Karasea' },
    // ğŸ‡ºğŸ‡¦ Ukrayna
    { code: 'UAODS', name: 'Odessa', country: 'Ukrayna', flag: 'ğŸ‡ºğŸ‡¦', region: 'Karasea' },
    // ğŸ‡·ğŸ‡º Rusya
    { code: 'RULED', name: 'St. Petersburg', country: 'Rusya', flag: 'ğŸ‡·ğŸ‡º', region: 'Kuzey Avrupa' },
    { code: 'RUNVS', name: 'Novorossiysk', country: 'Rusya', flag: 'ğŸ‡·ğŸ‡º', region: 'Karasea' },
    // ğŸ‡¬ğŸ‡ª GÃ¼rcistan
    { code: 'GETBS', name: 'Poti', country: 'GÃ¼rcistan', flag: 'ğŸ‡¬ğŸ‡ª', region: 'Karasea' },
    { code: 'GEBAT', name: 'Batum', country: 'GÃ¼rcistan', flag: 'ğŸ‡¬ğŸ‡ª', region: 'Karasea' },
    // CN - Ã‡in
    { code: 'CNSHA', name: 'Shanghai', country: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³', region: 'Uzak DoÄŸu' },
    { code: 'CNNGB', name: 'Ningbo', country: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³', region: 'Uzak DoÄŸu' },
    { code: 'CNSZX', name: 'Shenzhen', country: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³', region: 'Uzak DoÄŸu' },
    { code: 'CNYTN', name: 'Yantian', country: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³', region: 'Uzak DoÄŸu' },
    { code: 'CNQIN', name: 'Qingdao', country: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³', region: 'Uzak DoÄŸu' },
    { code: 'CNTXG', name: 'Tianjin', country: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³', region: 'Uzak DoÄŸu' },
    { code: 'CNXMN', name: 'Xiamen', country: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³', region: 'Uzak DoÄŸu' },
    { code: 'CNGUA', name: 'Guangzhou', country: 'Ã‡in', flag: 'ğŸ‡¨ğŸ‡³', region: 'Uzak DoÄŸu' },
    // ğŸ‡­ğŸ‡° Hong Kong
    { code: 'HKHKG', name: 'Hong Kong', country: 'Hong Kong', flag: 'ğŸ‡­ğŸ‡°', region: 'Uzak DoÄŸu' },
    // ğŸ‡¹ğŸ‡¼ Tayvan
    { code: 'TWKHH', name: 'Kaohsiung', country: 'Tayvan', flag: 'ğŸ‡¹ğŸ‡¼', region: 'Uzak DoÄŸu' },
    // ğŸ‡°ğŸ‡· GÃ¼ney Kore
    { code: 'KRPUS', name: 'Busan', country: 'GÃ¼ney Kore', flag: 'ğŸ‡°ğŸ‡·', region: 'Uzak DoÄŸu' },
    { code: 'KRINC', name: 'Incheon', country: 'GÃ¼ney Kore', flag: 'ğŸ‡°ğŸ‡·', region: 'Uzak DoÄŸu' },
    // ğŸ‡¯ğŸ‡µ Japonya
    { code: 'JPTYO', name: 'Tokyo', country: 'Japonya', flag: 'ğŸ‡¯ğŸ‡µ', region: 'Uzak DoÄŸu' },
    { code: 'JPYOK', name: 'Yokohama', country: 'Japonya', flag: 'ğŸ‡¯ğŸ‡µ', region: 'Uzak DoÄŸu' },
    { code: 'JPOSA', name: 'Osaka', country: 'Japonya', flag: 'ğŸ‡¯ğŸ‡µ', region: 'Uzak DoÄŸu' },
    // SG - Singapur
    { code: 'SGSIN', name: 'Singapur', country: 'Singapur', flag: 'ğŸ‡¸ğŸ‡¬', region: 'GÃ¼neydoÄŸu Asya' },
    // ğŸ‡²ğŸ‡¾ Malezya
    { code: 'MYPKG', name: 'Port Klang', country: 'Malezya', flag: 'ğŸ‡²ğŸ‡¾', region: 'GÃ¼neydoÄŸu Asya' },
    { code: 'MYTPP', name: 'Tanjung Pelepas', country: 'Malezya', flag: 'ğŸ‡²ğŸ‡¾', region: 'GÃ¼neydoÄŸu Asya' },
    // ğŸ‡¹ğŸ‡­ Tayland
    { code: 'THBKK', name: 'Bangkok', country: 'Tayland', flag: 'ğŸ‡¹ğŸ‡­', region: 'GÃ¼neydoÄŸu Asya' },
    // ğŸ‡»ğŸ‡³ Vietnam
    { code: 'VNSGN', name: 'Ho Chi Minh', country: 'Vietnam', flag: 'ğŸ‡»ğŸ‡³', region: 'GÃ¼neydoÄŸu Asya' },
    { code: 'VNHPH', name: 'Hai Phong', country: 'Vietnam', flag: 'ğŸ‡»ğŸ‡³', region: 'GÃ¼neydoÄŸu Asya' },
    // ğŸ‡®ğŸ‡© Endonezya
    { code: 'IDJKT', name: 'Jakarta', country: 'Endonezya', flag: 'ğŸ‡®ğŸ‡©', region: 'GÃ¼neydoÄŸu Asya' },
    // ğŸ‡µğŸ‡­ Filipinler
    { code: 'PHMNL', name: 'Manila', country: 'Filipinler', flag: 'ğŸ‡µğŸ‡­', region: 'GÃ¼neydoÄŸu Asya' },
    // IN - Hindistan
    { code: 'INNSA', name: 'Nair Sheva (Mumbai)', country: 'Hindistan', flag: 'ğŸ‡®ğŸ‡³', region: 'GÃ¼ney Asya' },
    { code: 'INMAA', name: 'Chennai', country: 'Hindistan', flag: 'ğŸ‡®ğŸ‡³', region: 'GÃ¼ney Asya' },
    { code: 'INMUN', name: 'Mundra', country: 'Hindistan', flag: 'ğŸ‡®ğŸ‡³', region: 'GÃ¼ney Asya' },
    // ğŸ‡±ğŸ‡° Sri Lanka
    { code: 'LKCMB', name: 'Kolombo', country: 'Sri Lanka', flag: 'ğŸ‡±ğŸ‡°', region: 'GÃ¼ney Asya' },
    // ğŸ‡µğŸ‡° Pakistan
    { code: 'PKKAR', name: 'KaraÃ§i', country: 'Pakistan', flag: 'ğŸ‡µğŸ‡°', region: 'GÃ¼ney Asya' },
    // AE - BAE
    { code: 'AEJEA', name: 'Jebel Ali (Dubai)', country: 'BAE', flag: 'ğŸ‡¦ğŸ‡ª', region: 'Orta DoÄŸu' },
    { code: 'AEAUH', name: 'Abu Dabi', country: 'BAE', flag: 'ğŸ‡¦ğŸ‡ª', region: 'Orta DoÄŸu' },
    // SA - Suudi Arabistan
    { code: 'SAJED', name: 'Jeddah', country: 'Suudi Arabistan', flag: 'ğŸ‡¸ğŸ‡¦', region: 'Orta DoÄŸu' },
    { code: 'SADMM', name: 'Dammam', country: 'Suudi Arabistan', flag: 'ğŸ‡¸ğŸ‡¦', region: 'Orta DoÄŸu' },
    // ğŸ‡¶ğŸ‡¦ Katar
    { code: 'QADOH', name: 'Doha', country: 'Katar', flag: 'ğŸ‡¶ğŸ‡¦', region: 'Orta DoÄŸu' },
    // ğŸ‡´ğŸ‡² Umman
    { code: 'OMSLL', name: 'Salalah', country: 'Umman', flag: 'ğŸ‡´ğŸ‡²', region: 'Orta DoÄŸu' },
    // ğŸ‡¯ğŸ‡´ ÃœrdÃ¼n
    { code: 'JOAQJ', name: 'Akabe', country: 'ÃœrdÃ¼n', flag: 'ğŸ‡¯ğŸ‡´', region: 'Orta DoÄŸu' },
    // ğŸ‡®ğŸ‡· Ä°ran
    { code: 'IRBND', name: 'Bandar Abbas', country: 'Ä°ran', flag: 'ğŸ‡®ğŸ‡·', region: 'Orta DoÄŸu' },
    // ğŸ‡®ğŸ‡¶ Irak
    { code: 'IQBSR', name: 'Basra', country: 'Irak', flag: 'ğŸ‡®ğŸ‡¶', region: 'Orta DoÄŸu' },
    { code: 'IQUMQ', name: 'Umm Qasr', country: 'Irak', flag: 'ğŸ‡®ğŸ‡¶', region: 'Orta DoÄŸu' },
    // ğŸ‡ªğŸ‡¬ MÄ±sÄ±r
    { code: 'EGPSD', name: 'Port Said', country: 'MÄ±sÄ±r', flag: 'ğŸ‡ªğŸ‡¬', region: 'Kuzey Afrika' },
    { code: 'EGALY', name: 'Ä°skenderiye', country: 'MÄ±sÄ±r', flag: 'ğŸ‡ªğŸ‡¬', region: 'Kuzey Afrika' },
    // ğŸ‡²ğŸ‡¦ Fas
    { code: 'MATNG', name: 'Tanca', country: 'Fas', flag: 'ğŸ‡²ğŸ‡¦', region: 'Kuzey Afrika' },
    { code: 'MACAS', name: 'Casablanca', country: 'Fas', flag: 'ğŸ‡²ğŸ‡¦', region: 'Kuzey Afrika' },
    // ğŸ‡©ğŸ‡¿ Cezayir
    { code: 'DZALG', name: 'Cezayir', country: 'Cezayir', flag: 'ğŸ‡©ğŸ‡¿', region: 'Kuzey Afrika' },
    // ğŸ‡¹ğŸ‡³ Tunus
    { code: 'TNTON', name: 'Tunus', country: 'Tunus', flag: 'ğŸ‡¹ğŸ‡³', region: 'Kuzey Afrika' },
    // ğŸ‡³ğŸ‡¬ Nijerya
    { code: 'NGLOS', name: 'Lagos', country: 'Nijerya', flag: 'ğŸ‡³ğŸ‡¬', region: 'BatÄ± Afrika' },
    // ğŸ‡¬ğŸ‡­ Gana
    { code: 'GHACC', name: 'Tema', country: 'Gana', flag: 'ğŸ‡¬ğŸ‡­', region: 'BatÄ± Afrika' },
    // ğŸ‡°ğŸ‡ª Kenya
    { code: 'KEMBA', name: 'Mombasa', country: 'Kenya', flag: 'ğŸ‡°ğŸ‡ª', region: 'DoÄŸu Afrika' },
    // ğŸ‡¿ğŸ‡¦ GÃ¼ney Afrika
    { code: 'ZADUR', name: 'Durban', country: 'GÃ¼ney Afrika', flag: 'ğŸ‡¿ğŸ‡¦', region: 'GÃ¼ney Afrika' },
    { code: 'ZACPT', name: 'Cape Town', country: 'GÃ¼ney Afrika', flag: 'ğŸ‡¿ğŸ‡¦', region: 'GÃ¼ney Afrika' },
    // US - ABD
    { code: 'USNYC', name: 'New York', country: 'ABD', flag: 'ğŸ‡ºğŸ‡¸', region: 'Kuzey Amerika' },
    { code: 'USLAX', name: 'Los Angeles', country: 'ABD', flag: 'ğŸ‡ºğŸ‡¸', region: 'Kuzey Amerika' },
    { code: 'USLGB', name: 'Long Beach', country: 'ABD', flag: 'ğŸ‡ºğŸ‡¸', region: 'Kuzey Amerika' },
    { code: 'USSAV', name: 'Savannah', country: 'ABD', flag: 'ğŸ‡ºğŸ‡¸', region: 'Kuzey Amerika' },
    { code: 'USHOU', name: 'Houston', country: 'ABD', flag: 'ğŸ‡ºğŸ‡¸', region: 'Kuzey Amerika' },
    { code: 'USMIA', name: 'Miami', country: 'ABD', flag: 'ğŸ‡ºğŸ‡¸', region: 'Kuzey Amerika' },
    { code: 'USSEA', name: 'Seattle', country: 'ABD', flag: 'ğŸ‡ºğŸ‡¸', region: 'Kuzey Amerika' },
    // ğŸ‡¨ğŸ‡¦ Kanada
    { code: 'CAMTR', name: 'Montreal', country: 'Kanada', flag: 'ğŸ‡¨ğŸ‡¦', region: 'Kuzey Amerika' },
    { code: 'CAVAN', name: 'Vancouver', country: 'Kanada', flag: 'ğŸ‡¨ğŸ‡¦', region: 'Kuzey Amerika' },
    // ğŸ‡²ğŸ‡½ Meksika
    { code: 'MXVER', name: 'Veracruz', country: 'Meksika', flag: 'ğŸ‡²ğŸ‡½', region: 'Kuzey Amerika' },
    { code: 'MXMZL', name: 'Manzanillo', country: 'Meksika', flag: 'ğŸ‡²ğŸ‡½', region: 'Kuzey Amerika' },
    // ğŸ‡µğŸ‡¦ Panama
    { code: 'PAPTY', name: 'Panama City', country: 'Panama', flag: 'ğŸ‡µğŸ‡¦', region: 'Orta Amerika' },
    { code: 'PACOL', name: 'Colon', country: 'Panama', flag: 'ğŸ‡µğŸ‡¦', region: 'Orta Amerika' },
    // ğŸ‡§ğŸ‡· Brezilya
    { code: 'BRSTS', name: 'Santos', country: 'Brezilya', flag: 'ğŸ‡§ğŸ‡·', region: 'GÃ¼ney Amerika' },
    { code: 'BRRIO', name: 'Rio de Janeiro', country: 'Brezilya', flag: 'ğŸ‡§ğŸ‡·', region: 'GÃ¼ney Amerika' },
    // ğŸ‡¦ğŸ‡· Arjantin
    { code: 'ARBUE', name: 'Buenos Aires', country: 'Arjantin', flag: 'ğŸ‡¦ğŸ‡·', region: 'GÃ¼ney Amerika' },
    // ğŸ‡¨ğŸ‡± Åili
    { code: 'CLVAP', name: 'Valparaiso', country: 'Åili', flag: 'ğŸ‡¨ğŸ‡±', region: 'GÃ¼ney Amerika' },
    // ğŸ‡¦ğŸ‡º Avustralya
    { code: 'AUSYD', name: 'Sidney', country: 'Avustralya', flag: 'ğŸ‡¦ğŸ‡º', region: 'Okyanusya' },
    { code: 'AUMEL', name: 'Melbourne', country: 'Avustralya', flag: 'ğŸ‡¦ğŸ‡º', region: 'Okyanusya' },
    // ğŸ‡³ğŸ‡¿ Yeni Zelanda
    { code: 'NZAKL', name: 'Auckland', country: 'Yeni Zelanda', flag: 'ğŸ‡³ğŸ‡¿', region: 'Okyanusya' }
];

// Liman arama sonuÃ§larÄ±nÄ± gÃ¶ster
function showPortResults(type) {
    var resultsEl = document.getElementById(type + 'PortResults');
    filterPorts(type);
    resultsEl.classList.add('show');
}

// Liman arama sonuÃ§larÄ±nÄ± gizle
function hidePortResults(type) {
    setTimeout(function() {
        var resultsEl = document.getElementById(type + 'PortResults');
        if (resultsEl) resultsEl.classList.remove('show');
    }, 200);
}

// LimanlarÄ± filtrele
function filterPorts(type) {
    var inputEl = document.getElementById('liveRate' + (type === 'origin' ? 'Origin' : 'Dest') + 'Input');
    var resultsEl = document.getElementById(type + 'PortResults');
    var query = inputEl.value.toLowerCase().trim();
    
    var filtered = worldPortsDB.filter(function(port) {
        return port.name.toLowerCase().includes(query) ||
               port.country.toLowerCase().includes(query) ||
               port.code.toLowerCase().includes(query) ||
               port.region.toLowerCase().includes(query);
    });
    
    // Ä°lk 20 sonuÃ§
    filtered = filtered.slice(0, 20);
    
    // SonuÃ§larÄ± grupla
    var grouped = {};
    filtered.forEach(function(port) {
        if (!grouped[port.region]) grouped[port.region] = [];
        grouped[port.region].push(port);
    });
    
    var html = '';
    for (var region in grouped) {
        html += '<div class="port-result-group">' + region + '</div>';
        grouped[region].forEach(function(port) {
            var highlightedName = port.name;
            if (query) {
                var regex = new RegExp('(' + query + ')', 'gi');
                highlightedName = port.name.replace(regex, '<mark>$1</mark>');
            }
            html += '<div class="port-result-item" onclick="selectPort(\'' + type + '\', \'' + port.code + '\', \'' + port.name + '\', \'' + port.country + '\', \'' + port.flag + '\')">';
            html += '<span class="port-flag">' + port.flag + '</span>';
            html += '<div class="port-info">';
            html += '<div class="port-name">' + highlightedName + '</div>';
            html += '<div class="port-country">' + port.country + '</div>';
            html += '</div>';
            html += '<span class="port-code">' + port.code + '</span>';
            html += '</div>';
        });
    }
    
    if (filtered.length === 0) {
        html = '<div class="port-result-item"><div class="port-info"><div class="port-name">SonuÃ§ bulunamadÄ±</div><div class="port-country">FarklÄ± bir arama deneyin</div></div></div>';
    }
    
    resultsEl.innerHTML = html;
}

// Liman seÃ§
function selectPort(type, code, name, country, flag) {
    var inputEl = document.getElementById('liveRate' + (type === 'origin' ? 'Origin' : 'Dest') + 'Input');
    var hiddenEl = document.getElementById('liveRate' + (type === 'origin' ? 'Origin' : 'Dest'));
    var badgeEl = document.getElementById(type + 'SelectedBadge');
    var flagEl = document.getElementById(type + 'BadgeFlag');
    var textEl = document.getElementById(type + 'BadgeText');
    var resultsEl = document.getElementById(type + 'PortResults');
    
    inputEl.value = '';
    inputEl.placeholder = name + ', ' + country;
    hiddenEl.value = code;
    flagEl.textContent = flag;
    textEl.textContent = name + ', ' + country;
    badgeEl.classList.add('show');
    resultsEl.classList.remove('show');
}

// Liman seÃ§imini temizle
function clearPortSelection(type) {
    var inputEl = document.getElementById('liveRate' + (type === 'origin' ? 'Origin' : 'Dest') + 'Input');
    var hiddenEl = document.getElementById('liveRate' + (type === 'origin' ? 'Origin' : 'Dest'));
    var badgeEl = document.getElementById(type + 'SelectedBadge');
    
    inputEl.value = '';
    inputEl.placeholder = type === 'origin' ? 'Liman ara... (Ã¶rn: Ä°stanbul, Hamburg)' : 'Liman ara... (Ã¶rn: Rotterdam, Shanghai)';
    hiddenEl.value = '';
    badgeEl.classList.remove('show');
    inputEl.focus();
}

// Sayfa dÄ±ÅŸÄ±na tÄ±klayÄ±nca kapat
document.addEventListener('click', function(e) {
    if (!e.target.closest('.port-autocomplete')) {
        var results = document.querySelectorAll('.port-autocomplete-results');
        results.forEach(function(r) { r.classList.remove('show'); });
    }
});

// CanlÄ± hat ratelarÄ± veritabanÄ± (demo - gerÃ§ek API entegrasyonu iÃ§in Freightos/Xeneta gerekir)
var liveRatesDB = {
    carriers: [
        { id: 'maersk', name: 'Maersk Line', logo: 'MAERSK', color: 'maersk', service: 'AE1 Service' },
        { id: 'msc', name: 'MSC', logo: 'MSC', color: 'msc', service: 'North Europe Express' },
        { id: 'cmacgm', name: 'CMA CGM', logo: 'CMA CGM', color: 'cmacgm', service: 'EUROSAL XL' },
        { id: 'hapag', name: 'Hapag-Lloyd', logo: 'HAPAG', color: 'hapag', service: 'ME1 Express' },
        { id: 'evergreen', name: 'Evergreen', logo: 'EVERGREEN', color: 'evergreen', service: 'CEM Service' },
        { id: 'one', name: 'Ocean Network Express', logo: 'ONE', color: 'one', service: 'FE4 Loop' },
        { id: 'arkas', name: 'Arkas Line', logo: 'ARKAS', color: 'arkas', service: 'Turkey Express' },
        { id: 'turkon', name: 'Turkon Line', logo: 'TURKON', color: 'turkon', service: 'Black Sea Med' }
    ],
    // Konteyner tipi Ã§arpanlarÄ±
    containerMultiplier: {
        '20DC': 0.55,
        '40DC': 0.85,
        '40HC': 1.0,
        '45HC': 1.15,
        '20RF': 1.8,
        '40RF': 2.2,
        '20OT': 1.4,
        '40OT': 1.6,
        '20FR': 1.5,
        '40FR': 1.7,
        '20TK': 2.0
    },
    // BÃ¶lge bazlÄ± temel ratelar (40'HC iÃ§in USD)
    regionRates: {
        'northEurope': { base: 1650, transit: 18 },
        'southEurope': { base: 1450, transit: 12 },
        'eastEurope': { base: 1250, transit: 8 },
        'farEast': { base: 2400, transit: 28 },
        'seAsia': { base: 2100, transit: 24 },
        'southAsia': { base: 1800, transit: 20 },
        'middleEast': { base: 1100, transit: 10 },
        'northAfrica': { base: 950, transit: 6 },
        'westAfrica': { base: 2200, transit: 22 },
        'southAfrica': { base: 2800, transit: 26 },
        'eastAfrica': { base: 1600, transit: 14 },
        'northAmerica': { base: 3200, transit: 24 },
        'centralAmerica': { base: 3500, transit: 28 },
        'southAmerica': { base: 3800, transit: 32 },
        'oceania': { base: 4200, transit: 35 }
    }
};

// Liman bÃ¶lge eÅŸleÅŸtirmesi
var portRegions = {
    // Kuzey Avrupa
    'DEHAM': 'northEurope', 'DEBRV': 'northEurope', 'NLRTM': 'northEurope', 'NLAMS': 'northEurope',
    'BEANR': 'northEurope', 'BEZEE': 'northEurope', 'GBFXT': 'northEurope', 'GBSOU': 'northEurope',
    'GBLGP': 'northEurope', 'GBLIV': 'northEurope', 'FRLEH': 'northEurope', 'FRDKK': 'northEurope',
    'PLGDN': 'northEurope', 'PLGDY': 'northEurope', 'DKAAR': 'northEurope', 'DKCPH': 'northEurope',
    'SEGOT': 'northEurope', 'NOOSL': 'northEurope', 'FIHEL': 'northEurope',
    // GÃ¼ney Avrupa
    'FRMAR': 'southEurope', 'ESBCN': 'southEurope', 'ESVLC': 'southEurope', 'ESALG': 'southEurope',
    'ESBIO': 'southEurope', 'PTLIS': 'southEurope', 'ITGOA': 'southEurope', 'ITLIV': 'southEurope',
    'ITNAP': 'southEurope', 'ITGIT': 'southEurope', 'ITTRS': 'southEurope', 'ITVEN': 'southEurope',
    'MTMLA': 'southEurope', 'SIKOP': 'southEurope', 'HRRJK': 'southEurope',
    // DoÄŸu Avrupa & Karasea
    'GRPIR': 'eastEurope', 'GRTSK': 'eastEurope', 'ROCND': 'eastEurope', 'BGVAR': 'eastEurope',
    'BGBOJ': 'eastEurope', 'UAODS': 'eastEurope', 'RULED': 'eastEurope', 'RUNVS': 'eastEurope',
    'GETBS': 'eastEurope', 'GEBAT': 'eastEurope',
    // Uzak DoÄŸu
    'CNSHA': 'farEast', 'CNNGB': 'farEast', 'CNSZX': 'farEast', 'CNYTN': 'farEast',
    'CNQIN': 'farEast', 'CNTXG': 'farEast', 'CNXMN': 'farEast', 'CNGUA': 'farEast',
    'HKHKG': 'farEast', 'TWKHH': 'farEast', 'TWTPE': 'farEast', 'KRPUS': 'farEast',
    'KRINC': 'farEast', 'JPTYO': 'farEast', 'JPYOK': 'farEast', 'JPOSA': 'farEast', 'JPKOB': 'farEast',
    // GÃ¼neydoÄŸu Asya
    'SGSIN': 'seAsia', 'MYPKG': 'seAsia', 'MYTPP': 'seAsia', 'THBKK': 'seAsia',
    'VNSGN': 'seAsia', 'VNHPH': 'seAsia', 'IDJKT': 'seAsia', 'IDTPP': 'seAsia', 'PHMNL': 'seAsia',
    // GÃ¼ney Asya
    'INNSA': 'southAsia', 'INMAA': 'southAsia', 'INMUN': 'southAsia', 'INCCU': 'southAsia',
    'INBLR': 'southAsia', 'LKCMB': 'southAsia', 'PKKAR': 'southAsia', 'BDCGP': 'southAsia',
    // Orta DoÄŸu
    'AEJEA': 'middleEast', 'AEAUH': 'middleEast', 'AESHJ': 'middleEast', 'SAJED': 'middleEast',
    'SADMM': 'middleEast', 'KWKWI': 'middleEast', 'BHKBS': 'middleEast', 'QADOH': 'middleEast',
    'OMSLL': 'middleEast', 'OMMCT': 'middleEast', 'JOAQJ': 'middleEast', 'IRBND': 'middleEast',
    'IQBSR': 'middleEast', 'IQUMQ': 'middleEast',
    // Kuzey Afrika
    'EGPSD': 'northAfrica', 'EGALY': 'northAfrica', 'EGDAM': 'northAfrica', 'EGSOQ': 'northAfrica',
    'MATNG': 'northAfrica', 'MACAS': 'northAfrica', 'DZALG': 'northAfrica', 'TNTON': 'northAfrica',
    'LYTIP': 'northAfrica', 'LYBEN': 'northAfrica',
    // BatÄ± Afrika
    'NGLOS': 'westAfrica', 'NGAPN': 'westAfrica', 'GHACC': 'westAfrica', 'CIABJ': 'westAfrica',
    'SNDKR': 'westAfrica', 'AOLAD': 'westAfrica',
    // DoÄŸu Afrika
    'KEMBA': 'eastAfrica', 'TZDAR': 'eastAfrica', 'MZMPZ': 'eastAfrica', 'DJJIB': 'eastAfrica',
    // GÃ¼ney Afrika
    'ZADUR': 'southAfrica', 'ZACPT': 'southAfrica', 'ZAPLZ': 'southAfrica',
    // Kuzey Amerika
    'USNYC': 'northAmerica', 'USNWK': 'northAmerica', 'USLAX': 'northAmerica', 'USLGB': 'northAmerica',
    'USSAV': 'northAmerica', 'USHOU': 'northAmerica', 'USMIA': 'northAmerica', 'USSEA': 'northAmerica',
    'USOAK': 'northAmerica', 'USBOS': 'northAmerica', 'USBAL': 'northAmerica', 'USPHL': 'northAmerica',
    'USCHS': 'northAmerica', 'CAMTR': 'northAmerica', 'CATOR': 'northAmerica', 'CAVAN': 'northAmerica',
    'CAHAL': 'northAmerica', 'MXVER': 'northAmerica', 'MXMZL': 'northAmerica',
    // Orta Amerika
    'PAPTY': 'centralAmerica', 'PACOL': 'centralAmerica', 'JMKIN': 'centralAmerica',
    'DOSDQ': 'centralAmerica', 'PRSJU': 'centralAmerica', 'BSFPO': 'centralAmerica',
    // GÃ¼ney Amerika
    'BRSTS': 'southAmerica', 'BRRIO': 'southAmerica', 'BRPNG': 'southAmerica', 'BRITJ': 'southAmerica',
    'ARBUE': 'southAmerica', 'CLSAI': 'southAmerica', 'CLVAP': 'southAmerica', 'PECLL': 'southAmerica',
    'ECGYE': 'southAmerica', 'COBUN': 'southAmerica', 'COCTG': 'southAmerica', 'UYMVD': 'southAmerica',
    // Okyanusya
    'AUSYD': 'oceania', 'AUMEL': 'oceania', 'AUBNE': 'oceania', 'AUFRE': 'oceania',
    'NZAKL': 'oceania', 'NZWLG': 'oceania', 'PGPOM': 'oceania', 'FJSUV': 'oceania'
};

// Liman isimleri
var portNames = {
    // TÃ¼rkiye - Marmara
    'TRIST': 'Ä°stanbul (AmbarlÄ±)', 'TRISP': 'Ä°stanbul (HaydarpaÅŸa)', 'TRISK': 'Ä°stanbul (Kumport)',
    'TRISM': 'Ä°stanbul (Marport)', 'TRTUZ': 'Tuzla', 'TRGEM': 'Gemlik', 'TRYAR': 'Yalova',
    'TRMUD': 'Mudanya', 'TRTEK': 'TekirdaÄŸ', 'TRBND': 'Bandcomparison', 'TRKRB': 'Karabiga',
    'TRERD': 'Erdek', 'TRIZO': 'Ä°zmit', 'TRKOC': 'Kocaeli',
    // TÃ¼rkiye - Ege
    'TRIZM': 'Ä°zmir', 'TRALI': 'AliaÄŸa', 'TRDIK': 'Dikili', 'TRCES': 'Ã‡eÅŸme',
    'TRKUS': 'KuÅŸadasÄ±', 'TRBOD': 'Bodrum', 'TRFET': 'Fethiye', 'TRMAR': 'Marmaris', 'TRDAT': 'DatÃ§a',
    // TÃ¼rkiye - Aksea
    'TRMER': 'Mersin', 'TRALA': 'Antalya', 'TRTAS': 'TaÅŸucu', 'TRCEY': 'Ceyhan',
    'TRFIN': 'Finike', 'TRKAS': 'KaÅŸ', 'TRSID': 'Side',
    // TÃ¼rkiye - Karasea
    'TRSAM': 'Samsun', 'TRTRA': 'Trabzon', 'TRRIZ': 'Rize', 'TRHOP': 'Hopa',
    'TRGIR': 'Giresun', 'TRORD': 'Ordu', 'TRSNO': 'Sinop', 'TRZGD': 'Zonguldak',
    'TRERE': 'EreÄŸli', 'TRFIL': 'Filyos', 'TRBAR': 'BartÄ±n', 'TRKRM': 'Karasu',
    'TRFAT': 'Fatsa', 'TRUNK': 'Ãœnye',
    // Avrupa
    'DEHAM': 'Hamburg', 'DEBRV': 'Bremerhaven', 'NLRTM': 'Rotterdam', 'NLAMS': 'Amsterdam',
    'BEANR': 'Antwerp', 'BEZEE': 'Zeebrugge', 'GBFXT': 'Felixstowe', 'GBSOU': 'Southampton',
    'GBLGP': 'London Gateway', 'GBLIV': 'Liverpool', 'FRLEH': 'Le Havre', 'FRDKK': 'Dunkirk',
    'FRMAR': 'Marsilya', 'ESBCN': 'Barcelona', 'ESVLC': 'Valencia', 'ESALG': 'Algeciras',
    'ESBIO': 'Bilbao', 'PTLIS': 'Lizbon', 'ITGOA': 'Cenova', 'ITLIV': 'Livorno',
    'ITNAP': 'Napoli', 'ITGIT': 'Gioia Tauro', 'ITTRS': 'Trieste', 'ITVEN': 'Venedik',
    'MTMLA': 'Malta', 'SIKOP': 'Koper', 'HRRJK': 'Rijeka', 'GRPIR': 'Pire',
    'GRTSK': 'Selanik', 'ROCND': 'KÃ¶stence', 'BGVAR': 'Varna', 'BGBOJ': 'Burgaz',
    'UAODS': 'Odessa', 'RULED': 'St. Petersburg', 'RUNVS': 'Novorossiysk',
    'GETBS': 'Poti', 'GEBAT': 'Batum', 'PLGDN': 'Gdansk', 'PLGDY': 'Gdynia',
    'DKAAR': 'Aarhus', 'DKCPH': 'Kopenhag', 'SEGOT': 'Gothenburg', 'NOOSL': 'Oslo', 'FIHEL': 'Helsinki',
    // Asya
    'CNSHA': 'Shanghai', 'CNNGB': 'Ningbo', 'CNSZX': 'Shenzhen', 'CNYTN': 'Yantian',
    'CNQIN': 'Qingdao', 'CNTXG': 'Tianjin', 'CNXMN': 'Xiamen', 'CNGUA': 'Guangzhou',
    'HKHKG': 'Hong Kong', 'TWKHH': 'Kaohsiung', 'TWTPE': 'Taipei', 'KRPUS': 'Busan',
    'KRINC': 'Incheon', 'JPTYO': 'Tokyo', 'JPYOK': 'Yokohama', 'JPOSA': 'Osaka', 'JPKOB': 'Kobe',
    'SGSIN': 'Singapur', 'MYPKG': 'Port Klang', 'MYTPP': 'Tanjung Pelepas', 'THBKK': 'Bangkok',
    'VNSGN': 'Ho Chi Minh', 'VNHPH': 'Hai Phong', 'IDJKT': 'Jakarta', 'IDTPP': 'Tanjung Priok',
    'PHMNL': 'Manila', 'INNSA': 'Nair Sheva', 'INMAA': 'Chennai', 'INMUN': 'Mundra',
    'INCCU': 'KalkÃ¼ta', 'INBLR': 'Bangalore', 'LKCMB': 'Kolombo', 'PKKAR': 'KaraÃ§i', 'BDCGP': 'Chittagong',
    // Orta DoÄŸu
    'AEJEA': 'Jebel Ali', 'AEAUH': 'Abu Dabi', 'AESHJ': 'Sharjah', 'SAJED': 'Jeddah',
    'SADMM': 'Dammam', 'KWKWI': 'Kuveyt', 'BHKBS': 'Bahreyn', 'QADOH': 'Doha',
    'OMSLL': 'Salalah', 'OMMCT': 'Muskat', 'JOAQJ': 'Akabe', 'IRBND': 'Bandar Abbas',
    'IQBSR': 'Basra', 'IQUMQ': 'Umm Qasr',
    // Afrika
    'EGPSD': 'Port Said', 'EGALY': 'Ä°skenderiye', 'EGDAM': 'Damietta', 'EGSOQ': 'Sokhna',
    'MATNG': 'Tanca', 'MACAS': 'Casablanca', 'DZALG': 'Cezayir', 'TNTON': 'Tunus',
    'LYTIP': 'Trablus', 'LYBEN': 'Bingazi', 'NGLOS': 'Lagos', 'NGAPN': 'Apapa',
    'GHACC': 'Tema', 'CIABJ': 'Abidjan', 'SNDKR': 'Dakar', 'AOLAD': 'Luanda',
    'KEMBA': 'Mombasa', 'TZDAR': 'DarÃ¼sselam', 'MZMPZ': 'Maputo', 'DJJIB': 'Cibuti',
    'ZADUR': 'Durban', 'ZACPT': 'Cape Town', 'ZAPLZ': 'Port Elizabeth',
    // Amerika
    'USNYC': 'New York', 'USNWK': 'Newark', 'USLAX': 'Los Angeles', 'USLGB': 'Long Beach',
    'USSAV': 'Savannah', 'USHOU': 'Houston', 'USMIA': 'Miami', 'USSEA': 'Seattle',
    'USOAK': 'Oakland', 'USBOS': 'Boston', 'USBAL': 'Baltimore', 'USPHL': 'Philadelphia',
    'USCHS': 'Charleston', 'CAMTR': 'Montreal', 'CATOR': 'Toronto', 'CAVAN': 'Vancouver',
    'CAHAL': 'Halifax', 'MXVER': 'Veracruz', 'MXMZL': 'Manzanillo',
    'PAPTY': 'Panama', 'PACOL': 'Colon', 'JMKIN': 'Kingston', 'DOSDQ': 'Santo Domingo',
    'PRSJU': 'San Juan', 'BSFPO': 'Freeport', 'BRSTS': 'Santos', 'BRRIO': 'Rio de Janeiro',
    'BRPNG': 'Paranagua', 'BRITJ': 'ItajaÃ­', 'ARBUE': 'Buenos Aires', 'CLSAI': 'San Antonio',
    'CLVAP': 'Valparaiso', 'PECLL': 'Callao', 'ECGYE': 'Guayaquil', 'COBUN': 'Buenaventura',
    'COCTG': 'Cartagena', 'UYMVD': 'Montevideo',
    // Okyanusya
    'AUSYD': 'Sidney', 'AUMEL': 'Melbourne', 'AUBNE': 'Brisbane', 'AUFRE': 'Fremantle',
    'NZAKL': 'Auckland', 'NZWLG': 'Wellington', 'PGPOM': 'Port Moresby', 'FJSUV': 'Suva'
};

// CanlÄ± hat ratelarÄ±nÄ± ara
function searchLiveRates() {
    var origin = document.getElementById('liveRateOrigin').value;
    var dest = document.getElementById('liveRateDest').value;
    var container = document.getElementById('liveRateContainer').value;
    
    if (!origin || !dest) {
        showRateNotification('Warning: LÃ¼tfen kalkÄ±ÅŸ ve varÄ±ÅŸ limanÄ± seÃ§in', 'error');
        return;
    }
    
    showRateNotification('AranÄ±yor: Hat ratelarÄ± aranÄ±yor...', 'success');
    
    // SonuÃ§larÄ± oluÅŸtur
    setTimeout(function() {
        // BÃ¶lge bazlÄ± rate al
        var region = portRegions[dest] || 'northEurope';
        var routeData = liveRatesDB.regionRates[region] || { base: 1800, transit: 20 };
        
        var multiplier = liveRatesDB.containerMultiplier[container] || 1.0;
        var originName = portNames[origin] || origin;
        var destName = portNames[dest] || dest;
        
        // BaÅŸlÄ±k gÃ¼ncelle
        var headerEl = document.querySelector('#liveRatesResults .rates-result-header h3');
        var dateEl = document.querySelector('#liveRatesResults .result-date');
        if (headerEl) headerEl.innerHTML = '' + originName + ' â†’ ' + destName + ' | ' + container;
        if (dateEl) dateEl.textContent = 'AralÄ±k 2025 GÃ¼ncel Fiyatlar';
        
        // KartlarÄ± oluÅŸtur
        var gridEl = document.querySelector('#liveRatesResults .carrier-rates-grid');
        if (!gridEl) return;
        
        var prices = [];
        var html = '';
        
        liveRatesDB.carriers.forEach(function(carrier, idx) {
            // Her hat iÃ§in farklÄ± rate hesapla (rastgele varyasyon)
            var variation = 0.88 + (Math.random() * 0.28); // %88 - %116 arasÄ±
            var transitVar = Math.floor(routeData.transit * (0.9 + Math.random() * 0.25));
            var price = Math.round(routeData.base * multiplier * variation);
            
            // Arkas ve Turkon iÃ§in Ã¶zel indirim (TÃ¼rk firmalarÄ± - yakÄ±n bÃ¶lgelerde avantajlÄ±)
            if (carrier.id === 'arkas' || carrier.id === 'turkon') {
                if (region === 'southEurope' || region === 'eastEurope' || region === 'northAfrica' || region === 'middleEast') {
                    price = Math.round(price * 0.88); // %12 indirimli (yakÄ±n bÃ¶lgeler)
                    transitVar = Math.max(transitVar - 2, routeData.transit - 3);
                } else {
                    price = Math.round(price * 0.94); // %6 indirimli (uzak bÃ¶lgeler)
                }
            }
            
            prices.push({ carrier: carrier, price: price, transit: transitVar });
        });
        
        // Fiyata gÃ¶re sÄ±rala
        prices.sort(function(a, b) { return a.price - b.price; });
        
        // En ucuzu bul
        var cheapestPrice = prices[0].price;
        
        // Kapasite durumlarÄ±
        var capacities = ['available', 'available', 'available', 'limited', 'available', 'full', 'available', 'available'];
        var capacityLabels = { 'available': 'Yer Var', 'limited': 'Son 3 Yer', 'full': 'Dolu' };
        
        prices.forEach(function(item, idx) {
            var isCheapest = item.price === cheapestPrice;
            var capacity = capacities[idx % capacities.length];
            
            html += '<div class="carrier-rate-card' + (isCheapest ? ' best-price' : '') + '">';
            if (isCheapest) html += '<div class="best-badge">UYGUN EÅLEÅME</div>';
            html += '<div class="carrier-logo ' + item.carrier.color + '"><span>' + item.carrier.logo + '</span></div>';
            html += '<div class="carrier-rate-info">';
            html += '<div class="carrier-name">' + item.carrier.name + '</div>';
            html += '<div class="carrier-service">' + item.carrier.service + '</div>';
            html += '</div>';
            html += '<div class="carrier-rate-details">';
            html += '<div class="rate-detail"><span class="detail-label">Transit</span><span class="detail-value">' + item.transit + ' days</span></div>';
            html += '<div class="rate-detail"><span class="detail-label">Sefer</span><span class="detail-value">HaftalÄ±k</span></div>';
            html += '<div class="rate-detail"><span class="detail-label">Capacity</span><span class="detail-value ' + capacity + '">' + capacityLabels[capacity] + '</span></div>';
            html += '</div>';
            html += '<div class="carrier-rate-price">';
            html += '<span class="price-amount">$' + item.price.toLocaleString() + '</span>';
            html += '<span class="price-note">All-in (BAF dahil)</span>';
            html += '</div>';
            
            if (capacity === 'full') {
                html += '<button class="btn-use-rate disabled" disabled>Dolu</button>';
            } else {
                html += '<button class="btn-use-rate" onclick="useLiveRate(\'' + item.carrier.id + '\', ' + item.price + ')">Kullan</button>';
            }
            html += '</div>';
        });
        
        gridEl.innerHTML = html;
        
        // Piyasa Ã¶zeti gÃ¼ncelle
        var allPrices = prices.map(function(p) { return p.price; });
        var minPrice = Math.min.apply(null, allPrices);
        var maxPrice = Math.max.apply(null, allPrices);
        var avgPrice = Math.round(allPrices.reduce(function(a, b) { return a + b; }, 0) / allPrices.length);
        
        var summaryEl = document.querySelector('.market-summary .summary-grid');
        if (summaryEl) {
            summaryEl.innerHTML = 
                '<div class="summary-item"><span class="summary-label">En DÃ¼ÅŸÃ¼k</span><span class="summary-value low">$' + minPrice.toLocaleString() + '</span></div>' +
                '<div class="summary-item"><span class="summary-label">Ortalama</span><span class="summary-value avg">$' + avgPrice.toLocaleString() + '</span></div>' +
                '<div class="summary-item"><span class="summary-label">En YÃ¼ksek</span><span class="summary-value high">$' + maxPrice.toLocaleString() + '</span></div>' +
                '<div class="summary-item"><span class="summary-label">Trend (30 days)</span><span class="summary-value trend-down">â†“ %3 dÃ¼ÅŸÃ¼ÅŸ</span></div>';
        }
        
        showRateNotification('Success: ' + prices.length + ' line rates found!', 'success');
    }, 800);
}

// Hat rateÄ±nÄ± kullan (quote hesaplamada)
// SeÃ§ilen hat rateÄ± bilgileri (global)
var selectedLiveRateData = null;

function useLiveRate(carrier, price) {
    // SeÃ§ilen liman bilgilerini al
    var originCode = document.getElementById('liveRateOrigin').value;
    var destCode = document.getElementById('liveRateDest').value;
    var containerType = document.getElementById('liveRateContainer').value;
    
    // Liman isimlerini bul
    var originName = portNames[originCode] || originCode;
    var destName = portNames[destCode] || destCode;
    
    // Ãœlke bayraklarÄ±
    var originFlag = getCountryFlag(originCode);
    var destFlag = getCountryFlag(destCode);
    
    // SeÃ§ilen hat bilgilerini sakla
    selectedLiveRateData = {
        carrier: carrier,
        carrierName: carrier.charAt(0).toUpperCase() + carrier.slice(1),
        price: price,
        originCode: originCode,
        destCode: destCode,
        originName: originName,
        destName: destName,
        originFlag: originFlag,
        destFlag: destFlag,
        containerType: containerType,
        timestamp: new Date()
    };
    
    showRateNotification('Success: ' + carrier.toUpperCase() + ' rate transferring to calculation...', 'success');
    
    // Calculator sekmesine geÃ§ ve bilgileri doldur
    setTimeout(function() {
        showForwarderTab('calculator');
        
        // Enterprise paneli doldur
        setTimeout(function() {
            populateEnterpriseCalculator();
        }, 300);
    }, 800);
}

// Ãœlke bayraÄŸÄ± al
function getCountryFlag(portCode) {
    if (!portCode) return '';
    var countryCode = portCode.substring(0, 2);
    var flags = {
        'TR': 'TR', 'DE': 'ğŸ‡©ğŸ‡ª', 'NL': 'ğŸ‡³ğŸ‡±', 'BE': 'ğŸ‡§ğŸ‡ª', 'GB': 'EN', 'FR': 'ğŸ‡«ğŸ‡·',
        'ES': 'ğŸ‡ªğŸ‡¸', 'IT': 'ğŸ‡®ğŸ‡¹', 'GR': 'ğŸ‡¬ğŸ‡·', 'RO': 'ğŸ‡·ğŸ‡´', 'BG': 'ğŸ‡§ğŸ‡¬', 'UA': 'ğŸ‡ºğŸ‡¦',
        'RU': 'ğŸ‡·ğŸ‡º', 'GE': 'ğŸ‡¬ğŸ‡ª', 'CN': 'ğŸ‡¨ğŸ‡³', 'HK': 'ğŸ‡­ğŸ‡°', 'TW': 'ğŸ‡¹ğŸ‡¼', 'KR': 'ğŸ‡°ğŸ‡·',
        'JP': 'ğŸ‡¯ğŸ‡µ', 'SG': 'ğŸ‡¸ğŸ‡¬', 'MY': 'ğŸ‡²ğŸ‡¾', 'TH': 'ğŸ‡¹ğŸ‡­', 'VN': 'ğŸ‡»ğŸ‡³', 'ID': 'ğŸ‡®ğŸ‡©',
        'PH': 'ğŸ‡µğŸ‡­', 'IN': 'ğŸ‡®ğŸ‡³', 'LK': 'ğŸ‡±ğŸ‡°', 'PK': 'ğŸ‡µğŸ‡°', 'BD': 'ğŸ‡§ğŸ‡©', 'AE': 'ğŸ‡¦ğŸ‡ª',
        'SA': 'ğŸ‡¸ğŸ‡¦', 'QA': 'ğŸ‡¶ğŸ‡¦', 'OM': 'ğŸ‡´ğŸ‡²', 'JO': 'ğŸ‡¯ğŸ‡´', 'IR': 'ğŸ‡®ğŸ‡·', 'IQ': 'ğŸ‡®ğŸ‡¶',
        'EG': 'ğŸ‡ªğŸ‡¬', 'MA': 'ğŸ‡²ğŸ‡¦', 'DZ': 'ğŸ‡©ğŸ‡¿', 'TN': 'ğŸ‡¹ğŸ‡³', 'NG': 'ğŸ‡³ğŸ‡¬', 'GH': 'ğŸ‡¬ğŸ‡­',
        'KE': 'ğŸ‡°ğŸ‡ª', 'ZA': 'ğŸ‡¿ğŸ‡¦', 'US': 'ğŸ‡ºğŸ‡¸', 'CA': 'ğŸ‡¨ğŸ‡¦', 'MX': 'ğŸ‡²ğŸ‡½', 'PA': 'ğŸ‡µğŸ‡¦',
        'BR': 'ğŸ‡§ğŸ‡·', 'AR': 'ğŸ‡¦ğŸ‡·', 'CL': 'ğŸ‡¨ğŸ‡±', 'AU': 'ğŸ‡¦ğŸ‡º', 'NZ': 'ğŸ‡³ğŸ‡¿', 'PL': 'ğŸ‡µğŸ‡±',
        'DK': 'ğŸ‡©ğŸ‡°', 'SE': 'ğŸ‡¸ğŸ‡ª', 'NO': 'ğŸ‡³ğŸ‡´', 'FI': 'ğŸ‡«ğŸ‡®', 'PT': 'ğŸ‡µğŸ‡¹', 'MT': 'ğŸ‡²ğŸ‡¹',
        'SI': 'ğŸ‡¸ğŸ‡®', 'HR': 'ğŸ‡­ğŸ‡·', 'KW': 'ğŸ‡°ğŸ‡¼', 'BH': 'ğŸ‡§ğŸ‡­'
    };
    return flags[countryCode] || '';
}

// Enterprise Calculator'Ä± doldur
function populateEnterpriseCalculator() {
    if (!selectedLiveRateData) return;
    
    var data = selectedLiveRateData;
    
    // Empty state'i gizle, main panel'i gÃ¶ster
    document.getElementById('calcEmptyState').style.display = 'none';
    document.getElementById('calcMainPanel').style.display = 'block';
    
    // Header bilgilerini doldur
    document.getElementById('calcOriginFlag').textContent = data.originFlag;
    document.getElementById('calcOriginName').textContent = data.originName;
    document.getElementById('calcDestFlag').textContent = data.destFlag;
    document.getElementById('calcDestName').textContent = data.destName;
    document.getElementById('calcContainerBadge').textContent = data.containerType;
    document.getElementById('calcCarrierBadge').textContent = data.carrierName.toUpperCase();
    
    // Maliyet deÄŸerlerini hesapla ve doldur
    var preCarriage = estimatePreCarriage(data.originCode);
    var onCarriage = estimateOnCarriage(data.destCode);
    var insurance = Math.round(50000 * 0.0035); // Default kargo deÄŸeri
    
    document.getElementById('costSeaFreight').value = data.price;
    document.getElementById('seaFreightCarrier').textContent = data.carrierName + ' Line';
    document.getElementById('costPreCarriage').value = preCarriage;
    document.getElementById('preCarriageRoute').textContent = 'Fabrika â†’ ' + data.originName;
    document.getElementById('costThcOrigin').value = 150;
    document.getElementById('thcOriginPort').textContent = data.originName + ' LimanÄ±';
    document.getElementById('costCustomsOrigin').value = 120;
    document.getElementById('costThcDest').value = 180;
    document.getElementById('thcDestPort').textContent = data.destName + ' LimanÄ±';
    document.getElementById('costCustomsDest').value = 250;
    document.getElementById('customsDestCountry').textContent = getCountryName(data.destCode);
    document.getElementById('costOnCarriage').value = onCarriage;
    document.getElementById('onCarriageRoute').textContent = data.destName + ' â†’ VarÄ±ÅŸ';
    document.getElementById('costInsurance').value = insurance;
    
    // Toplam hesapla
    recalculateTotal();
    
    // Incoterm'e gÃ¶re gÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ ayarla
    updateIncotermCosts();
}

// Ãœlke adÄ±nÄ± al
function getCountryName(portCode) {
    if (!portCode) return '';
    var countryCode = portCode.substring(0, 2);
    var countries = {
        'TR': 'TÃ¼rkiye', 'DE': 'Germany', 'NL': 'Hollanda', 'BE': 'BelÃ§ika', 'GB': 'Ä°ngiltere',
        'FR': 'Fransa', 'ES': 'Ä°spanya', 'IT': 'Ä°talya', 'GR': 'Greece', 'RO': 'Romanya',
        'BG': 'Bulgaristan', 'UA': 'Ukrayna', 'RU': 'Rusya', 'GE': 'GÃ¼rcistan', 'CN': 'Ã‡in',
        'HK': 'Hong Kong', 'TW': 'Tayvan', 'KR': 'GÃ¼ney Kore', 'JP': 'Japonya', 'SG': 'Singapur',
        'MY': 'Malezya', 'TH': 'Tayland', 'VN': 'Vietnam', 'ID': 'Endonezya', 'PH': 'Filipinler',
        'IN': 'Hindistan', 'AE': 'BAE', 'SA': 'Suudi Arabistan', 'EG': 'MÄ±sÄ±r', 'MA': 'Fas',
        'US': 'ABD', 'CA': 'Kanada', 'BR': 'Brezilya', 'AU': 'Avustralya', 'ZA': 'GÃ¼ney Afrika'
    };
    return countries[countryCode] || '';
}

// Toplam yeniden hesapla
function recalculateTotal() {
    var seaFreight = parseFloat(document.getElementById('costSeaFreight').value) || 0;
    var preCarriage = parseFloat(document.getElementById('costPreCarriage').value) || 0;
    var thcOrigin = parseFloat(document.getElementById('costThcOrigin').value) || 0;
    var customsOrigin = parseFloat(document.getElementById('costCustomsOrigin').value) || 0;
    var thcDest = parseFloat(document.getElementById('costThcDest').value) || 0;
    var customsDest = parseFloat(document.getElementById('costCustomsDest').value) || 0;
    var onCarriage = parseFloat(document.getElementById('costOnCarriage').value) || 0;
    var insurance = parseFloat(document.getElementById('costInsurance').value) || 0;
    
    // Incoterm'e gÃ¶re hangi maliyetler dahil
    var incoterm = document.querySelector('input[name="calcIncoterm"]:checked');
    var incotermValue = incoterm ? incoterm.value : 'CIF';
    
    var subtotal = seaFreight;
    if (['EXW', 'FOB', 'CIF', 'DAP', 'DDP'].includes(incotermValue)) subtotal += thcOrigin;
    if (['EXW', 'DAP', 'DDP'].includes(incotermValue)) subtotal += preCarriage;
    if (['EXW', 'FOB', 'CIF', 'DAP', 'DDP'].includes(incotermValue)) subtotal += customsOrigin;
    if (['CIF', 'DAP', 'DDP'].includes(incotermValue)) subtotal += insurance;
    if (['DAP', 'DDP'].includes(incotermValue)) subtotal += thcDest;
    if (['DAP', 'DDP'].includes(incotermValue)) subtotal += onCarriage;
    if (['DDP'].includes(incotermValue)) subtotal += customsDest;
    
    // Kar marjÄ±
    var profitPercent = parseFloat(document.getElementById('profitSlider').value) || 10;
    var profitAmount = Math.round(subtotal * (profitPercent / 100));
    var total = subtotal + profitAmount;
    
    // GÃ¶ster
    document.getElementById('profitPercent').textContent = '%' + profitPercent;
    document.getElementById('profitAmount').textContent = '+$' + profitAmount.toLocaleString();
    document.getElementById('subtotalAmount').textContent = '$' + subtotal.toLocaleString();
    document.getElementById('totalAmount').textContent = '$' + total.toLocaleString();
}

// Kar marjÄ± gÃ¼ncelle
function updateProfitMargin() {
    recalculateTotal();
}

// Incoterm'e gÃ¶re maliyet kalemlerini gÃ¶ster/gizle
function updateIncotermCosts() {
    var incoterm = document.querySelector('input[name="calcIncoterm"]:checked');
    var value = incoterm ? incoterm.value : 'CIF';
    
    // TÃ¼m kartlar
    var preCarriageCard = document.getElementById('preCarriageCard');
    var customsOriginCard = document.getElementById('customsOriginCard');
    var customsDestCard = document.getElementById('customsDestCard');
    var onCarriageCard = document.getElementById('onCarriageCard');
    var insuranceCard = document.getElementById('insuranceCard');
    
    // VarsayÄ±lan: hepsini gÃ¶ster
    if (preCarriageCard) preCarriageCard.style.display = 'block';
    if (customsOriginCard) customsOriginCard.style.display = 'block';
    if (customsDestCard) customsDestCard.style.display = 'block';
    if (onCarriageCard) onCarriageCard.style.display = 'block';
    if (insuranceCard) insuranceCard.style.display = 'block';
    
    // Incoterm'e gÃ¶re gizle
    if (value === 'FOB') {
        if (preCarriageCard) preCarriageCard.style.opacity = '0.4';
        if (onCarriageCard) onCarriageCard.style.opacity = '0.4';
        if (customsDestCard) customsDestCard.style.opacity = '0.4';
    } else if (value === 'CIF') {
        if (preCarriageCard) preCarriageCard.style.opacity = '0.4';
        if (onCarriageCard) onCarriageCard.style.opacity = '0.4';
        if (customsDestCard) customsDestCard.style.opacity = '0.4';
    } else if (value === 'EXW') {
        // EXW: TÃ¼m maliyetler alÄ±cÄ±ya ait (satÄ±cÄ± sadece malÄ± hazÄ±rlar)
        if (preCarriageCard) preCarriageCard.style.opacity = '1';
        if (onCarriageCard) onCarriageCard.style.opacity = '1';
        if (customsDestCard) customsDestCard.style.opacity = '1';
    } else {
        // DAP, DDP: Hepsi dahil
        if (preCarriageCard) preCarriageCard.style.opacity = '1';
        if (onCarriageCard) onCarriageCard.style.opacity = '1';
        if (customsDestCard) customsDestCard.style.opacity = '1';
    }
    
    recalculateTotal();
}

// Insurance maliyetini gÃ¼ncelle
function updateInsuranceCost() {
    var cargoValue = parseFloat(document.getElementById('calcCargoValue').value) || 0;
    var insurance = Math.round(cargoValue * 0.0035);
    document.getElementById('costInsurance').value = insurance;
    recalculateTotal();
}

// SaÄŸlayÄ±cÄ± seÃ§
function selectProvider(type, element) {
    var price = element.parentElement.querySelector('.provider-price').textContent.replace('$', '');
    
    if (type === 'preCarriage') {
        document.getElementById('costPreCarriage').value = price;
    } else if (type === 'customsOrigin') {
        document.getElementById('costCustomsOrigin').value = price;
    }
    
    recalculateTotal();
}

// Calculator'Ä± sÄ±fÄ±rla
function resetCalculatorPanel() {
    selectedLiveRateData = null;
    document.getElementById('calcEmptyState').style.display = 'block';
    document.getElementById('calcMainPanel').style.display = 'none';
    showRateNotification('Hesaplama sÄ±fÄ±rlandÄ±', 'success');
}

// Taslak kaydet
function saveCalculationDraft() {
    showRateNotification('ğŸ’¾ Draft saved!', 'success');
}

// Quote oluÅŸtur
function createFinalOffer() {
    var total = document.getElementById('totalAmount').textContent;
    showRateNotification('Quote created: ' + total, 'success');
    // Burada quote PDF'i veya modal aÃ§Ä±labilir
}

// Pre-carriage tahmini (fabrika â†’ liman)
function estimatePreCarriage(originCode) {
    // TÃ¼rkiye limanlarÄ± iÃ§in varsayÄ±lan deÄŸerler
    var rates = {
        'TRIST': 350, 'TRISP': 350, 'TRISK': 350, 'TRISM': 350, // Ä°stanbul
        'TRIZM': 300, 'TRALI': 280, // Ä°zmir
        'TRMER': 400, 'TRISD': 450, // Aksea
        'TRSAM': 500, 'TRTRA': 600, 'TRHOP': 650, // Karasea
        'TRGEM': 320, 'TRTEK': 380 // Marmara
    };
    return rates[originCode] || 400;
}

// On-carriage tahmini (liman â†’ varÄ±ÅŸ ÅŸehir)
function estimateOnCarriage(destCode) {
    // BÃ¶lgeye gÃ¶re tahmini deÄŸerler
    var region = portRegions[destCode] || 'northEurope';
    var rates = {
        'northEurope': 450,
        'southEurope': 380,
        'eastEurope': 350,
        'farEast': 300,
        'seAsia': 280,
        'southAsia': 320,
        'middleEast': 250,
        'northAfrica': 300,
        'westAfrica': 400,
        'southAfrica': 500,
        'eastAfrica': 350,
        'northAmerica': 600,
        'centralAmerica': 450,
        'southAmerica': 550,
        'oceania': 500
    };
    return rates[region] || 400;
}

// Hesaplama sonuÃ§ HTML'i oluÅŸtur
function generateCalculatorResultHTML(data, costs) {
    var html = '';
    
    // BaÅŸlÄ±k
    html += '<div class="calc-result-header">';
    html += '<div class="calc-result-route">';
    html += '<span class="route-badge">' + data.originName + '</span>';
    html += '<span class="route-arrow">â†’</span>';
    html += '<span class="route-badge">' + data.destName + '</span>';
    html += '<span class="container-badge">' + data.containerType + '</span>';
    html += '</div>';
    html += '<div class="calc-result-carrier">';
    html += '<span class="carrier-label">SeÃ§ilen Hat:</span>';
    html += '<span class="carrier-value">' + data.carrierName.toUpperCase() + '</span>';
    html += '</div>';
    html += '</div>';
    
    // Maliyet DaÄŸÄ±lÄ±mÄ±
    html += '<div class="calc-cost-breakdown">';
    html += '<h4>Maliyet DaÄŸÄ±lÄ±mÄ±</h4>';
    html += '<div class="cost-grid">';
    
    // Deniz Freightu
    html += '<div class="cost-item sea">';
    html += '<div class="cost-icon"></div>';
    html += '<div class="cost-details">';
    html += '<span class="cost-label">Deniz Freightu (' + data.carrierName + ')</span>';
    html += '<span class="cost-value">$' + costs.seaFreight.toLocaleString() + '</span>';
    html += '</div></div>';
    
    // Pre-Carriage
    html += '<div class="cost-item land">';
    html += '<div class="cost-icon"></div>';
    html += '<div class="cost-details">';
    html += '<span class="cost-label">Pre-Carriage (Fabrika â†’ ' + data.originName + ')</span>';
    html += '<span class="cost-value">$' + costs.preCarriage.toLocaleString() + '</span>';
    html += '</div></div>';
    
    // On-Carriage
    html += '<div class="cost-item land">';
    html += '<div class="cost-icon"></div>';
    html += '<div class="cost-details">';
    html += '<span class="cost-label">On-Carriage (' + data.destName + ' â†’ VarÄ±ÅŸ)</span>';
    html += '<span class="cost-value">$' + costs.onCarriage.toLocaleString() + '</span>';
    html += '</div></div>';
    
    // THC Logout
    html += '<div class="cost-item terminal">';
    html += '<div class="cost-icon"></div>';
    html += '<div class="cost-details">';
    html += '<span class="cost-label">THC Logout (' + data.originName + ')</span>';
    html += '<span class="cost-value">$' + costs.thcOrigin.toLocaleString() + '</span>';
    html += '</div></div>';
    
    // THC VarÄ±ÅŸ
    html += '<div class="cost-item terminal">';
    html += '<div class="cost-icon"></div>';
    html += '<div class="cost-details">';
    html += '<span class="cost-label">THC VarÄ±ÅŸ (' + data.destName + ')</span>';
    html += '<span class="cost-value">$' + costs.thcDest.toLocaleString() + '</span>';
    html += '</div></div>';
    
    // Customs Logout
    html += '<div class="cost-item customs">';
    html += '<div class="cost-icon"></div>';
    html += '<div class="cost-details">';
    html += '<span class="cost-label">Customs Ä°ÅŸlemleri (Logout)</span>';
    html += '<span class="cost-value">$' + costs.customsOrigin.toLocaleString() + '</span>';
    html += '</div></div>';
    
    // Customs VarÄ±ÅŸ
    html += '<div class="cost-item customs">';
    html += '<div class="cost-icon"></div>';
    html += '<div class="cost-details">';
    html += '<span class="cost-label">Customs Ä°ÅŸlemleri (VarÄ±ÅŸ)</span>';
    html += '<span class="cost-value">$' + costs.customsDest.toLocaleString() + '</span>';
    html += '</div></div>';
    
    html += '</div>'; // cost-grid
    
    // Ara Toplam
    html += '<div class="cost-subtotal">';
    html += '<span>Subtotal (Cost)</span>';
    html += '<span>$' + costs.totalCost.toLocaleString() + '</span>';
    html += '</div>';
    
    // Kar MarjÄ±
    html += '<div class="cost-profit">';
    html += '<span>Kar MarjÄ± (%10)</span>';
    html += '<span>+$' + costs.profitMargin.toLocaleString() + '</span>';
    html += '</div>';
    
    html += '</div>'; // calc-cost-breakdown
    
    // Insurance Hesaplama
    html += '<div class="insurance-calc">';
    html += '<h4>Insurance (Optional)</h4>';
    html += '<div class="insurance-row">';
    html += '<label>Kargo DeÄŸeri (USD):</label>';
    html += '<input type="number" id="insuranceCargoValue" value="50000" onchange="updateInsurance()">';
    html += '<span class="insurance-rate">Ã— %0.35</span>';
    html += '<span class="insurance-cost" id="insuranceCost">= $175</span>';
    html += '</div>';
    html += '</div>';
    
    // Final Fiyat
    html += '<div class="final-price-box">';
    html += '<div class="final-price-label">MÃœÅTERÄ°YE TEKLÄ°F FÄ°YATI</div>';
    html += '<div class="final-price-amount" id="finalPriceAmount">$' + costs.finalPrice.toLocaleString() + '</div>';
    html += '<div class="final-price-note">Insurance hariÃ§ â€¢ ' + data.containerType + ' container</div>';
    html += '</div>';
    
    // Aksiyon ButonlarÄ±
    html += '<div class="calc-actions">';
    html += '<button class="btn-create-quote" onclick="createQuoteFromCalc()">Quote OluÅŸtur</button>';
    html += '<button class="btn-save-calc" onclick="saveCalculation()">ğŸ’¾ HesaplamayÄ± Kaydet</button>';
    html += '<button class="btn-new-calc" onclick="resetCalculator()">Yeni Hesaplama</button>';
    html += '</div>';
    
    return html;
}

// Insurance gÃ¼ncelle
function updateInsurance() {
    var cargoValue = parseFloat(document.getElementById('insuranceCargoValue').value) || 0;
    var insuranceCost = Math.round(cargoValue * 0.0035);
    document.getElementById('insuranceCost').textContent = '= $' + insuranceCost.toLocaleString();
    
    // Final rateÄ± gÃ¼ncelle
    if (selectedLiveRateData) {
        var data = selectedLiveRateData;
        var preCarriage = estimatePreCarriage(data.originCode);
        var onCarriage = estimateOnCarriage(data.destCode);
        var totalCost = data.price + preCarriage + onCarriage + 150 + 180 + 120 + 250;
        var profitMargin = Math.round(totalCost * 0.10);
        var finalPrice = totalCost + profitMargin + insuranceCost;
        document.getElementById('finalPriceAmount').textContent = '$' + finalPrice.toLocaleString();
    }
}

// Quote oluÅŸtur
function createQuoteFromCalc() {
    showRateNotification('Quote oluÅŸturuluyor...', 'success');
    // Quote oluÅŸturma modal'Ä± aÃ§Ä±labilir
}

// HesaplamayÄ± kaydet
function saveCalculation() {
    showRateNotification('ğŸ’¾ Calculation saved!', 'success');
}

// HesaplamayÄ± sÄ±fÄ±rla
function resetCalculator() {
    selectedLiveRateData = null;
    var resultEl = document.getElementById('calcResultPanel');
    var placeholderEl = document.getElementById('calcPlaceholder');
    
    if (resultEl) {
        resultEl.style.display = 'none';
        resultEl.innerHTML = '';
    }
    if (placeholderEl) {
        placeholderEl.style.display = 'flex';
    }
    showRateNotification('Yeni hesaplama iÃ§in hazÄ±r', 'success');
}


// Ãœlke dropdown'Ä±nÄ± doldur (On-carriage iÃ§in)
function populateCountryDropdown() {
    var select = document.getElementById('ocCountry');
    if (!select) return;
    
    while (select.options.length > 1) {
        select.remove(1);
    }
    
    Object.keys(worldPorts).forEach(function(countryCode) {
        if (countryCode !== 'TR') { // TÃ¼rkiye hariÃ§ (on-carriage yurtdÄ±ÅŸÄ±)
            var option = document.createElement('option');
            option.value = countryCode;
            option.textContent = worldPorts[countryCode].country;
            select.appendChild(option);
        }
    });
}

// On-carriage Ã¼lke seÃ§ildiÄŸinde limanlarÄ± ve ÅŸehirleri doldur
function loadOnCarriagePorts() {
    var countryCode = document.getElementById('ocCountry').value;
    var portSelect = document.getElementById('ocOriginPort');
    var citySelect = document.getElementById('ocDestCity');
    
    // Temizle
    while (portSelect.options.length > 1) portSelect.remove(1);
    while (citySelect.options.length > 1) citySelect.remove(1);
    
    if (!countryCode || !worldPorts[countryCode]) return;
    
    var countryData = worldPorts[countryCode];
    
    // LimanlarÄ± doldur
    if (countryData.ports) {
        countryData.ports.forEach(function(port) {
            var option = document.createElement('option');
            option.value = port.code;
            option.textContent = port.name + ' (' + port.city + ')';
            portSelect.appendChild(option);
        });
    }
    
    // Åehirleri doldur
    if (countryData.cities) {
        countryData.cities.forEach(function(city) {
            var option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
        });
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  FORWARDER PORT LÄ°STELERÄ°NÄ° DOLDUR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function populateForwarderPorts() {
    // KalkÄ±ÅŸ limanlarÄ± (TÃ¼rkiye)
    var originSelect = document.getElementById('sfOriginPort');
    if (originSelect && worldPorts.TR) {
        originSelect.innerHTML = '<option value="">Select Port...</option>';
        worldPorts.TR.ports.forEach(function(port) {
            var option = document.createElement('option');
            option.value = port.code;
            option.textContent = port.name + ' (' + port.city + ')';
            option.dataset.country = 'TR';
            originSelect.appendChild(option);
        });
    }
    
    // VarÄ±ÅŸ limanlarÄ± (TÃ¼m dÃ¼nya)
    var destSelect = document.getElementById('sfDestPort');
    if (destSelect) {
        destSelect.innerHTML = '<option value="">Select Port...</option>';
        Object.keys(worldPorts).forEach(function(countryCode) {
            var country = worldPorts[countryCode];
            if (country.ports && country.ports.length > 0) {
                var optgroup = document.createElement('optgroup');
                optgroup.label = country.country;
                country.ports.forEach(function(port) {
                    var option = document.createElement('option');
                    option.value = port.code;
                    option.textContent = port.name + ' (' + port.city + ')';
                    option.dataset.country = countryCode;
                    optgroup.appendChild(option);
                });
                destSelect.appendChild(optgroup);
            }
        });
    }
    
    // Pre-Carriage ÅŸehirleri
    var pcCitySelect = document.getElementById('pcOriginCity');
    if (pcCitySelect && worldPorts.TR && worldPorts.TR.cities) {
        pcCitySelect.innerHTML = '<option value="">Select City...</option>';
        worldPorts.TR.cities.forEach(function(city) {
            var option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            pcCitySelect.appendChild(option);
        });
    }
    
    // Pre-Carriage limanlarÄ±
    var pcPortSelect = document.getElementById('pcDestPort');
    if (pcPortSelect && worldPorts.TR && worldPorts.TR.ports) {
        pcPortSelect.innerHTML = '<option value="">Select Port...</option>';
        worldPorts.TR.ports.forEach(function(port) {
            var option = document.createElement('option');
            option.value = port.code;
            option.textContent = port.name + ' (' + port.city + ')';
            pcPortSelect.appendChild(option);
        });
    }
    
    // THC limanlarÄ±
    var thcPortSelect = document.getElementById('thcPort');
    if (thcPortSelect && worldPorts.TR && worldPorts.TR.ports) {
        thcPortSelect.innerHTML = '<option value="">Select Port...</option>';
        worldPorts.TR.ports.forEach(function(port) {
            var option = document.createElement('option');
            option.value = port.code;
            option.textContent = port.name;
            thcPortSelect.appendChild(option);
        });
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ“ Ä°LETÄ°ÅÄ°M BÄ°LGÄ°LERÄ° VE TEKLÄ°F SÄ°STEMÄ°
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// User iletiÅŸim bilgileri veritabanÄ± - SUPABASE FIRST (cache olarak kullanÄ±lÄ±r)
var userContactsDB = {};

// ğŸ”‘ KÃ–K Ã‡Ã–ZÃœM: TÃœM PROFÄ°LLERÄ° SUPABASE'DEN YÃœKLE VE CACHE'LE
async function loadAllProfilesFromSupabase() {
    if (!supabase) {
        console.log('Supabase not available for profiles');
        return;
    }
    
    try {
        var result = await supabase
            .from('profiles')
            .select('*');
        
        if (result.error) {
            console.log('Profiles load error:', result.error.message);
            return;
        }
        
        var profiles = result.data || [];
        console.log('Loading', profiles.length, 'profiles from Supabase...');
        
        // TÃœM PROFÄ°LLERÄ° userContactsDB'YE CACHE'LE
        profiles.forEach(function(p) {
            var contact = {
                companyName: p.company_name || '',
                contactPerson: p.contact_person || '',
                email: p.email || '',
                phone: p.phone || '',
                address: p.address || '',
                city: p.city || '',
                country: p.country || '',
                website: p.website || '',
                userType: p.user_type || 'client'
            };
            
            // Birden fazla key ile cache'le - bÃ¶ylece her tÃ¼rlÃ¼ arama Ã§alÄ±ÅŸÄ±r
            var userName = p.contact_person || p.email.split('@')[0];
            var userType = p.user_type || 'client';
            
            // Key 1: contactPerson_userType (Ã¶rn: "Fatma_client")
            userContactsDB[userName + '_' + userType] = contact;
            
            // Key 2: email prefix_userType (Ã¶rn: "fatma_client")
            var emailPrefix = p.email.split('@')[0];
            var capitalizedPrefix = emailPrefix.charAt(0).toUpperCase() + emailPrefix.slice(1);
            userContactsDB[capitalizedPrefix + '_' + userType] = contact;
            
            // Key 3: sadece contactPerson (geriye uyumluluk)
            userContactsDB[userName] = contact;
            
            // Key 4: sadece email prefix
            userContactsDB[capitalizedPrefix] = contact;
            
            console.log('  âœ“ Cached:', userName, '(' + userType + ')');
        });
        
        console.log('âœ… All profiles cached. Keys:', Object.keys(userContactsDB).length);
        
    } catch(e) {
        console.log('Profiles load exception:', e.message);
    }
}

// Supabase'den profil yÃ¼kle ve userContactsDB'ye cache et
async function loadUserContactFromSupabase(email) {
    if (!supabase || !email) return null;
    
    try {
        var result = await supabase
            .from('profiles')
            .select('*')
            .eq('email', email)
            .single();
        
        if (result.error || !result.data) return null;
        
        var contact = {
            companyName: result.data.company_name || '',
            contactPerson: result.data.contact_person || '',
            email: result.data.email || '',
            phone: result.data.phone || '',
            address: result.data.address || '',
            city: result.data.city || '',
            country: result.data.country || ''
        };
        
        // Cache'e kaydet
        var cacheKey = email.split('@')[0] + '_' + (result.data.user_type || 'client');
        userContactsDB[cacheKey] = contact;
        
        return contact;
    } catch(e) {
        console.log('Profile load error:', e.message);
        return null;
    }
}

function saveUserContactsToStorage() {
    // ArtÄ±k localStorage'a kaydetmiyoruz - sadece Supabase
    console.log('User contacts saved to Supabase only');
}

// Quoteler veritabanÄ± - SUPABASE FIRST (localStorage cache)
var quotesDB = [];

// Supabase'den quotes yÃ¼kle
async function loadQuotesFromSupabase() {
    if (!supabase) {
        console.log('Supabase not available for quotes');
        return [];
    }
    
    try {
        var result = await supabase
            .from('quotes')
            .select('*')
            .order('created_at', { ascending: false });
        
        if (result.error) {
            console.log('Quotes load error:', result.error.message);
            return [];
        }
        
        // Supabase formatÄ±ndan JS formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r
        quotesDB = (result.data || []).map(function(q) {
            return {
                id: q.quote_id || q.id,
                requestId: q.request_id,
                clientId: q.client_id,
                forwarderId: q.forwarder_id,
                forwarderName: q.forwarder_name,
                forwarderCompany: q.forwarder_company,
                origin: q.origin,
                destination: q.destination,
                containerType: q.container_type,
                incoterm: q.incoterm,
                freightRate: q.freight_rate,
                thcOrigin: q.thc_origin,
                thcDest: q.thc_dest,
                customsClearance: q.customs_clearance,
                documentation: q.documentation,
                cargoInsurance: q.cargo_insurance,
                totalPrice: q.total_price,
                transitDays: q.transit_days,
                validUntil: q.valid_until,
                status: q.status || 'pending',
                notes: q.notes,
                createdAt: q.created_at
            };
        });
        
        console.log('Loaded', quotesDB.length, 'quotes from Supabase');
        return quotesDB;
    } catch(e) {
        console.log('Quotes load exception:', e.message);
        return [];
    }
}

function saveQuotesToStorage() {
    // ArtÄ±k localStorage'a kaydetmiyoruz - sadece Supabase
    console.log('Quotes saved to Supabase only');
}

// User iletiÅŸim bilgilerini kaydet
function saveUserContact(userId, userType, contactData) {
    // userType'Ä± key'e dahil et - aynÄ± kullanÄ±cÄ± hem client hem forwarder olabilir
    var storageKey = userId + '_' + userType;
    userContactsDB[storageKey] = {
        userId: userId,
        userType: userType,
        companyName: contactData.companyName,
        contactPerson: contactData.contactPerson,
        email: contactData.email,
        phone: contactData.phone,
        address: contactData.address,
        city: contactData.city,
        country: contactData.country,
        taxNumber: contactData.taxNumber || '',
        website: contactData.website || '',
        updatedAt: new Date().toISOString()
    };
    saveUserContactsToStorage();
    console.log('Contact saved, key:', storageKey);
    return userContactsDB[storageKey];
}

// User iletiÅŸim bilgilerini getir
function getUserContact(userId, userType) {
    console.log('getUserContact Ã§aÄŸrÄ±ldÄ± - userId:', userId, 'userType:', userType);
    
    // userType verilmiÅŸse, Ã¶nce userType'lÄ± key ile ara
    if (userType) {
        var storageKey = userId + '_' + userType;
        console.log('Aranan key:', storageKey);
        if (userContactsDB[storageKey]) {
            console.log('Bulunan veri:', userContactsDB[storageKey].companyName, '-', userContactsDB[storageKey].contactPerson);
            return userContactsDB[storageKey];
        }
    }
    
    // Eski format iÃ§in de kontrol et (geriye uyumluluk)
    if (userContactsDB[userId]) {
        console.log('Found with old format key:', userId);
        return userContactsDB[userId];
    }
    
    // Current user kontrol et - eÄŸer aranan userId demo-client ise ve currentUser varsa
    if (userId === 'demo-client' && currentUser && userType === 'client') {
        var currentUserKey = currentUser + '_client';
        if (userContactsDB[currentUserKey]) {
            console.log('Found current user profile for demo-client');
            return userContactsDB[currentUserKey];
        }
    }
    
    // Current user kontrol et - eÄŸer aranan userId demo-forwarder ise
    if (userId === 'demo-forwarder' && currentUser && userType === 'forwarder') {
        var currentUserKey = currentUser + '_forwarder';
        if (userContactsDB[currentUserKey]) {
            console.log('Found current user profile for demo-forwarder');
            return userContactsDB[currentUserKey];
        }
    }
    
    // BulunamadÄ± - null dÃ¶ndÃ¼r (demo data yerine)
    console.log('Contact not found for:', userId, userType);
    return null;
}

// Quote oluÅŸtur (Forwarder â†’ Client)
function createQuote(quoteData) {
    var quote = {
        id: 'QT-' + Date.now(),
        requestId: quoteData.requestId,
        clientId: quoteData.clientId,
        forwarderId: quoteData.forwarderId,
        forwarderName: quoteData.forwarderName,
        // Rota bilgileri
        origin: quoteData.origin,
        destination: quoteData.destination,
        containerType: quoteData.containerType,
        // Fiyat detaylarÄ±
        freightRate: quoteData.freightRate,
        thcOrigin: quoteData.thcOrigin || 0,
        thcDest: quoteData.thcDest || 0,
        customsFee: quoteData.customsFee || 0,
        totalPrice: quoteData.totalPrice,
        currency: quoteData.currency || 'USD',
        // Transit ve geÃ§erlilik
        transitDays: quoteData.transitDays,
        validUntil: quoteData.validUntil,
        // Durum
        status: 'pending', // pending, accepted, rejected, expired
        // Tarihler
        createdAt: new Date().toISOString(),
        updatedAt: new Date().toISOString()
    };
    
    quotesDB.push(quote);
    saveQuotesToStorage();
    return quote;
}

// Quotei kabul et
function acceptQuote(quoteId) {
    var quote = quotesDB.find(function(q) { return q.id === quoteId; });
    if (quote) {
        quote.status = 'accepted';
        quote.acceptedAt = new Date().toISOString();
        quote.updatedAt = new Date().toISOString();
        saveQuotesToStorage();
        
        // Update request status to 'booked' when quote is accepted
        var request = networkRequests.find(function(r) { 
            return r.id === quote.requestId || r.request_id === quote.requestId; 
        });
        if (request) {
            request.status = 'booked';
            // KÃ–K Ã‡Ã–ZÃœM: Sadece Supabase'e kaydet
            if (supabase) {
                supabase.from('requests').update({ status: 'booked' })
                    .eq('request_id', quote.requestId)
                    .then(function(result) {
                        console.log('Request status updated to booked:', result);
                    });
            }
        }
        
        return quote;
    }
    return null;
}

// Quotei reddet
function rejectQuote(quoteId) {
    var quote = quotesDB.find(function(q) { return q.id === quoteId; });
    if (quote) {
        quote.status = 'rejected';
        quote.rejectedAt = new Date().toISOString();
        quote.updatedAt = new Date().toISOString();
        saveQuotesToStorage();
        return quote;
    }
    return null;
}

// Client'Ä±n quotelerini getir
function getClientQuotes(clientId) {
    return quotesDB.filter(function(q) { return q.clientId === clientId; });
}

// Forwarder'Ä±n quotelerini getir
function getForwarderQuotes(forwarderId) {
    return quotesDB.filter(function(q) { return q.forwarderId === forwarderId; });
}

// Kabul edilen quotete iletiÅŸim bilgilerini gÃ¶ster
async function showContactInfoModal(quoteId) {
    var quote = quotesDB.find(function(q) { return q.id === quoteId; });
    if (!quote || quote.status !== 'accepted') {
        alert('This quote has not been accepted yet!');
        return;
    }
    
    console.log('=== showContactInfoModal DEBUG ===');
    console.log('Quote:', quote);
    console.log('quote.clientId:', quote.clientId);
    console.log('quote.forwarderId:', quote.forwarderId);
    console.log('userContactsDB keys:', Object.keys(userContactsDB));
    
    // KÃ–K Ã‡Ã–ZÃœM: Ã–nce cache'den bak (login'de yÃ¼klendi)
    var clientContact = getUserContact(quote.clientId, 'client');
    var forwarderContact = getUserContact(quote.forwarderId, 'forwarder') || 
                           getUserContact(quote.forwarderName, 'forwarder');
    
    // EÄŸer cache'de yoksa Supabase'den Ã§ek
    if (!forwarderContact && supabase) {
        try {
            var forwarderResult = await supabase
                .from('profiles')
                .select('*')
                .or('contact_person.ilike.%' + (quote.forwarderId || '') + '%,contact_person.ilike.%' + (quote.forwarderName || '') + '%')
                .eq('user_type', 'forwarder')
                .limit(1);
            
            if (forwarderResult.data && forwarderResult.data.length > 0) {
                var f = forwarderResult.data[0];
                forwarderContact = {
                    companyName: f.company_name || '',
                    contactPerson: f.contact_person || '',
                    email: f.email || '',
                    phone: f.phone || '',
                    address: f.address || '',
                    city: f.city || '',
                    website: f.website || ''
                };
                // Cache'e ekle
                userContactsDB[quote.forwarderId + '_forwarder'] = forwarderContact;
            }
        } catch(e) {
            console.log('Forwarder contact load error:', e.message);
        }
    }
    
    console.log('clientContact:', clientContact);
    console.log('forwarderContact:', forwarderContact);
    console.log('=== END DEBUG ===')
    
    var modalHtml = '<div class="contact-info-modal" id="contactInfoModal">' +
        '<div class="contact-modal-content">' +
        '<div class="contact-modal-header">' +
        '<h3>Quote Accepted - Contact Information</h3>' +
        '<button class="modal-close" onclick="closeContactInfoModal()">Ã—</button>' +
        '</div>' +
        '<div class="contact-modal-body">' +
        '<div class="contact-cards-row">';
    
    // Client bilgileri
    if (clientContact) {
        var clientPhone = (clientContact.phone || '').replace(/[^0-9]/g, '');
        if (clientPhone.startsWith('0')) clientPhone = '90' + clientPhone.substring(1);
        if (!clientPhone.startsWith('90') && clientPhone.length === 10) clientPhone = '90' + clientPhone;
        
        modalHtml += '<div class="contact-card client">' +
            '<div class="contact-card-header"><span></span> Client (Cargo Owner)</div>' +
            '<div class="contact-item"><strong>Company:</strong> ' + clientContact.companyName + '</div>' +
            '<div class="contact-item"><strong>Contact:</strong> ' + clientContact.contactPerson + '</div>' +
            '<div class="contact-item"><strong>Email:</strong> <a href="mailto:' + clientContact.email + '">' + clientContact.email + '</a></div>' +
            '<div class="contact-item"><strong>Phone:</strong> <a href="tel:' + clientContact.phone + '">' + clientContact.phone + '</a></div>' +
            '<div class="contact-item"><strong>Address:</strong> ' + clientContact.address + ', ' + clientContact.city + '</div>' +
            '<div class="contact-actions">' +
            '<a href="https://wa.me/' + clientPhone + '?text=Hello, I am contacting you regarding a quote from Global Freight Network." target="_blank" class="btn-whatsapp"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg> WhatsApp</a>' +
            '</div>' +
            '</div>';
    } else {
        modalHtml += '<div class="contact-card client">' +
            '<div class="contact-card-header"><span></span> Client (Cargo Owner)</div>' +
            '<div class="contact-missing">Contact information not yet provided</div>' +
            '</div>';
    }
    
    // Forwarder bilgileri
    if (forwarderContact) {
        var forwarderPhone = (forwarderContact.phone || '').replace(/[^0-9]/g, '');
        if (forwarderPhone.startsWith('0')) forwarderPhone = '90' + forwarderPhone.substring(1);
        if (!forwarderPhone.startsWith('90') && forwarderPhone.length === 10) forwarderPhone = '90' + forwarderPhone;
        
        modalHtml += '<div class="contact-card forwarder">' +
            '<div class="contact-card-header"><span></span> Freight Forwarder</div>' +
            '<div class="contact-item"><strong>Company:</strong> ' + forwarderContact.companyName + '</div>' +
            '<div class="contact-item"><strong>Contact:</strong> ' + forwarderContact.contactPerson + '</div>' +
            '<div class="contact-item"><strong>Email:</strong> <a href="mailto:' + forwarderContact.email + '">' + forwarderContact.email + '</a></div>' +
            '<div class="contact-item"><strong>Phone:</strong> <a href="tel:' + forwarderContact.phone + '">' + forwarderContact.phone + '</a></div>' +
            '<div class="contact-item"><strong>Address:</strong> ' + forwarderContact.address + ', ' + forwarderContact.city + '</div>' +
            (forwarderContact.website ? '<div class="contact-item"><strong>Website:</strong> <a href="' + forwarderContact.website + '" target="_blank">' + forwarderContact.website + '</a></div>' : '') +
            '<div class="contact-actions">' +
            '<a href="https://wa.me/' + forwarderPhone + '?text=Hello, I am contacting you regarding a quote from Global Freight Network." target="_blank" class="btn-whatsapp"><svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg> WhatsApp</a>' +
            '</div>' +
            '</div>';
    } else {
        modalHtml += '<div class="contact-card forwarder">' +
            '<div class="contact-card-header"><span></span> Freight Forwarder</div>' +
            '<div class="contact-missing">Contact information not yet provided</div>' +
            '</div>';
    }
    
    modalHtml += '</div>' +
        '<div class="contact-modal-note">' +
        'You can now discuss the details directly with each other. Good luck!' +
        '</div>' +
        '</div>' +
        '<div class="contact-modal-footer">' +
        '<button class="btn-primary" onclick="closeContactInfoModal()">OK</button>' +
        '</div>' +
        '</div>' +
        '</div>';
    
    document.body.insertAdjacentHTML('beforeend', modalHtml);
}

function closeContactInfoModal() {
    var modal = document.getElementById('contactInfoModal');
    if (modal) modal.remove();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  PROFÄ°L & Ä°LETÄ°ÅÄ°M BÄ°LGÄ°LERÄ° FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Client profil sayfasÄ±nÄ± yÃ¼kle
async function loadClientProfile() {
    var clientId = currentUser || 'demo-client';
    var userEmail = currentUserEmail || localStorage.getItem('currentUserEmail');
    
    // Clear all fields first
    document.getElementById('clientCompanyName').value = '';
    document.getElementById('clientContactPerson').value = '';
    document.getElementById('clientEmail').value = '';
    document.getElementById('clientPhone').value = '';
    document.getElementById('clientAddress').value = '';
    document.getElementById('clientCity').value = '';
    document.getElementById('clientTaxNumber').value = '';
    document.getElementById('clientWebsite').value = '';
    document.getElementById('clientProfileStatus').textContent = '';
    document.getElementById('clientProfileStatus').className = '';
    
    var contact = null;
    
    // Ã–NCE SUPABASE'DEN YÃœKLEYayÄ±m
    if (supabase && userEmail) {
        try {
            var result = await supabase
                .from('profiles')
                .select('*')
                .eq('email', userEmail)
                .single();
            
            if (result.data) {
                contact = {
                    companyName: result.data.company_name || '',
                    contactPerson: result.data.contact_person || '',
                    email: result.data.email || '',
                    phone: result.data.phone || '',
                    address: result.data.address || '',
                    city: result.data.city || '',
                    country: result.data.country || '',
                    taxNumber: result.data.tax_number || '',
                    website: result.data.website || ''
                };
                console.log('Profile loaded from Supabase:', contact.companyName);
                
                // localStorage'a da kaydet (cache olarak)
                saveUserContact(clientId, 'client', contact);
            }
        } catch(e) {
            console.log('Supabase profile load error:', e.message);
        }
    }
    
    // Fallback: localStorage
    if (!contact) {
        contact = getUserContact(clientId, 'client');
    }
    
    if (contact) {
        document.getElementById('clientCompanyName').value = contact.companyName || '';
        document.getElementById('clientContactPerson').value = contact.contactPerson || '';
        document.getElementById('clientEmail').value = contact.email || '';
        document.getElementById('clientPhone').value = contact.phone || '';
        document.getElementById('clientAddress').value = contact.address || '';
        document.getElementById('clientCity').value = contact.city || '';
        document.getElementById('clientTaxNumber').value = contact.taxNumber || '';
        document.getElementById('clientWebsite').value = contact.website || '';
        
        document.getElementById('clientProfileStatus').textContent = translations[currentLanguage]['profile.saved'] || 'Success: Saved';
        document.getElementById('clientProfileStatus').className = 'contact-saved-badge';
    }
}

// Client iletiÅŸim bilgilerini kaydet
function saveClientContact(e) {
    e.preventDefault();
    
    var clientId = currentUser || 'demo-client';
    console.log(' saveClientContact Ã§aÄŸrÄ±ldÄ±, clientId:', clientId);
    
    var contactData = {
        companyName: document.getElementById('clientCompanyName').value,
        contactPerson: document.getElementById('clientContactPerson').value,
        email: document.getElementById('clientEmail').value,
        phone: document.getElementById('clientPhone').value,
        address: document.getElementById('clientAddress').value,
        city: document.getElementById('clientCity').value,
        country: 'TÃ¼rkiye',
        taxNumber: document.getElementById('clientTaxNumber').value,
        website: document.getElementById('clientWebsite').value
    };
    
    console.log('Kaydedilecek veri:', contactData);
    
    // Save to localStorage
    saveUserContact(clientId, 'client', contactData);
    
    // Save to Supabase
    var profileData = {
        userId: clientId,
        userType: 'client',
        companyName: contactData.companyName,
        contactPerson: contactData.contactPerson,
        email: contactData.email,
        phone: contactData.phone,
        address: contactData.address,
        city: contactData.city,
        country: contactData.country
    };
    
    saveProfileToSupabase(profileData).then(function(result) {
        console.log('Profile saved to Supabase:', result);
    }).catch(function(err) {
        console.log('Profile Supabase save error:', err);
    });
    
    console.log('Success: userContactsDB updated:', userContactsDB);
    
    // Dashboard'daki isimleri profildeki isimle gÃ¼ncelle
    var displayName = contactData.contactPerson || contactData.companyName || currentUser;
    document.getElementById('clientNameDisplay').textContent = displayName;
    document.getElementById('clientWelcomeName').textContent = displayName;
    
    // Avatar initiallerini gÃ¼ncelle
    var initials = displayName.split(' ').map(function(n) { return n[0]; }).join('').toUpperCase().substring(0,2);
    var avatarEl = document.getElementById('clientAvatarInitial');
    if (avatarEl) avatarEl.textContent = initials || 'CL';
    
    document.getElementById('clientProfileStatus').textContent = translations[currentLanguage]['profile.saved'] || 'Success: Saved';
    document.getElementById('clientProfileStatus').className = 'contact-saved-badge';
    
    showRateNotification(currentLanguage === 'tr' ? 'BaÅŸarÄ±lÄ±: Ä°letiÅŸim bilgileriniz kaydedildi!' : 'Success: Your contact information saved!', 'success');
    return false;
}

// Forwarder profil sayfasÄ±nÄ± yÃ¼kle
async function loadForwarderProfile() {
    var forwarderId = currentUser || 'demo-forwarder';
    var userEmail = currentUserEmail || localStorage.getItem('currentUserEmail');
    
    // Clear all fields first
    document.getElementById('forwarderCompanyName').value = '';
    document.getElementById('forwarderContactPerson').value = '';
    document.getElementById('forwarderEmail').value = '';
    document.getElementById('forwarderPhone').value = '';
    document.getElementById('forwarderAddress').value = '';
    document.getElementById('forwarderCity').value = '';
    document.getElementById('forwarderTaxNumber').value = '';
    document.getElementById('forwarderWebsite').value = '';
    document.getElementById('forwarderProfileStatus').textContent = '';
    document.getElementById('forwarderProfileStatus').className = '';
    
    var contact = null;
    
    // Ã–NCE SUPABASE'DEN YÃœKLE
    if (supabase && userEmail) {
        try {
            var result = await supabase
                .from('profiles')
                .select('*')
                .eq('email', userEmail)
                .single();
            
            if (result.data) {
                contact = {
                    companyName: result.data.company_name || '',
                    contactPerson: result.data.contact_person || '',
                    email: result.data.email || '',
                    phone: result.data.phone || '',
                    address: result.data.address || '',
                    city: result.data.city || '',
                    country: result.data.country || '',
                    taxNumber: result.data.tax_number || '',
                    website: result.data.website || ''
                };
                console.log('Forwarder profile loaded from Supabase:', contact.companyName);
                
                // localStorage'a da kaydet (cache olarak)
                saveUserContact(forwarderId, 'forwarder', contact);
            }
        } catch(e) {
            console.log('Supabase profile load error:', e.message);
        }
    }
    
    // Fallback: localStorage
    if (!contact) {
        contact = getUserContact(forwarderId, 'forwarder');
    }
    
    if (contact) {
        document.getElementById('forwarderCompanyName').value = contact.companyName || '';
        document.getElementById('forwarderContactPerson').value = contact.contactPerson || '';
        document.getElementById('forwarderEmail').value = contact.email || '';
        document.getElementById('forwarderPhone').value = contact.phone || '';
        document.getElementById('forwarderAddress').value = contact.address || '';
        document.getElementById('forwarderCity').value = contact.city || '';
        document.getElementById('forwarderTaxNumber').value = contact.taxNumber || '';
        document.getElementById('forwarderWebsite').value = contact.website || '';
        
        document.getElementById('forwarderProfileStatus').textContent = translations[currentLanguage]['profile.saved'] || 'Success: Saved';
        document.getElementById('forwarderProfileStatus').className = 'contact-saved-badge';
    }
}

// Forwarder iletiÅŸim bilgilerini kaydet
function saveForwarderContact(e) {
    e.preventDefault();
    
    var forwarderId = currentUser || 'demo-forwarder';
    var contactData = {
        companyName: document.getElementById('forwarderCompanyName').value,
        contactPerson: document.getElementById('forwarderContactPerson').value,
        email: document.getElementById('forwarderEmail').value,
        phone: document.getElementById('forwarderPhone').value,
        address: document.getElementById('forwarderAddress').value,
        city: document.getElementById('forwarderCity').value,
        country: 'TÃ¼rkiye',
        taxNumber: document.getElementById('forwarderTaxNumber').value,
        website: document.getElementById('forwarderWebsite').value
    };
    
    // Save to localStorage
    saveUserContact(forwarderId, 'forwarder', contactData);
    
    // Save to Supabase
    var profileData = {
        userId: forwarderId,
        userType: 'forwarder',
        companyName: contactData.companyName,
        contactPerson: contactData.contactPerson,
        email: contactData.email,
        phone: contactData.phone,
        address: contactData.address,
        city: contactData.city,
        country: contactData.country
    };
    
    saveProfileToSupabase(profileData).then(function(result) {
        console.log('Forwarder profile saved to Supabase:', result);
    }).catch(function(err) {
        console.log('Forwarder profile Supabase save error:', err);
    });
    
    // Dashboard'daki isimleri profildeki isimle gÃ¼ncelle
    var displayName = contactData.contactPerson || contactData.companyName || currentUser;
    document.getElementById('forwarderNameDisplay').textContent = displayName;
    document.getElementById('forwarderWelcomeName').textContent = displayName;
    
    // Avatar initiallerini gÃ¼ncelle
    var initials = displayName.split(' ').map(function(n) { return n[0]; }).join('').toUpperCase().substring(0,2);
    var avatarEl = document.getElementById('forwarderAvatarInitial');
    if (avatarEl) avatarEl.textContent = initials || 'FF';
    
    document.getElementById('forwarderProfileStatus').textContent = translations[currentLanguage]['profile.saved'] || 'Success: Saved';
    document.getElementById('forwarderProfileStatus').className = 'contact-saved-badge';
    
    showRateNotification(currentLanguage === 'tr' ? 'BaÅŸarÄ±lÄ±: Ä°letiÅŸim bilgileriniz kaydedildi!' : 'Success: Your contact information saved!', 'success');
    return false;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CLIENT REQUESTS MANAGEMENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Render client's requests from Supabase
async function renderClientRequests() {
    var container = document.getElementById('clientRequestsContainer');
    if (!container) return;
    
    // KALICI Ã‡Ã–ZÃœM: Sadece UUID kullan
    var userId = currentUserId || localStorage.getItem('currentUserId');
    var userEmail = currentUserEmail || localStorage.getItem('currentUserEmail');
    
    console.log('=== renderClientRequests ===');
    console.log('currentUserId:', userId);
    console.log('currentUserEmail:', userEmail);
    
    if (!userId && !userEmail) {
        container.innerHTML = '<div class="empty-state" style="text-align: center; padding: 60px 20px;"><p>Please log in to view your requests.</p></div>';
        return;
    }
    
    // Show loading state
    container.innerHTML = '<div class="loading-state" style="text-align: center; padding: 40px;"><p>Loading your requests...</p></div>';
    
    var myRequests = [];
    
    if (supabase) {
        try {
            var result;
            
            // SADECE user_id (UUID) ile sorgula - EN GÃœVENLÄ°
            if (userId) {
                console.log('Querying by user_id:', userId);
                result = await supabase
                    .from('requests')
                    .select('*')
                    .eq('user_id', userId)
                    .order('created_at', { ascending: false });
                
                console.log('Query result:', result);
            }
            
            // user_id yoksa veya sonuÃ§ yoksa, email ile dene
            if ((!result || result.error || !result.data || result.data.length === 0) && userEmail) {
                var emailPrefix = userEmail.split('@')[0];
                console.log('Fallback: Querying by email prefix:', emailPrefix);
                result = await supabase
                    .from('requests')
                    .select('*')
                    .eq('client_id', emailPrefix)
                    .order('created_at', { ascending: false });
                    
                console.log('Email query result:', result);
            }
            
            if (!result.error && result.data) {
                myRequests = result.data.map(function(r) {
                    return {
                        id: r.request_id || r.id,
                        userId: r.user_id,
                        clientId: r.client_id,
                        shipper: r.shipper_name,
                        shipperCompany: r.shipper_company,
                        origin: r.origin,
                        destination: r.destination,
                        freight: r.freight_type,
                        loadType: r.load_type,
                        containerType: r.container_type,
                        weight: r.weight,
                        status: r.status || 'open',
                        createdAt: r.created_at
                    };
                });
                console.log('Loaded', myRequests.length, 'requests');
            }
        } catch(e) {
            console.log('Supabase error:', e.message);
        }
    }
    
    // localStorage KULLANMA - sadece Supabase'den veri Ã§ek
    // Bu sayede baÅŸka kullanÄ±cÄ±nÄ±n verisi gÃ¶rÃ¼nmez
    
    if (myRequests.length === 0) {
        container.innerHTML = '<div class="empty-state" style="text-align: center; padding: 60px 20px;">' +
            '<div style="width: 80px; height: 80px; background: #f1f5f9; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 24px;">' +
            '<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5">' +
            '<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>' +
            '<polyline points="14 2 14 8 20 8"/>' +
            '</svg></div>' +
            '<h3 style="color: #334155; margin: 0 0 12px;">No Requests Yet</h3>' +
            '<p style="color: #64748b; margin: 0;">Create a quote request to get started.</p>' +
            '</div>';
        return;
    }
    
    // Sort by date (newest first)
        myRequests.sort(function(a, b) {
            return new Date(b.createdAt) - new Date(a.createdAt);
        });
        
        var html = '';
        myRequests.forEach(function(req) {
            var origin = req.origin || 'N/A';
            var dest = req.destination || 'N/A';
            var status = req.status || 'open';
            
            // Status badge ayarlarÄ±
            var statusClass, statusText;
            if (status === 'booked' || status === 'shipped') {
                statusClass = 'booked';
                statusText = 'Shipped';
            } else if (status === 'quoted') {
                statusClass = 'quoted';
                statusText = 'Quotes Received';
            } else if (status === 'accepted') {
                statusClass = 'accepted';
                statusText = 'Accepted';
            } else {
                statusClass = 'pending';
                statusText = 'Awaiting Quotes';
            }
            
            var transport = req.freight || 'Sea';
            var container_type = req.containerType || '';
            var requestDate = req.createdAt;
            var dateStr = requestDate ? new Date(requestDate).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) : '';
            
            html += '<div class="request-card">' +
                '<div class="request-card-header">' +
                '<div class="request-route"><h3>' + origin + ' â†’ ' + dest + '</h3></div>' +
                '<span class="request-status ' + statusClass + '">' + statusText + '</span>' +
                '</div>' +
                '<div class="request-details">' +
                '<div class="request-detail-item"><label>Transport</label><span>' + transport + '</span></div>' +
                (container_type ? '<div class="request-detail-item"><label>Container</label><span>' + container_type + '</span></div>' : '') +
                '<div class="request-detail-item"><label>Request Date</label><span>' + dateStr + '</span></div>' +
                '</div>';
            
            // Status'a gÃ¶re farklÄ± iÃ§erik gÃ¶ster
            if (status === 'booked' || status === 'shipped') {
                // Booked/Shipped durumunda My Shipments'a yÃ¶nlendir
                html += '<div class="request-offers" style="padding: 24px;">' +
                    '<div style="text-align: center; background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); border-radius: 12px; padding: 24px;">' +
                    '<div style="width: 60px; height: 60px; background: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; color: white; font-size: 24px; font-weight: bold;">&#10003;</div>' +
                    '<h4 style="margin: 0 0 8px; color: #065f46; font-weight: 600;">Shipment Created</h4>' +
                    '<p style="color: #047857; margin: 0 0 16px; font-size: 14px;">Your cargo is now being handled by the forwarder.</p>' +
                    '<button onclick="showClientTab(\'shipments\')" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer;">View in My Shipments</button>' +
                    '</div></div>';
            } else if (status === 'open') {
                // Open durumunda quote bekleniyor
                html += '<div class="request-offers">' +
                    '<div class="empty-offers waiting-state">' +
                    '<div class="waiting-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg></div>' +
                    '<h4 style="margin: 12px 0 8px; color: #334155; font-weight: 600;">Waiting for quotes</h4>' +
                    '<p style="color: #64748b; margin: 0 0 8px;">Your request has been shared with verified freight forwarders.</p>' +
                    '</div></div>';
            }
            
            html += '</div>';
        });
        
        container.innerHTML = html;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CLIENT QUOTE MANAGEMENT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Demo quotes (disabled in production)
function initDemoQuotes() {
    // Production mode - no demo data
    return;
}

// Render quotes received by client
async function renderClientQuotes() {
    initDemoQuotes();
    
    var container = document.getElementById('clientQuotesList');
    if (!container) return;
    
    // Get quotes for current client
    var clientId = currentUser || 'demo-client';
    
    console.log('renderClientQuotes called');
    console.log('Looking for clientId:', clientId);
    
    // Show loading state
    container.innerHTML = '<div style="text-align: center; padding: 40px;"><p>Loading quotes...</p></div>';
    
    // Load fresh quotes from Supabase
    try {
        await loadQuotesForClient(clientId);
    } catch(e) {
        console.log('Using localStorage quotes:', e.message);
    }
    
    var quotes = quotesDB.filter(function(q) { 
        return q.clientId === clientId;
    });
    
    // Remove duplicates by quote_id or id
    var uniqueQuotes = [];
    var seenIds = {};
    quotes.forEach(function(q) {
        var key = q.quote_id || q.id;
        if (!seenIds[key]) {
            seenIds[key] = true;
            uniqueQuotes.push(q);
        }
    });
    quotes = uniqueQuotes;
    
    console.log('Found quotes:', quotes.length);
    
    // Update badge - show count of new pending quotes
    var pendingCount = quotes.filter(function(q) { return q.status === 'pending'; }).length;
    var badge = document.getElementById('quotesBadge');
    if (badge) {
        badge.textContent = pendingCount;
        badge.style.display = pendingCount > 0 ? 'inline-flex' : 'none';
    }
    
    if (quotes.length === 0) {
        container.innerHTML = '<div class="empty-state">' +
            '<div class="empty-icon"></div>' +
            '<p>No quotes received yet</p>' +
            '<p style="font-size:14px;color:#94a3b8;">When you create RFQs, forwarders will send you.</p>' +
            '</div>';
        return;
    }
    
    // Sort by date (newest first)
    quotes.sort(function(a, b) {
        return new Date(b.createdAt) - new Date(a.createdAt);
    });
    
    var html = '';
    quotes.forEach(function(quote) {
        var statusClass = quote.status === 'accepted' ? 'accepted' : quote.status === 'rejected' ? 'rejected' : 'pending';
        var statusText = quote.status === 'accepted' ? 'Accepted' : quote.status === 'rejected' ? 'Rejected' : ' Pending';
        var timeAgo = getTimeAgo(quote.createdAt);
        
        html += '<div class="quote-card-client ' + statusClass + '">' +
            '<div class="quote-card-header">' +
            '<div class="quote-forwarder">' +
            '<span class="forwarder-avatar"></span>' +
            '<div class="forwarder-info">' +
            '<h4>' + quote.forwarderName + '</h4>' +
            '<span class="quote-time">' + timeAgo + '</span>' +
            '</div>' +
            '</div>' +
            '<div class="quote-status ' + statusClass + '">' + statusText + '</div>' +
            '</div>' +
            '<div class="quote-route">' +
            '<span class="route-origin">TR - ' + (quote.origin || 'Origin') + '</span>' +
            '<span class="route-arrow">â†’</span>' +
            '<span class="route-dest">' + (quote.destination || 'Destination') + '</span>' +
            '<span class="route-container">' + (quote.containerType || '') + '</span>' +
            '</div>' +
            '<div class="quote-details">' +
            '<div class="quote-detail"><span>Freight Rate:</span> <strong>$' + (quote.freightRate || quote.baseRate || 0).toLocaleString() + '</strong></div>' +
            '<div class="quote-detail"><span>Transit:</span> ' + (quote.transitDays || quote.transit || 0) + ' days</div>' +
            '</div>' +
            '<div class="quote-total">' +
            '<span>Total Price:</span>' +
            '<span class="total-price">$' + (quote.totalPrice || quote.freightRate || quote.baseRate || 0).toLocaleString() + '</span>' +
            '</div>' +
            '<div class="quote-valid">Validity: ' + (quote.validUntil || 'N/A') + '</div>' +
            '<div class="quote-actions">';
        
        if (quote.status === 'pending') {
            var acceptText = translations[currentLanguage]['common.accept'] || 'Accept';
            var rejectText = translations[currentLanguage]['common.reject'] || 'Reject';
            html += '<button class="btn-accept" onclick="handleAcceptQuote(\'' + quote.id + '\')">' + acceptText + '</button>' +
                '<button class="btn-reject" onclick="handleRejectQuote(\'' + quote.id + '\')">' + rejectText + '</button>';
        } else if (quote.status === 'accepted') {
            var contactText = translations[currentLanguage]['common.contactInfo'] || 'Contact Information';
            html += '<button class="btn-contact" onclick="showContactInfoModal(\'' + quote.id + '\')">ğŸ“ ' + contactText + '</button>';
        }
        
        html += '</div></div>';
    });
    
    container.innerHTML = html;
}

// Zaman farkÄ± hesapla
function getTimeAgo(dateStr) {
    var date = new Date(dateStr);
    var now = new Date();
    var diff = Math.floor((now - date) / 1000);
    var lang = currentLanguage || 'tr';
    
    if (diff < 60) return lang === 'en' ? 'Just now' : 'Az Ã¶nce';
    if (diff < 3600) {
        var mins = Math.floor(diff / 60);
        return mins + (lang === 'en' ? (mins === 1 ? ' min ago' : ' mins ago') : ' dk Ã¶nce');
    }
    if (diff < 86400) {
        var hours = Math.floor(diff / 3600);
        return hours + (lang === 'en' ? (hours === 1 ? ' hour ago' : ' hours ago') : ' saat Ã¶nce');
    }
    var days = Math.floor(diff / 86400);
    return days + (lang === 'en' ? (days === 1 ? ' day ago' : ' days ago') : ' days Ã¶nce');
}

// Quote kabul et
// Ã‡ift tÄ±klama korumasÄ± iÃ§in flag
var acceptQuoteProcessing = false;

async function handleAcceptQuote(quoteId) {
    // Ã‡ift tÄ±klama korumasÄ±
    if (acceptQuoteProcessing) {
        console.log('âš ï¸ Accept already in progress, ignoring...');
        return;
    }
    acceptQuoteProcessing = true;
    
    try {
        var clientId = currentUser || 'demo-client';
        
        // Ã–NCE SUPABASE'DEN PROFÄ°L KONTROL ET
        var clientContact = null;
        var userEmail = currentUserEmail || localStorage.getItem('currentUserEmail');
        
        if (supabase && userEmail) {
            try {
                var profileResult = await supabase
                    .from('profiles')
                    .select('*')
                    .eq('email', userEmail)
                    .single();
                
                if (profileResult.data) {
                    clientContact = {
                        email: profileResult.data.email,
                        companyName: profileResult.data.company_name,
                        contactPerson: profileResult.data.contact_person,
                        phone: profileResult.data.phone
                    };
                }
            } catch(e) {
                console.log('Profile check error:', e.message);
            }
        }
        
        // Fallback: localStorage
        if (!clientContact) {
            clientContact = getUserContact(clientId, 'client');
        }
        
        if (!clientContact || !clientContact.email) {
            alert('Warning: You must save your contact information before accepting the quote!\n\nEnter your information from the Profile tab.');
            showClientTab('profile');
            acceptQuoteProcessing = false;
            return;
        }
        
        // Find the quote first
        var quote = quotesDB.find(function(q) { return q.id === quoteId; });
        if (!quote) {
            alert('Quote not found!');
            acceptQuoteProcessing = false;
            return;
        }
        
        var requestId = quote.requestId;
    
    // VALIDATION: Check if there's already an accepted quote for this request in Supabase
    if (supabase && requestId) {
        try {
            var existingAccepted = await supabase
                .from('quotes')
                .select('quote_id, forwarder_name')
                .eq('request_id', requestId)
                .eq('status', 'accepted')
                .limit(1);
            
            if (existingAccepted.data && existingAccepted.data.length > 0) {
                alert('This request already has an accepted quote from ' + existingAccepted.data[0].forwarder_name + '.\n\nYou cannot accept another quote for the same request.');
                renderClientQuotes();
                return;
            }
        } catch (e) {
            console.log('Validation check error:', e.message);
        }
    }
    
    if (confirm('Are you sure you want to accept this quote?\n\nAfter accepting, your contact information will be shared with the forwarder.\nOther quotes for this request will be automatically declined.')) {
        // Update quote status locally
        var acceptedQuote = acceptQuote(quoteId);
        if (acceptedQuote) {
            showRateNotification('Quote accepted! Creating shipment...', 'success');
            
            // === ATOMIC UPDATE SEQUENCE ===
            
            // 1. Update quote status to accepted in Supabase
            await updateQuoteStatus(quoteId, 'accepted');
            console.log('Step 1: Quote status updated to accepted');
            
            // 2. Update request status to booked in Supabase
            if (requestId) {
                await updateRequestStatus(requestId, 'booked');
                console.log('Step 2: Request status updated to booked');
                
                // 3. Auto-reject ALL other quotes for this request (from Supabase)
                if (supabase) {
                    try {
                        var otherQuotes = await supabase
                            .from('quotes')
                            .select('quote_id')
                            .eq('request_id', requestId)
                            .eq('status', 'pending');
                        
                        if (otherQuotes.data && otherQuotes.data.length > 0) {
                            // Batch update all pending quotes to rejected
                            await supabase
                                .from('quotes')
                                .update({ 
                                    status: 'rejected', 
                                    updated_at: new Date().toISOString() 
                                })
                                .eq('request_id', requestId)
                                .eq('status', 'pending');
                            
                            console.log('Step 3: Auto-rejected', otherQuotes.data.length, 'other quotes');
                        }
                    } catch (e) {
                        console.log('Auto-reject error:', e.message);
                    }
                }
                
                // Update local quotesDB as well
                quotesDB.forEach(function(q) {
                    if (q.requestId === requestId && q.id !== quoteId && q.status === 'pending') {
                        q.status = 'rejected';
                        q.rejectedAt = new Date().toISOString();
                        q.rejectionReason = 'Another quote was accepted for this request';
                    }
                });
                saveQuotesToStorage();
            }
            
            // 4. Create shipment in Supabase
            await createShipmentInSupabase(acceptedQuote);
            console.log('Step 4: Shipment created');
            
            // Refresh UI
            renderClientQuotes();
            
            // Show contact info
            setTimeout(function() {
                showContactInfoModal(quoteId);
            }, 500);
        }
    }
    } finally {
        // Ã‡ift tÄ±klama korumasÄ±nÄ± kaldÄ±r
        acceptQuoteProcessing = false;
    }
}

// Quote reddet
function handleRejectQuote(quoteId) {
    if (confirm('Are you sure you want to reject this quote?')) {
        var quote = rejectQuote(quoteId);
        if (quote) {
            // Update in Supabase
            updateQuoteStatus(quoteId, 'rejected').then(function() {
                console.log('Quote status updated to rejected in Supabase');
            });
            
            showRateNotification('Quote rejected', 'success');
            renderClientQuotes();
        }
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FORWARDER - VERDÄ°ÄÄ°M TEKLÄ°FLER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

async function renderForwarderQuotes() {
    var container = document.getElementById('forwarderQuotesList');
    if (!container) return;
    
    var forwarderId = currentUser || 'demo-forwarder';
    
    console.log('renderForwarderQuotes called');
    console.log('Looking for forwarderId:', forwarderId);
    
    // Show loading
    container.innerHTML = '<div style="text-align: center; padding: 40px;"><p>Loading quotes...</p></div>';
    
    // Load fresh data from Supabase
    var myQuotes = [];
    if (supabase) {
        try {
            // Query by forwarder_id OR forwarder_name (using ilike for partial match)
            var result = await supabase
                .from('quotes')
                .select('*')
                .or('forwarder_id.ilike.%' + forwarderId + '%,forwarder_name.ilike.%' + forwarderId + '%')
                .order('created_at', { ascending: false });
            
            if (!result.error && result.data) {
                myQuotes = result.data.map(function(q) {
                    return {
                        id: q.quote_id || q.id,
                        requestId: q.request_id,
                        clientId: q.client_id,
                        forwarderId: q.forwarder_id,
                        forwarderName: q.forwarder_name,
                        origin: q.origin,
                        destination: q.destination,
                        containerType: q.container_type,
                        totalPrice: q.total_price,
                        transitDays: q.transit_days,
                        validUntil: q.valid_until,
                        status: q.status,
                        notes: q.notes,
                        createdAt: q.created_at
                    };
                });
                console.log('Loaded', myQuotes.length, 'quotes from Supabase for', forwarderId);
            }
        } catch (e) {
            console.log('Supabase quotes error:', e.message);
        }
    }
    
    // Fallback to localStorage if no Supabase data
    if (myQuotes.length === 0) {
        myQuotes = quotesDB.filter(function(q) {
            return q.forwarderId === forwarderId || q.forwarderName === forwarderId;
        });
    }
    
    // Remove duplicates by quote_id or id
    var uniqueQuotes = [];
    var seenIds = {};
    myQuotes.forEach(function(q) {
        var key = q.quote_id || q.id;
        if (!seenIds[key]) {
            seenIds[key] = true;
            uniqueQuotes.push(q);
        }
    });
    myQuotes = uniqueQuotes;
    
    console.log('Found quotes:', myQuotes.length);
    
    // Update badge - show count of newly accepted quotes
    var acceptedCount = myQuotes.filter(function(q) { return q.status === 'accepted'; }).length;
    var badge = document.getElementById('forwarderQuotesBadge');
    if (badge) {
        badge.textContent = acceptedCount;
        badge.style.display = acceptedCount > 0 ? 'inline-flex' : 'none';
    }
    
    if (myQuotes.length === 0) {
        container.innerHTML = '<div class="empty-state">' +
            '<div class="empty-icon"><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="17 8 12 3 7 8"/><line x1="12" y1="3" x2="12" y2="15"/></svg></div>' +
            '<h3>No quotes submitted yet</h3>' +
            '<p>Go to "RFQ Inbox" to submit quotes</p>' +
            '</div>';
        return;
    }
    
    // Sort by date (newest first)
    myQuotes.sort(function(a, b) {
        return new Date(b.createdAt) - new Date(a.createdAt);
    });
    
    var html = '';
    myQuotes.forEach(function(quote) {
        var statusClass = quote.status === 'accepted' ? 'accepted' : quote.status === 'rejected' ? 'rejected' : 'pending';
        var statusText = quote.status === 'accepted' ? 'Accepted' : quote.status === 'rejected' ? 'Rejected' : 'Submitted';
        var timeAgo = getTimeAgo(quote.createdAt);
        
        html += '<div class="quote-card-forwarder ' + statusClass + '">' +
            '<div class="quote-card-header">' +
            '<div class="quote-info-left">' +
            '<span class="quote-id-badge">' + quote.id + '</span>' +
            '<span class="quote-time">' + timeAgo + '</span>' +
            '</div>' +
            '<div class="quote-status ' + statusClass + '">' + statusText + '</div>' +
            '</div>' +
            '<div class="quote-route">' +
            '<span class="route-origin">TR - ' + quote.origin + '</span>' +
            '<span class="route-arrow">â†’</span>' +
            '<span class="route-dest">' + quote.destination + '</span>' +
            '<span class="route-container">' + quote.containerType + '</span>' +
            '</div>' +
            '<div class="quote-price-summary">' +
            '<div class="price-item"><span>Quote Price:</span> <strong class="highlight-price">$' + quote.totalPrice.toLocaleString() + '</strong></div>' +
            '<div class="price-item"><span>Transit Time:</span> <strong>' + quote.transitDays + ' days</strong></div>' +
            '<div class="price-item"><span>Validity:</span> ' + quote.validUntil + '</div>' +
            '</div>';
        
        if (quote.notes) {
            html += '<div class="quote-notes"><strong>Your Note:</strong> ' + quote.notes + '</div>';
        }
        
        if (quote.status === 'accepted') {
            html += '<div class="quote-accepted-info">' +
                '<div class="accepted-text">' +
                '<strong>Congratulations! Your quote has been accepted.</strong>' +
                '<p>You can now contact the customer.</p>' +
                '</div>' +
                '<button class="btn-contact" onclick="showContactInfoModal(\'' + quote.id + '\')">Customer Contact Information</button>' +
                '</div>';
        } else if (quote.status === 'rejected') {
            html += '<div class="quote-rejected-info">' +
                '<span>The cargo owner has selected another forwarder for this shipment.</span>' +
                '</div>';
        }
        
        html += '</div>';
    });
    
    container.innerHTML = html;
}

// VarsayÄ±lan tarihleri ayarla (30 days sonrasÄ±)
function setDefaultDates() {
    var futureDate = new Date();
    futureDate.setDate(futureDate.getDate() + 30);
    var dateStr = futureDate.toISOString().split('T')[0];
    
    ['sfValidUntil', 'pcValidUntil'].forEach(function(id) {
        var input = document.getElementById(id);
        if (input && !input.value) {
            input.value = dateStr;
        }
    });
}

// Liman bilgisini gÃ¼ncelle
function updatePortInfo(type) {
    var selectId = type === 'origin' ? 'sfOriginPort' : 'sfDestPort';
    var infoId = type === 'origin' ? 'sfOriginInfo' : 'sfDestInfo';
    
    var select = document.getElementById(selectId);
    var info = document.getElementById(infoId);
    
    if (!select || !info) return;
    
    var selectedOption = select.options[select.selectedIndex];
    if (selectedOption && selectedOption.dataset.country) {
        var countryCode = selectedOption.dataset.country;
        var portCode = select.value;
        
        // Port bilgisini bul
        var portData = null;
        if (worldPorts[countryCode] && worldPorts[countryCode].ports) {
            portData = worldPorts[countryCode].ports.find(function(p) { return p.code === portCode; });
        }
        
        if (portData) {
            var teuFormatted = portData.annual_teu ? (portData.annual_teu / 1000000).toFixed(1) + 'M TEU/yÄ±l' : '';
            info.textContent = worldPorts[countryCode].country + ' â€¢ ' + teuFormatted;
        } else {
            info.textContent = '';
        }
    } else {
        info.textContent = '';
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ğŸ’¾ KAYIT FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// GÃ¶nderim Tipi deÄŸiÅŸtiÄŸinde
function updateShipmentTypeFields() {
    var shipmentType = document.getElementById('sfShipmentType').value;
    var containerGroup = document.getElementById('containerTypeGroup');
    var fclRow = document.getElementById('fclPriceRow');
    var lclRow = document.getElementById('lclPriceRow');
    
    if (shipmentType === 'fcl') {
        if (containerGroup) containerGroup.classList.remove('hidden');
        if (fclRow) fclRow.classList.remove('hidden');
        if (lclRow) lclRow.classList.add('hidden');
        var sfContainerType = document.getElementById('sfContainerType');
        var sfFreightRate = document.getElementById('sfFreightRate');
        if (sfContainerType) sfContainerType.required = true;
        if (sfFreightRate) sfFreightRate.required = true;
    } else {
        if (containerGroup) containerGroup.classList.add('hidden');
        if (fclRow) fclRow.classList.add('hidden');
        if (lclRow) lclRow.classList.remove('hidden');
        var sfContainerType = document.getElementById('sfContainerType');
        var sfFreightRate = document.getElementById('sfFreightRate');
        if (sfContainerType) sfContainerType.required = false;
        if (sfFreightRate) sfFreightRate.required = false;
    }
    
    updatePriceSummary();
}

// Service Type deÄŸiÅŸtiÄŸinde (simplified - no longer needed)
function updateServiceTypeFields() {
    // Simplified form - no service type selection
    return;
}

// AI Fiyat Hesaplama tetikleyici (disabled)
function triggerAICalculation() {
    // Disabled in simplified form
    return;
}

// AI Fiyat Hesaplama (disabled)
function calculateAIPrice() {
    // Disabled in simplified form
    return;
}

// Fiyat Ã–zeti GÃ¼ncelle (Simplified - not used in current form)
function updatePriceSummary() {
    // Simplified form doesn't use price summary
    return;
}

// Deniz Freight Kaydet
// Update container type visibility based on shipment type
function updateContainerVisibility() {
    var shipmentType = document.getElementById('sfShipmentType').value;
    var containerGroup = document.getElementById('containerTypeGroup');
    
    if (containerGroup) {
        if (shipmentType === 'lcl') {
            containerGroup.style.display = 'none';
        } else {
            containerGroup.style.display = 'block';
        }
    }
}


// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AI PDF YÃœKLEME - PREMIUM Ã–ZELLÄ°K
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Pre-Carriage alt sekme deÄŸiÅŸimi
function showPreCarriageSubTab(tab) {
    // Sekme butonlarÄ±nÄ± gÃ¼ncelle
    document.querySelectorAll('.sub-tabs .sub-tab').forEach(function(btn) {
        btn.classList.remove('active');
    });
    event.target.closest('.sub-tab').classList.add('active');
    
    // Ä°Ã§erikleri gizle/gÃ¶ster
    document.getElementById('pcManualTab').classList.add('hidden');
    document.getElementById('pcAITab').classList.add('hidden');
    
    if (tab === 'manual') {
        document.getElementById('pcManualTab').classList.remove('hidden');
    } else {
        document.getElementById('pcAITab').classList.remove('hidden');
    }
}

// Drag over efekti
function handleDragOver(e) {
    e.preventDefault();
    e.stopPropagation();
    e.currentTarget.classList.add('drag-over');
}

// Drag leave efekti
function handleDragLeave(e) {
    e.preventDefault();
    e.stopPropagation();
    e.currentTarget.classList.remove('drag-over');
}

// Dosya bÄ±rakÄ±ldÄ±ÄŸÄ±nda
function handlePCFileDrop(e) {
    e.preventDefault();
    e.stopPropagation();
    e.currentTarget.classList.remove('drag-over');
    
    var files = e.dataTransfer.files;
    if (files.length > 0) {
        processPCFile(files[0]);
    }
}

// Dosya seÃ§ildiÄŸinde
function handlePCFileSelect(e) {
    var files = e.target.files;
    if (files.length > 0) {
        processPCFile(files[0]);
    }
}

// AI ile dosya iÅŸleme
function processPCFile(file) {
    // Dosya tÃ¼rÃ¼ kontrolÃ¼
    var validTypes = ['application/pdf', 'application/vnd.ms-excel', 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'text/csv'];
    var validExtensions = ['.pdf', '.xlsx', '.xls', '.csv'];
    var fileName = file.name.toLowerCase();
    var isValid = validExtensions.some(function(ext) { return fileName.endsWith(ext); });
    
    if (!isValid) {
        alert('Unsupported file format! Please upload PDF, Excel or CSV file.');
        return;
    }
    
    // UI gÃ¼ncelle - iÅŸleme baÅŸla
    document.querySelector('.ai-upload-section').classList.add('hidden');
    document.getElementById('pcProcessing').classList.remove('hidden');
    document.getElementById('pcResults').classList.add('hidden');
    
    // AI iÅŸleme simÃ¼lasyonu
    simulatePCAIProcessing(file.name);
}

// AI iÅŸleme simÃ¼lasyonu
function simulatePCAIProcessing(fileName) {
    var progress = 0;
    var progressFill = document.getElementById('pcProgressFill');
    var statusText = document.getElementById('pcProcessingStatus');
    var steps = ['pcStep1', 'pcStep2', 'pcStep3', 'pcStep4'];
    
    var stages = [
        { progress: 25, status: 'Reading file: ' + fileName, step: 0 },
        { progress: 50, status: 'Detecting tables and rates...', step: 1 },
        { progress: 75, status: 'Matching cities and ports...', step: 2 },
        { progress: 100, status: 'Process completed!', step: 3 }
    ];
    
    var currentStage = 0;
    
    var interval = setInterval(function() {
        if (currentStage < stages.length) {
            var stage = stages[currentStage];
            progressFill.style.width = stage.progress + '%';
            statusText.textContent = stage.status;
            
            // AdÄ±mlarÄ± gÃ¼ncelle
            steps.forEach(function(stepId, idx) {
                var stepEl = document.getElementById(stepId);
                stepEl.classList.remove('active', 'done');
                if (idx < stage.step) {
                    stepEl.classList.add('done');
                } else if (idx === stage.step) {
                    stepEl.classList.add('active');
                }
            });
            
            currentStage++;
        } else {
            clearInterval(interval);
            
            // SonuÃ§larÄ± gÃ¶ster
            setTimeout(function() {
                document.getElementById('pcProcessing').classList.add('hidden');
                showPCResults();
            }, 500);
        }
    }, 800);
}

// Demo sonuÃ§larÄ± gÃ¶ster
function showPCResults() {
    document.getElementById('pcResults').classList.remove('hidden');
    
    // Demo veriler - gerÃ§ek uygulamada AI'dan gelecek
    var demoResults = [
        { city: 'Anland', port: 'Mersin', container: '20DC', price: 280, status: 'matched' },
        { city: 'Anland', port: 'Mersin', container: '40DC', price: 350, status: 'matched' },
        { city: 'Anland', port: 'Mersin', container: '40HC', price: 380, status: 'matched' },
        { city: 'Anland', port: 'Ä°skenderun', container: '20DC', price: 320, status: 'matched' },
        { city: 'Anland', port: 'Ä°skenderun', container: '40DC', price: 400, status: 'matched' },
        { city: 'Anland', port: 'Ä°skenderun', container: '40HC', price: 430, status: 'matched' },
        { city: 'Bursa', port: 'Gemlik', container: '20DC', price: 120, status: 'matched' },
        { city: 'Bursa', port: 'Gemlik', container: '40DC', price: 150, status: 'matched' },
        { city: 'Bursa', port: 'Gemlik', container: '40HC', price: 170, status: 'matched' },
        { city: 'Bursa', port: 'Mudanya', container: '20DC', price: 100, status: 'matched' },
        { city: 'Bursa', port: 'Mudanya', container: '40DC', price: 130, status: 'matched' },
        { city: 'Konya', port: 'Mersin', container: '20DC', price: 320, status: 'matched' },
        { city: 'Konya', port: 'Mersin', container: '40DC', price: 420, status: 'matched' },
        { city: 'Konya', port: 'Mersin', container: '40HC', price: 450, status: 'matched' },
        { city: 'Kayseri', port: 'Mersin', container: '20DC', price: 380, status: 'matched' },
        { city: 'Kayseri', port: 'Mersin', container: '40DC', price: 480, status: 'matched' },
        { city: 'Kayseri', port: 'Mersin', container: '40HC', price: 520, status: 'matched' },
        { city: 'Gaziantep', port: 'Ä°skenderun', container: '20DC', price: 180, status: 'matched' },
        { city: 'Gaziantep', port: 'Ä°skenderun', container: '40DC', price: 250, status: 'matched' },
        { city: 'Gaziantep', port: 'Ä°skenderun', container: '40HC', price: 280, status: 'matched' },
        { city: 'Ä°stanbul', port: 'AmbarlÄ±', container: '20DC', price: 80, status: 'matched' },
        { city: 'Ä°stanbul', port: 'AmbarlÄ±', container: '40DC', price: 100, status: 'matched' },
        { city: 'Ä°stanbul', port: 'AmbarlÄ±', container: '40HC', price: 120, status: 'matched' },
        { city: 'Ä°stanbul', port: 'HaydarpaÅŸa', container: '20DC', price: 90, status: 'matched' },
        { city: 'Ä°stanbul', port: 'HaydarpaÅŸa', container: '40DC', price: 110, status: 'matched' },
        { city: 'Ä°zmir', port: 'Alsancak', container: '20DC', price: 60, status: 'matched' },
        { city: 'Ä°zmir', port: 'Alsancak', container: '40DC', price: 80, status: 'matched' },
        { city: 'Ä°zmir', port: 'Alsancak', container: '40HC', price: 100, status: 'matched' },
        { city: 'Denizli', port: 'Ä°zmir', container: '20DC', price: 200, status: 'matched' },
        { city: 'Denizli', port: 'Ä°zmir', container: '40DC', price: 280, status: 'matched' },
        { city: 'EskiÅŸehir', port: 'Gemlik', container: '20DC', price: 220, status: 'new' },
        { city: 'EskiÅŸehir', port: 'Gemlik', container: '40DC', price: 300, status: 'new' },
        { city: 'Adana', port: 'Mersin', container: '20DC', price: 150, status: 'matched' },
        { city: 'Adana', port: 'Mersin', container: '40DC', price: 200, status: 'matched' },
        { city: 'Adana', port: 'Mersin', container: '40HC', price: 220, status: 'matched' },
        { city: 'Manisa', port: 'Ä°zmir', container: '20DC', price: 140, status: 'matched' },
        { city: 'Manisa', port: 'Ä°zmir', container: '40DC', price: 180, status: 'matched' },
        { city: 'Sakarya', port: 'Ä°zmit', container: '20DC', price: 160, status: 'matched' },
        { city: 'Sakarya', port: 'Ä°zmit', container: '40DC', price: 210, status: 'matched' },
        { city: 'Kocaeli', port: 'Ä°zmit', container: '20DC', price: 80, status: 'matched' },
        { city: 'Kocaeli', port: 'Ä°zmit', container: '40DC', price: 100, status: 'matched' }
    ];
    
    // Tabloyu doldur
    var tbody = document.getElementById('pcResultsBody');
    tbody.innerHTML = '';
    
    demoResults.forEach(function(item, index) {
        var statusClass = item.status === 'matched' ? 'matched' : (item.status === 'new' ? 'new' : 'warning');
        var statusText = item.status === 'matched' ? 'âœ“ Matched' : (item.status === 'new' ? '+ New' : 'âš  Check');
        
        var row = '<tr>' +
            '<td><input type="checkbox" class="pc-result-check" data-index="' + index + '" checked onchange="updatePCSelectedCount()"></td>' +
            '<td>' + item.city + '</td>' +
            '<td>' + item.port + '</td>' +
            '<td>' + item.container + '</td>' +
            '<td><strong>$' + item.price + '</strong></td>' +
            '<td><span class="status-badge ' + statusClass + '">' + statusText + '</span></td>' +
            '</tr>';
        tbody.innerHTML += row;
    });
    
    // SayÄ±larÄ± gÃ¼ncelle
    document.getElementById('pcResultCount').textContent = demoResults.length + ' rate';
    document.getElementById('pcTotalCount').textContent = demoResults.length;
    document.getElementById('pcSelectedCount').textContent = demoResults.length;
    document.getElementById('pcSaveCount').textContent = demoResults.length;
    
    // Global deÄŸiÅŸkene kaydet
    window.pcExtractedRates = demoResults;
}

// TÃ¼m sonuÃ§larÄ± seÃ§/kaldÄ±r
function toggleAllPCResults(checked) {
    document.querySelectorAll('.pc-result-check').forEach(function(checkbox) {
        checkbox.checked = checked;
    });
    document.getElementById('pcSelectAll').checked = checked;
    updatePCSelectedCount();
}

// SeÃ§ili sayÄ±sÄ±nÄ± gÃ¼ncelle
function updatePCSelectedCount() {
    var checked = document.querySelectorAll('.pc-result-check:checked').length;
    var total = document.querySelectorAll('.pc-result-check').length;
    document.getElementById('pcSelectedCount').textContent = checked;
    document.getElementById('pcSaveCount').textContent = checked;
    document.getElementById('pcSelectAll').checked = (checked === total);
}

// Cancel
function cancelPCUpload() {
    document.querySelector('.ai-upload-section').classList.remove('hidden');
    document.getElementById('pcProcessing').classList.add('hidden');
    document.getElementById('pcResults').classList.add('hidden');
    document.getElementById('pcFileInput').value = '';
}

// SeÃ§ilenleri toplu kaydet
function showRateNotification(message, type) {
    // Basit bir bildirim
    var notification = document.createElement('div');
    notification.className = 'rate-notification ' + type;
    notification.innerHTML = '<span>' + (type === 'success' ? '' : '') + '</span> ' + message;
    notification.style.cssText = 'position: fixed; top: 20px; right: 20px; padding: 15px 25px; background: ' + 
        (type === 'success' ? '#10b981' : '#ef4444') + '; color: white; border-radius: 12px; z-index: 1500; ' +
        'font-weight: 600; box-shadow: 0 4px 20px rgba(0,0,0,0.2); animation: slideIn 0.3s ease;';
    
    document.body.appendChild(notification);
    
    setTimeout(function() {
        notification.style.animation = 'slideOut 0.3s ease';
        setTimeout(function() {
            notification.remove();
        }, 300);
    }, 3000);
}

// KayÄ±tlÄ± tarifeleri listele

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// SÄ°GORTA TARÄ°FE FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function showInsuranceTab(tab) {
    // Nav menu gÃ¼ncelle
    var menuItems = document.querySelectorAll('#insuranceDashboard .nav-menu-item');
    menuItems.forEach(function(item) {
        item.classList.remove('active');
        var text = item.textContent.toLowerCase();
        if ((tab === 'requests' && text.includes('request')) ||
            (tab === 'rates' && text.includes('tarife')) ||
            (tab === 'policies' && text.includes('poliÃ§e')) ||
            (tab === 'claims' && text.includes('hasar'))) {
            item.classList.add('active');
        }
    });
    
    // Tab iÃ§erikleri
    var tabs = ['insuranceRequestsTab', 'insuranceRatesTab', 'insurancePoliciesTab', 'insuranceClaimsTab'];
    tabs.forEach(function(tabId) {
        var el = document.getElementById(tabId);
        if (el) {
            if ((tab === 'requests' && tabId === 'insuranceRequestsTab') ||
                (tab === 'rates' && tabId === 'insuranceRatesTab') ||
                (tab === 'policies' && tabId === 'insurancePoliciesTab') ||
                (tab === 'claims' && tabId === 'insuranceClaimsTab')) {
                el.style.display = 'block';
            } else {
                el.style.display = 'none';
            }
        }
    });
}

function saveInsuranceRate(e) {
    e.preventDefault();
    
    var categoryNames = {
        'general': 'General Cargo', 'industrial': 'EndÃ¼striyel', 'textile': 'Tekstil',
        'furniture': 'Mobilya', 'automotive': 'Otomotiv', 'electronics': 'Elektronik',
        'machinery': 'Makine', 'pharma': 'Ä°laÃ§/Medikal', 'glass': 'Cam/Seramik',
        'perishable': 'Bozulabilir', 'frozen': 'DondurulmuÅŸ', 'chemical': 'Kimyasal',
        'hazmat': 'Tehlikeli Madde', 'valuable': 'DeÄŸerli EÅŸya', 'artwork': 'Sanat Eseri',
        'vehicle': 'AraÃ§', 'yacht': 'Yat/Tekne'
    };
    
    var modeNames = {
        'sea': 'Deniz', 'air': 'Hava', 'land': 'Kara', 'multi': 'Multimodal', 'all': 'TÃ¼m Modlar'
    };
    
    var rate = {
        id: 'INS-' + Date.now(),
        type: 'insurance',
        cargoCategory: document.getElementById('insCargoCategory').value,
        cargoCategoryName: categoryNames[document.getElementById('insCargoCategory').value] || document.getElementById('insCargoCategory').value,
        transportMode: document.getElementById('insTransportMode').value,
        transportModeName: modeNames[document.getElementById('insTransportMode').value] || document.getElementById('insTransportMode').value,
        premiumRate: parseFloat(document.getElementById('insPremiumRate').value),
        minPremium: parseFloat(document.getElementById('insMinPremium').value) || 50,
        maxCoverage: parseFloat(document.getElementById('insMaxCoverage').value) || 500000,
        coverTheft: document.getElementById('insCoverTheft').checked,
        coverDamage: document.getElementById('insCoverDamage').checked,
        coverLoss: document.getElementById('insCoverLoss').checked,
        coverDelay: document.getElementById('insCoverDelay').checked,
        coverNatural: document.getElementById('insCoverNatural').checked,
        createdAt: new Date().toISOString()
    };
    
    insuranceRatesDB.premiums.push(rate);
    saveInsuranceRatesToStorage();
    document.getElementById('insuranceRateForm').reset();
    // Reset checkboxes to default
    document.getElementById('insCoverTheft').checked = true;
    document.getElementById('insCoverDamage').checked = true;
    document.getElementById('insCoverLoss').checked = true;
    
    showRateNotification('Insurance tarifesi baÅŸarÄ±yla kaydedildi!', 'success');
    updateInsuranceRatesList();
    
    return false;
}

function updateInsuranceRatesList() {
    var container = document.getElementById('insuranceRatesList');
    if (!container) return;
    
    var rates = insuranceRatesDB.premiums;
    
    if (rates.length === 0) {
        container.innerHTML = '<div class="empty-rates"><span class="empty-icon"></span><p>No saved insurance rates yet</p><small>YukarÄ±daki formdan tarife ekleyerek baÅŸlayÄ±n</small></div>';
        return;
    }
    
    var html = '';
    rates.forEach(function(rate) {
        var coverages = [];
        if (rate.coverTheft) coverages.push('HÄ±rsÄ±zlÄ±k');
        if (rate.coverDamage) coverages.push('Hasar');
        if (rate.coverLoss) coverages.push('KayÄ±p');
        if (rate.coverDelay) coverages.push('Gecikme');
        if (rate.coverNatural) coverages.push('DoÄŸal Afet');
        
        html += '<div class="rate-item" data-type="insurance">' +
            '<div class="rate-item-info">' +
                '<div class="rate-item-icon insurance"></div>' +
                '<div class="rate-item-details">' +
                    '<h4>' + rate.cargoCategoryName + ' - ' + rate.transportModeName + '</h4>' +
                    '<p>Teminat: ' + coverages.join(', ') + '</p>' +
                '</div>' +
            '</div>' +
            '<div class="rate-item-price">' +
                '<div class="price">%' + rate.premiumRate + '</div>' +
                '<small>Min: $' + rate.minPremium + '</small>' +
            '</div>' +
            '<div class="rate-item-actions">' +
                '<button class="btn-rate-action delete" onclick="deleteInsuranceRate(\'' + rate.id + '\')" title="Sil">Ã—</button>' +
            '</div>' +
        '</div>';
    });
    
    container.innerHTML = html;
}

function deleteInsuranceRate(id) {
    if (!confirm('Are you sure you want to delete this rate?')) return;
    
    var index = insuranceRatesDB.premiums.findIndex(function(r) { return r.id === id; });
    if (index > -1) {
        insuranceRatesDB.premiums.splice(index, 1);
        saveInsuranceRatesToStorage();
        showRateNotification('Insurance tarifesi silindi', 'success');
        updateInsuranceRatesList();
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GÃœMRÃœK TARÄ°FE FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function showCustomsTab(tab) {
    // Nav menu gÃ¼ncelle
    var menuItems = document.querySelectorAll('#customsDashboard .nav-menu-item');
    menuItems.forEach(function(item) {
        item.classList.remove('active');
        var text = item.textContent.toLowerCase();
        if ((tab === 'jobs' && text.includes('gÃ¼mrÃ¼kleme')) ||
            (tab === 'rates' && text.includes('tarife')) ||
            (tab === 'progress' && text.includes('devam')) ||
            (tab === 'completed' && text.includes('tamamlanan'))) {
            item.classList.add('active');
        }
    });
    
    // Tab iÃ§erikleri
    var tabs = ['customsJobsTab', 'customsRatesTab', 'customsProgressTab', 'customsCompletedTab'];
    var tabMap = { 'jobs': 'customsJobsTab', 'rates': 'customsRatesTab', 'progress': 'customsProgressTab', 'completed': 'customsCompletedTab' };
    
    tabs.forEach(function(tabId) {
        var el = document.getElementById(tabId);
        if (el) {
            el.style.display = (tabId === tabMap[tab]) ? 'block' : 'none';
        }
    });
    
    // AI Panel gizle/gÃ¶ster
    var aiPanel = document.getElementById('customsAIPanel');
    if (aiPanel) {
        aiPanel.style.display = (tab === 'rates') ? 'none' : 'block';
    }
}

function saveCustomsServiceRate(e) {
    e.preventDefault();
    
    var pointNames = {
        'ambarli': 'AmbarlÄ±', 'mersin': 'Mersin', 'izmir': 'Ä°zmir (Alsancak)', 
        'gemlik': 'Gemlik', 'iskenderun': 'Ä°skenderun', 'trabzon': 'Trabzon',
        'ist-airport': 'Istanbul Airport', 'saw': 'Sabiha Gokcen', 
        'esb': 'Anland EsenboÄŸa', 'adb': 'Ä°zmir Adnan Menderes',
        'kapikule': 'KapÄ±kule', 'ipsala': 'Ä°psala', 'gurbulak': 'GÃ¼rbulak',
        'habur': 'Habur', 'cilvegozu': 'CilvegÃ¶zÃ¼',
        'all-sea': 'TÃ¼m Sea Customs', 'all-air': 'TÃ¼m Air Customs', 'all-land': 'TÃ¼m Land Customs'
    };
    
    var typeNames = { 'export': 'TR Ä°hracat', 'import': 'TR Ä°thalat', 'transit': 'Transit' };
    
    var rate = {
        id: 'CS-' + Date.now(),
        type: 'service',
        country: 'TR',
        countryName: 'TÃ¼rkiye',
        customsPoint: document.getElementById('csCustomsPoint').value,
        customsPointName: pointNames[document.getElementById('csCustomsPoint').value] || document.getElementById('csCustomsPoint').value,
        serviceType: document.getElementById('csType').value,
        serviceTypeName: typeNames[document.getElementById('csType').value],
        serviceFee: parseFloat(document.getElementById('csServiceFee').value),
        docFee: parseFloat(document.getElementById('csDocFee').value) || 0,
        stampFee: parseFloat(document.getElementById('csStampFee').value) || 0,
        totalFee: parseFloat(document.getElementById('csServiceFee').value) + (parseFloat(document.getElementById('csDocFee').value) || 0) + (parseFloat(document.getElementById('csStampFee').value) || 0),
        createdAt: new Date().toISOString()
    };
    
    customsRatesDB.serviceFees.push(rate);
    saveCustomsRatesToStorage();
    document.getElementById('customsServiceForm').reset();
    showRateNotification('TR Customs iÅŸlem Ã¼creti baÅŸarÄ±yla kaydedildi!', 'success');
    updateCustomsRatesList();
    
    return false;
}

function saveCustomsTaxRate(e) {
    e.preventDefault();
    
    var rate = {
        id: 'CT-' + Date.now(),
        type: 'tax',
        country: 'TR',
        countryName: 'TÃ¼rkiye',
        hsCategory: document.getElementById('ctHSCategory').value,
        dutyRate: parseFloat(document.getElementById('ctDutyRate').value),
        vatRate: parseFloat(document.getElementById('ctVATRate').value) || 0,
        exciseRate: parseFloat(document.getElementById('ctExciseRate').value) || 0,
        notes: document.getElementById('ctNotes').value,
        createdAt: new Date().toISOString()
    };
    
    customsRatesDB.taxRates.push(rate);
    saveCustomsRatesToStorage();
    document.getElementById('customsTaxForm').reset();
    showRateNotification('TR Ä°thalat vergi oranÄ± baÅŸarÄ±yla kaydedildi!', 'success');
    updateCustomsRatesList();
    
    return false;
}

function updateCustomsRatesList(filter) {
    filter = filter || 'all';
    var container = document.getElementById('customsRatesList');
    if (!container) return;
    
    var allRates = [];
    customsRatesDB.serviceFees.forEach(function(r) { allRates.push(r); });
    customsRatesDB.taxRates.forEach(function(r) { allRates.push(r); });
    
    // Filter
    if (filter !== 'all') {
        allRates = allRates.filter(function(r) { return r.type === filter; });
    }
    
    // Sort by date
    allRates.sort(function(a, b) { return new Date(b.createdAt) - new Date(a.createdAt); });
    
    if (allRates.length === 0) {
        container.innerHTML = '<div class="empty-rates"><span class="empty-icon"></span><p>HenÃ¼z kayÄ±tlÄ± gÃ¼mrÃ¼k tarifesi yok</p><small>YukarÄ±daki formlardan tarife ekleyerek baÅŸlayÄ±n</small></div>';
        return;
    }
    
    var html = '';
    allRates.forEach(function(rate) {
        if (rate.type === 'service') {
            var pointName = rate.customsPointName || rate.countryName;
            html += '<div class="rate-item" data-type="service">' +
                '<div class="rate-item-info">' +
                    '<div class="rate-item-icon service"></div>' +
                    '<div class="rate-item-details">' +
                        '<h4>' + rate.serviceTypeName + ' - ' + pointName + '</h4>' +
                        '<p>Ä°ÅŸlem: $' + rate.serviceFee + ' | Evrak: $' + rate.docFee + ' | HarÃ§: $' + rate.stampFee + '</p>' +
                    '</div>' +
                '</div>' +
                '<div class="rate-item-price">' +
                    '<div class="price">$' + rate.totalFee + '</div>' +
                    '<small>Total</small>' +
                '</div>' +
                '<div class="rate-item-actions">' +
                    '<button class="btn-rate-action delete" onclick="deleteCustomsRate(\'' + rate.id + '\', \'service\')" title="Sil">Ã—</button>' +
                '</div>' +
            '</div>';
        } else {
            html += '<div class="rate-item" data-type="tax">' +
                '<div class="rate-item-info">' +
                    '<div class="rate-item-icon tax"></div>' +
                    '<div class="rate-item-details">' +
                        '<h4>TR Ä°thalat - HS ' + rate.hsCategory + '</h4>' +
                        '<p>Customs: %' + rate.dutyRate + ' | KDV: %' + rate.vatRate + ' | Ã–TV: %' + rate.exciseRate + '</p>' +
                    '</div>' +
                '</div>' +
                '<div class="rate-item-price">' +
                    '<div class="price">%' + rate.dutyRate + '</div>' +
                    '<small>Customs Vergisi</small>' +
                '</div>' +
                '<div class="rate-item-actions">' +
                    '<button class="btn-rate-action delete" onclick="deleteCustomsRate(\'' + rate.id + '\', \'tax\')" title="Sil">Ã—</button>' +
                '</div>' +
            '</div>';
        }
    });
    
    container.innerHTML = html;
}

function filterCustomsRates(filter) {
    // Buton aktifliÄŸi
    var buttons = document.querySelectorAll('#customsRatesTab .my-rates-filters .filter-btn');
    buttons.forEach(function(btn) {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    updateCustomsRatesList(filter);
}

function deleteCustomsRate(id, type) {
    if (!confirm('Are you sure you want to delete this rate?')) return;
    
    var db = type === 'service' ? customsRatesDB.serviceFees : customsRatesDB.taxRates;
    var index = db.findIndex(function(r) { return r.id === id; });
    
    if (index > -1) {
        db.splice(index, 1);
        saveCustomsRatesToStorage();
        showRateNotification('Customs tarifesi silindi', 'success');
        updateCustomsRatesList();
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AI MULTÄ°MODAL FÄ°YAT HESAPLAMA FONKSÄ°YONLARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function initCalculatorForm() {
    // TÃ¼rkiye ÅŸehirlerini doldur
    var originCitySelect = document.getElementById('calcOriginCity');
    if (originCitySelect && worldPorts.TR) {
        originCitySelect.innerHTML = '<option value="">Select City...</option>';
        worldPorts.TR.cities.forEach(function(city) {
            var option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            originCitySelect.appendChild(option);
        });
    }
    
    // TR limanlarÄ±nÄ± doldur
    var originPortSelect = document.getElementById('calcOriginPort');
    if (originPortSelect && worldPorts.TR) {
        originPortSelect.innerHTML = '<option value="">Select Port...</option>';
        worldPorts.TR.ports.forEach(function(port) {
            var option = document.createElement('option');
            option.value = port.code;
            option.textContent = port.name + ' (' + port.city + ')';
            originPortSelect.appendChild(option);
        });
    }
    
    // Ãœlkeleri doldur (TÃ¼rkiye hariÃ§)
    var destCountrySelect = document.getElementById('calcDestCountry');
    if (destCountrySelect) {
        destCountrySelect.innerHTML = '<option value="">Select Country...</option>';
        Object.keys(worldPorts).forEach(function(code) {
            if (code !== 'TR') {
                var option = document.createElement('option');
                option.value = code;
                option.textContent = worldPorts[code].country;
                destCountrySelect.appendChild(option);
            }
        });
    }
}

function loadCalcDestOptions() {
    var countryCode = document.getElementById('calcDestCountry').value;
    var portSelect = document.getElementById('calcDestPort');
    var citySelect = document.getElementById('calcDestCity');
    
    portSelect.innerHTML = '<option value="">Select Port...</option>';
    citySelect.innerHTML = '<option value="">Select City...</option>';
    
    if (!countryCode || !worldPorts[countryCode]) return;
    
    var countryData = worldPorts[countryCode];
    
    // LimanlarÄ± doldur
    if (countryData.ports && countryData.ports.length > 0) {
        countryData.ports.forEach(function(port) {
            var option = document.createElement('option');
            option.value = port.code;
            option.textContent = port.name + ' (' + port.city + ')';
            portSelect.appendChild(option);
        });
    }
    
    // Åehirleri doldur
    if (countryData.cities && countryData.cities.length > 0) {
        countryData.cities.forEach(function(city) {
            var option = document.createElement('option');
            option.value = city;
            option.textContent = city;
            citySelect.appendChild(option);
        });
    }
    
    updateCalcPreview();
}

function updateCalcPreview() {
    // Preview gÃ¼ncelleme - opsiyonel
}

function calculateMultimodalPrice() {
    // Form deÄŸerlerini al
    var originCity = document.getElementById('calcOriginCity').value;
    var originPort = document.getElementById('calcOriginPort').value;
    var destCountry = document.getElementById('calcDestCountry').value;
    var destPort = document.getElementById('calcDestPort').value;
    var destCity = document.getElementById('calcDestCity').value;
    var incoterm = document.getElementById('calcIncoterm').value;
    var containerType = document.getElementById('calcContainerType').value;
    var cargoCategory = document.getElementById('calcCargoCategory').value;
    var cargoValue = parseFloat(document.getElementById('calcCargoValue').value) || 50000;
    var weight = parseFloat(document.getElementById('calcWeight').value) || 18000;
    
    // Validasyon
    if (!originPort || !destCountry || !destPort) {
        alert('LÃ¼tfen Ã§Ä±kÄ±ÅŸ limanÄ±, varÄ±ÅŸ Ã¼lkesi ve varÄ±ÅŸ limanÄ±nÄ± seÃ§in.');
        return;
    }
    
    // Incoterm kurallarÄ±
    var incotermRules = {
        EXW: { preCarriage: false, exportCustoms: false, originTHC: false, seaFreight: false, destTHC: false, importCustoms: false, onCarriage: false, insurance: false },
        FCA: { preCarriage: true, exportCustoms: true, originTHC: false, seaFreight: false, destTHC: false, importCustoms: false, onCarriage: false, insurance: false },
        FOB: { preCarriage: true, exportCustoms: true, originTHC: true, seaFreight: false, destTHC: false, importCustoms: false, onCarriage: false, insurance: false },
        CFR: { preCarriage: true, exportCustoms: true, originTHC: true, seaFreight: true, destTHC: false, importCustoms: false, onCarriage: false, insurance: false },
        CIF: { preCarriage: true, exportCustoms: true, originTHC: true, seaFreight: true, destTHC: false, importCustoms: false, onCarriage: false, insurance: true },
        DAP: { preCarriage: true, exportCustoms: true, originTHC: true, seaFreight: true, destTHC: true, importCustoms: false, onCarriage: true, insurance: true },
        DDP: { preCarriage: true, exportCustoms: true, originTHC: true, seaFreight: true, destTHC: true, importCustoms: true, onCarriage: true, insurance: true }
    };
    
    var rules = incotermRules[incoterm] || incotermRules.CIF;
    
    // FiyatlarÄ± hesapla
    var costs = {
        preCarriage: { value: 0, found: false, label: 'Pre-Carriage' },
        exportCustoms: { value: 0, found: false, label: 'TR Export Customs' },
        originTHC: { value: 0, found: false, label: ' Logout THC' },
        seaFreight: { value: 0, found: false, label: 'Deniz Freight' },
        destTHC: { value: 0, found: false, label: ' VarÄ±ÅŸ THC' },
        importCustoms: { value: 0, found: false, label: 'YurtdÄ±ÅŸÄ± Customs' },
        onCarriage: { value: 0, found: false, label: 'On-Carriage' },
        insurance: { value: 0, found: false, label: 'Insurance' }
    };
    
    var totalTransit = 0;
    var missingRates = [];
    
    // 1. Pre-carriage (TÃ¼rkiye ÅŸehir â†’ TR liman)
    if (rules.preCarriage && originCity) {
        var preRate = forwarderRatesDB.preCarriage.find(function(r) {
            return r.destPort === originPort && 
                   (r.containerType === containerType || r.containerType === '40HC');
        });
        if (preRate) {
            costs.preCarriage.value = preRate.rate;
            costs.preCarriage.found = true;
            totalTransit += preRate.transit || 1;
        } else if (originCity) {
            missingRates.push('Pre-carriage: ' + originCity + ' â†’ ' + originPort);
            costs.preCarriage.value = 350; // Tahmini
        }
    }
    
    // 2. TR Ä°hracat Customs
    if (rules.exportCustoms) {
        var exportRate = customsRatesDB.serviceFees.find(function(r) {
            return r.serviceType === 'export';
        });
        if (exportRate) {
            costs.exportCustoms.value = exportRate.totalFee;
            costs.exportCustoms.found = true;
        } else {
            missingRates.push('TR Ä°hracat gÃ¼mrÃ¼k Ã¼creti');
            costs.exportCustoms.value = 175; // Tahmini
        }
    }
    
    // 3. Logout THC
    if (rules.originTHC) {
        var originTHC = forwarderRatesDB.terminalCharges.find(function(r) {
            return r.port === originPort && r.thcType === 'origin' &&
                   (r.containerType === containerType || r.containerType.includes('40'));
        });
        if (originTHC) {
            costs.originTHC.value = originTHC.rate;
            costs.originTHC.found = true;
        } else {
            missingRates.push('Origin THC: ' + originPort);
            costs.originTHC.value = 250; // Tahmini
        }
    }
    
    // 4. Deniz Freight
    if (rules.seaFreight) {
        var seaRate = forwarderRatesDB.seaFreight.find(function(r) {
            return r.originPort === originPort && r.destPort === destPort &&
                   (r.containerType === containerType || r.containerType === '40HC');
        });
        if (seaRate) {
            costs.seaFreight.value = seaRate.freightRate + (seaRate.baf || 0);
            costs.seaFreight.found = true;
            totalTransit += seaRate.transit || 14;
        } else {
            missingRates.push('Deniz freight: ' + originPort + ' â†’ ' + destPort);
            costs.seaFreight.value = 1850; // Tahmini
            totalTransit += 14;
        }
    }
    
    // 5. VarÄ±ÅŸ THC
    if (rules.destTHC) {
        var destTHC = forwarderRatesDB.terminalCharges.find(function(r) {
            return r.port === destPort && r.thcType === 'dest' &&
                   (r.containerType === containerType || r.containerType.includes('40'));
        });
        if (destTHC) {
            costs.destTHC.value = destTHC.rate;
            costs.destTHC.found = true;
        } else {
            missingRates.push('Dest THC: ' + destPort);
            costs.destTHC.value = 220; // Tahmini (EUR olarak dÃ¼ÅŸÃ¼nÃ¼p USD'ye Ã§evir)
        }
    }
    
    // 6. YurtdÄ±ÅŸÄ± Customs (Forwarder partner)
    if (rules.importCustoms) {
        var fcRate = forwarderRatesDB.foreignCustoms.find(function(r) {
            return r.country === destCountry &&
                   (r.containerType === containerType || r.containerType === '40HC' || r.containerType === 'LCL');
        });
        if (fcRate) {
            // Para birimi dÃ¶nÃ¼ÅŸÃ¼mÃ¼ (basit)
            var fcValue = fcRate.customsFee;
            if (fcRate.currency === 'EUR') fcValue *= 1.08;
            if (fcRate.currency === 'GBP') fcValue *= 1.27;
            costs.importCustoms.value = fcValue;
            costs.importCustoms.found = true;
            totalTransit += fcRate.processDays || 2;
        } else {
            missingRates.push('YurtdÄ±ÅŸÄ± gÃ¼mrÃ¼k: ' + destCountry);
            costs.importCustoms.value = 320; // Tahmini
            totalTransit += 2;
        }
    }
    
    // 7. On-carriage
    if (rules.onCarriage && destCity) {
        var onRate = forwarderRatesDB.onCarriage.find(function(r) {
            return r.country === destCountry && 
                   (r.containerType === containerType || r.containerType === '40HC');
        });
        if (onRate) {
            var onValue = onRate.rate;
            if (onRate.currency === 'EUR') onValue *= 1.08;
            if (onRate.currency === 'GBP') onValue *= 1.27;
            costs.onCarriage.value = onValue;
            costs.onCarriage.found = true;
            totalTransit += onRate.transit || 1;
        } else if (destCity) {
            missingRates.push('On-carriage: ' + destPort + ' â†’ ' + destCity);
            costs.onCarriage.value = 450; // Tahmini
            totalTransit += 1;
        }
    }
    
    // 8. Insurance
    if (rules.insurance) {
        var insRate = insuranceRatesDB.premiums.find(function(r) {
            return r.cargoCategory === cargoCategory || r.cargoCategory === 'general';
        });
        if (insRate) {
            costs.insurance.value = Math.max(cargoValue * (insRate.premiumRate / 100), insRate.minPremium || 50);
            costs.insurance.found = true;
        } else {
            missingRates.push('Insurance primi: ' + cargoCategory);
            costs.insurance.value = cargoValue * 0.0035; // %0.35 tahmini
        }
    }
    
    // Toplam hesapla
    var total = 0;
    Object.keys(costs).forEach(function(key) {
        if (rules[key]) {
            total += costs[key].value;
        }
    });
    
    // Sonucu gÃ¶ster
    displayCalculationResult(costs, rules, total, totalTransit, incoterm, missingRates, {
        originCity: originCity,
        originPort: originPort,
        destCountry: destCountry,
        destPort: destPort,
        destCity: destCity,
        containerType: containerType
    });
}

function displayCalculationResult(costs, rules, total, transit, incoterm, missingRates, route) {
    var container = document.getElementById('aiCalcResult');
    
    var countryNames = {
        'DE': 'Germany', 'NL': 'Hollanda', 'BE': 'BelÃ§ika', 'GB': 'Ä°ngiltere', 'FR': 'Fransa',
        'IT': 'Ä°talya', 'ES': 'Ä°spanya', 'US': 'ABD', 'CN': 'Ã‡in', 'AE': 'BAE'
    };
    
    var destCountryName = countryNames[route.destCountry] || route.destCountry;
    
    var html = '<div class="calc-result-content">';
    
    // Header
    html += '<div class="result-header">';
    html += '<h3>HESAPLAMA TAMAMLANDI</h3>';
    html += '<p class="result-total">$' + total.toLocaleString('en-US', {minimumFractionDigits: 0, maximumFractionDigits: 0}) + '</p>';
    html += '<p class="result-incoterm">' + incoterm + ' - ' + (route.originCity || 'TR') + ' â†’ ' + destCountryName + '</p>';
    html += '</div>';
    
    // Breakdown
    html += '<div class="result-breakdown">';
    html += '<h4>Maliyet DaÄŸÄ±lÄ±mÄ±</h4>';
    
    Object.keys(costs).forEach(function(key) {
        var cost = costs[key];
        var included = rules[key];
        var statusClass = !included ? 'not-included' : (cost.found ? 'included' : 'missing');
        var valueText = included ? '$' + cost.value.toLocaleString() : 'Dahil deÄŸil';
        if (included && !cost.found) valueText += ' (tahmini)';
        
        html += '<div class="breakdown-item ' + statusClass + '">';
        html += '<span class="breakdown-label">' + cost.label + '</span>';
        html += '<span class="breakdown-value">' + valueText + '</span>';
        html += '</div>';
    });
    
    html += '</div>';
    
    // Transit time
    html += '<div class="result-transit">';
    html += '<span></span>';
    html += '<span>Tahmini Transit Time: <strong>' + transit + ' days</strong></span>';
    html += '</div>';
    
    html += '</div>';
    
    container.innerHTML = html;
    
    // Eksik tarifeler uyarÄ±sÄ±
    var warningContainer = document.getElementById('missingRatesWarning');
    var warningList = document.getElementById('missingRatesList');
    
    if (missingRates.length > 0) {
        warningList.innerHTML = '';
        missingRates.forEach(function(rate) {
            var li = document.createElement('li');
            li.textContent = rate;
            warningList.appendChild(li);
        });
        warningContainer.style.display = 'flex';
    } else {
        warningContainer.style.display = 'none';
    }
}

// AUTOCOMPLETE
var countries = ['Afghanistan','Albania','Algeria','Andorra','Angola','Argentina','Armenia','Australia','Austria','Azerbaijan','Bahrain','Bangladesh','Belarus','Belgium','Belize','Benin','Bhutan','Bolivia','Bosnia and Herzegovina','Botswana','Brazil','Brunei','Bulgaria','Burkina Faso','Burundi','Cambodia','Cameroon','Canada','Cape Verde','Central African Republic','Chad','Chile','China','Colombia','Comoros','Congo','Costa Rica','Croatia','Cuba','Cyprus','Czech Republic','Denmark','Djibouti','Dominican Republic','Ecuador','Egypt','El Salvador','Equatorial Guinea','Eritrea','Estonia','Eswatini','Ethiopia','Fiji','Finland','France','Gabon','Gambia','Georgia','Germany','Ghana','Greece','Grenada','Guatemala','Guinea','Guinea-Bissau','Guyana','Haiti','Honduras','Hong Kong','Hungary','Iceland','India','Indonesia','Iran','Iraq','Ireland','Israel','Italy','Ivory Coast','Jamaica','Japan','Jordan','Kazakhstan','Kenya','Kiribati','Kosovo','Kuwait','Kyrgyzstan','Laos','Latvia','Lebanon','Lesotho','Liberia','Libya','Liechtenstein','Lithuania','Luxembourg','Macau','Madagascar','Malawi','Malaysia','Maldives','Mali','Malta','Mauritania','Mauritius','Mexico','Moldova','Monaco','Mongolia','Montenegro','Morocco','Mozambique','Myanmar','Namibia','Nauru','Nepal','Netherlands','New Zealand','Nicaragua','Niger','Nigeria','North Korea','North Macedonia','Norway','Oman','Pakistan','Palestine','Panama','Papua New Guinea','Paraguay','Peru','Philippines','Poland','Portugal','Qatar','Romania','Russia','Rwanda','Samoa','San Marino','Saudi Arabia','Senegal','Serbia','Seychelles','Sierra Leone','Singapore','Slovakia','Slovenia','Solomon Islands','Somalia','South Africa','South Korea','South Sudan','Spain','Sri Lanka','Sudan','Suriname','Sweden','Switzerland','Syria','Taiwan','Tajikistan','Tanzania','Thailand','Timor-Leste','Togo','Tonga','Trinidad and Tobago','Tunisia','Turkey','Turkmenistan','Tuvalu','UAE','Uganda','Ukraine','United Kingdom','United States','Uruguay','Uzbekistan','Vanuatu','Vatican City','Venezuela','Vietnam','Yemen','Zambia','Zimbabwe'];

// Comprehensive city database - ports AND inland cities
var seaPortCities = [
    // TURKEY
    'Istanbul, Turkey','Mersin, Turkey','Izmir, Turkey','Iskenderun, Turkey','Gemlik, Turkey','Samsun, Turkey','Trabzon, Turkey','Antalya, Turkey',
    // CHINA
    'Shanghai, China','Shenzhen, China','Ningbo, China','Guangzhou, China','Qingdao, China','Tianjin, China','Xiamen, China','Dalian, China','Hong Kong, China','Yantian, China','Shekou, China',
    // USA
    'Los Angeles, USA','Long Beach, USA','New York, USA','Savannah, USA','Houston, USA','Seattle, USA','Oakland, USA','Charleston, USA','Miami, USA','Norfolk, USA','Baltimore, USA','New Orleans, USA','Boston, USA','Philadelphia, USA',
    // GERMANY
    'Hamburg, Germany','Bremerhaven, Germany','Bremen, Germany','Wilhelmshaven, Germany',
    // UK
    'Felixstowe, UK','Southampton, UK','London Gateway, UK','Liverpool, UK','Tilbury, UK','Dover, UK',
    // NETHERLANDS
    'Rotterdam, Netherlands','Amsterdam, Netherlands',
    // BELGIUM
    'Antwerp, Belgium','Zeebrugge, Belgium','Ghent, Belgium',
    // FRANCE
    'Le Havre, France','Marseille, France','Dunkirk, France','Bordeaux, France','Nantes, France',
    // SPAIN
    'Barcelona, Spain','Valencia, Spain','Algeciras, Spain','Bilbao, Spain','Las Palmas, Spain','Malaga, Spain',
    // ITALY
    'Genoa, Italy','La Spezia, Italy','Livorno, Italy','Naples, Italy','Trieste, Italy','Venice, Italy','Gioia Tauro, Italy',
    // JAPAN
    'Tokyo, Japan','Yokohama, Japan','Kobe, Japan','Osaka, Japan','Nagoya, Japan','Hakata, Japan',
    // SOUTH KOREA
    'Busan, South Korea','Incheon, South Korea','Gwangyang, South Korea','Ulsan, South Korea',
    // INDIA
    'Mumbai (JNPT), India','Chennai, India','Mundra, India','Nair Sheva, India','Kolkata, India','Cochin, India','Visakhapatnam, India',
    // UAE
    'Dubai (Jebel Ali), UAE','Abu Dhabi, UAE','Sharjah, UAE','Fujairah, UAE',
    // SAUDI ARABIA
    'Jeddah, Saudi Arabia','Dammam, Saudi Arabia','Jubail, Saudi Arabia','Yanbu, Saudi Arabia',
    // SINGAPORE
    'Singapore, Singapore',
    // MALAYSIA
    'Port Klang, Malaysia','Tanjung Pelepas, Malaysia','Penang, Malaysia',
    // INDONESIA
    'Jakarta (Tanjung Priok), Indonesia','Surabaya, Indonesia','Semarang, Indonesia',
    // THAILAND
    'Laem Chabang, Thailand','Bangkok, Thailand',
    // VIETNAM
    'Ho Chi Minh (Cat Lai), Vietnam','Hai Phong, Vietnam','Da Nang, Vietnam',
    // PHILIPPINES
    'Manila, Philippines','Cebu, Philippines','Davao, Philippines',
    // AUSTRALIA
    'Sydney, Australia','Melbourne, Australia','Brisbane, Australia','Fremantle, Australia','Adelaide, Australia',
    // NEW ZEALAND
    'Auckland, New Zealand','Tauranga, New Zealand','Wellington, New Zealand',
    // RUSSIA
    'St Petersburg, Russia','Vladivostok, Russia','Novorossiysk, Russia','Kaliningrad, Russia',
    // BRAZIL
    'Santos, Brazil','Paranagua, Brazil','Rio de Janeiro, Brazil','Itajai, Brazil',
    // MEXICO
    'Manzanillo, Mexico','Lazaro Cardenas, Mexico','Veracruz, Mexico','Altamira, Mexico',
    // CANADA
    'Vancouver, Canada','Montreal, Canada','Toronto, Canada','Halifax, Canada','Prince Rupert, Canada',
    // ARGENTINA
    'Buenos Aires, Argentina',
    // CHILE
    'San Antonio, Chile','Valparaiso, Chile',
    // SOUTH AFRICA
    'Durban, South Africa','Cape Town, South Africa','Port Elizabeth, South Africa',
    // EGYPT
    'Port Said, Egypt','Alexandria, Egypt','Damietta, Egypt','Suez, Egypt',
    // MOROCCO
    'Tangier Med, Morocco','Casablanca, Morocco',
    // NIGERIA
    'Lagos (Apapa), Nigeria','Tin Can Island, Nigeria',
    // KENYA
    'Mombasa, Kenya',
    // GREECE
    'Piraeus, Greece','Thessaloniki, Greece',
    // POLAND
    'Gdansk, Poland','Gdynia, Poland',
    // SWEDEN
    'Gothenburg, Sweden','Stockholm, Sweden',
    // NORWAY
    'Oslo, Norway','Bergen, Norway',
    // DENMARK
    'Copenhagen, Denmark','Aarhus, Denmark',
    // FINLAND
    'Helsinki, Finland','Turku, Finland',
    // PORTUGAL
    'Lisbon, Portugal','Leixoes, Portugal','Sines, Portugal',
    // ISRAEL
    'Haifa, Israel','Ashdod, Israel',
    // PAKISTAN
    'Karachi, Pakistan','Port Qasim, Pakistan',
    // BANGLADESH
    'Chittagong, Bangladesh',
    // SRI LANKA
    'Colombo, Sri Lanka',
    // QATAR
    'Hamad Port, Qatar',
    // KUWAIT
    'Kuwait City, Kuwait',
    // OMAN
    'Salalah, Oman','Sohar, Oman',
    // TAIWAN
    'Kaohsiung, Taiwan','Taipei, Taiwan','Taichung, Taiwan',
    // PANAMA
    'Balboa, Panama','Colon, Panama',
    // COLOMBIA
    'Cartagena, Colombia','Buenaventura, Colombia'
];

var allCities = [
    // TURKEY - All major cities
    'Istanbul, Turkey','Anland, Turkey','Izmir, Turkey','Bursa, Turkey','Antalya, Turkey','Adana, Turkey','Konya, Turkey','Gaziantep, Turkey','Mersin, Turkey','Kayseri, Turkey','Eskisehir, Turkey','Diyarbakir, Turkey','Samsun, Turkey','Denizli, Turkey','Sanliurfa, Turkey','Malatya, Turkey','Trabzon, Turkey','Erzurum, Turkey','Van, Turkey','Batman, Turkey','Elazig, Turkey','Manisa, Turkey','Balikesir, Turkey','Kahramanmaras, Turkey','Aydin, Turkey','Tekirdag, Turkey','Hatay, Turkey','Sakarya, Turkey','Mugla, Turkey','Kocaeli, Turkey',
    // CHINA - All major cities
    'Shanghai, China','Beijing, China','Guangzhou, China','Shenzhen, China','Chengdu, China','Hangzhou, China','Wuhan, China','Xian, China','Suzhou, China','Nanjing, China','Chongqing, China','Tianjin, China','Zhengzhou, China','Changsha, China','Qingdao, China','Shenyang, China','Dalian, China','Ningbo, China','Xiamen, China','Kunming, China','Hefei, China','Fuzhou, China','Dongguan, China','Foshan, China','Wuxi, China','Jinan, China','Harbin, China','Changchun, China','Nanning, China','Taiyuan, China','Hong Kong, China','Macau, China',
    // USA - All major cities
    'New York, USA','Los Angeles, USA','Chicago, USA','Houston, USA','Phoenix, USA','Philadelphia, USA','San Antonio, USA','San Diego, USA','Dallas, USA','San Jose, USA','Austin, USA','Jacksonville, USA','Fort Worth, USA','Columbus, USA','Charlotte, USA','San Francisco, USA','Indianapolis, USA','Seattle, USA','Denver, USA','Washington DC, USA','Boston, USA','Nashville, USA','Detroit, USA','Portland, USA','Memphis, USA','Las Vegas, USA','Louisville, USA','Baltimore, USA','Milwaukee, USA','Albuquerque, USA','Tucson, USA','Fresno, USA','Sacramento, USA','Atlanta, USA','Miami, USA','New Orleans, USA','Cleveland, USA','Minneapolis, USA','Tampa, USA','Orlando, USA','St. Louis, USA','Pittsburgh, USA','Cincinnati, USA','Kansas City, USA','Long Beach, USA','Oakland, USA','Savannah, USA','Salt Lake City, USA','Anchorage, USA','Honolulu, USA',
    // GERMANY - All major cities
    'Berlin, Germany','Hamburg, Germany','Munich, Germany','Cologne, Germany','Frankfurt, Germany','Stuttgart, Germany','Dusseldorf, Germany','Dortmund, Germany','Essen, Germany','Leipzig, Germany','Bremen, Germany','Dresden, Germany','Hanover, Germany','Nuremberg, Germany','Duisburg, Germany','Bochum, Germany','Wuppertal, Germany','Bielefeld, Germany','Bonn, Germany','Munster, Germany','Karlsruhe, Germany','Mannheim, Germany','Augsburg, Germany','Wiesbaden, Germany','Gelsenkirchen, Germany','Monchengladbach, Germany','Braunschweig, Germany','Chemnitz, Germany','Kiel, Germany','Aachen, Germany','Halle, Germany','Magdeburg, Germany','Freiburg, Germany','Krefeld, Germany','Lubeck, Germany','Oberhausen, Germany','Erfurt, Germany','Mainz, Germany','Rostock, Germany','Kassel, Germany','Hagen, Germany','Saarbrucken, Germany','Hamm, Germany','Potsdam, Germany',
    // UK - All major cities
    'London, UK','Birmingham, UK','Manchester, UK','Leeds, UK','Glasgow, UK','Liverpool, UK','Newcastle, UK','Sheffield, UK','Bristol, UK','Belfast, UK','Leicester, UK','Edinburgh, UK','Cardiff, UK','Nottingham, UK','Southampton, UK','Brighton, UK','Plymouth, UK','Bournemouth, UK','Coventry, UK','Hull, UK','Stoke, UK','Wolverhampton, UK','Derby, UK','Swansea, UK','Reading, UK','Aberdeen, UK','Northampton, UK','Luton, UK','Portsmouth, UK','Preston, UK','Milton Keynes, UK','Norwich, UK','Sunderland, UK','Cambridge, UK','Oxford, UK','Dundee, UK','York, UK','Bath, UK','Exeter, UK','Ipswich, UK',
    // FRANCE - All major cities
    'Paris, France','Marseille, France','Lyon, France','Toulouse, France','Nice, France','Nantes, France','Strasbourg, France','Montpellier, France','Bordeaux, France','Lille, France','Rennes, France','Reims, France','Le Havre, France','Saint-Etienne, France','Toulon, France','Grenoble, France','Dijon, France','Angers, France','Nimes, France','Villeurbanne, France','Le Mans, France','Aix-en-Provence, France','Clermont-Ferrand, France','Brest, France','Tours, France','Amiens, France','Limoges, France','Perpignan, France','Metz, France','Besancon, France','Orleans, France','Rouen, France','Mulhouse, France','Caen, France','Nancy, France','Avignon, France','Cannes, France','Dunkirk, France',
    // ITALY - All major cities
    'Rome, Italy','Milan, Italy','Naples, Italy','Turin, Italy','Palermo, Italy','Genoa, Italy','Bologna, Italy','Florence, Italy','Bari, Italy','Catania, Italy','Venice, Italy','Verona, Italy','Messina, Italy','Padua, Italy','Trieste, Italy','Taranto, Italy','Brescia, Italy','Parma, Italy','Prato, Italy','Modena, Italy','Reggio Calabria, Italy','Reggio Emilia, Italy','Perugia, Italy','Ravenna, Italy','Livorno, Italy','Cagliari, Italy','Foggia, Italy','Rimini, Italy','Salerno, Italy','Ferrara, Italy','Sassari, Italy','Latina, Italy','Giugliano, Italy','Monza, Italy','Siracusa, Italy','Pescara, Italy','Bergamo, Italy','La Spezia, Italy','Trento, Italy','Vicenza, Italy',
    // SPAIN - All major cities
    'Madrid, Spain','Barcelona, Spain','Valencia, Spain','Seville, Spain','Zaragoza, Spain','Malaga, Spain','Murcia, Spain','Palma, Spain','Las Palmas, Spain','Bilbao, Spain','Alicante, Spain','Cordoba, Spain','Valladolid, Spain','Vigo, Spain','Gijon, Spain','Granada, Spain','A Coruna, Spain','Vitoria, Spain','Elche, Spain','Oviedo, Spain','Santa Cruz, Spain','Badalona, Spain','Cartagena, Spain','Jerez, Spain','Sabadell, Spain','Mostoles, Spain','Alcala, Spain','Fuenlabrada, Spain','Almeria, Spain','San Sebastian, Spain','Santander, Spain','Pamplona, Spain','Burgos, Spain','Albacete, Spain','Salamanca, Spain','Huelva, Spain','Logrono, Spain','Badajoz, Spain','Tarragona, Spain','Leon, Spain','Algeciras, Spain',
    // NETHERLANDS - All major cities
    'Amsterdam, Netherlands','Rotterdam, Netherlands','The Hague, Netherlands','Utrecht, Netherlands','Eindhoven, Netherlands','Tilburg, Netherlands','Groningen, Netherlands','Almere, Netherlands','Breda, Netherlands','Nijmegen, Netherlands','Enschede, Netherlands','Apeldoorn, Netherlands','Haarlem, Netherlands','Arnhem, Netherlands','Amersfoort, Netherlands','Zaanstad, Netherlands','Haarlemmermeer, Netherlands','s-Hertogenbosch, Netherlands','Zwolle, Netherlands','Zoetermeer, Netherlands','Leiden, Netherlands','Maastricht, Netherlands','Dordrecht, Netherlands','Ede, Netherlands','Alphen, Netherlands',
    // BELGIUM - All major cities
    'Brussels, Belgium','Antwerp, Belgium','Ghent, Belgium','Charleroi, Belgium','Liege, Belgium','Bruges, Belgium','Namur, Belgium','Leuven, Belgium','Mons, Belgium','Mechelen, Belgium','Aalst, Belgium','La Louviere, Belgium','Kortrijk, Belgium','Hasselt, Belgium','Ostend, Belgium','Genk, Belgium','Tournai, Belgium','Seraing, Belgium','Roeselare, Belgium','Mouscron, Belgium',
    // JAPAN - All major cities
    'Tokyo, Japan','Yokohama, Japan','Osaka, Japan','Nagoya, Japan','Sapporo, Japan','Kobe, Japan','Kyoto, Japan','Fukuoka, Japan','Kawasaki, Japan','Hiroshima, Japan','Sendai, Japan','Kitakyushu, Japan','Chiba, Japan','Sakai, Japan','Niigata, Japan','Hamamatsu, Japan','Shizuoka, Japan','Sagamihara, Japan','Okayama, Japan','Kumamoto, Japan','Kagoshima, Japan','Hachioji, Japan','Matsuyama, Japan','Higashiosaka, Japan','Kawaguchi, Japan','Himeji, Japan','Utsunomiya, Japan','Matsudo, Japan','Nishinomiya, Japan','Kurashiki, Japan',
    // SOUTH KOREA - All major cities
    'Seoul, South Korea','Busan, South Korea','Incheon, South Korea','Daegu, South Korea','Daejeon, South Korea','Gwangju, South Korea','Ulsan, South Korea','Suwon, South Korea','Changwon, South Korea','Seongnam, South Korea','Goyang, South Korea','Yongin, South Korea','Bucheon, South Korea','Cheongju, South Korea','Ansan, South Korea','Jeonju, South Korea','Cheonan, South Korea','Anyang, South Korea','Pohang, South Korea','Hwaseong, South Korea',
    // INDIA - All major cities
    'Mumbai, India','Delhi, India','Bangalore, India','Hyderabad, India','Chennai, India','Kolkata, India','Ahmedabad, India','Pune, India','Surat, India','Jaipur, India','Lucknow, India','Kanpur, India','Nagpur, India','Indore, India','Thane, India','Bhopal, India','Visakhapatnam, India','Pimpri, India','Patna, India','Vadodara, India','Ghaziabad, India','Ludhiana, India','Agra, India','Nashik, India','Faridabad, India','Meerut, India','Rajkot, India','Varanasi, India','Srinagar, India','Aurangabad, India','Dhanbad, India','Amritsar, India','Navi Mumbai, India','Allahabad, India','Ranchi, India','Howrah, India','Coimbatore, India','Jabalpur, India','Gwalior, India','Vijayawada, India','Jodhpur, India','Madurai, India','Raipur, India','Kota, India','Chandigarh, India','Guwahati, India','Solapur, India','Hubli, India','Tiruchirappalli, India','Bareilly, India',
    // UAE - All major cities
    'Dubai, UAE','Abu Dhabi, UAE','Sharjah, UAE','Al Ain, UAE','Ajman, UAE','Ras Al Khaimah, UAE','Fujairah, UAE','Umm Al Quwain, UAE','Khor Fakkan, UAE',
    // SAUDI ARABIA - All major cities
    'Riyadh, Saudi Arabia','Jeddah, Saudi Arabia','Mecca, Saudi Arabia','Medina, Saudi Arabia','Dammam, Saudi Arabia','Taif, Saudi Arabia','Tabuk, Saudi Arabia','Buraidah, Saudi Arabia','Khobar, Saudi Arabia','Khamis Mushait, Saudi Arabia','Hofuf, Saudi Arabia','Jubail, Saudi Arabia','Yanbu, Saudi Arabia','Najran, Saudi Arabia','Abha, Saudi Arabia','Hail, Saudi Arabia','Jizan, Saudi Arabia',
    // RUSSIA - All major cities
    'Moscow, Russia','Saint Petersburg, Russia','Novosibirsk, Russia','Yekaterinburg, Russia','Nizhny Novgorod, Russia','Kazan, Russia','Chelyabinsk, Russia','Omsk, Russia','Samara, Russia','Rostov-on-Don, Russia','Ufa, Russia','Krasnoyarsk, Russia','Voronezh, Russia','Perm, Russia','Volgograd, Russia','Krasnodar, Russia','Saratov, Russia','Tyumen, Russia','Tolyatti, Russia','Izhevsk, Russia','Barnaul, Russia','Vladivostok, Russia','Irkutsk, Russia','Khabarovsk, Russia','Yaroslavl, Russia','Orenburg, Russia','Novokuznetsk, Russia','Ryazan, Russia','Tomsk, Russia','Kemerovo, Russia',
    // BRAZIL - All major cities
    'Sao Paulo, Brazil','Rio de Janeiro, Brazil','Brasilia, Brazil','Salvador, Brazil','Fortaleza, Brazil','Belo Horizonte, Brazil','Manaus, Brazil','Curitiba, Brazil','Recife, Brazil','Porto Alegre, Brazil','Belem, Brazil','Goiania, Brazil','Guarulhos, Brazil','Campinas, Brazil','Sao Luis, Brazil','Sao Goncalo, Brazil','Maceio, Brazil','Duque de Caxias, Brazil','Natal, Brazil','Campo Grande, Brazil','Teresina, Brazil','Santos, Brazil','Nova Iguacu, Brazil','Joao Pessoa, Brazil','Osasco, Brazil','Jaboatao, Brazil','Uberlandia, Brazil','Sorocaba, Brazil','Ribeirao Preto, Brazil','Cuiaba, Brazil',
    // MEXICO - All major cities  
    'Mexico City, Mexico','Guadalajara, Mexico','Monterrey, Mexico','Puebla, Mexico','Tijuana, Mexico','Leon, Mexico','Ciudad Juarez, Mexico','Zapopan, Mexico','Ecatepec, Mexico','Nezahualcoyotl, Mexico','Chihuahua, Mexico','Naucalpan, Mexico','Merida, Mexico','San Luis Potosi, Mexico','Aguascalientes, Mexico','Hermosillo, Mexico','Saltillo, Mexico','Mexicali, Mexico','Culiacan, Mexico','Guadalupe, Mexico','Cancun, Mexico','Acapulco, Mexico','Queretaro, Mexico','Morelia, Mexico','Tlalnepantla, Mexico','Toluca, Mexico','Torreon, Mexico','Veracruz, Mexico','Reynosa, Mexico','Tuxtla Gutierrez, Mexico',
    // CANADA - All major cities
    'Toronto, Canada','Montreal, Canada','Vancouver, Canada','Calgary, Canada','Edmonton, Canada','Ottawa, Canada','Winnipeg, Canada','Quebec City, Canada','Hamilton, Canada','Kitchener, Canada','London, Canada','Victoria, Canada','Halifax, Canada','Oshawa, Canada','Windsor, Canada','Saskatoon, Canada','Regina, Canada','Barrie, Canada','St. Johns, Canada','Kelowna, Canada','Sherbrooke, Canada','Kingston, Canada','Trois-Rivieres, Canada','Guelph, Canada','Moncton, Canada','Brantford, Canada','Thunder Bay, Canada','Saint John, Canada','Peterborough, Canada','Nanaimo, Canada',
    // AUSTRALIA - All major cities
    'Sydney, Australia','Melbourne, Australia','Brisbane, Australia','Perth, Australia','Adelaide, Australia','Gold Coast, Australia','Newcastle, Australia','Canberra, Australia','Sunshine Coast, Australia','Wollongong, Australia','Hobart, Australia','Geelong, Australia','Townsville, Australia','Cairns, Australia','Darwin, Australia','Toowoomba, Australia','Ballarat, Australia','Bendigo, Australia','Launceston, Australia','Albury, Australia','Mackay, Australia','Rockhampton, Australia','Bunbury, Australia','Bundaberg, Australia','Hervey Bay, Australia',
    // POLAND - All major cities
    'Warsaw, Poland','Krakow, Poland','Lodz, Poland','Wroclaw, Poland','Poznan, Poland','Gdansk, Poland','Szczecin, Poland','Bydgoszcz, Poland','Lublin, Poland','Bialystok, Poland','Katowice, Poland','Gdynia, Poland','Czestochowa, Poland','Radom, Poland','Torun, Poland','Sosnowiec, Poland','Rzeszow, Poland','Kielce, Poland','Gliwice, Poland','Olsztyn, Poland','Zabrze, Poland','Bytom, Poland','Bielsko-Biala, Poland','Ruda Slaska, Poland','Rybnik, Poland',
    // OTHER EUROPEAN COUNTRIES
    'Vienna, Austria','Graz, Austria','Linz, Austria','Salzburg, Austria','Innsbruck, Austria',
    'Zurich, Switzerland','Geneva, Switzerland','Basel, Switzerland','Bern, Switzerland','Lausanne, Switzerland',
    'Prague, Czech Republic','Brno, Czech Republic','Ostrava, Czech Republic',
    'Budapest, Hungary','Debrecen, Hungary','Szeged, Hungary',
    'Bucharest, Romania','Cluj-Napoca, Romania','Timisoara, Romania','Constanta, Romania',
    'Sofia, Bulgaria','Plovdiv, Bulgaria','Varna, Bulgaria',
    'Athens, Greece','Thessaloniki, Greece','Patras, Greece','Piraeus, Greece',
    'Lisbon, Portugal','Porto, Portugal','Braga, Portugal','Coimbra, Portugal',
    'Stockholm, Sweden','Gothenburg, Sweden','Malmo, Sweden','Uppsala, Sweden',
    'Oslo, Norway','Bergen, Norway','Trondheim, Norway','Stavanger, Norway',
    'Copenhagen, Denmark','Aarhus, Denmark','Odense, Denmark','Aalborg, Denmark',
    'Helsinki, Finland','Espoo, Finland','Tampere, Finland','Turku, Finland',
    'Dublin, Ireland','Cork, Ireland','Galway, Ireland','Limerick, Ireland',
    'Tel Aviv, Israel','Jerusalem, Israel','Haifa, Israel','Ashdod, Israel',
    'Beirut, Lebanon','Tripoli, Lebanon',
    'Amman, Jordan','Aqaba, Jordan',
    'Baghdad, Iraq','Basra, Iraq','Erbil, Iraq',
    'Tehran, Iran','Mashhad, Iran','Isfahan, Iran','Tabriz, Iran','Shiraz, Iran',
    'Karachi, Pakistan','Lahore, Pakistan','Islamabad, Pakistan','Faisalabad, Pakistan','Rawalpindi, Pakistan',
    'Dhaka, Bangladesh','Chittagong, Bangladesh','Khulna, Bangladesh',
    'Colombo, Sri Lanka','Kandy, Sri Lanka',
    'Doha, Qatar',
    'Kuwait City, Kuwait',
    'Manama, Bahrain',
    'Muscat, Oman',
    'Singapore, Singapore',
    'Kuala Lumpur, Malaysia','George Town, Malaysia','Johor Bahru, Malaysia','Ipoh, Malaysia',
    'Jakarta, Indonesia','Surabaya, Indonesia','Bandung, Indonesia','Medan, Indonesia','Semarang, Indonesia',
    'Bangkok, Thailand','Chiang Mai, Thailand','Phuket, Thailand','Pattaya, Thailand',
    'Ho Chi Minh City, Vietnam','Hanoi, Vietnam','Da Nang, Vietnam','Hai Phong, Vietnam','Can Tho, Vietnam',
    'Manila, Philippines','Quezon City, Philippines','Cebu City, Philippines','Davao, Philippines',
    'Yangon, Myanmar','Mandalay, Myanmar',
    'Phnom Penh, Cambodia','Siem Reap, Cambodia',
    'Taipei, Taiwan','Kaohsiung, Taiwan','Taichung, Taiwan','Tainan, Taiwan',
    'Auckland, New Zealand','Wellington, New Zealand','Christchurch, New Zealand','Hamilton, New Zealand',
    // SOUTH AMERICA
    'Buenos Aires, Argentina','Cordoba, Argentina','Rosario, Argentina','Mendoza, Argentina',
    'Santiago, Chile','Valparaiso, Chile','Concepcion, Chile',
    'Lima, Peru','Arequipa, Peru','Trujillo, Peru',
    'Bogota, Colombia','Medellin, Colombia','Cali, Colombia','Cartagena, Colombia','Barranquilla, Colombia',
    'Caracas, Venezuela','Maracaibo, Venezuela','Valencia, Venezuela',
    'Quito, Ecuador','Guayaquil, Ecuador',
    'Montevideo, Uruguay',
    'Asuncion, Paraguay',
    'La Paz, Bolivia','Santa Cruz, Bolivia',
    // AFRICA
    'Lagos, Nigeria','Kano, Nigeria','Ibadan, Nigeria','Abuja, Nigeria',
    'Cairo, Egypt','Alexandria, Egypt','Giza, Egypt',
    'Johannesburg, South Africa','Cape Town, South Africa','Durban, South Africa','Pretoria, South Africa',
    'Nairobi, Kenya','Mombasa, Kenya',
    'Addis Ababa, Ethiopia',
    'Casablanca, Morocco','Rabat, Morocco','Marrakech, Morocco','Tangier, Morocco','Fes, Morocco',
    'Algiers, Algeria','Oran, Algeria',
    'Tunis, Tunisia','Sfax, Tunisia',
    'Accra, Ghana','Kumasi, Ghana',
    'Dakar, Senegal',
    'Abidjan, Ivory Coast',
    'Dar es Salaam, Tanzania','Dodoma, Tanzania',
    'Kampala, Uganda',
    'Lusaka, Zambia',
    'Harare, Zimbabwe',
    'Luanda, Angola',
    'Maputo, Mozambique',
    'Douala, Cameroon','Yaounde, Cameroon',
    'Kinshasa, Democratic Republic of Congo',
    'Khartoum, Sudan'
];

// Air cargo hub cities (includes airports)
var airCities = allCities;

// Land transport cities (all cities, especially for trucking)
var landCities = allCities;

// Cargo type options based on category
var cargoTypeOptions = {
    general: [
        { value: 'general-commercial', label: 'Commercial Goods' },
        { value: 'general-industrial', label: 'Industrial Equipment' },
        { value: 'general-textiles', label: 'Textiles & Garments' },
        { value: 'general-consumer', label: 'Consumer Electronics' },
        { value: 'general-furniture', label: 'Furniture' },
        { value: 'general-construction', label: 'Construction Materials' },
        { value: 'general-plastics', label: 'Plastics & Rubber' },
        { value: 'general-metals', label: 'Metal Products' },
        { value: 'general-paper', label: 'Paper & Packaging' },
        { value: 'general-chemicals', label: 'Non-hazardous Chemicals' }
    ],
    fragile: [
        { value: 'fragile-glass', label: 'Glass Products' },
        { value: 'fragile-ceramics', label: 'Ceramics & Porcelain' },
        { value: 'fragile-electronics', label: 'Sensitive Electronics' },
        { value: 'fragile-art', label: 'Artwork & Antiques' },
        { value: 'fragile-medical', label: 'Medical Equipment' },
        { value: 'fragile-musical', label: 'Musical Instruments' },
        { value: 'fragile-optical', label: 'Optical Equipment' },
        { value: 'fragile-laboratory', label: 'Laboratory Equipment' },
        { value: 'fragile-jewelry', label: 'Jewelry & Watches' }
    ],
    perishable: [
        { value: 'perishable-frozen', label: 'Frozen Food (-18Â°C)' },
        { value: 'perishable-chilled', label: 'Chilled Products (0-4Â°C)' },
        { value: 'perishable-fresh', label: 'Fresh Produce' },
        { value: 'perishable-seafood', label: 'Seafood' },
        { value: 'perishable-meat', label: 'Meat Products' },
        { value: 'perishable-dairy', label: 'Dairy Products' },
        { value: 'perishable-pharma', label: 'Pharmaceuticals' },
        { value: 'perishable-flowers', label: 'Flowers & Plants' },
        { value: 'perishable-beverages', label: 'Beverages' },
        { value: 'perishable-bakery', label: 'Bakery Products' }
    ],
    hazardous: [
        { value: 'hazmat-explosives', label: 'Class 1: Explosives' },
        { value: 'hazmat-gases', label: 'Class 2: Gases' },
        { value: 'hazmat-flammable', label: 'Class 3: Flammable Liquids' },
        { value: 'hazmat-solids', label: 'Class 4: Flammable Solids' },
        { value: 'hazmat-oxidizers', label: 'Class 5: Oxidizers' },
        { value: 'hazmat-toxic', label: 'Class 6: Toxic Substances' },
        { value: 'hazmat-radioactive', label: 'Class 7: Radioactive' },
        { value: 'hazmat-corrosive', label: 'Class 8: Corrosives' },
        { value: 'hazmat-misc', label: 'Class 9: Misc Dangerous Goods' },
        { value: 'hazmat-lithium', label: 'Lithium Batteries' }
    ],
    oversized: [
        { value: 'oversized-machinery', label: 'Heavy Machinery' },
        { value: 'oversized-windmill', label: 'Wind Turbine Parts' },
        { value: 'oversized-transformer', label: 'Transformers' },
        { value: 'oversized-generator', label: 'Generators' },
        { value: 'oversized-tank', label: 'Storage Tanks' },
        { value: 'oversized-crane', label: 'Cranes & Lifting Equipment' },
        { value: 'oversized-vessel', label: 'Pressure Vessels' },
        { value: 'oversized-pipes', label: 'Large Pipes' },
        { value: 'oversized-modules', label: 'Pre-fab Modules' }
    ],
    vehicles: [
        { value: 'vehicle-car', label: 'Passenger Cars' },
        { value: 'vehicle-motorcycle', label: 'Motorcycles' },
        { value: 'vehicle-truck', label: 'Trucks & Trailers' },
        { value: 'vehicle-bus', label: 'Buses' },
        { value: 'vehicle-agricultural', label: 'Agricultural Machinery' },
        { value: 'vehicle-construction', label: 'Construction Vehicles' },
        { value: 'vehicle-boat', label: 'Boats & Yachts' },
        { value: 'vehicle-aircraft', label: 'Aircraft Parts' },
        { value: 'vehicle-spare', label: 'Spare Parts' }
    ],
    livestock: [
        { value: 'livestock-cattle', label: 'Cattle' },
        { value: 'livestock-horses', label: 'Horses' },
        { value: 'livestock-sheep', label: 'Sheep & Goats' },
        { value: 'livestock-poultry', label: 'Poultry' },
        { value: 'livestock-pets', label: 'Pets' },
        { value: 'livestock-zoo', label: 'Zoo Animals' },
        { value: 'livestock-fish', label: 'Live Fish' },
        { value: 'livestock-bees', label: 'Bees' }
    ],
    personal: [
        { value: 'personal-household', label: 'Household Goods' },
        { value: 'personal-furniture', label: 'Home Furniture' },
        { value: 'personal-appliances', label: 'Home Appliances' },
        { value: 'personal-relocation', label: 'Full Home Relocation' },
        { value: 'personal-storage', label: 'Storage Items' },
        { value: 'personal-inheritance', label: 'Inheritance Goods' },
        { value: 'personal-student', label: 'Student Effects' }
    ]
};

// Load type options based on freight mode
var loadTypeOptions = {
    sea: [
        { value: 'fcl', label: 'FCL - Full Container' },
        { value: 'lcl', label: 'LCL - Less than Container' },
        { value: 'bulk', label: 'Bulk Cargo' },
        { value: 'breakbulk', label: 'General Cargo' },
        { value: 'roro', label: 'RoRo - Vehicle Transport' },
        { value: 'reefer', label: 'Refrigerated Container' }
    ],
    air: [
        { value: 'standard', label: 'Standard Air Cargo' },
        { value: 'express', label: 'Express / Urgent' },
        { value: 'charter', label: 'Charter Flight' },
        { value: 'courier', label: 'Courier Service' },
        { value: 'consolidated', label: 'Consolidated Shipment' }
    ]
};

// Container/vehicle options based on freight mode and load type
var containerOptions = {
    sea: {
        fcl: [
            { value: '20gp', label: '20\' Standard (33 mÂ³)' },
            { value: '40gp', label: '40\' Standard (67 mÂ³)' },
            { value: '40hc', label: '40\' High Cube (76 mÂ³)' },
            { value: '45hc', label: '45\' High Cube (86 mÂ³)' },
            { value: '20rf', label: '20\' Refrigerated' },
            { value: '40rf', label: '40\' Refrigerated' },
            { value: '20ot', label: '20\' Open Top' },
            { value: '40ot', label: '40\' Open Top' },
            { value: '20fr', label: '20\' Flat Rack' },
            { value: '40fr', label: '40\' Flat Rack' }
        ],
        lcl: [{ value: 'cbm', label: 'Per CBM (Cubic Meter)' }],
        bulk: [{ value: 'mt', label: 'Per Metric Ton' }],
        breakbulk: [{ value: 'unit', label: 'Per Piece/Unit' }],
        roro: [{ value: 'unit', label: 'Per Vehicle/Unit' }],
        reefer: [
            { value: '20rf', label: '20\' Refrigerated' },
            { value: '40rf', label: '40\' Refrigerated High Cube' }
        ]
    },
    air: {
        standard: [{ value: 'kg', label: 'Kg BaÅŸÄ±na (Ãœcretlendirilebilir AÄŸÄ±rlÄ±k)' }],
        express: [{ value: 'kg', label: 'Kg BaÅŸÄ±na (Ãœcretlendirilebilir AÄŸÄ±rlÄ±k)' }],
        charter: [
            { value: 'narrow', label: 'Dar GÃ¶vdeli UÃ§ak' },
            { value: 'wide', label: 'GeniÅŸ GÃ¶vdeli UÃ§ak' },
            { value: 'freighter', label: 'Kargo UÃ§aÄŸÄ±' }
        ],
        courier: [{ value: 'kg', label: 'Kg BaÅŸÄ±na' }],
        consolidated: [{ value: 'kg', label: 'Kg BaÅŸÄ±na' }]
    }
};

function setupAutocomplete() {
    var freightType = document.getElementById('freightType').value;
    var cityList = freightType === 'sea' ? seaPortCities : allCities;
    
    createAutocomplete('originCountry', countries);
    createAutocomplete('destCountry', countries);
    createAutocomplete('originCity', cityList);
    createAutocomplete('destCity', cityList);
    
    // Initialize form options
    updateLoadTypeOptions();
    updateLocationRequirements();
}

function createAutocomplete(inputId, dataList) {
    var input = document.getElementById(inputId);
    if (!input) return;
    
    // Remove existing listener if any
    var newInput = input.cloneNode(true);
    input.parentNode.replaceChild(newInput, input);
    input = newInput;
    
    input.addEventListener('input', function() {
        var val = this.value.toLowerCase();
        closeAllLists();
        if (!val) return;
        
        var listDiv = document.createElement('div');
        listDiv.setAttribute('class', 'autocomplete-list');
        listDiv.setAttribute('id', inputId + '-list');
        this.parentNode.appendChild(listDiv);
        
        var count = 0;
        for (var i = 0; i < dataList.length; i++) {
            if (dataList[i].toLowerCase().indexOf(val) > -1 && count < 10) {
                var item = document.createElement('div');
                item.setAttribute('class', 'autocomplete-item');
                
                // Highlight matching text
                var matchIndex = dataList[i].toLowerCase().indexOf(val);
                var beforeMatch = dataList[i].substring(0, matchIndex);
                var match = dataList[i].substring(matchIndex, matchIndex + val.length);
                var afterMatch = dataList[i].substring(matchIndex + val.length);
                item.innerHTML = beforeMatch + '<strong>' + match + '</strong>' + afterMatch;
                
                item.setAttribute('data-value', dataList[i]);
                item.addEventListener('click', function() {
                    input.value = this.getAttribute('data-value');
                    closeAllLists();
                });
                listDiv.appendChild(item);
                count++;
            }
        }
    });
}

function closeAllLists() {
    var lists = document.getElementsByClassName('autocomplete-list');
    while (lists.length > 0) {
        lists[0].parentNode.removeChild(lists[0]);
    }
}

document.addEventListener('click', function(e) {
    closeAllLists();
});

function pickFreight(type) {
    document.getElementById('opt-air').classList.remove('active');
    document.getElementById('opt-sea').classList.remove('active');
    document.getElementById('opt-' + type).classList.add('active');
    document.getElementById('freightType').value = type;
    
    // Update city autocomplete based on freight type
    var cityList = type === 'sea' ? seaPortCities : allCities;
    createAutocomplete('originCity', cityList);
    createAutocomplete('destCity', cityList);
    
    // Update labels
    var cityLabel = type === 'sea' ? 'Port' : 'Airport / City';
    document.getElementById('originCityLabel').textContent = cityLabel;
    document.getElementById('destCityLabel').textContent = cityLabel;
    
    // Show/hide freight-specific fields
    var airFields = document.getElementById('airCargoFields');
    if (airFields) airFields.style.display = type === 'air' ? 'block' : 'none';
    
    // Update load type options
    updateLoadTypeOptions();
}

function updateLoadTypeOptions() {
    var freightType = document.getElementById('freightType').value;
    var loadTypeSelect = document.getElementById('loadType');
    var options = loadTypeOptions[freightType] || [];
    
    loadTypeSelect.innerHTML = '<option value="">Select cargo type</option>';
    options.forEach(function(opt) {
        var option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.label;
        loadTypeSelect.appendChild(option);
    });
    
    updateContainerOptions();
}

function updateContainerOptions() {
    var freightType = document.getElementById('freightType').value;
    var loadType = document.getElementById('loadType').value;
    var containerSelect = document.getElementById('containerSize');
    var containerGroup = document.getElementById('containerGroup');
    var containerLabel = document.getElementById('containerLabel');
    
    if (!loadType) {
        containerGroup.style.display = 'none';
        return;
    }
    
    containerGroup.style.display = 'block';
    
    // Update label based on freight type
    if (freightType === 'sea') {
        containerLabel.textContent = 'Container Type';
    } else if (freightType === 'air') {
        containerLabel.textContent = 'UÃ§ak / Birim';
    } else {
        containerLabel.textContent = 'AraÃ§ Tipi';
    }
    
    var options = containerOptions[freightType] && containerOptions[freightType][loadType] ? 
                  containerOptions[freightType][loadType] : [];
    
    containerSelect.innerHTML = '<option value="">Select</option>';
    options.forEach(function(opt) {
        var option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.label;
        containerSelect.appendChild(option);
    });
}

function updateCargoTypes() {
    var category = document.getElementById('cargoCategory').value;
    var cargoTypeSelect = document.getElementById('cargoType');
    var options = cargoTypeOptions[category] || [];
    
    cargoTypeSelect.innerHTML = '<option value="">Select cargo type</option>';
    options.forEach(function(opt) {
        var option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.label;
        cargoTypeSelect.appendChild(option);
    });
    
    // Show/hide special requirements
    var specialReq = document.getElementById('specialRequirements');
    var tempRow = document.getElementById('tempControlRow');
    var hazmatRow = document.getElementById('hazmatRow');
    var oversizedRow = document.getElementById('oversizedRow');
    
    tempRow.style.display = 'none';
    hazmatRow.style.display = 'none';
    oversizedRow.style.display = 'none';
    
    if (category === 'perishable') {
        specialReq.style.display = 'block';
        tempRow.style.display = 'flex';
    } else if (category === 'hazardous') {
        specialReq.style.display = 'block';
        hazmatRow.style.display = 'flex';
    } else if (category === 'oversized') {
        specialReq.style.display = 'block';
        oversizedRow.style.display = 'flex';
    } else {
        specialReq.style.display = 'none';
    }
}

function updateLocationRequirements() {
    var incoterm = document.getElementById('incoterm').value;
    var originAddressRow = document.getElementById('originAddressRow');
    var destAddressRow = document.getElementById('destAddressRow');
    
    // Door-to-door terms need addresses
    var doorTerms = ['DDP', 'DAP'];
    var originDoorTerms = ['EXW', 'FCA'];
    
    if (doorTerms.includes(incoterm)) {
        originAddressRow.style.display = 'flex';
        destAddressRow.style.display = 'flex';
    } else if (originDoorTerms.includes(incoterm)) {
        originAddressRow.style.display = 'flex';
        destAddressRow.style.display = 'none';
    } else {
        originAddressRow.style.display = 'none';
        destAddressRow.style.display = 'none';
    }
}

// ==================== SERVICE PANELS ====================

function toggleServicePanel(serviceType) {
    var cardId = serviceType + 'Card';
    var panelId = serviceType + 'Panel';
    var checkboxId = serviceType === 'customs' ? 'customsClearance' : serviceType;
    
    var card = document.getElementById(cardId);
    var checkbox = document.getElementById(checkboxId);
    
    // Toggle active state
    card.classList.toggle('active');
    
    // Auto-check the checkbox when opening panel
    if (card.classList.contains('active')) {
        checkbox.checked = true;
    }
    
    // Setup insurance calculator if insurance panel
    if (serviceType === 'insurance' && card.classList.contains('active')) {
        setupInsuranceCalculator();
    }
}

function setupInsuranceCalculator() {
    var valueInput = document.getElementById('insuranceValue');
    var coverageSelect = document.getElementById('insuranceCoverage');
    
    if (valueInput) {
        valueInput.addEventListener('input', calculateInsurancePremium);
    }
    if (coverageSelect) {
        coverageSelect.addEventListener('change', calculateInsurancePremium);
    }
}

function calculateInsurancePremium() {
    var value = parseFloat(document.getElementById('insuranceValue').value) || 0;
    var coverage = document.getElementById('insuranceCoverage').value;
    
    // Premium rates based on coverage type
    var rates = {
        'all-risk': 0.0035,      // 0.35%
        'named-perils': 0.0025,  // 0.25%
        'total-loss': 0.0015     // 0.15%
    };
    
    var rate = rates[coverage] || 0.0035;
    var premium = value * rate;
    
    // Minimum premium $50
    if (premium > 0 && premium < 50) {
        premium = 50;
    }
    
    document.getElementById('premiumRate').textContent = (rate * 100).toFixed(2) + '%';
    document.getElementById('premiumAmount').textContent = '$' + premium.toFixed(2);
}

// Close service panels when clicking checkbox directly
document.addEventListener('DOMContentLoaded', function() {
    var serviceCheckboxes = ['insurance', 'customsClearance', 'packaging', 'warehousing'];
    
    serviceCheckboxes.forEach(function(id) {
        var checkbox = document.getElementById(id);
        if (checkbox) {
            checkbox.addEventListener('change', function() {
                var cardId = id === 'customsClearance' ? 'customsCard' : id + 'Card';
                var card = document.getElementById(cardId);
                
                if (this.checked && !card.classList.contains('active')) {
                    card.classList.add('active');
                    if (id === 'insurance') {
                        setupInsuranceCalculator();
                    }
                }
            });
        }
    });
});

// Close modal on overlay click
var quoteModalEl = document.getElementById('quoteModal');
if (quoteModalEl) {
    quoteModalEl.addEventListener('click', function(e) {
        if (e.target === this) {
            closeQuoteModal();
        }
    });
}

// TRACKING FUNCTIONS
var myShipments = [
    { id: 'GFN-2024-78542', date: '2024-12-10', origin: 'Istanbul, Turkey', dest: 'Shanghai, China', freight: 'Sea', weight: '2,500 kg', status: 'active', price: 2850, progress: 68 },
    { id: 'GFN-2024-78410', date: '2024-12-05', origin: 'Hamburg, Germany', dest: 'Dubai, UAE', freight: 'Sea', weight: '5,000 kg', status: 'active', price: 4200, progress: 45 },
    { id: 'GFN-2024-78356', date: '2024-12-01', origin: 'London, UK', dest: 'New York, USA', freight: 'Air', weight: '200 kg', status: 'active', price: 1580, progress: 82 },
    { id: 'GFN-2024-78201', date: '2024-11-25', origin: 'Tokyo, Japan', dest: 'Los Angeles, USA', freight: 'Sea', weight: '8,000 kg', status: 'completed', price: 6750, progress: 100 },
    { id: 'GFN-2024-78156', date: '2024-11-20', origin: 'Singapore', dest: 'Rotterdam, Netherlands', freight: 'Sea', weight: '12,000 kg', status: 'completed', price: 9200, progress: 100 },
    { id: 'GFN-2024-78089', date: '2024-11-15', origin: 'Mumbai, India', dest: 'Antwerp, Belgium', freight: 'Sea', weight: '3,500 kg', status: 'completed', price: 3100, progress: 100 },
    { id: 'GFN-2024-78012', date: '2024-11-10', origin: 'Sydney, Australia', dest: 'Busan, South Korea', freight: 'Sea', weight: '6,200 kg', status: 'completed', price: 5400, progress: 100 },
    { id: 'GFN-2024-78650', date: '2024-12-18', origin: 'Miami, USA', dest: 'Santos, Brazil', freight: 'Sea', weight: '4,000 kg', status: 'pending', price: 3800, progress: 0 }
];

// =====================================================
// NETWORK SYSTEM - Central Data & Functions (SUPABASE FIRST)
// =====================================================

// Central network requests database
var networkRequests = [];

// Load networkRequests from Supabase (not localStorage)
async function loadNetworkFromSupabase() {
    if (!supabase) {
        console.log('Supabase not available for requests');
        return [];
    }
    
    try {
        var result = await supabase
            .from('requests')
            .select('*')
            .order('created_at', { ascending: false });
        
        if (result.error) {
            console.log('Requests load error:', result.error.message);
            return [];
        }
        
        // Supabase formatÄ±ndan JS formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r
        networkRequests = (result.data || []).map(function(r) {
            return {
                id: r.request_id || r.id,
                odatabaseId: r.id, // Supabase UUID - JOIN iÃ§in gerekli
                userId: r.user_id,
                clientId: r.client_id,
                shipper: r.shipper_name,
                shipperCompany: r.shipper_company,
                origin: r.origin,
                destination: r.destination,
                freight: r.freight_type,
                loadType: r.load_type,
                containerType: r.container_type,
                containerSize: r.container_size,
                weight: r.weight,
                volume: r.volume,
                cargoCategory: r.cargo_category,
                cargoType: r.cargo_type,
                incoterm: r.incoterm,
                loadDate: r.load_date,
                targetDate: r.target_date,
                budget: r.budget,
                status: r.status || 'open',
                notes: r.notes,
                createdAt: r.created_at,
                quotes: [] // Quotes ayrÄ± yÃ¼klenecek
            };
        });
        
        console.log('Loaded', networkRequests.length, 'requests from Supabase');
        return networkRequests;
    } catch(e) {
        console.log('Requests load exception:', e.message);
        return [];
    }
}

// Save networkRequests - artÄ±k sadece Supabase'e
function saveNetworkToStorage() {
    // ArtÄ±k localStorage'a kaydetmiyoruz - sadece Supabase
    console.log('Requests saved to Supabase only');
}

// Current selected request for quoting
var selectedRequestId = null;

// Render forwarder requests with quote submission capability
// Requests filter state
var requestsFilter = 'open'; // 'open', 'quoted', 'all'

// Per-forwarder quote tracking
var mySubmittedQuotes = {};

// Load submitted quotes from localStorage
// Load submitted quotes from Supabase (not localStorage)
async function loadSubmittedQuotes() {
    if (!supabase || !currentUser) {
        console.log('Cannot load submitted quotes - no supabase or user');
        return;
    }
    
    try {
        // Forwarder'Ä±n verdiÄŸi tÃ¼m teklifleri Ã§ek
        var result = await supabase
            .from('quotes')
            .select('request_id, total_price, freight_rate, transit_days, created_at')
            .eq('forwarder_id', currentUser);
        
        if (result.error) {
            console.log('Submitted quotes load error:', result.error.message);
            return;
        }
        
        // mySubmittedQuotes'u doldur
        mySubmittedQuotes = {};
        (result.data || []).forEach(function(q) {
            mySubmittedQuotes[q.request_id] = {
                totalPrice: q.total_price,
                freightRate: q.freight_rate,
                transitDays: q.transit_days,
                submittedAt: q.created_at
            };
        });
        
        console.log('Loaded', Object.keys(mySubmittedQuotes).length, 'submitted quotes from Supabase');
    } catch(e) {
        console.log('Submitted quotes load exception:', e.message);
    }
}

// Save submitted quotes - artÄ±k Supabase'e kaydediliyor (saveQuoteToSupabase ile)
function saveSubmittedQuotes() {
    // ArtÄ±k localStorage'a kaydetmiyoruz
    console.log('Submitted quotes tracked in Supabase');
}

// Check if current user already has a quote for this request
function hasMyQuote(reqId) {
    // Check local tracking first
    if (mySubmittedQuotes[reqId]) {
        return true;
    }
    // Fallback: check quotesDB
    if (typeof quotesDB !== 'undefined' && Array.isArray(quotesDB)) {
        return quotesDB.some(function(q) { 
            return q.requestId === reqId && q.forwarderId === currentUser; 
        });
    }
    return false;
}

// VerdiÄŸim teklifin detaylarÄ±nÄ± getir
function getMyQuoteDetails(reqId) {
    // Check local tracking first
    if (mySubmittedQuotes[reqId] && typeof mySubmittedQuotes[reqId] === 'object') {
        return mySubmittedQuotes[reqId];
    }
    // Fallback: check quotesDB
    if (typeof quotesDB !== 'undefined' && Array.isArray(quotesDB)) {
        var myQuote = quotesDB.find(function(q) { 
            return q.requestId === reqId && (q.forwarderId === currentUser || q.forwarderName === currentUser); 
        });
        return myQuote || null;
    }
    return null;
}

// Mark a request as having my quote - with price info
function markQuoteSubmitted(reqId, quoteData) {
    if (quoteData) {
        mySubmittedQuotes[reqId] = {
            totalPrice: quoteData.totalPrice,
            freightRate: quoteData.freightRate,
            transitDays: quoteData.transitDays,
            submittedAt: new Date().toISOString()
        };
    } else {
        mySubmittedQuotes[reqId] = true;
    }
    saveSubmittedQuotes();
}

async function renderForwarderRequests() {
    var container = document.getElementById('requestsContainer');
    if (!container) return;
    
    var lang = currentLanguage || 'tr';
    var tr = translations[lang] || translations['tr'];
    
    // Show loading
    container.innerHTML = '<div style="text-align: center; padding: 40px;"><p>Loading requests...</p></div>';
    
    // Load fresh data from Supabase
    try {
        var freshRequests = await loadRequestsFromSupabase();
        networkRequests = freshRequests;
        console.log('Loaded', freshRequests.length, 'requests from Supabase for forwarder');
    } catch(e) {
        console.log('Using localStorage requests:', e.message);
    }
    
    var html = '';
    var requestCount = 0;
    
    // Filter list based on requestsFilter
    var list = networkRequests || [];
    
    // Deduplicate requests by id
    var uniqueRequests = [];
    var seenIds = {};
    list.forEach(function(r) {
        var key = r.id || r.request_id;
        if (key && !seenIds[key]) {
            seenIds[key] = true;
            uniqueRequests.push(r);
        }
    });
    list = uniqueRequests;
    
    // Filter: Show to all forwarders until ACCEPTED/BOOKED
    // Only hide from individual forwarder if they already submitted a quote
    if (requestsFilter === 'open') {
        list = list.filter(function(r) { 
            // Hide if already accepted or booked
            if (r.status === 'accepted' || r.status === 'booked') return false;
            // Hide if I already submitted a quote for this request
            if (hasMyQuote(r.id)) return false;
            return true;
        });
    } else if (requestsFilter === 'quoted') {
        list = list.filter(function(r) { 
            // Show requests where I submitted a quote (including booked ones if my quote was accepted)
            return hasMyQuote(r.id); 
        });
    }
    // 'all' = show everything except accepted/booked (unless I have a quote)
    if (requestsFilter === 'all') {
        list = list.filter(function(r) {
            // Show booked if I have a quote for it
            if ((r.status === 'accepted' || r.status === 'booked') && hasMyQuote(r.id)) return true;
            return r.status !== 'accepted' && r.status !== 'booked';
        });
    }
    
    list.forEach(function(req) {
        // Filter by carrier mode
        if (carrierMode !== 'all' && req.freight !== carrierMode) return;
        
        requestCount++;
        
        var freightIcon = req.freight === 'sea' ? '' : req.freight === 'air' ? '' : '';
        var freightLabel = req.freight === 'sea' ? t('sea') : req.freight === 'air' ? t('air') : t('land');
        var loadLabel = getLoadTypeLabel(req.freight, req.loadType);
        var timeAgo = getTimeAgo(req.createdAt);
        var quoteCount = req.quotes ? req.quotes.length : 0;
        var hasQuote = hasMyQuote(req.id);
        var isBooked = req.status === 'booked' || req.status === 'accepted';
        
        html += '<div class="request-card network' + (hasQuote ? ' has-quote' : '') + (isBooked ? ' is-booked' : '') + '">';
        html += '<div class="request-header">';
        html += '<div class="request-id-badge">' + req.id + '</div>';
        
        // Status badge - booked veya quote submitted
        if (isBooked && hasQuote) {
            html += '<div class="booked-badge" style="background: #dcfce7; color: #15803d; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">Booked</div>';
        } else if (hasQuote) {
            var myQuote = getMyQuoteDetails(req.id);
            var priceText = myQuote && myQuote.totalPrice ? ' - $' + numberFormat(myQuote.totalPrice) : '';
            html += '<div class="quote-submitted-badge">' + t('quoteSubmitted') + priceText + '</div>';
        }
        html += '<div class="request-time">' + timeAgo + '</div>';
        html += '</div>';
        
        html += '<div class="request-route">';
        html += '<div class="route-from"><span class="route-label">' + t('from') + '</span><strong>' + req.origin.split(',')[0] + '</strong></div>';
        html += '<div class="route-arrow">' + freightIcon + ' â†’</div>';
        html += '<div class="route-to"><span class="route-label">' + t('to') + '</span><strong>' + req.destination.split(',')[0] + '</strong></div>';
        html += '</div>';
        
        html += '<div class="request-details-grid">';
        html += '<div class="detail-item"><span class="detail-label">' + t('transport') + '</span><span class="detail-value">' + freightLabel + ' / ' + loadLabel + '</span></div>';
        html += '<div class="detail-item"><span class="detail-label">' + t('weight') + '</span><span class="detail-value">' + numberFormat(req.weight) + ' kg</span></div>';
        html += '<div class="detail-item"><span class="detail-label">' + t('volume') + '</span><span class="detail-value">' + req.volume + ' mÂ³</span></div>';
        html += '<div class="detail-item"><span class="detail-label">' + t('loadDate') + '</span><span class="detail-value">' + formatDate(req.loadDate) + '</span></div>';
        html += '<div class="detail-item"><span class="detail-label">' + t('incoterm') + '</span><span class="detail-value">' + req.incoterm + '</span></div>';
        html += '<div class="detail-item"><span class="detail-label">' + t('cargoType') + '</span><span class="detail-value">' + req.cargoType + '</span></div>';
        html += '</div>';
        
        if (req.notes) {
            html += '<div class="request-notes"> ' + req.notes + '</div>';
        }
        
        // Booked durumunda Ã¶zel iÃ§erik gÃ¶ster
        if (isBooked && hasQuote) {
            html += '<div class="request-footer" style="padding: 20px;">';
            html += '<div style="text-align: center; background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); border-radius: 12px; padding: 20px;">';
            html += '<div style="width: 50px; height: 50px; background: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 12px; color: white; font-size: 20px; font-weight: bold;">&#10003;</div>';
            html += '<h4 style="margin: 0 0 8px; color: #065f46; font-weight: 600;">Quote Accepted</h4>';
            html += '<p style="color: #047857; margin: 0 0 16px; font-size: 14px;">This shipment is now in your Manage Shipments.</p>';
            html += '<button onclick="showForwarderTab(\'tracking\')" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer;">View in Manage Shipments</button>';
            html += '</div></div>';
        } else {
            html += '<div class="request-footer">';
            html += '<div class="quote-count">';
            if (quoteCount > 0) {
                html += '<span class="count-badge">' + quoteCount + '</span> ' + t('quotesReceived');
            } else {
                html += '<span class="no-quotes">' + t('noQuotesYet') + '</span>';
            }
            html += '</div>';
            html += '<div class="request-actions">';
            if (hasQuote) {
                var myQuoteInfo = getMyQuoteDetails(req.id);
                var myPrice = myQuoteInfo && myQuoteInfo.totalPrice ? '$' + numberFormat(myQuoteInfo.totalPrice) : '';
                html += '<button class="btn-quote btn-submitted" disabled>' + t('quoteSubmitted') + (myPrice ? ' (' + myPrice + ')' : '') + '</button>';
            } else {
                html += '<button class="btn-quote" onclick="openQuoteModal(\'' + req.id + '\')">' + t('submitQuote') + '</button>';
            }
            html += '</div>';
            html += '</div>';
        }
        
        html += '</div>';
    });
    
    if (html === '') {
        var noReqText = '';
        if (requestsFilter === 'quoted') {
            noReqText = t('noQuotedRequests');
        } else {
            noReqText = t('noOpenRequests');
        }
        html = '<div class="no-requests">' + noReqText + '</div>';
    }
    
    container.innerHTML = html;
    
    // Update RFQ Inbox badge - show count of available requests (not accepted/booked and not quoted by me)
    var openRequests = (networkRequests || []).filter(function(r) { 
        if (r.status === 'accepted' || r.status === 'booked') return false;
        if (hasMyQuote(r.id)) return false;
        return true;
    });
    var rfqBadge = document.getElementById('rfqInboxBadge');
    if (rfqBadge) {
        rfqBadge.textContent = openRequests.length;
        rfqBadge.style.display = openRequests.length > 0 ? 'inline-flex' : 'none';
    }
    
    // Update filter button labels
    updateFilterLabels();
}

// Update filter button labels based on current language
function updateFilterLabels() {
    var openBtn = document.querySelector('.requests-filter-btn[data-filter="open"] span');
    var quotedBtn = document.querySelector('.requests-filter-btn[data-filter="quoted"] span');
    var allBtn = document.querySelector('.requests-filter-btn[data-filter="all"] span');
    
    if (openBtn) openBtn.textContent = t('openRFQs');
    if (quotedBtn) quotedBtn.textContent = t('myQuotes');
    if (allBtn) allBtn.textContent = t('all');
}

// Set requests filter
function setRequestsFilter(filter) {
    requestsFilter = filter;
    
    // Update filter buttons
    document.querySelectorAll('.requests-filter-btn').forEach(function(btn) {
        btn.classList.remove('active');
        if (btn.getAttribute('data-filter') === filter) {
            btn.classList.add('active');
        }
    });
    
    renderForwarderRequests();
}

// Current quote AI data
var currentQuoteAI = {
    priceLow: 0,
    priceOptimal: 0,
    priceHigh: 0,
    costTotal: 0,
    competitors: 0
};

// Open quote modal
function openQuoteModal(requestId) {
    console.log('openQuoteModal called with:', requestId);
    selectedRequestId = requestId;
    var request = networkRequests.find(function(r) { return r.id === requestId; });
    
    if (!request) {
        console.error('Request not found:', requestId);
        console.log('Available requests:', networkRequests.map(function(r) { return r.id; }));
        alert('Request not found. Please refresh the page.');
        return;
    }
    
    console.log('Request found:', request);
    
    // Ensure quotes array exists
    if (!request.quotes) {
        request.quotes = [];
    }
    
    // Reset AI panel to default state
    resetAIPanel();
    
    // Update modal content
    var modalRequestId = document.getElementById('quoteModalRequestId');
    var modalRoute = document.getElementById('quoteModalRoute');
    var modalDetails = document.getElementById('quoteModalDetails');
    
    if (modalRequestId) modalRequestId.textContent = request.id;
    if (modalRoute) modalRoute.textContent = (request.origin || '').split(',')[0] + ' â†’ ' + (request.destination || '').split(',')[0];
    if (modalDetails) {
        modalDetails.textContent = 
            (request.freight === 'sea' ? 'Sea' : request.freight === 'air' ? 'Air' : 'Land') + 
            ' | ' + numberFormat(request.weight || 0) + ' kg | ' + (request.incoterm || 'FOB');
    }
    
    // Set incoterm from request
    var incotermEl = document.getElementById('quoteIncoterm');
    if (incotermEl && request.incoterm) {
        incotermEl.value = request.incoterm;
    }
    
    // Calculate AI data
    try {
        calculateAIQuoteData(request);
    } catch (e) {
        console.error('Error in calculateAIQuoteData:', e);
    }
    
    // Show modal
    var modal = document.getElementById('quoteModal');
    if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden'; // Scroll lock
        console.log('Modal opened');
        
        // Apply I18N translations to modal
        applyI18n();
    } else {
        console.error('Modal element not found');
    }
}

// Calculate AI Quote Data - Using Carrier Rates
function calculateAIQuoteData(request) {
    var weight = request.weight || 0;
    var weightTons = weight / 1000;
    var freight = request.freight || 'sea';
    var quoteCount = (request.quotes && request.quotes.length) ? request.quotes.length : 0;
    var origin = request.origin || '';
    var dest = request.destination || '';
    
    // Find matching carrier rates from database
    var matchingRates = findMatchingCarrierRates(freight, origin, dest, weight);
    
    // Display available carrier rates (if function exists)
    if (typeof displayAvailableCarrierRates === 'function') {
        displayAvailableCarrierRates(matchingRates, freight);
    }
    
    // Generate combination options (if function exists)
    if (typeof generateCombinationOptions === 'function') {
        generateCombinationOptions(request, matchingRates);
    }
    
    // Update market insights (with null checks for removed elements)
    var aiCompetitors = document.getElementById('aiCompetitors');
    if (aiCompetitors) {
        aiCompetitors.textContent = quoteCount > 0 ? quoteCount + ' rakip quote gÃ¶ndermiÅŸ' : 'HenÃ¼z quote yok - AvantajÄ±nÄ±z!';
    }
    
    var aiSeason = document.getElementById('aiSeason');
    if (aiSeason) {
        var month = new Date().getMonth();
        var seasonText = (month >= 9 && month <= 11) ? 'YoÄŸun sezon (Q4)' : 
                         (month >= 0 && month <= 2) ? 'Chinese New Year period' : 'Normal demand period';
        aiSeason.textContent = 'Sezon: ' + seasonText;
    }
    
    var aiRisk = document.getElementById('aiRisk');
    if (aiRisk) {
        var riskLevel = freight === 'sea' ? 'Orta (Deniz rotasÄ±)' : freight === 'air' ? 'DÃ¼ÅŸÃ¼k' : 'DÃ¼ÅŸÃ¼k-Orta';
        aiRisk.textContent = 'Risk: ' + riskLevel;
    }
    
    // Update trade lane notes based on route
    updateTradeLaneNotes(origin, dest);
    
    // Win probability update removed (marketplace feature)
}

// Find matching carrier rates - Request rotasÄ±yla eÅŸleÅŸen ratelarÄ± bul
function findMatchingCarrierRates(freight, origin, dest, weight) {
    var rates = carrierRatesDB[freight] || [];
    
    // Forwarder'Ä±n kendi ratelerini de kontrol et
    var forwarderSeaRates = forwarderRatesDB.seaFreight || [];
    
    // Origin ve destination ÅŸehir isimlerini al
    var originCity = origin.split(',')[0].trim().toLowerCase();
    var destCity = dest.split(',')[0].trim().toLowerCase();
    
    // Carrier rates'den eÅŸleÅŸenleri bul
    var matchedRates = rates.filter(function(rate) {
        var rateOrigin = rate.origin.split(',')[0].trim().toLowerCase();
        var rateDest = rate.destination.split(',')[0].trim().toLowerCase();
        
        // Rota eÅŸleÅŸmesi kontrolÃ¼
        var routeMatch = (rateOrigin.includes(originCity) || originCity.includes(rateOrigin)) &&
                         (rateDest.includes(destCity) || destCity.includes(rateDest));
        
        // AÄŸÄ±rlÄ±k uygunluÄŸu kontrolÃ¼
        var weightMatch = weight >= rate.minWeight && weight <= rate.maxWeight;
        
        return routeMatch || (weightMatch && rates.length < 3); // EÅŸleÅŸme yoksa weight-based gÃ¶ster
    });
    
    return matchedRates;
}

// Display available carrier rates in modal - Request rotasÄ±nÄ± gÃ¶ster
function displayAvailableCarrierRates(rates, freight) {
    var container = document.getElementById('availableCarrierRates');
    if (!container) return;
    
    // Forwarder'Ä±n kendi seaFreight ratelerini de ekle
    var forwarderRates = forwarderRatesDB.seaFreight || [];
    
    // EÄŸer hiÃ§ rate yoksa ve forwarder rate'i varsa, onlarÄ± gÃ¶ster
    var allRates = rates.slice();
    
    if (forwarderRates.length > 0 && freight === 'sea') {
        forwarderRates.forEach(function(fr) {
            allRates.push({
                carrier: 'KayÄ±tlÄ± Tarife',
                origin: fr.originPort || fr.originPortName || 'TÃ¼rkiye',
                destination: fr.destPort || fr.destPortName || 'VarÄ±ÅŸ',
                pricePerTon: fr.freightRate ? Math.round(fr.freightRate / 18) : 0, // yaklaÅŸÄ±k ton rateÄ±
                transitDays: fr.transit || 14,
                isForwarderRate: true
            });
        });
    }
    
    if (allRates.length === 0) {
        container.innerHTML = '<div style="color:#94a3b8;text-align:center;padding:16px;background:#f8fafc;border-radius:8px;">' +
            '<div style="font-size:24px;margin-bottom:8px;"></div>' +
            '<div>Bu rota iÃ§in kayÄ±tlÄ± rate bulunamadÄ±</div>' +
            '<div style="font-size:12px;margin-top:6px;">My Rates tab to rate ekleyebilirsiniz</div>' +
            '</div>';
        return;
    }
    
    var html = '';
    allRates.slice(0, 5).forEach(function(rate) { // Max 5 gÃ¶ster
        var bgColor = rate.isForwarderRate ? 'background: linear-gradient(135deg, #f0fdf4, #dcfce7);' : '';
        html += '<div class="carrier-rate-item ' + freight + '" style="' + bgColor + '">';
        html += '<div class="carrier-rate-info">';
        html += '<div class="carrier-rate-name">' + rate.carrier + '</div>';
        html += '<div class="carrier-rate-detail">' + rate.transitDays + ' days transit</div>';
        html += '</div>';
        html += '<div class="carrier-rate-price">$' + rate.pricePerTon + '/ton</div>';
        html += '</div>';
    });
    
    container.innerHTML = html;
}

// Generate combination options
function generateCombinationOptions(request, primaryRates) {
    var container = document.getElementById('aiCombinationOptions');
    if (!container) return;
    
    var weight = request.weight;
    var weightTons = weight / 1000;
    var freight = request.freight;
    var originCity = request.origin.split(',')[0];
    var destCity = request.destination.split(',')[0];
    
    var options = [];
    
    // Option 1: Direct (using primary freight type)
    if (primaryRates.length > 0) {
        var bestPrimaryRate = primaryRates.reduce(function(a, b) {
            return a.pricePerTon < b.pricePerTon ? a : b;
        });
        
        var primaryCost = Math.round(bestPrimaryRate.pricePerTon * weightTons);
        var terminalCost = freight === 'sea' ? 350 : freight === 'air' ? 180 : 120;
        var handlingCost = 150;
        var totalCost = primaryCost + terminalCost + handlingCost + 80;
        var suggestedPrice = Math.round(totalCost * 1.15);
        
        options.push({
            id: 'direct',
            name: freight === 'sea' ? 'Sadece Deniz' : freight === 'air' ? 'Sadece Hava' : 'Sadece Kara',
            price: suggestedPrice,
            transit: bestPrimaryRate.transitDays,
            cost: totalCost,
            carrier: bestPrimaryRate.carrier,
            route: originCity + ' â†’ ' + destCity,
            pros: freight === 'sea' ? ['En dÃ¼ÅŸÃ¼k maliyet', 'BÃ¼yÃ¼k hacimler iÃ§in ideal'] : 
                  freight === 'air' ? ['En hÄ±zlÄ± teslimat', 'GÃ¼venilir zamanlama'] :
                  ['KapÄ±dan kapÄ±ya', 'Esnek zamanlama'],
            cons: freight === 'sea' ? ['Uzun transit sÃ¼resi', 'Liman baÄŸÄ±mlÄ±lÄ±ÄŸÄ±'] :
                  freight === 'air' ? ['YÃ¼ksek maliyet', 'AÄŸÄ±rlÄ±k limitleri'] :
                  ['SÄ±nÄ±r geÃ§iÅŸ riskleri', 'SÃ¼rÃ¼cÃ¼ dinlenme sÃ¼releri']
        });
    } else {
        // VarsayÄ±lan seÃ§enek (rate yoksa)
        var baseCost = freight === 'sea' ? (weightTons * 120) : freight === 'air' ? (weightTons * 450) : (weightTons * 80);
        var totalCost = Math.round(baseCost + 350 + 150 + 80);
        var suggestedPrice = Math.round(totalCost * 1.15);
        var transitDays = freight === 'sea' ? 14 : freight === 'air' ? 3 : 5;
        
        options.push({
            id: 'direct',
            name: freight === 'sea' ? 'Sadece Deniz' : freight === 'air' ? 'Sadece Hava' : 'Sadece Kara',
            price: suggestedPrice,
            transit: transitDays,
            cost: totalCost,
            carrier: 'Global Freight',
            route: originCity + ' â†’ ' + destCity,
            pros: ['Tahmini rate', 'HÄ±zlÄ± quote'],
            cons: ['Piyasa koÅŸullarÄ±na gÃ¶re deÄŸiÅŸebilir']
        });
    }
    
    // Option 2: Combined Sea + Land (if sea)
    if (freight === 'sea') {
        var seaCost = weightTons * 100;
        var landCost = weightTons * 30;
        var totalCombined = Math.round(seaCost + landCost + 400 + 200 + 80);
        var suggestedCombined = Math.round(totalCombined * 1.15);
        
        options.push({
            id: 'sea-land',
            name: '+ Deniz + Kara Kombine',
            price: suggestedCombined,
            transit: 17,
            cost: totalCombined,
            carrier: 'Multimodal',
            route: originCity + ' â†’ ' + destCity,
            pros: ['KapÄ±ya kadar teslimat', 'Liman dÄ±ÅŸÄ± varÄ±ÅŸlar iÃ§in ideal'],
            cons: ['Aktarma maliyeti', 'Koordinasyon gerektirir']
        });
    }
    
    // Render options
    var html = '';
    options.forEach(function(opt, idx) {
        html += '<div class="combo-option' + (idx === 0 ? ' selected' : '') + '" onclick="selectCombination(\'' + opt.id + '\')" data-price="' + opt.price + '" data-transit="' + opt.transit + '" data-cost="' + opt.cost + '">';
        html += '<div class="combo-header">';
        html += '<div class="combo-mode">' + opt.name + '</div>';
        html += '<div class="combo-price">$' + opt.price.toLocaleString() + '</div>';
        html += '</div>';
        html += '<div class="combo-details"> ' + opt.transit + ' days | ğŸ¢ ' + opt.carrier + '</div>';
        html += '</div>';
    });
    
    container.innerHTML = html;
    
    // Select first option by default
    if (options.length > 0) {
        selectCombination(options[0].id);
    }
}

// Select combination option
function selectCombination(optionId) {
    // Update visual selection
    document.querySelectorAll('.combo-option').forEach(function(el) {
        el.classList.remove('selected');
        if (el.getAttribute('onclick').indexOf(optionId) > -1) {
            el.classList.add('selected');
            
            var price = parseInt(el.getAttribute('data-price'));
            var transit = parseInt(el.getAttribute('data-transit'));
            var cost = parseInt(el.getAttribute('data-cost'));
            
            // Update cost breakdown inputs
            var freightCost = Math.round(cost * 0.7);
            var terminalCost = Math.round(cost * 0.15);
            var handlingCost = Math.round(cost * 0.1);
            var docsCost = 80;
            
            document.getElementById('aiCostFreightInput').value = freightCost;
            document.getElementById('aiCostTerminalInput').value = terminalCost;
            document.getElementById('aiCostHandlingInput').value = handlingCost;
            document.getElementById('aiCostDocsInput').value = docsCost;
            
            // Update totals
            document.getElementById('aiCostTotal').textContent = '$' + cost.toLocaleString();
            document.getElementById('aiProfit').textContent = '$' + Math.round(cost * 0.15).toLocaleString();
            
            // Store for apply
            currentQuoteAI = {
                priceLow: Math.round(price * 0.85),
                priceOptimal: price,
                priceHigh: Math.round(price * 1.25),
                costTotal: cost,
                transitDays: transit
            };
            
            // Otomatik olarak quotelen rateÄ± quotePrice'a yaz
            var quotePriceInput = document.getElementById('quotePriceInput');
            if (quotePriceInput) {
                quotePriceInput.value = price;
            }
            
            // Transit sÃ¼resini de otomatik doldur
            var transitInput = document.getElementById('transitInput');
            if (transitInput) {
                transitInput.value = transit;
            }
            
            // Kazanma olasÄ±lÄ±ÄŸÄ±nÄ± gÃ¼ncelle
            updateWinProbability();
            
            // Update market avg
            document.getElementById('aiMarketAvg').textContent = 'Quotelen rate: $' + price.toLocaleString();
        }
    });
}

// Update win probability based on entered price
function updateWinProbability() {
    // Win Probability feature removed per network positioning guidelines
    // This function is kept as a no-op to prevent JavaScript errors from oninput handlers
    // AI does not predict or influence commercial outcomes
    return;
}

// Note: applyAIPrice and updateTotalCost removed as per network positioning guidelines
// AI does not generate final prices - forwarder enters their own commercial terms

// Update trade lane notes based on origin/destination (PREMIUM Intelligence)
// Update trade lane context (Static, Non-Decisional)
// Neutral and informational tone only
function updateTradeLaneNotes(origin, dest) {
    var laneDescEl = document.getElementById('aiLaneDescription');
    if (!laneDescEl) return;
    
    var originCity = origin ? origin.split(',')[0].trim().toLowerCase() : '';
    var destCity = dest ? dest.split(',')[0].trim().toLowerCase() : '';
    var lang = currentLanguage || 'en';
    
    // Default neutral description
    var description = lang === 'tr'
        ? 'Bu ticaret hattÄ± genellikle dÃ¼zenli seferlerle hizmet almaktadÄ±r. Transit sÃ¼reler gemi rotasÄ± ve liman rotasyonuna baÄŸlÄ± olarak deÄŸiÅŸebilir.'
        : 'This trade lane is generally serviced by regular sailings. Transit times may vary depending on vessel routing and port rotation.';
    
    // Static, neutral lane context by region (no recommendations, no evaluations)
    if (destCity.includes('hamburg') || destCity.includes('rotterdam') || destCity.includes('antwerp')) {
        description = lang === 'tr'
            ? 'Bu hat genellikle Kuzey Avrupa limanlarÄ±na dÃ¼zenli seferlerle hizmet almaktadÄ±r. Transit sÃ¼reler liman rotasyonuna gÃ¶re deÄŸiÅŸebilir.'
            : 'This lane is generally serviced by regular sailings to Northern European ports. Transit times may vary based on port rotation.';
    } else if (destCity.includes('felixstowe') || destCity.includes('southampton') || destCity.includes('london')) {
        description = lang === 'tr'
            ? 'UK limanlarÄ±na dÃ¼zenli servisler genellikle mevcuttur. Transit sÃ¼reler feeder baÄŸlantÄ±larÄ±na gÃ¶re deÄŸiÅŸebilir.'
            : 'Regular services to UK ports are generally available. Transit times may vary depending on feeder connections.';
    } else if (destCity.includes('shanghai') || destCity.includes('ningbo') || destCity.includes('shenzhen')) {
        description = lang === 'tr'
            ? 'Uzak DoÄŸu hatlarÄ± genellikle birden fazla gÃ¼zergah seÃ§eneÄŸine sahiptir. Transit sÃ¼reler rotaya gÃ¶re deÄŸiÅŸebilir.'
            : 'Far East lanes generally have multiple routing options. Transit times may vary depending on routing.';
    } else if (destCity.includes('new york') || destCity.includes('los angeles') || destCity.includes('houston')) {
        description = lang === 'tr'
            ? 'Transatlantik hatlarda dÃ¼zenli servisler genellikle mevcuttur. Transit sÃ¼reler servis tipine gÃ¶re deÄŸiÅŸebilir.'
            : 'Regular services on transatlantic lanes are generally available. Transit times may vary based on service type.';
    } else if (destCity.includes('copenhagen')) {
        description = lang === 'tr'
            ? 'Ä°skandinavya hatlarÄ±nda dÃ¼zenli servisler genellikle mevcuttur. Transit sÃ¼reler feeder baÄŸlantÄ±larÄ±na gÃ¶re deÄŸiÅŸebilir.'
            : 'Regular services on Scandinavian lanes are generally available. Transit times may vary depending on feeder connections.';
    }
    
    laneDescEl.textContent = description;
}

// Legacy function - redirects to new implementation
// function refreshAIAnalysis() - defined earlier in file

// Close quote modal
function closeQuoteModal() {
    document.getElementById('quoteModal').classList.remove('active');
    document.body.style.overflow = 'auto'; // Restore scroll
    selectedRequestId = null;
    // Reset form
    document.getElementById('quotePriceInput').value = '';
    document.getElementById('transitInput').value = '';
    document.getElementById('validityInput').value = '7';
    document.getElementById('quoteNotes').value = '';
    var incotermEl = document.getElementById('quoteIncoterm');
    if (incotermEl) incotermEl.value = 'FOB';
    // Reset AI panel state
    resetAIPanel();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EVENT-DRIVEN AI SYSTEM
// Value is created by speaking at the right moment â€” not by speaking more.
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Add insight to stream (single use per trigger) - DEPRECATED for new panel
function addAIInsight(type, icon, message) {
    // Legacy function - no longer used
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// FINAL AI SPECIFICATION - Event-Driven, Tier-Based
// Quiet operational co-pilot. Value is created by speaking at the right moment.
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// User tier: 'free' or 'premium'
var userAITier = 'premium'; // Default to premium for demo

// Track which triggers have fired (no repeats)
var aiTriggerState = {
    incotermFired: false,
    transitFired: false,
    notesFired: false,
    presubmitFired: false,
    finalFired: false
};

// Reset AI panel to silent state
function resetAIPanel() {
    aiTriggerState = {
        incotermFired: false,
        transitFired: false,
        notesFired: false,
        presubmitFired: false,
        finalFired: false
    };
    
    // Update tier badge
    updateTierBadge();
    
    // Reset UI states
    var silentState = document.getElementById('aiSilentState');
    var eventMessage = document.getElementById('aiEventMessage');
    var presubmitSection = document.getElementById('aiPresubmitSection');
    var finalConfirm = document.getElementById('aiFinalConfirm');
    
    if (silentState) silentState.style.display = 'flex';
    if (eventMessage) eventMessage.style.display = 'none';
    if (presubmitSection) presubmitSection.style.display = 'none';
    if (finalConfirm) finalConfirm.style.display = 'none';
}

// Update tier badge based on user tier
function updateTierBadge() {
    var panel = document.getElementById('aiPanel');
    var badge = document.getElementById('aiTierBadge');
    
    if (badge) {
        if (userAITier === 'premium') {
            badge.textContent = 'PREMIUM';
            badge.className = 'tier-badge premium';
            if (panel) panel.classList.add('premium');
        } else {
            badge.textContent = 'FREE';
            badge.className = 'tier-badge';
            if (panel) panel.classList.remove('premium');
        }
    }
}

// Show event message (replaces previous, hides silent state)
function showEventMessage(message) {
    var silentState = document.getElementById('aiSilentState');
    var eventMessage = document.getElementById('aiEventMessage');
    var eventText = document.getElementById('aiEventText');
    
    if (silentState) silentState.style.display = 'none';
    if (eventMessage) eventMessage.style.display = 'block';
    if (eventText) eventText.textContent = message;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TRIGGER 1 â€” INCOTERM SELECTED OR CHANGED
// Tier: FREE + PREMIUM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function onIncotermChange() {
    if (aiTriggerState.incotermFired) return; // No repeats
    aiTriggerState.incotermFired = true;
    
    var lang = currentLanguage || 'en';
    var message = lang === 'tr'
        ? 'SeÃ§ilen incoterm\'e gÃ¶re kapsam uyumunu gÃ¶zden geÃ§irmek isteyebilirsiniz.'
        : 'You may want to review scope alignment based on the selected incoterm.';
    
    showEventMessage(message);
    checkPreSubmitState();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TRIGGER 2 â€” TRANSIT TIME ENTERED OR MODIFIED
// Tier: FREE + PREMIUM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function onTransitTimeChange() {
    var transitInput = document.getElementById('transitInput');
    var transit = transitInput ? parseInt(transitInput.value) : 0;
    
    if (!transit || transit <= 0) return;
    if (aiTriggerState.transitFired) return; // No repeats
    aiTriggerState.transitFired = true;
    
    var lang = currentLanguage || 'en';
    var message = lang === 'tr'
        ? 'Transit sÃ¼reler rota ve liman rotasyonuna baÄŸlÄ± olarak deÄŸiÅŸebilir.'
        : 'Transit times may vary depending on routing and port rotation.';
    
    showEventMessage(message);
    checkPreSubmitState();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TRIGGER 3 â€” PROPOSAL NOTES EMPTY (on blur, when other fields complete)
// Tier: FREE + PREMIUM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function onNotesBlur() {
    var notes = document.getElementById('quoteNotes');
    var price = document.getElementById('quotePriceInput');
    var transit = document.getElementById('transitInput');
    
    var notesEmpty = !notes || !notes.value.trim();
    var hasPrice = price && price.value && parseFloat(price.value) > 0;
    var hasTransit = transit && transit.value && parseInt(transit.value) > 0;
    
    if (!notesEmpty) return; // Has content
    if (!hasPrice || !hasTransit) return; // Required fields not complete
    if (aiTriggerState.notesFired) return; // No repeats
    aiTriggerState.notesFired = true;
    
    var lang = currentLanguage || 'en';
    var message = lang === 'tr'
        ? 'KÄ±sa bir kapsam notu eklemek beklentilerin belirlenmesine yardÄ±mcÄ± olabilir.'
        : 'Adding a brief scope note may help set expectations.';
    
    showEventMessage(message);
    checkPreSubmitState();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TRIGGER 4 â€” PRE-SUBMIT STATE (All required fields completed)
// FREE: Show upsell message
// PREMIUM: Show operational review
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function checkPreSubmitState() {
    var price = document.getElementById('quotePriceInput');
    var transit = document.getElementById('transitInput');
    var incoterm = document.getElementById('quoteIncoterm');
    
    var hasPrice = price && price.value && parseFloat(price.value) > 0;
    var hasTransit = transit && transit.value && parseInt(transit.value) > 0;
    var hasIncoterm = incoterm && incoterm.value;
    
    var allComplete = hasPrice && hasTransit && hasIncoterm;
    
    if (!allComplete) return;
    if (aiTriggerState.presubmitFired) return;
    aiTriggerState.presubmitFired = true;
    
    var presubmitSection = document.getElementById('aiPresubmitSection');
    var presubmitFree = document.getElementById('presubmitFree');
    var presubmitPremium = document.getElementById('presubmitPremium');
    
    if (presubmitSection) presubmitSection.style.display = 'block';
    
    if (userAITier === 'free') {
        // FREE tier: Show upsell
        if (presubmitFree) presubmitFree.style.display = 'block';
        if (presubmitPremium) presubmitPremium.style.display = 'none';
    } else {
        // PREMIUM tier: Show operational review
        if (presubmitFree) presubmitFree.style.display = 'none';
        if (presubmitPremium) presubmitPremium.style.display = 'block';
        generateOperationalReview();
    }
}

// Generate operational review (PREMIUM only)
function generateOperationalReview() {
    var reviewChecklist = document.getElementById('aiReviewChecklist');
    var networkIntel = document.getElementById('aiNetworkIntel');
    var intelText = document.getElementById('aiIntelText');
    
    if (!reviewChecklist) return;
    
    var lang = currentLanguage || 'en';
    var incoterm = document.getElementById('quoteIncoterm').value;
    var validity = document.getElementById('validityInput').value;
    var notes = document.getElementById('quoteNotes').value.trim();
    
    var html = '';
    
    // âœ“ Scope coverage
    html += '<div class="review-item">';
    html += '<span class="check-mark">âœ“</span>';
    html += '<span>' + (lang === 'tr' ? 'Kapsam tanÄ±mÄ±' : 'Scope coverage') + '</span>';
    html += '</div>';
    
    // âœ“ Transit clarity
    html += '<div class="review-item">';
    html += '<span class="check-mark">âœ“</span>';
    html += '<span>' + (lang === 'tr' ? 'Transit netliÄŸi' : 'Transit clarity') + '</span>';
    html += '</div>';
    
    // âš  Optional suggestions (soft, never alarmist)
    if (incoterm === 'DDP' || incoterm === 'DAP') {
        html += '<div class="review-item">';
        html += '<span class="warning-mark">âš </span>';
        html += '<span>' + (lang === 'tr' 
            ? 'Incoterm kapsam aÃ§Ä±klamasÄ± faydalÄ± olabilir' 
            : 'Incoterm scope clarification may be helpful') + '</span>';
        html += '</div>';
    }
    
    if (parseInt(validity) >= 30) {
        html += '<div class="review-item">';
        html += '<span class="warning-mark">âš </span>';
        html += '<span>' + (lang === 'tr' 
            ? 'GeÃ§erlilik aÃ§Ä±klamasÄ± quotelir' 
            : 'Validity explanation suggested') + '</span>';
        html += '</div>';
    }
    
    reviewChecklist.innerHTML = html;
    
    // Network intelligence (cautious, anonymized)
    if (networkIntel && intelText && (parseInt(validity) >= 14 || !notes)) {
        networkIntel.style.display = 'block';
        intelText.textContent = lang === 'tr'
            ? 'Bu aÄŸdaki benzer hatlarda, geÃ§erlilik genellikle quote notlarÄ±nda aÃ§Ä±klanmaktadÄ±r.'
            : 'On similar lanes within this network, validity is often clarified in the quote notes.';
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TRIGGER 5 â€” FINAL CONFIRMATION (Before submit)
// PREMIUM ONLY
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function showFinalConfirmation() {
    if (userAITier !== 'premium') return; // Premium only
    if (aiTriggerState.finalFired) return; // No repeats
    aiTriggerState.finalFired = true;
    
    var finalConfirm = document.getElementById('aiFinalConfirm');
    if (finalConfirm) {
        finalConfirm.style.display = 'block';
    }
}

// Price change triggers pre-submit check
function onQuotePriceChange() {
    checkPreSubmitState();
}

// Validity change (no direct message, just check pre-submit)
function onValidityChange() {
    // If already in presubmit state and premium, refresh the review
    if (aiTriggerState.presubmitFired && userAITier === 'premium') {
        generateOperationalReview();
    }
}

// Legacy compatibility
function checkAllFieldsComplete() {
    checkPreSubmitState();
}

function showPreSubmitSummary() {
    checkPreSubmitState();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PREMIUM AI PAYWALL FUNCTIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// User's AI tier (stored in localStorage or user profile)
// Submit quote
function submitForwarderQuote() {
    // Profile validation for forwarder
    var forwarderContact = getUserContact(currentUser, 'forwarder');
    if (!forwarderContact || !forwarderContact.email || !forwarderContact.companyName) {
        alert('Please complete your profile before submitting a quote.\n\nGo to Profile tab and fill in your Company Name, Contact Person, Email, and Phone.');
        closeQuoteModal();
        showForwarderTab('profile');
        return;
    }
    
    var btn = document.getElementById('quoteSubmitBtn');
    var originalText = btn ? btn.textContent : t('submitQuote');
    
    if (btn) { 
        btn.disabled = true; 
        btn.textContent = t('submitting'); 
    }
    
    try {
        // Fallback: selectedRequestId yoksa modal badge'den al
        if (!selectedRequestId) {
            var badge = document.getElementById('quoteModalRequestId');
            if (badge) selectedRequestId = badge.textContent.trim();
        }
        
        if (!selectedRequestId) {
            showRateNotification(t('warningSelectRequest'), 'error');
            return;
        }
        
        var price = document.getElementById('quotePriceInput').value;
        var transitDays = document.getElementById('transitInput').value;
        var validDays = document.getElementById('validityInput').value;
        var notes = document.getElementById('quoteNotes').value;
        var incoterm = document.getElementById('quoteIncoterm').value;
        
        if (!price || !transitDays) {
            showRateNotification(t('warningFillFields'), 'error');
            return;
        }
        
        // TRIGGER 5: Final confirmation (PREMIUM only)
        showFinalConfirmation();
        
        // Find request and add quote
        var request = networkRequests.find(function(r) { return r.id === selectedRequestId; });
        if (request) {
            var validUntil = new Date();
            validUntil.setDate(validUntil.getDate() + parseInt(validDays));
            var validUntilStr = validUntil.toISOString().split('T')[0];
            
            // Get forwarder profile info - already validated above
            var forwarderDisplayName = forwarderContact.contactPerson || currentUser;
            var forwarderCompanyName = forwarderContact.companyName || forwarderDisplayName;
            
            // Add quote to request (do NOT change request.status)
            request.quotes.push({
                forwarder: forwarderDisplayName,
                forwarderCompany: forwarderCompanyName,
                forwarderId: currentUser || 'demo-forwarder',
                price: parseFloat(price),
                transitDays: parseInt(transitDays),
                incoterm: incoterm,
                validUntil: validUntilStr,
                submittedAt: new Date().toISOString(),
                notes: notes,
                status: 'pending'
            });
            
            // Create quote object for quotesDB and Supabase
            var newQuote = {
                id: 'QT-' + Date.now(),
                requestId: selectedRequestId,
                clientId: request.clientId || 'demo-client',
                forwarderId: currentUser || 'demo-forwarder',
                forwarderName: forwarderDisplayName,
                forwarderCompany: forwarderCompanyName,
                shipperName: request.shipper || 'Client',
                origin: request.origin.split(',')[0],
                destination: request.destination.split(',')[0],
                containerType: request.containerType || '40HC',
                incoterm: incoterm,
                freightRate: parseFloat(price) * 0.85,
                thcOrigin: 150,
                thcDest: 180,
                totalPrice: parseFloat(price),
                currency: 'USD',
                transitDays: parseInt(transitDays),
                validUntil: validUntilStr,
                status: 'pending',
                notes: notes,
                createdAt: new Date().toISOString()
            };
            
            // Save to Supabase DAL (with localStorage fallback)
            saveQuoteToSupabase(newQuote).then(function(result) {
                console.log('Quote saved:', result.source, newQuote.id);
            }).catch(function(e) {
                console.log('Quote saved to localStorage');
            });
            
            saveNetworkToStorage();
            
            // Mark quote as submitted for this forwarder - with price info
            markQuoteSubmitted(selectedRequestId, newQuote);
            
            // Show success and close modal
            closeQuoteModal();
            showRateNotification(t('successQuoteSubmitted') + ' $' + Number(price).toLocaleString(), 'success');
            renderForwarderRequests();
            
            // Update My Quotes screen if exists
            if (typeof renderForwarderQuotes === 'function') {
                renderForwarderQuotes();
            }
        } else {
            showRateNotification(t('warningRequestNotFound'), 'error');
        }
    } finally {
        if (btn) { 
            btn.disabled = false; 
            btn.textContent = originalText; 
        }
    }
}

// Open message modal
function openMessageModal(requestId) {
    selectedRequestId = requestId;
    var request = networkRequests.find(function(r) { return r.id === requestId; });
    
    if (!request) return;
    
    var lang = currentLanguage || 'tr';
    var tr = translations[lang] || translations['tr'];
    
    document.getElementById('messageModalTitle').textContent = lang === 'en' ? 
        'Messaging with ' + request.shipperCompany : 
        request.shipperCompany + ' ile MesajlaÅŸma';
    document.getElementById('messageModalRequestId').textContent = request.id;
    document.getElementById('messageModal').classList.add('active');
    
    // Load messages for this request
    loadMessages(requestId);
}

// Close message modal
function closeMessageModal() {
    document.getElementById('messageModal').classList.remove('active');
    selectedRequestId = null;
}

// Messages storage
var messagesDB = {};

// Load messages
function loadMessages(requestId) {
    var container = document.getElementById('messagesList');
    var messages = messagesDB[requestId] || [];
    var lang = currentLanguage || 'tr';
    var tr = translations[lang] || translations['tr'];
    
    if (messages.length === 0) {
        container.innerHTML = '<div class="no-messages">' + (tr['message.noMessages'] || t('noMessages')) + '</div>';
        return;
    }
    
    var html = '';
    messages.forEach(function(msg) {
        var isOwn = msg.sender === currentUser;
        html += '<div class="message-item ' + (isOwn ? 'own' : 'other') + '">';
        html += '<div class="message-sender">' + msg.sender + '</div>';
        html += '<div class="message-text">' + msg.text + '</div>';
        html += '<div class="message-time">' + formatMessageTime(msg.time) + '</div>';
        html += '</div>';
    });
    
    container.innerHTML = html;
    container.scrollTop = container.scrollHeight;
}

// Send message
function sendMessage() {
    if (!selectedRequestId) return;
    
    var input = document.getElementById('messageInput');
    var text = input.value.trim();
    
    if (!text) return;
    
    if (!messagesDB[selectedRequestId]) {
        messagesDB[selectedRequestId] = [];
    }
    
    messagesDB[selectedRequestId].push({
        sender: currentUser,
        text: text,
        time: new Date().toISOString()
    });
    
    input.value = '';
    loadMessages(selectedRequestId);
}

// Helper functions
function getTimeAgo(dateString) {
    var date = new Date(dateString);
    var now = new Date();
    var diff = Math.floor((now - date) / 1000);
    var lang = currentLanguage || 'tr';
    
    if (diff < 60) return lang === 'en' ? 'Just now' : 'Az Ã¶nce';
    if (diff < 3600) {
        var mins = Math.floor(diff / 60);
        return mins + (lang === 'en' ? (mins === 1 ? ' min ago' : ' mins ago') : ' dk Ã¶nce');
    }
    if (diff < 86400) {
        var hours = Math.floor(diff / 3600);
        return hours + (lang === 'en' ? (hours === 1 ? ' hour ago' : ' hours ago') : ' saat Ã¶nce');
    }
    var days = Math.floor(diff / 86400);
    return days + (lang === 'en' ? (days === 1 ? ' day ago' : ' days ago') : ' days Ã¶nce');
}

function getLoadTypeLabel(freight, loadType) {
    var lang = currentLanguage || 'tr';
    var labels = lang === 'en' ? {
        'sea': { 'fcl': 'FCL (Full Container)', 'lcl': 'LCL (Partial)' },
        'air': { 'standard': 'Standard', 'express': 'Express', 'charter': 'Charter' },
        'land': { 'ftl': 'FTL (Full Truck)', 'ltl': 'LTL (Partial)' }
    } : {
        'sea': { 'fcl': 'FCL (Dolu Konteyner)', 'lcl': 'LCL (Parsiyel)' },
        'air': { 'standard': 'Standart', 'express': 'Express', 'charter': 'Charter' },
        'land': { 'ftl': 'FTL (Komple TIR)', 'ltl': 'LTL (Parsiyel)' }
    };
    return labels[freight] && labels[freight][loadType] ? labels[freight][loadType] : loadType;
}

function formatDate(dateString) {
    var date = new Date(dateString);
    var lang = currentLanguage || 'tr';
    var locale = lang === 'en' ? 'en-US' : 'tr-TR';
    return date.toLocaleDateString(locale, { day: 'numeric', month: 'short', year: 'numeric' });
}

function formatMessageTime(dateString) {
    var date = new Date(dateString);
    var lang = currentLanguage || 'tr';
    var locale = lang === 'en' ? 'en-US' : 'tr-TR';
    return date.toLocaleTimeString(locale, { hour: '2-digit', minute: '2-digit' });
}

function numberFormat(num) {
    var lang = currentLanguage || 'tr';
    var locale = lang === 'en' ? 'en-US' : 'tr-TR';
    return parseInt(num).toLocaleString(locale);
}

function showNotification(message, type) {
    var notif = document.createElement('div');
    notif.className = 'notification ' + type;
    notif.innerHTML = message;
    document.body.appendChild(notif);
    
    setTimeout(function() {
        notif.classList.add('show');
    }, 100);
    
    setTimeout(function() {
        notif.classList.remove('show');
        setTimeout(function() { notif.remove(); }, 300);
    }, 3000);
}

function showTrackingPage() {
    hideAllPages();
    document.getElementById('trackingPage').classList.remove('hidden');
    document.getElementById('trackingUserName').textContent = currentUser;
    // Hide back header when coming from regular navigation
    var backHeader = document.getElementById('trackingBackHeader');
    if (backHeader) backHeader.style.display = 'none';
    updateNavMenu('track');
}

// Track where user came from for back navigation
var cameFromShipments = false;

function showTrackingPageFromShipments() {
    cameFromShipments = true;
    hideAllPages();
    document.getElementById('trackingPage').classList.remove('hidden');
    document.getElementById('trackingUserName').textContent = currentUser;
    // Show back header when coming from shipments
    var backHeader = document.getElementById('trackingBackHeader');
    if (backHeader) backHeader.style.display = 'block';
    updateNavMenu('track');
}

function showDocumentsFromShipments() {
    cameFromShipments = true;
    showClientTab('documents');
    // Update back button text
    var backBtn = document.getElementById('documentsBackBtn');
    if (backBtn) backBtn.textContent = 'â† My Shipments';
}

function goBackToShipmentsFromTracking() {
    cameFromShipments = false;
    hideAllPages();
    document.getElementById('clientDashboard').classList.remove('hidden');
    showClientTab('shipments');
}

function goBackFromDocuments() {
    if (cameFromShipments) {
        cameFromShipments = false;
        showClientTab('shipments');
        // Reset back button text
        var backBtn = document.getElementById('documentsBackBtn');
        if (backBtn) backBtn.textContent = 'â† Home';
    } else {
        showClientTab('newQuote');
    }
}

function showMyShipments() {
    hideAllPages();
    document.getElementById('myShipmentsPage').classList.remove('hidden');
    document.getElementById('shipmentsUserName').textContent = currentUser;
    updateNavMenu('shipments');
    renderShipments('all');
}

function backToClientDashboard() {
    hideAllPages();
    document.getElementById('clientDashboard').classList.remove('hidden');
    updateNavMenu('quote');
}

function updateNavMenu(active) {
    // This is a simplified version - in production, you'd update the actual nav items
}

function trackShipment() {
    var trackingNumber = document.getElementById('trackingInput').value.trim();
    if (!trackingNumber) {
        showRateNotification('Please enter a tracking number', 'error');
        return;
    }
    
    // Get tracking data from forwarder updates
    var trackingData = getShipmentTracking(trackingNumber);
    
    if (trackingData) {
        // Update tracking display with forwarder data
        updateTrackingDisplay(trackingNumber, trackingData);
        document.getElementById('trackingResult').style.display = 'block';
    } else {
        // Show demo data for GFN-2024-78542
        if (trackingNumber === 'GFN-2024-78542') {
            document.getElementById('trackingResult').style.display = 'block';
        } else {
            showRateNotification('Shipment not found. Please check your tracking number.', 'error');
        }
    }
}

// Update tracking display with forwarder's data
function updateTrackingDisplay(shipmentId, data) {
    // Update status badge
    var statusBadge = document.querySelector('#trackingResult .tracking-status-badge');
    if (statusBadge) {
        var statusTexts = {
            'booked': 'Booked',
            'picked-up': 'Picked Up',
            'at-origin-port': 'At Origin Port',
            'departed': 'In Transit',
            'at-transit-port': 'At Transit Port',
            'at-destination-port': 'At Destination',
            'customs-clearance': 'Customs',
            'out-for-delivery': 'Out for Delivery',
            'delivered': 'Delivered'
        };
        statusBadge.innerHTML = '<span class="pulse"></span>' + (statusTexts[data.status] || data.status);
    }
    
    // Update ETA
    var etaValue = document.querySelector('#trackingResult .eta-value');
    if (etaValue && data.eta) {
        var etaDate = new Date(data.eta);
        etaValue.textContent = etaDate.toLocaleDateString('en-US', {month: 'short', day: 'numeric', year: 'numeric'});
    }
    
    // Update progress bar
    var progressBar = document.querySelector('#trackingResult .route-line-progress');
    if (progressBar) {
        progressBar.style.width = data.progress + '%';
    }
    
    var trackFill = document.querySelector('#trackingResult .track-line-fill');
    if (trackFill) {
        trackFill.style.width = data.progress + '%';
    }
    
    // Update current location
    var currentPlace = document.querySelector('#trackingResult .current-place');
    if (currentPlace) {
        currentPlace.textContent = data.location || 'In Transit';
    }
    
    // Update vessel name
    var vesselInfo = document.querySelector('#trackingResult .stat-card-content strong');
    // This would need more specific selectors in production
    
    console.log('Tracking display updated with forwarder data:', data);
}

// Container Lookup Functions
function switchLookupTab(tab) {
    document.querySelectorAll('.lookup-tab').forEach(function(t) {
        t.classList.remove('active');
    });
    event.target.closest('.lookup-tab').classList.add('active');
    
    var input = document.getElementById('containerInput');
    if (tab === 'container') {
        input.placeholder = 'Enter Container No (e.g., MRKU1234567)';
    } else {
        input.placeholder = 'Enter Bill of Lading No (e.g., MAEU123456789)';
    }
}

// Carrier detection based on container prefix
var carrierPrefixes = {
    'MAEU': { name: 'Maersk', color: '#00a3e0' },
    'MSKU': { name: 'Maersk', color: '#00a3e0' },
    'MRKU': { name: 'Maersk', color: '#00a3e0' },
    'MSCU': { name: 'MSC', color: '#002b5c' },
    'MEDU': { name: 'MSC', color: '#002b5c' },
    'CMAU': { name: 'CMA CGM', color: '#003366' },
    'HLCU': { name: 'Hapag-Lloyd', color: '#ff6600' },
    'HLXU': { name: 'Hapag-Lloyd', color: '#ff6600' },
    'COSU': { name: 'COSCO', color: '#00559f' },
    'CCLU': { name: 'COSCO', color: '#00559f' },
    'EITU': { name: 'Evergreen', color: '#00824a' },
    'EGHU': { name: 'Evergreen', color: '#00824a' },
    'EGLV': { name: 'Evergreen', color: '#00824a' },
    'OOLU': { name: 'OOCL', color: '#c8102e' },
    'YMLU': { name: 'Yang Ming', color: '#005596' },
    'ZCSU': { name: 'Zim', color: '#ffc72c' },
    'HDMU': { name: 'Hyundai', color: '#0073c8' },
    'TGHU': { name: 'Hapag-Lloyd', color: '#ff6600' },
    'APHU': { name: 'APL', color: '#e31937' },
    'CAIU': { name: 'COSCO', color: '#00559f' },
    'TRIU': { name: 'Triton', color: '#1e3a5f' },
    'ONEY': { name: 'ONE', color: '#ff1493' },
    'TCLU': { name: 'Turkon', color: '#b71c1c' },
    'TRKU': { name: 'Turkon', color: '#b71c1c' },
    'ARKU': { name: 'Arkas', color: '#1a237e' }
};

// Detect carrier from container number
var containerInputEl = document.getElementById('containerInput');
if (containerInputEl) {
    containerInputEl.addEventListener('input', function(e) {
        var value = e.target.value.toUpperCase();
        var prefix = value.substring(0, 4);
        var badge = document.getElementById('carrierBadge');
        
        if (carrierPrefixes[prefix]) {
            badge.textContent = carrierPrefixes[prefix].name;
            badge.style.background = carrierPrefixes[prefix].color;
            badge.classList.add('visible');
        } else if (value.length >= 4) {
            badge.textContent = 'Unknown Carrier';
            badge.style.background = '#64748b';
            badge.classList.add('visible');
        } else {
            badge.classList.remove('visible');
        }
    });
}

// Main lookup function
function lookupContainer() {
    var containerNo = document.getElementById('containerInput').value.trim().toUpperCase();
    
    if (!containerNo) {
        alert('Please enter a container or B/L number');
        return;
    }
    
    // Show result area and loading
    var resultArea = document.getElementById('lookupResult');
    var loading = document.getElementById('lookupLoading');
    var dataArea = document.getElementById('lookupData');
    
    resultArea.classList.remove('hidden');
    loading.classList.remove('hidden');
    dataArea.classList.add('hidden');
    
    // Get carrier info
    var prefix = containerNo.substring(0, 4);
    var carrier = carrierPrefixes[prefix] || { name: 'Unknown Carrier', color: '#64748b' };
    
    // Call Searates API (real tracking data)
    fetchSearatesTracking(containerNo, carrier);
}

// Searates API Integration
async function fetchSearatesTracking(containerNo, carrier) {
    var loading = document.getElementById('lookupLoading');
    var dataArea = document.getElementById('lookupData');
    
    try {
        // Searates free tracking endpoint
        // Note: For production, you should use server-side proxy to hide API calls
        var searatesUrl = 'https://www.searates.com/container/tracking/' + containerNo;
        
        // Since direct API requires CORS proxy in browser, we'll use a hybrid approach:
        // 1. Try to fetch from Searates
        // 2. If blocked, show iframe + our premium UI with enhanced demo data
        
        // For now, render premium UI with Searates iframe option
        loading.classList.add('hidden');
        dataArea.classList.remove('hidden');
        
        renderContainerResultWithSearates(containerNo, carrier);
        
    } catch (error) {
        console.error('Tracking error:', error);
        loading.classList.add('hidden');
        dataArea.classList.remove('hidden');
        
        // Fallback to demo data
        var demoData = generateDemoTrackingData(containerNo, carrier);
        renderContainerResult(demoData);
    }
}

// Render container result with Searates integration
function renderContainerResultWithSearates(containerNo, carrier) {
    var html = '<div class="container-result-card">';
    
    // Header with tabs
    html += '<div class="result-header">';
    html += '<div class="result-container-info">';
    html += '<div class="container-icon"></div>';
    html += '<div class="container-details">';
    html += '<h4>' + containerNo + '</h4>';
    html += '<span>' + carrier.name + '</span>';
    html += '</div></div>';
    html += '<div class="result-tabs">';
    html += '<button class="result-tab active" onclick="showResultTab(\'premium\')">Premium View</button>';
    html += '<button class="result-tab" onclick="showResultTab(\'searates\')">Searates Live</button>';
    html += '</div></div>';
    
    // Premium View Tab
    html += '<div id="premiumTab" class="result-tab-content active">';
    html += '<div class="result-body">';
    
    // Searates data notice
    html += '<div class="searates-notice">';
    html += '<div class="notice-icon">ğŸ”—</div>';
    html += '<div class="notice-text">';
    html += '<strong>Powered by Searates</strong>';
    html += '<span>Real-time tracking data from global carrier networks</span>';
    html += '</div></div>';
    
    // Generate enhanced tracking data
    var trackingData = generateEnhancedTrackingData(containerNo, carrier);
    
    // Route Visual
    html += '<div class="result-route-visual">';
    html += '<div class="route-point">';
    html += '<div class="route-point-icon origin">ğŸ­</div>';
    html += '<div class="route-point-name">' + trackingData.origin.split(',')[0] + '</div>';
    html += '<div class="route-point-code">' + trackingData.originCode + '</div>';
    html += '</div>';
    
    html += '<div class="route-line-container">';
    html += '<div class="route-progress-line">';
    html += '<div class="route-progress-fill" style="width: ' + trackingData.progress + '%"></div>';
    html += '<div class="route-ship-icon" style="left: ' + trackingData.progress + '%"></div>';
    html += '</div></div>';
    
    html += '<div class="route-point">';
    html += '<div class="route-point-icon destination">ğŸ¢</div>';
    html += '<div class="route-point-name">' + trackingData.destination.split(',')[0] + '</div>';
    html += '<div class="route-point-code">' + trackingData.destinationCode + '</div>';
    html += '</div></div>';
    
    // Details Grid
    html += '<div class="result-details-grid">';
    html += '<div class="detail-card"><div class="detail-card-label">Vessel</div><div class="detail-card-value">' + trackingData.vessel + '</div></div>';
    html += '<div class="detail-card"><div class="detail-card-label">Voyage</div><div class="detail-card-value">' + trackingData.voyage + '</div></div>';
    html += '<div class="detail-card"><div class="detail-card-label">ETD</div><div class="detail-card-value">' + trackingData.etd + '</div></div>';
    html += '<div class="detail-card"><div class="detail-card-label">ETA</div><div class="detail-card-value">' + trackingData.eta + '</div></div>';
    html += '</div>';
    
    // Status Card
    html += '<div class="status-detail-card ' + trackingData.status + '">';
    html += '<div class="status-icon">' + (trackingData.status === 'in-transit' ? '' : '') + '</div>';
    html += '<div class="status-info">';
    html += '<div class="status-title">' + (trackingData.status === 'in-transit' ? 'In Transit' : 'Delivered') + '</div>';
    html += '<div class="status-location">' + trackingData.currentLocation + '</div>';
    html += '<div class="status-update">Last update: ' + trackingData.lastUpdate + '</div>';
    html += '</div></div>';
    
    // Timeline
    html += '<div class="result-timeline">';
    html += '<div class="timeline-title">ğŸ“ Tracking History</div>';
    html += '<div class="timeline-events">';
    
    trackingData.events.forEach(function(event) {
        html += '<div class="timeline-event ' + event.status + '">';
        html += '<div class="event-dot">';
        if (event.status === 'completed') {
            html += '<svg width="16" height="16" viewBox="0 0 24 24" fill="white"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>';
        } else if (event.status === 'current') {
            html += '<svg width="16" height="16" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>';
        }
        html += '</div>';
        html += '<div class="event-content">';
        html += '<div class="event-title">' + event.title + '</div>';
        html += '<div class="event-location">' + event.location + '</div>';
        html += '<div class="event-time">' + event.time + '</div>';
        html += '</div></div>';
    });
    
    html += '</div></div>';
    html += '</div></div>';
    
    // Searates Live Tab (iframe)
    html += '<div id="searatesTab" class="result-tab-content">';
    html += '<div class="searates-iframe-container">';
    html += '<div class="iframe-header">';
    html += '<span> Live Data from Searates.com</span>';
    html += '<a href="https://www.searates.com/container/tracking/?number=' + containerNo + '" target="_blank" class="open-external">Open in new tab â†—</a>';
    html += '</div>';
    html += '<iframe id="searatesIframe" src="about:blank" data-src="https://www.searates.com/container/tracking/?number=' + containerNo + '" frameborder="0" allowfullscreen></iframe>';
    html += '<div class="iframe-note">';
    html += '<span></span> This is live data directly from Searates global tracking network covering 200+ carriers worldwide.';
    html += '</div></div></div>';
    
    html += '</div>';
    
    document.getElementById('lookupData').innerHTML = html;
}

// Tab switching for results
function showResultTab(tab) {
    document.querySelectorAll('.result-tab').forEach(function(t) {
        t.classList.remove('active');
    });
    document.querySelectorAll('.result-tab-content').forEach(function(c) {
        c.classList.remove('active');
    });
    
    if (tab === 'premium') {
        document.querySelector('.result-tab:first-child').classList.add('active');
        document.getElementById('premiumTab').classList.add('active');
    } else {
        document.querySelector('.result-tab:last-child').classList.add('active');
        document.getElementById('searatesTab').classList.add('active');
        
        // Load iframe only when tab is clicked (lazy load)
        var iframe = document.getElementById('searatesIframe');
        if (iframe && iframe.src === 'about:blank') {
            iframe.src = iframe.dataset.src;
        }
    }
}

// Generate enhanced tracking data based on carrier
function generateEnhancedTrackingData(containerNo, carrier) {
    // Carrier-specific routes
    var carrierRoutes = {
        'Maersk': { origins: ['Shanghai, China', 'Ningbo, China', 'Qingdao, China'], destinations: ['Istanbul, Turkey', 'Rotterdam, Netherlands', 'Hamburg, Germany'] },
        'MSC': { origins: ['Shenzhen, China', 'Singapore', 'Busan, South Korea'], destinations: ['Piraeus, Greece', 'Genoa, Italy', 'Valencia, Spain'] },
        'CMA CGM': { origins: ['Ho Chi Minh, Vietnam', 'Bangkok, Thailand', 'Jakarta, Indonesia'], destinations: ['Marseille, France', 'Le Havre, France', 'Antwerp, Belgium'] },
        'Hapag-Lloyd': { origins: ['Yokohama, Japan', 'Kaohsiung, Taiwan', 'Manila, Philippines'], destinations: ['Bremerhaven, Germany', 'Southampton, UK', 'Felixstowe, UK'] },
        'COSCO': { origins: ['Dalian, China', 'Tianjin, China', 'Xiamen, China'], destinations: ['AmbarlÄ±, Turkey', 'Piraeus, Greece', 'Rotterdam, Netherlands'] },
        'Evergreen': { origins: ['Taipei, Taiwan', 'Hong Kong, China', 'Tanjung Pelepas, Malaysia'], destinations: ['Los Angeles, USA', 'Long Beach, USA', 'Oakland, USA'] },
        'default': { origins: ['Shanghai, China', 'Singapore', 'Hong Kong, China'], destinations: ['Istanbul, Turkey', 'Rotterdam, Netherlands', 'Hamburg, Germany'] }
    };
    
    var routes = carrierRoutes[carrier.name] || carrierRoutes['default'];
    var origin = routes.origins[Math.floor(Math.random() * routes.origins.length)];
    var destination = routes.destinations[Math.floor(Math.random() * routes.destinations.length)];
    
    // Carrier-specific vessels
    var carrierVessels = {
        'Maersk': ['MAERSK EINDHOVEN', 'MAERSK ESSEN', 'MAERSK EVORA', 'MAERSK EDMONTON'],
        'MSC': ['MSC GULSUN', 'MSC MINA', 'MSC AMBRA', 'MSC ISTANBUL'],
        'CMA CGM': ['CMA CGM ANTOINE', 'CMA CGM LOUIS', 'CMA CGM MARCO POLO'],
        'Hapag-Lloyd': ['BERLIN EXPRESS', 'HAMBURG EXPRESS', 'TOKYO EXPRESS'],
        'COSCO': ['COSCO SHIPPING UNIVERSE', 'COSCO SHIPPING NEBULA', 'COSCO SHIPPING PLANET'],
        'Evergreen': ['EVER GIVEN', 'EVER ACE', 'EVER GLOBE', 'EVER GOLDEN'],
        'default': ['GLOBAL CARRIER', 'OCEAN VOYAGER', 'SEA PIONEER']
    };
    
    var vessels = carrierVessels[carrier.name] || carrierVessels['default'];
    var vessel = vessels[Math.floor(Math.random() * vessels.length)];
    
    var progress = Math.floor(Math.random() * 50) + 30; // 30-80%
    var now = new Date();
    
    // Generate realistic dates
    var etdDate = new Date(now);
    etdDate.setDate(etdDate.getDate() - Math.floor(progress / 5));
    
    var etaDate = new Date(now);
    etaDate.setDate(etaDate.getDate() + Math.floor((100 - progress) / 5));
    
    var events = [];
    
    // Gate out
    var gateOut = new Date(etdDate);
    gateOut.setDate(gateOut.getDate() - 2);
    events.push({
        title: 'Gate Out from Terminal',
        location: origin,
        time: formatDate(gateOut) + ' â€¢ 08:30',
        status: 'completed'
    });
    
    // Loaded on vessel
    var loaded = new Date(etdDate);
    loaded.setDate(loaded.getDate() - 1);
    events.push({
        title: 'Loaded on Vessel',
        location: origin.split(',')[0] + ' Port',
        time: formatDate(loaded) + ' â€¢ 14:20',
        status: 'completed'
    });
    
    // Vessel departed
    events.push({
        title: 'Vessel Departed',
        location: origin.split(',')[0] + ' Port',
        time: formatDate(etdDate) + ' â€¢ 22:00',
        status: 'completed'
    });
    
    // Current location based on progress
    var currentLocation = 'At Sea';
    if (progress > 30 && progress < 50) {
        currentLocation = 'Indian Ocean';
        events.push({
            title: 'Transshipment',
            location: 'Singapore',
            time: formatDate(new Date(now.getTime() - 3*24*60*60*1000)) + ' â€¢ 06:45',
            status: 'completed'
        });
    } else if (progress >= 50 && progress < 70) {
        currentLocation = 'Suez Canal Region';
        events.push({
            title: 'Passed Suez Canal',
            location: 'Port Said, Egypt',
            time: formatDate(new Date(now.getTime() - 2*24*60*60*1000)) + ' â€¢ 10:30',
            status: 'completed'
        });
    } else if (progress >= 70) {
        currentLocation = 'Mediterranean Sea';
        events.push({
            title: 'Passed Suez Canal',
            location: 'Port Said, Egypt',
            time: formatDate(new Date(now.getTime() - 4*24*60*60*1000)) + ' â€¢ 10:30',
            status: 'completed'
        });
    }
    
    // In transit (current)
    events.push({
        title: 'In Transit - ' + currentLocation,
        location: 'At Sea',
        time: 'Now',
        status: 'current'
    });
    
    // Future events
    events.push({
        title: 'Estimated Arrival',
        location: destination.split(',')[0] + ' Port',
        time: formatDate(etaDate) + ' (Est.)',
        status: 'pending'
    });
    
    events.push({
        title: 'Ready for Pickup',
        location: destination,
        time: formatDate(new Date(etaDate.getTime() + 2*24*60*60*1000)) + ' (Est.)',
        status: 'pending'
    });
    
    return {
        containerNo: containerNo,
        carrier: carrier,
        status: progress > 95 ? 'delivered' : 'in-transit',
        origin: origin,
        originCode: origin.split(',')[0].substring(0, 3).toUpperCase(),
        destination: destination,
        destinationCode: destination.split(',')[0].substring(0, 3).toUpperCase(),
        vessel: vessel,
        voyage: 'V.' + (Math.floor(Math.random() * 900) + 100) + 'E',
        progress: progress,
        eta: formatDate(etaDate),
        etd: formatDate(etdDate),
        currentLocation: currentLocation,
        lastUpdate: formatDateTime(now),
        events: events
    };
}

function formatDateTracking(date) {
    return date.toLocaleDateString('tr-TR', { month: 'short', day: 'numeric', year: 'numeric' });
}

function formatDateTime(date) {
    return date.toLocaleDateString('tr-TR', { month: 'short', day: 'numeric' }) + ' ' + 
           date.toLocaleTimeString('tr-TR', { hour: '2-digit', minute: '2-digit' });
}

// Generate demo tracking data
function generateDemoTrackingData(containerNo, carrier) {
    var origins = ['Shanghai, China', 'Ningbo, China', 'Busan, South Korea', 'Singapore', 'Rotterdam, Netherlands'];
    var destinations = ['Istanbul, Turkey', 'Piraeus, Greece', 'Hamburg, Germany', 'Antwerp, Belgium', 'Felixstowe, UK'];
    var vessels = ['MSC GULSUN', 'EVER GIVEN', 'HMM ALGECIRAS', 'CMA CGM ANTOINE', 'MAERSK EINDHOVEN'];
    
    var randomOrigin = origins[Math.floor(Math.random() * origins.length)];
    var randomDest = destinations[Math.floor(Math.random() * destinations.length)];
    var randomVessel = vessels[Math.floor(Math.random() * vessels.length)];
    
    var progress = Math.floor(Math.random() * 60) + 20; // 20-80%
    
    return {
        containerNo: containerNo,
        carrier: carrier,
        status: progress > 90 ? 'delivered' : 'in-transit',
        origin: randomOrigin,
        originCode: randomOrigin.split(',')[0].substring(0, 3).toUpperCase(),
        destination: randomDest,
        destinationCode: randomDest.split(',')[0].substring(0, 3).toUpperCase(),
        vessel: randomVessel,
        voyage: 'V.' + Math.floor(Math.random() * 900 + 100) + 'E',
        progress: progress,
        eta: getRandomFutureDate(5, 15),
        etd: getRandomPastDate(10, 20),
        size: '40\' HC',
        weight: (Math.floor(Math.random() * 20) + 5) + ',' + Math.floor(Math.random() * 900) + ' kg',
        events: generateTrackingEvents(progress, randomOrigin, randomDest)
    };
}

function getRandomFutureDate(minDays, maxDays) {
    var date = new Date();
    date.setDate(date.getDate() + Math.floor(Math.random() * (maxDays - minDays)) + minDays);
    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
}

function getRandomPastDate(minDays, maxDays) {
    var date = new Date();
    date.setDate(date.getDate() - Math.floor(Math.random() * (maxDays - minDays)) - minDays);
    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
}

function generateTrackingEvents(progress, origin, destination) {
    var events = [];
    var now = new Date();
    
    // Event 1: Gate Out (always completed)
    events.push({
        title: 'Gate Out from Terminal',
        location: origin,
        time: getRandomPastDate(15, 20) + ' â€¢ 08:30',
        status: 'completed'
    });
    
    // Event 2: Loaded on Vessel
    events.push({
        title: 'Loaded on Vessel',
        location: origin.split(',')[0] + ' Port',
        time: getRandomPastDate(12, 15) + ' â€¢ 14:20',
        status: 'completed'
    });
    
    // Event 3: Vessel Departed
    events.push({
        title: 'Vessel Departed',
        location: origin.split(',')[0] + ' Port',
        time: getRandomPastDate(10, 12) + ' â€¢ 22:00',
        status: 'completed'
    });
    
    if (progress > 40) {
        // Event 4: Transshipment (if applicable)
        events.push({
            title: 'Transshipment',
            location: 'Port Said, Egypt',
            time: getRandomPastDate(5, 8) + ' â€¢ 06:45',
            status: 'completed'
        });
    }
    
    if (progress > 60) {
        // Event 5: In Transit
        events.push({
            title: 'In Transit - Mediterranean Sea',
            location: 'At Sea',
            time: getRandomPastDate(2, 4) + ' â€¢ 12:00',
            status: 'current'
        });
    } else {
        events.push({
            title: 'In Transit',
            location: 'At Sea',
            time: 'Now',
            status: 'current'
        });
    }
    
    // Future events
    events.push({
        title: 'Estimated Arrival',
        location: destination.split(',')[0] + ' Port',
        time: getRandomFutureDate(3, 7) + ' (Est.)',
        status: 'pending'
    });
    
    events.push({
        title: 'Ready for Pickup',
        location: destination,
        time: getRandomFutureDate(5, 10) + ' (Est.)',
        status: 'pending'
    });
    
    return events;
}

// Render container result
function renderContainerResult(data) {
    var html = '<div class="container-result-card">';
    
    // Header
    html += '<div class="result-header">';
    html += '<div class="result-container-info">';
    html += '<div class="container-icon"></div>';
    html += '<div class="container-details">';
    html += '<h4>' + data.containerNo + '</h4>';
    html += '<span>' + data.carrier.name + ' â€¢ ' + data.vessel + ' â€¢ ' + data.voyage + '</span>';
    html += '</div></div>';
    html += '<div class="result-status">';
    html += '<div class="status-badge-large ' + data.status + '">';
    html += '<span class="pulse-dot"></span>';
    html += data.status === 'in-transit' ? 'In Transit' : 'Delivered';
    html += '</div></div></div>';
    
    // Body
    html += '<div class="result-body">';
    
    // Route Visual
    html += '<div class="result-route-visual">';
    html += '<div class="route-point">';
    html += '<div class="route-point-icon origin">ğŸ­</div>';
    html += '<div class="route-point-name">' + data.origin.split(',')[0] + '</div>';
    html += '<div class="route-point-code">' + data.originCode + '</div>';
    html += '</div>';
    
    html += '<div class="route-line-container">';
    html += '<div class="route-progress-line">';
    html += '<div class="route-progress-fill" style="width: ' + data.progress + '%"></div>';
    html += '<div class="route-ship-icon" style="left: ' + data.progress + '%"></div>';
    html += '</div></div>';
    
    html += '<div class="route-point">';
    html += '<div class="route-point-icon destination">ğŸ¢</div>';
    html += '<div class="route-point-name">' + data.destination.split(',')[0] + '</div>';
    html += '<div class="route-point-code">' + data.destinationCode + '</div>';
    html += '</div></div>';
    
    // Details Grid
    html += '<div class="result-details-grid">';
    html += '<div class="detail-card"><div class="detail-card-label">Container Size</div><div class="detail-card-value">' + data.size + '</div></div>';
    html += '<div class="detail-card"><div class="detail-card-label">Weight</div><div class="detail-card-value">' + data.weight + '</div></div>';
    html += '<div class="detail-card"><div class="detail-card-label">ETD</div><div class="detail-card-value">' + data.etd + '</div></div>';
    html += '<div class="detail-card"><div class="detail-card-label">ETA</div><div class="detail-card-value">' + data.eta + '</div></div>';
    html += '</div>';
    
    // Timeline
    html += '<div class="result-timeline">';
    html += '<div class="timeline-title">ğŸ“ Tracking History</div>';
    html += '<div class="timeline-events">';
    
    data.events.forEach(function(event) {
        html += '<div class="timeline-event ' + event.status + '">';
        html += '<div class="event-dot">';
        if (event.status === 'completed') {
            html += '<svg width="16" height="16" viewBox="0 0 24 24" fill="white"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>';
        } else if (event.status === 'current') {
            html += '<svg width="16" height="16" viewBox="0 0 24 24" fill="white"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"/></svg>';
        }
        html += '</div>';
        html += '<div class="event-content">';
        html += '<div class="event-title">' + event.title + '</div>';
        html += '<div class="event-location">' + event.location + '</div>';
        html += '<div class="event-time">' + event.time + '</div>';
        html += '</div></div>';
    });
    
    html += '</div></div>';
    html += '</div></div>';
    
    document.getElementById('lookupData').innerHTML = html;
}

function renderShipments(filter) {
    var filtered = myShipments;
    
    if (filter !== 'all') {
        filtered = myShipments.filter(function(s) {
            return s.status === filter;
        });
    }
    
    var html = '';
    filtered.forEach(function(shipment) {
        html += '<div class="shipment-card" onclick="openShipmentTracking(\'' + shipment.id + '\')">';
        html += '<div class="shipment-card-header">';
        html += '<div><div class="shipment-id">' + shipment.id + '</div>';
        html += '<div class="shipment-date">' + shipment.date + '</div></div>';
        html += '<span class="shipment-status ' + shipment.status + '">' + shipment.status.charAt(0).toUpperCase() + shipment.status.slice(1) + '</span>';
        html += '</div>';
        
        html += '<div class="shipment-route">';
        html += '<div class="shipment-route-point"><div class="shipment-route-label">FROM</div><div class="shipment-route-city">' + shipment.origin + '</div></div>';
        html += '<div class="shipment-route-arrow">â†’</div>';
        html += '<div class="shipment-route-point"><div class="shipment-route-label">TO</div><div class="shipment-route-city">' + shipment.dest + '</div></div>';
        html += '</div>';
        
        html += '<div class="shipment-info">';
        html += '<div class="shipment-meta">';
        html += '<div class="shipment-meta-item"><span>Type:</span> ' + shipment.freight + '</div>';
        html += '<div class="shipment-meta-item"><span>Weight:</span> ' + shipment.weight + '</div>';
        if (shipment.status === 'active') {
            html += '<div class="shipment-meta-item"><span>Progress:</span> ' + shipment.progress + '%</div>';
        }
        html += '</div>';
        html += '<div class="shipment-price">$' + shipment.price.toLocaleString() + '</div>';
        html += '</div>';
        html += '</div>';
    });
    
    document.getElementById('shipmentsContainer').innerHTML = html;
}

function filterShipments(filter) {
    // Update active button
    document.querySelectorAll('.filter-btn').forEach(function(btn) {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    renderShipments(filter);
}

function openShipmentTracking(shipmentId) {
    document.getElementById('trackingInput').value = shipmentId;
    showTrackingPage();
    trackShipment();
}

// ==================== AI FEATURES ====================

// CHATBOT - Removed (AI chat not part of product)
var chatbotOpen = false;

function toggleChatbot() {
    // Chatbot removed - no action
    console.log('Chatbot feature not available');
}

function handleChatKeypress(e) {
    // Legacy function - no action
}

function sendChatMessage() {
    var input = document.getElementById('chatInput');
    var message = input.value.trim();
    if (!message) return;
    
    addChatMessage(message, 'user');
    input.value = '';
    
    // Simulate AI thinking
    setTimeout(function() {
        var response = generateAIResponse(message);
        addChatMessage(response, 'bot');
    }, 800);
}

function askQuestion(type) {
    var questions = {
        'rate': 'GÃ¶nderim iÃ§in rate tahmini alabilir miyim?',
        'incoterm': 'Incoterm nedir ve hangisini seÃ§meliyim?',
        'sure': 'Transit sÃ¼releri ne kadar?',
        'belge': 'Hangi belgeler gerekli?'
    };
    
    addChatMessage(questions[type], 'user');
    
    setTimeout(function() {
        var response = generateAIResponse(questions[type]);
        addChatMessage(response, 'bot');
    }, 800);
}

function generateAIResponse(message) {
    var msg = message.toLowerCase();
    
    if (msg.includes('rate') || msg.includes('price') || msg.includes('Ã¼cret') || msg.includes('maliyet')) {
        return 'Fiyat tahmini iÃ§in form bilgilerinizi analiz ediyorum:<br><br>' +
               'â€¢ <strong>Sea Freight:</strong> $800 - $3,500 (20-40 gÃ¼n)<br>' +
               'â€¢ <strong>Air Freight:</strong> $2,500 - $8,000 (3-7 days)<br>' +
               'â€¢ <strong>Land Freight:</strong> $1,200 - $4,000 (5-15 days)<br><br>' +
               'DetaylÄ± rate iÃ§in formu doldurup "Request Introduction" butonuna tÄ±klayÄ±n.';
    }
    
    if (msg.includes('incoterm') || msg.includes('teslimat')) {
        return '<strong>Incoterms Rehberi:</strong><br><br>' +
               'â€¢ <strong>DDP:</strong> KapÄ±dan kapÄ±ya, tÃ¼m vergiler dahil (En kolay)<br>' +
               'â€¢ <strong>CIF:</strong> Liman-liman, sigorta dahil<br>' +
               'â€¢ <strong>FOB:</strong> YÃ¼kleme limanÄ±nda teslim<br>' +
               'â€¢ <strong>EXW:</strong> Fabrikadan teslim (En ucuz)<br><br>' +
               'For first-time shippers, I recommend <strong>DDP</strong>!';
    }
    
    if (msg.includes('sÃ¼re') || msg.includes('zaman') || msg.includes('transit') || msg.includes('kaÃ§ gÃ¼n')) {
        return ' <strong>Transit SÃ¼releri:</strong><br><br>' +
               'â€¢ <strong>Air:</strong> 2-7 days (Express: 1-3 days)<br>' +
               'â€¢ <strong>Sea:</strong> 15-45 days (rotaya gÃ¶re)<br>' +
               'â€¢ <strong>Land:</strong> 3-15 days (mesafeye gÃ¶re)<br><br>' +
               'Ä°stanbul â†’ Hamburg: Deniz 18 gÃ¼n, Kara 5 days, Hava 2 gÃ¼n ';
    }
    
    if (msg.includes('belge') || msg.includes('document') || msg.includes('evrak')) {
        return '<strong>Gerekli Belgeler:</strong><br><br>' +
               'âœ“ Commercial Invoice<br>' +
               'âœ“ Packing List<br>' +
               'âœ“ Bill of Lading / Airway Bill<br>' +
               'âœ“ Certificate of Origin (if required)<br>' +
               'âœ“ Insurance Certificate (for CIF)<br><br>' +
               'Tehlikeli madde iÃ§in MSDS belgesi de gerekli!';
    }
    
    if (msg.includes('container') || msg.includes('container')) {
        return '<strong>Konteyner Tipleri:</strong><br><br>' +
               'â€¢ <strong>20\' GP:</strong> 33 mÂ³ (~21 ton)<br>' +
               'â€¢ <strong>40\' GP:</strong> 67 mÂ³ (~26 ton)<br>' +
               'â€¢ <strong>40\' HC:</strong> 76 mÂ³ (yÃ¼ksek tavan)<br>' +
               'â€¢ <strong>Reefer:</strong> SoÄŸuk zincir iÃ§in<br>' +
               'â€¢ <strong>Open Top:</strong> YÃ¼ksek yÃ¼kler iÃ§in<br><br>' +
               'LCL ile kÃ¼Ã§Ã¼k yÃ¼kler iÃ§in container paylaÅŸabilirsiniz!';
    }
    
    if (msg.includes('sigorta') || msg.includes('insurance')) {
        return '<strong>Kargo InsurancesÄ±:</strong><br><br>' +
               'â€¢ Genelde mal deÄŸerinin %0.3 - %0.5\'i<br>' +
               'â€¢ TÃ¼m riskleri kapsar (All Risk)<br>' +
               'â€¢ Hasar/kayÄ±p durumunda tam tazminat<br><br>' +
               'CIF ve DDP seÃ§eneklerinde sigorta dahildir. Kesinlikle quoteyorum!';
    }
    
    if (msg.includes('gÃ¼mrÃ¼k') || msg.includes('customs') || msg.includes('vergi')) {
        return '<strong>Customs Ä°ÅŸlemleri:</strong><br><br>' +
               'â€¢ HS kodu ile vergi oranÄ± belirlenir<br>' +
               'â€¢ Genelde %0 - %20 arasÄ± gÃ¼mrÃ¼k vergisi<br>' +
               'â€¢ KDV ayrÄ±ca uygulanÄ±r<br><br>' +
               'Sol menÃ¼deki "Duty Calculator" ile tahmini hesaplayabilirsiniz! ğŸ§®';
    }
    
    if (msg.includes('merhaba') || msg.includes('selam') || msg.includes('hello')) {
        return 'Merhaba! ğŸ‘‹ Size nasÄ±l yardÄ±mcÄ± olabilirim?<br><br>' +
               'SorularÄ±nÄ±z iÃ§in bazÄ± quoteler:<br>' +
               'â€¢ Fiyat tahmini<br>' +
               'â€¢ Transit sÃ¼releri<br>' +
               'â€¢ Incoterms aÃ§Ä±klamalarÄ±<br>' +
               'â€¢ Gerekli belgeler<br>' +
               'â€¢ Konteyner seÃ§imi';
    }
    
    return 'ğŸ¤” AnlÄ±yorum. Bu konuda size yardÄ±mcÄ± olayÄ±m:<br><br>' +
           'Spesifik sorularÄ±nÄ±z iÃ§in ÅŸunlarÄ± deneyebilirsiniz:<br>' +
           'â€¢ "Fiyat tahmini"<br>' +
           'â€¢ "Transit sÃ¼releri"<br>' +
           'â€¢ "Hangi Incoterm"<br>' +
           'â€¢ "Gerekli belgeler"<br><br>' +
           'Sol taraftaki AI Tools menÃ¼sÃ¼nden de araÃ§lara eriÅŸebilirsiniz!';
}

// AI TOOLS MENU
var aiToolsOpen = false;

function toggleAiToolsMenu() {
    aiToolsOpen = !aiToolsOpen;
    var menu = document.getElementById('aiToolsMenu');
    
    if (aiToolsOpen) {
        menu.classList.add('active');
    } else {
        menu.classList.remove('active');
    }
}

// PRICE ESTIMATOR - Removed (AI price calculation not part of product)
var estimatorVisible = false;

function toggleEstimator() {
    // Price estimator removed - no action
    console.log('Price estimator feature not available');
}

function showPriceEstimator() {
    // Price estimator removed - no action
    console.log('Price estimator feature not available');
}

function updatePriceEstimate() {
    // Price estimator removed - no action
}

// RISK ANALYZER - Removed (not part of product)
function toggleRiskAnalyzer() {
    console.log('Risk analyzer feature not available');
}

function closeRiskAnalyzer() {
    // No action needed
}

function updateRiskAnalysis() {
    // Risk analyzer removed - no action
}

function updateRiskFactor(id, score) {
    // Risk analyzer removed - no action
}

// HS CODE FINDER - Removed (AI feature)
function openHsCodeModal() {
    console.log('HS Code finder not available');
}

function closeHsCodeModal() {
    // No action
}

function searchHsCode() {
    // AI feature removed
}

function selectHsCode(code) {
    // AI feature removed
}

function openDutyModal() {
    console.log('Duty calculator not available');
}

function closeDutyModal() {
    // No action
}

function calculateDuty() {
    // AI feature removed
}

function openCarbonModal() {
    console.log('Carbon calculator not available');
}

function closeCarbonModal() {
    // No action
}

function calculateCarbon() {
    // AI feature removed
}

function openCalendarModal() {
    console.log('Calendar feature not available');
}

function closeCalendarModal() {
    // No action
}

function updateCalendarAnalysis() {
    // AI feature removed
}

function applyBestDate() {
    // AI feature removed
}

// No-op functions for removed features
function toggleFloatingChatbot() { console.log('Chatbot not available'); }
function setChatbotMode() { }
function sendFloatingChatMessage() { }
function generateFloatingAIResponse() { return ''; }
function showPriceEstimationInfo() { console.log('Price estimation info not available'); }

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VERIFICATION SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var verificationDocuments = {
    client: {
        required: [
            'Ticaret Sicil Gazetesi',
            'Vergi LevhasÄ±',
            'Ä°mza SirkÃ¼leri',
            'Yetki Belgesi'
        ],
        optional: [
            'ISO 9001 SertifikasÄ±',
            'Referans MektuplarÄ±',
            'Banka Referans YazÄ±sÄ±',
            'Ticaret OdasÄ± Ãœyelik Belgesi'
        ]
    },
    forwarder: {
        required: [
            'C2 veya L2 Yetki Belgesi (UETDS)',
            'Ticaret Sicil Gazetesi',
            'Vergi LevhasÄ±',
            'FIATA ÃœyeliÄŸi veya UTIKAD ÃœyeliÄŸi',
            'Sorumluluk InsurancesÄ± PoliÃ§esi'
        ],
        optional: [
            'ISO 9001 / ISO 14001 SertifikasÄ±',
            'AEO (YetkilendirilmiÅŸ Ekonomik OperatÃ¶r) Belgesi',
            'IATA Akreditasyonu (air kargo)',
            'NVOCC LisansÄ± (sea kargo)',
            'GDP SertifikasÄ± (ilaÃ§/tÄ±bbi Ã¼rÃ¼nler iÃ§in)'
        ]
    }
};

function showDamageRecordInfo() {
    alert('ğŸ“‹ HASAR KAYIT SÄ°STEMÄ°\n\n' +
          'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n' +
          damageRecordSystem.description + '\n\n' +
          'ğŸ“Š VERÄ° KAYNAKLARI:\n' +
          damageRecordSystem.sources.map(function(s, i) { return (i+1) + '. ' + s; }).join('\n') + '\n\n' +
          'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n' +
          'ğŸ‘¥ KAYIT YAPANLAR:\n' +
          damageRecordSystem.recordedBy.map(function(s, i) { return (i+1) + '. ' + s; }).join('\n') + '\n\n' +
          'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n' +
          'âš ï¸ "0 hasar kaydÄ±" ifadesi, platformumuzda bu forwarder\n' +
          'hakkÄ±nda hiÃ§bir hasar ÅŸikayeti bildirilmediÄŸi anlamÄ±na gelir.');
}

function showVerificationInfo(userType) {
    var docs = userType === 'forwarder' ? verificationDocuments.forwarder : verificationDocuments.client;
    var title = userType === 'forwarder' ? 'FORWARDER' : 'MÃœÅTERÄ°';
    
    alert('âœ… ' + title + ' DOÄRULAMA BELGELERÄ°\n\n' +
          'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n' +
          'ğŸ“‹ ZORUNLU BELGELER:\n' +
          docs.required.map(function(s, i) { return '  âœ“ ' + s; }).join('\n') + '\n\n' +
          'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n' +
          'ğŸ“‹ OPTIONAL DOCUMENTS (Increases Trust Score):\n' +
          docs.optional.map(function(s, i) { return '  â—‹ ' + s; }).join('\n') + '\n\n' +
          'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n' +
          'ğŸ’¡ Upload all required documents to get "Verified" badge.\n' +
          'Optional documents increase your trust score.');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// ÃœLKE BAZLI BELGE SÄ°STEMÄ°
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var countryDocRequirements = {
    // TÃœRKÄ°YE
    TR: {
        name: 'TÃ¼rkiye',
        nameEn: 'Turkey',
        flag: 'TR',
        client: {
            required: [
                { id: 'ticSicil', name: 'Ticaret Sicil Gazetesi', nameEn: 'Trade Registry Gazette', icon: 'doc' },
                { id: 'vergiLevha', name: 'Vergi LevhasÄ±', nameEn: 'Tax Certificate', icon: 'tax' },
                { id: 'imzaSirkuler', name: 'Ä°mza SirkÃ¼leri', nameEn: 'Signature Circular', icon: 'sign' },
                { id: 'yetkiBelgesi', name: 'Yetki Belgesi', nameEn: 'Authorization Document', icon: 'cert' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', nameEn: 'ISO 9001', icon: 'iso', points: 15 },
                { id: 'ticaretOdasi', name: 'Ticaret OdasÄ± ÃœyeliÄŸi', nameEn: 'Chamber of Commerce', icon: 'chamber', points: 10 }
            ]
        },
        forwarder: {
            required: [
                { id: 'ticSicil', name: 'Ticaret Sicil Gazetesi', nameEn: 'Trade Registry Gazette', icon: 'doc' },
                { id: 'vergiLevha', name: 'Vergi LevhasÄ±', nameEn: 'Tax Certificate', icon: 'tax' },
                { id: 'imzaSirkuler', name: 'Ä°mza SirkÃ¼leri', nameEn: 'Signature Circular', icon: 'sign' },
                { id: 'odaKayit', name: 'Oda KayÄ±t Belgesi', nameEn: 'Chamber Registration Certificate', icon: 'chamber' }
            ],
            optional: [
                { id: 'fiata', name: 'FIATA ÃœyeliÄŸi', nameEn: 'FIATA Membership', icon: 'network', points: 15 },
                { id: 'iata', name: 'IATA Akreditasyonu', nameEn: 'IATA Accreditation', icon: 'plane', points: 15 },
                { id: 'utikad', name: 'UTIKAD ÃœyeliÄŸi', nameEn: 'UTIKAD Membership', icon: 'network', points: 10 },
                { id: 'sigortaPolicesi', name: 'Mesleki Sorumluluk InsurancesÄ±', nameEn: 'Professional Liability Insurance', icon: 'shield', points: 10 }
            ]
        }
    },
    // ALMANYA
    DE: {
        name: 'Germany',
        nameEn: 'Germany',
        flag: 'DE',
        client: {
            required: [
                { id: 'handelsregister', name: 'Handelsregisterauszug', nameEn: 'Commercial Register Extract', icon: 'doc' },
                { id: 'gewerbeschein', name: 'Gewerbeschein', nameEn: 'Trade License', icon: 'tax' },
                { id: 'umsatzsteuer', name: 'Umsatzsteuer-ID (VAT)', nameEn: 'VAT ID', icon: 'id' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', nameEn: 'ISO 9001', icon: 'iso', points: 15 },
                { id: 'ihkMember', name: 'IHK Mitgliedschaft', nameEn: 'IHK Membership', icon: 'chamber', points: 10 }
            ]
        },
        forwarder: {
            required: [
                { id: 'speditionsLizenz', name: 'Speditionslizenz', nameEn: 'Forwarding License', icon: 'license' },
                { id: 'handelsregister', name: 'Handelsregisterauszug', nameEn: 'Commercial Register', icon: 'building' },
                { id: 'haftpflicht', name: 'Speditionshaftpflicht', nameEn: 'Forwarding Liability Insurance', icon: 'shield' },
                { id: 'eori', name: 'EORI Nummer', nameEn: 'EORI Number', icon: 'id' }
            ]
        }
    },
    // FRANSA
    FR: {
        name: 'Fransa',
        nameEn: 'France',
        flag: 'FR',
        client: {
            required: [
                { id: 'kbis', name: 'Extrait Kbis', nameEn: 'Kbis Extract', icon: 'doc' },
                { id: 'siret', name: 'NumÃ©ro SIRET', nameEn: 'SIRET Number', icon: 'id' },
                { id: 'tvaIntra', name: 'TVA Intracommunautaire', nameEn: 'Intra-Community VAT', icon: 'tax' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', nameEn: 'ISO 9001', icon: 'iso', points: 15 },
                { id: 'cci', name: 'CCI Membership', nameEn: 'CCI Membership', icon: 'chamber', points: 10 }
            ]
        },
        forwarder: {
            required: [
                { id: 'licenceCommissionnaire', name: 'Licence Commissionnaire', nameEn: 'Transport Commissioner License', icon: 'license' },
                { id: 'kbis', name: 'Extrait Kbis', nameEn: 'Kbis Extract', icon: 'building' },
                { id: 'rcPro', name: 'RC Professionnelle', nameEn: 'Professional Liability', icon: 'shield' },
                { id: 'eori', name: 'NumÃ©ro EORI', nameEn: 'EORI Number', icon: 'id' }
            ]
        }
    },
    // Ä°TALYA
    IT: {
        name: 'Ä°talya',
        nameEn: 'Italy',
        flag: 'IT',
        client: {
            required: [
                { id: 'visuraCamerale', name: 'Visura Camerale', nameEn: 'Chamber of Commerce Extract', icon: 'doc' },
                { id: 'partitaIva', name: 'Partita IVA', nameEn: 'VAT Number', icon: 'id' },
                { id: 'codiceFiscale', name: 'Codice Fiscale', nameEn: 'Tax Code', icon: 'tax' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', nameEn: 'ISO 9001', icon: 'iso', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'iscrizioneAlbo', name: 'Iscrizione Albo', nameEn: 'Transporters Register', icon: 'license' },
                { id: 'visuraCamerale', name: 'Visura Camerale', nameEn: 'Chamber Extract', icon: 'building' },
                { id: 'polizzaRc', name: 'Polizza RC Vettoriale', nameEn: 'Carrier Liability Policy', icon: 'shield' },
                { id: 'eori', name: 'Codice EORI', nameEn: 'EORI Code', icon: 'id' }
            ]
        }
    },
    // Ä°SPANYA
    ES: {
        name: 'Ä°spanya',
        nameEn: 'Spain',
        flag: 'ES',
        client: {
            required: [
                { id: 'escritura', name: 'Escritura de ConstituciÃ³n', nameEn: 'Deed of Incorporation', icon: 'doc' },
                { id: 'cif', name: 'CIF/NIF', nameEn: 'CIF/NIF', icon: 'id' },
                { id: 'altaCensal', name: 'Alta Censal', nameEn: 'Tax Registration', icon: 'tax' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', nameEn: 'ISO 9001', icon: 'iso', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'autorizacionOT', name: 'AutorizaciÃ³n OT', nameEn: 'Transport Operator Auth', icon: 'license' },
                { id: 'escritura', name: 'Escritura de ConstituciÃ³n', icon: 'ğŸ¢' },
                { id: 'seguroRc', name: 'Seguro RC Transporte', icon: 'ğŸ›¡ï¸' },
                { id: 'eori', name: 'NÃºmero EORI', icon: 'ğŸ”¢' }
            ]
        }
    },
    // HOLLANDA
    NL: {
        name: 'Hollanda',
        flag: 'ğŸ‡³ğŸ‡±',
        client: {
            required: [
                { id: 'kvkUittreksel', name: 'KvK Uittreksel', icon: 'ğŸ“„' },
                { id: 'btwNummer', name: 'BTW-nummer', icon: 'ğŸ”¢' },
                { id: 'kvkNummer', name: 'KvK-nummer', icon: 'ğŸ“‹' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 },
                { id: 'fenex', name: 'FENEX Membership', icon: 'ğŸ¤', points: 10 }
            ]
        },
        forwarder: {
            required: [
                { id: 'aeoNl', name: 'AEO Certificaat', icon: 'ğŸ“„' },
                { id: 'kvkUittreksel', name: 'KvK Uittreksel', icon: 'ğŸ¢' },
                { id: 'aansprakelijkheid', name: 'Aansprakelijkheidsverzekering', icon: 'ğŸ›¡ï¸' },
                { id: 'eori', name: 'EORI-nummer', icon: 'ğŸ”¢' }
            ]
        }
    },
    // BELÃ‡Ä°KA
    BE: {
        name: 'BelÃ§ika',
        flag: 'ğŸ‡§ğŸ‡ª',
        client: {
            required: [
                { id: 'kruispuntbank', name: 'Kruispuntbank Ondernemingen', icon: 'ğŸ“„' },
                { id: 'btwNummer', name: 'BTW-nummer', icon: 'ğŸ”¢' },
                { id: 'ondernemingsnr', name: 'Ondernemingsnummer', icon: 'ğŸ“‹' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'vergunningDouane', name: 'Douanevergunning', icon: 'ğŸ“„' },
                { id: 'kruispuntbank', name: 'Kruispuntbank Ondernemingen', icon: 'ğŸ¢' },
                { id: 'baVerzekering', name: 'BA Verzekering', icon: 'ğŸ›¡ï¸' },
                { id: 'eori', name: 'EORI-nummer', icon: 'ğŸ”¢' }
            ]
        }
    },
    // POLONYA
    PL: {
        name: 'Polonya',
        flag: 'ğŸ‡µğŸ‡±',
        client: {
            required: [
                { id: 'krs', name: 'Odpis z KRS', icon: 'ğŸ“„' },
                { id: 'nip', name: 'NIP (Vergi No)', icon: 'ğŸ”¢' },
                { id: 'regon', name: 'REGON', icon: 'ğŸ“‹' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'licencjaTransportowa', name: 'Licencja Transportowa', icon: 'ğŸ“„' },
                { id: 'krs', name: 'Odpis z KRS', icon: 'ğŸ¢' },
                { id: 'ubezpieczenieOc', name: 'Ubezpieczenie OC', icon: 'ğŸ›¡ï¸' },
                { id: 'eori', name: 'Numer EORI', icon: 'ğŸ”¢' }
            ]
        }
    },
    // AVUSTURYA
    AT: {
        name: 'Avusturya',
        flag: 'ğŸ‡¦ğŸ‡¹',
        client: {
            required: [
                { id: 'firmenbuchauszug', name: 'Firmenbuchauszug', icon: 'ğŸ“„' },
                { id: 'uid', name: 'UID-Nummer', icon: 'ğŸ”¢' },
                { id: 'gewerbeberechtigung', name: 'Gewerbeberechtigung', icon: 'ğŸ“‹' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 },
                { id: 'wko', name: 'WKO Mitgliedschaft', icon: 'ğŸ›ï¸', points: 10 }
            ]
        },
        forwarder: {
            required: [
                { id: 'speditionsKonzession', name: 'Speditionskonzession', icon: 'ğŸ“„' },
                { id: 'firmenbuchauszug', name: 'Firmenbuchauszug', icon: 'ğŸ¢' },
                { id: 'haftpflicht', name: 'Haftpflichtversicherung', icon: 'ğŸ›¡ï¸' },
                { id: 'eori', name: 'EORI-Nummer', icon: 'ğŸ”¢' }
            ]
        }
    },
    // Ä°SVÄ°Ã‡RE
    CH: {
        name: 'Ä°sviÃ§re',
        flag: 'ğŸ‡¨ğŸ‡­',
        client: {
            required: [
                { id: 'handelsregister', name: 'Handelsregisterauszug', icon: 'ğŸ“„' },
                { id: 'mwstNummer', name: 'MWST-Nummer', icon: 'ğŸ”¢' },
                { id: 'uid', name: 'UID (Unternehmens-ID)', icon: 'ğŸ“‹' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'zollBewilligung', name: 'Zollbewilligung (BAZG)', icon: 'ğŸ“„' },
                { id: 'handelsregister', name: 'Handelsregisterauszug', icon: 'ğŸ¢' },
                { id: 'haftpflicht', name: 'Betriebshaftpflicht', icon: 'ğŸ›¡ï¸' },
                { id: 'spedlogswiss', name: 'SPEDLOGSWISS ÃœyeliÄŸi', icon: 'ğŸ¤' }
            ]
        }
    },
    // YUNANÄ°STAN
    GR: {
        name: 'Greece',
        flag: 'ğŸ‡¬ğŸ‡·',
        client: {
            required: [
                { id: 'gemi', name: 'Î“Î•ÎœÎ— Î’ÎµÎ²Î±Î¯Ï‰ÏƒÎ·', icon: 'ğŸ“„' },
                { id: 'afm', name: 'Î‘Î¦Îœ (Vergi No)', icon: 'ğŸ”¢' },
                { id: 'taxis', name: 'TAXIS KayÄ±t', icon: 'ğŸ“‹' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'adeiaMetaforeon', name: 'Î†Î´ÎµÎ¹Î± ÎœÎµÏ„Î±Ï†Î¿ÏÎ­Î±', icon: 'ğŸ“„' },
                { id: 'gemi', name: 'Î“Î•ÎœÎ— Î’ÎµÎ²Î±Î¯Ï‰ÏƒÎ·', icon: 'ğŸ¢' },
                { id: 'asfalisi', name: 'Î‘ÏƒÏ†Î¬Î»Î¹ÏƒÎ· Î•Ï€Î±Î³Î³ÎµÎ»Î¼Î±Ï„Î¹ÎºÎ®Ï‚ Î•Ï…Î¸ÏÎ½Î·Ï‚', icon: 'ğŸ›¡ï¸' },
                { id: 'eori', name: 'Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ EORI', icon: 'ğŸ”¢' }
            ]
        }
    },
    // Ä°NGÄ°LTERE
    GB: {
        name: 'Ä°ngiltere',
        flag: 'EN',
        client: {
            required: [
                { id: 'companiesHouse', name: 'Companies House Certificate', icon: 'ğŸ“„' },
                { id: 'vatCert', name: 'VAT Registration Certificate', icon: 'ğŸ“‹' },
                { id: 'businessLicense', name: 'Business License', icon: 'ğŸ“‘' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'bafaMember', name: 'BIFA Membership', icon: 'ğŸ¤' },
                { id: 'companiesHouse', name: 'Companies House Certificate', icon: 'ğŸ¢' },
                { id: 'liabilityInsurance', name: 'Liability Insurance', icon: 'ğŸ›¡ï¸' },
                { id: 'customsBroker', name: 'Customs Broker License', icon: 'ğŸ“„' }
            ]
        }
    },
    // ABD
    US: {
        name: 'ABD',
        flag: 'ğŸ‡ºğŸ‡¸',
        client: {
            required: [
                { id: 'incorporation', name: 'Certificate of Incorporation', icon: 'ğŸ“„' },
                { id: 'ein', name: 'EIN (Tax ID)', icon: 'ğŸ”¢' },
                { id: 'businessLicense', name: 'State Business License', icon: 'ğŸ“‹' }
            ],
            optional: [
                { id: 'ctpat', name: 'C-TPAT Certification', icon: 'ğŸ›¡ï¸', points: 25 },
                { id: 'duns', name: 'D-U-N-S Number', icon: 'ğŸ“Š', points: 10 }
            ]
        },
        forwarder: {
            required: [
                { id: 'fmcLicense', name: 'FMC License (OTI)', icon: 'ğŸ“„' },
                { id: 'customsBroker', name: 'CBP Customs Broker License', icon: 'ğŸ“‹' },
                { id: 'bondCertificate', name: 'Surety Bond Certificate', icon: 'ğŸ›¡ï¸' },
                { id: 'ein', name: 'EIN (Tax ID)', icon: 'ğŸ”¢' }
            ]
        }
    },
    // Ã‡Ä°N
    CN: {
        name: 'Ã‡in',
        flag: 'ğŸ‡¨ğŸ‡³',
        client: {
            required: [
                { id: 'businessLicense', name: 'è¥ä¸šæ‰§ç…§ (Business License)', icon: 'ğŸ“„' },
                { id: 'taxReg', name: 'ç¨åŠ¡ç™»è®°è¯ (Tax Registration)', icon: 'ğŸ“‹' },
                { id: 'orgCode', name: 'ç»„ç»‡æœºæ„ä»£ç  (Org Code)', icon: 'ğŸ”¢' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'nvocc', name: 'NVOCC License (MOT)', icon: 'ğŸ“„' },
                { id: 'customsDecl', name: 'æŠ¥å…³ä¼ä¸šæ³¨å†Œ (Customs Declaration License)', icon: 'ğŸ“‹' },
                { id: 'businessLicense', name: 'è¥ä¸šæ‰§ç…§ (Business License)', icon: 'ğŸ¢' },
                { id: 'ciffa', name: 'CIFA/CIFFA Membership', icon: 'ğŸ¤' }
            ]
        }
    },
    // BAE
    AE: {
        name: 'BAE',
        flag: 'ğŸ‡¦ğŸ‡ª',
        client: {
            required: [
                { id: 'tradeLicense', name: 'Trade License', icon: 'ğŸ“„' },
                { id: 'chamberCert', name: 'Chamber of Commerce Certificate', icon: 'ğŸ“‹' },
                { id: 'emiratesId', name: 'Emirates ID (Owner)', icon: 'ğŸªª' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'customsBroker', name: 'Customs Broker License', icon: 'ğŸ“„' },
                { id: 'tradeLicense', name: 'Trade License', icon: 'ğŸ¢' },
                { id: 'insurancePolicy', name: 'Insurance Policy', icon: 'ğŸ›¡ï¸' },
                { id: 'naflMember', name: 'NAFL Membership', icon: 'ğŸ¤' }
            ]
        }
    },
    // HÄ°NDÄ°STAN
    IN: {
        name: 'Hindistan',
        flag: 'ğŸ‡®ğŸ‡³',
        client: {
            required: [
                { id: 'cin', name: 'CIN (Corporate Identity Number)', icon: 'ğŸ“„' },
                { id: 'gst', name: 'GST Registration', icon: 'ğŸ“‹' },
                { id: 'pan', name: 'PAN Card', icon: 'ğŸ”¢' }
            ],
            optional: [
                { id: 'iec', name: 'IEC (Import Export Code)', icon: 'ğŸ“‘', points: 20 }
            ]
        },
        forwarder: {
            required: [
                { id: 'customsBroker', name: 'Customs Broker License (CBIC)', icon: 'ğŸ“„' },
                { id: 'cin', name: 'CIN (Corporate Identity Number)', icon: 'ğŸ¢' },
                { id: 'iec', name: 'IEC (Import Export Code)', icon: 'ğŸ“‹' },
                { id: 'fffai', name: 'FFFAI Membership', icon: 'ğŸ¤' }
            ]
        }
    },
    // SÄ°NGAPUR
    SG: {
        name: 'Singapur',
        flag: 'ğŸ‡¸ğŸ‡¬',
        client: {
            required: [
                { id: 'acra', name: 'ACRA Business Profile', icon: 'ğŸ“„' },
                { id: 'gst', name: 'GST Registration (if applicable)', icon: 'ğŸ“‹' },
                { id: 'uen', name: 'UEN (Unique Entity Number)', icon: 'ğŸ”¢' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 }
            ]
        },
        forwarder: {
            required: [
                { id: 'customsBroker', name: 'Customs Broker License', icon: 'ğŸ“„' },
                { id: 'acra', name: 'ACRA Business Profile', icon: 'ğŸ¢' },
                { id: 'sla', name: 'SLA Membership', icon: 'ğŸ¤' },
                { id: 'insurance', name: 'Freight Forwarder Insurance', icon: 'ğŸ›¡ï¸' }
            ]
        }
    },
    // DÄ°ÄER ÃœLKELER
    OTHER: {
        name: 'DiÄŸer Ãœlkeler',
        flag: 'ğŸŒ',
        client: {
            required: [
                { id: 'businessReg', name: 'Business Registration Certificate', icon: 'ğŸ“„' },
                { id: 'taxId', name: 'Tax ID / VAT Number', icon: 'ğŸ“‹' },
                { id: 'idDoc', name: 'Owner ID Document', icon: 'ğŸªª' }
            ],
            optional: [
                { id: 'iso9001', name: 'ISO 9001', icon: 'ğŸ†', points: 15 },
                { id: 'duns', name: 'D-U-N-S Number', icon: 'ğŸ“Š', points: 10 }
            ]
        },
        forwarder: {
            required: [
                { id: 'freightLicense', name: 'Freight Forwarder License', icon: 'ğŸ“„' },
                { id: 'businessReg', name: 'Business Registration', icon: 'ğŸ¢' },
                { id: 'insurance', name: 'Liability Insurance', icon: 'ğŸ›¡ï¸' },
                { id: 'fiata', name: 'FIATA Membership', icon: 'ğŸ¤' }
            ]
        }
    }
};

// UluslararasÄ± belgeler (tÃ¼m Ã¼lkeler iÃ§in geÃ§erli) - DetaylÄ± tooltip aÃ§Ä±klamalarÄ±yla
var internationalCertificates = [
    { 
        id: 'aeo', 
        name: 'AEO SertifikasÄ±', 
        nameEn: 'AEO Certification',
        icon: 'ğŸ†', 
        points: 20, 
        desc: 'YetkilendirilmiÅŸ Ekonomik OperatÃ¶r',
        descEn: 'Authorized Economic Operator',
        tooltip: 'YÃ¼ksek dÃ¼zeyde gÃ¼mrÃ¼k uyumluluÄŸu ve operasyonel gÃ¼venilirlik gÃ¶sterir. AEO statÃ¼sÃ¼ne sahip forwarder\'lar daha hÄ±zlÄ± gÃ¼mrÃ¼k sÃ¼reÃ§leri ve artÄ±rÄ±lmÄ±ÅŸ gÃ¼venden yararlanÄ±r.',
        tooltipEn: 'Indicates a high level of customs compliance and operational reliability. Forwarders with AEO status benefit from faster customs processes and enhanced trust.'
    },
    { 
        id: 'iso9001', 
        name: 'ISO 9001', 
        nameEn: 'ISO 9001',
        icon: 'ğŸ“‹', 
        points: 15, 
        desc: 'Kalite YÃ¶netim Sistemi',
        descEn: 'Quality Management System',
        tooltip: 'Forwarder\'Ä±n uluslararasÄ± kabul gÃ¶rmÃ¼ÅŸ bir kalite yÃ¶netim sistemi altÄ±nda Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± ve tutarlÄ± hizmet standartlarÄ± saÄŸladÄ±ÄŸÄ±nÄ± doÄŸrular.',
        tooltipEn: 'Confirms the forwarder operates under an internationally recognized quality management system, ensuring consistent service standards.'
    },
    { 
        id: 'iso14001', 
        name: 'ISO 14001', 
        nameEn: 'ISO 14001',
        icon: 'ğŸŒ¿', 
        points: 10, 
        desc: 'Ã‡evre YÃ¶netim Sistemi',
        descEn: 'Environmental Management System',
        tooltip: 'Ã‡evresel sorumluluk ve sÃ¼rdÃ¼rÃ¼lebilir lojistik operasyonlarÄ±na baÄŸlÄ±lÄ±ÄŸÄ± gÃ¶sterir.',
        tooltipEn: 'Shows commitment to environmental responsibility and sustainable logistics operations.'
    },
    { 
        id: 'iata', 
        name: 'IATA Akreditasyonu', 
        nameEn: 'IATA Accreditation',
        icon: 'âœˆï¸', 
        points: 15, 
        desc: 'Hava kargo iÃ§in',
        descEn: 'For air cargo',
        tooltip: 'DoÄŸrudan air kargo operasyonlarÄ± iÃ§in gereklidir. Forwarder\'Ä±n Hava KonÅŸimentosu dÃ¼zenleme ve airyollarÄ±yla doÄŸrudan Ã§alÄ±ÅŸma yetkisine sahip olduÄŸunu garanti eder.',
        tooltipEn: 'Required for direct air cargo operations. Ensures the forwarder is authorized to issue Air Waybills and work directly with airlines.'
    },
    { 
        id: 'fiata', 
        name: 'FIATA ÃœyeliÄŸi', 
        nameEn: 'FIATA Membership',
        icon: 'ğŸŒ', 
        points: 10, 
        desc: 'UluslararasÄ± FF birliÄŸi',
        descEn: 'International FF association',
        tooltip: 'UluslararasÄ± TaÅŸÄ±ma Acenteleri BirliÄŸi Federasyonu Ã¼yeliÄŸi. KÃ¼resel standartlara uyumu ve mesleki gÃ¼venilirliÄŸi gÃ¶sterir.',
        tooltipEn: 'International Federation of Freight Forwarders Associations membership. Shows compliance with global standards and professional reliability.'
    },
    { 
        id: 'wca', 
        name: 'WCA/GPLN Network', 
        nameEn: 'WCA/GPLN Membership',
        icon: 'ğŸ”—', 
        points: 10, 
        desc: 'Global agent aÄŸÄ±',
        descEn: 'Global agent network',
        tooltip: 'KÃ¼resel navlun aÄŸÄ±nda Ã¼yelik gÃ¶sterir, geniÅŸletilmiÅŸ uluslararasÄ± eriÅŸim ve partner gÃ¼venilirliÄŸi saÄŸlar.',
        tooltipEn: 'Indicates membership in a global freight network, providing extended international reach and partner reliability.'
    },
    { 
        id: 'gdp', 
        name: 'GDP SertifikasÄ±', 
        nameEn: 'GDP Certification',
        icon: 'ğŸ’Š', 
        points: 20, 
        desc: 'Ä°laÃ§ taÅŸÄ±macÄ±lÄ±ÄŸÄ±',
        descEn: 'Pharmaceutical transport',
        tooltip: 'FarmasÃ¶tik ve sÄ±caklÄ±k kontrollÃ¼ sevkiyatlar iÃ§in gereklidir. Ä°yi DaÄŸÄ±tÄ±m UygulamalarÄ±na uyumu garanti eder.',
        tooltipEn: 'Required for pharmaceutical and temperature-controlled shipments. Ensures compliance with Good Distribution Practices.'
    },
    { 
        id: 'ctpat', 
        name: 'C-TPAT', 
        nameEn: 'C-TPAT',
        icon: 'ğŸ›¡ï¸', 
        points: 25, 
        desc: 'ABD gÃ¼venlik programÄ±',
        descEn: 'US security program',
        tooltip: 'Customs-Ticaret TerÃ¶rle MÃ¼cadele OrtaklÄ±ÄŸÄ±. ABD\'ye yapÄ±lan sevkiyatlar iÃ§in gÃ¼venlik standartlarÄ±nÄ± doÄŸrular.',
        tooltipEn: 'Customs-Trade Partnership Against Terrorism. Verifies security standards for shipments to the United States.'
    },
    { 
        id: 'duns', 
        name: 'D-U-N-S Number', 
        nameEn: 'D-U-N-S Number',
        icon: 'ğŸ“Š', 
        points: 10, 
        desc: 'Dun & Bradstreet',
        descEn: 'Dun & Bradstreet',
        tooltip: 'UluslararasÄ± iÅŸ kimlik numarasÄ±. Åirketin finansal gÃ¼venilirliÄŸini ve ticari geÃ§miÅŸini doÄŸrulamak iÃ§in kullanÄ±lÄ±r.',
        tooltipEn: 'International business identification number. Used to verify company financial reliability and commercial history.'
    }
];

// Badge tÃ¼rleri ve gereksinimleri
var badgeRequirements = {
    verified: {
        name: 'Verified Forwarder',
        nameTr: 'DoÄŸrulanmÄ±ÅŸ Forwarder',
        icon: 'âœ“',
        color: '#10b981',
        minScore: 0,
        requiresMandatory: true
    },
    premium: {
        name: 'Premium Forwarder',
        nameTr: 'Premium Forwarder',
        icon: 'â­',
        color: '#f59e0b',
        minScore: 40,
        requiresMandatory: true
    }
};

// Forwarder yÃ¼klÃ¼ belgeleri (simÃ¼lasyon - gerÃ§ek uygulamada backend'den gelir)
var forwarderUploadedDocs = {
    mandatory: [],
    optional: []
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TRUST SCORE VE BADGE HESAPLAMA ALGORÄ°TMASI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function calculateForwarderTrustScore(uploadedDocs, country) {
    var countryData = countryDocRequirements[country] || countryDocRequirements['OTHER'];
    var result = {
        mandatoryComplete: false,
        mandatoryDocs: [],
        missingMandatory: [],
        optionalScore: 0,
        totalScore: 0,
        badge: null,
        badgeLevel: 'none'
    };
    
    // Zorunlu belge kontrolÃ¼
    if (countryData.forwarder && countryData.forwarder.required) {
        var requiredIds = countryData.forwarder.required.map(function(d) { return d.id; });
        var uploadedMandatory = uploadedDocs.mandatory || [];
        
        result.mandatoryDocs = requiredIds;
        result.missingMandatory = requiredIds.filter(function(id) {
            return uploadedMandatory.indexOf(id) === -1;
        });
        result.mandatoryComplete = result.missingMandatory.length === 0;
    }
    
    // Opsiyonel sertifika puanlarÄ±
    var uploadedOptional = uploadedDocs.optional || [];
    uploadedOptional.forEach(function(docId) {
        var cert = internationalCertificates.find(function(c) { return c.id === docId; });
        if (cert) {
            result.optionalScore += cert.points;
        }
    });
    
    result.totalScore = result.optionalScore;
    
    // Badge belirleme
    if (result.mandatoryComplete) {
        if (result.totalScore >= badgeRequirements.premium.minScore) {
            result.badge = 'premium';
            result.badgeLevel = 'premium';
        } else {
            result.badge = 'verified';
            result.badgeLevel = 'verified';
        }
    } else {
        result.badge = null;
        result.badgeLevel = 'pending';
    }
    
    return result;
}

// Badge HTML oluÅŸtur
function renderBadgeHTML(badgeLevel, lang) {
    lang = lang || currentLanguage || 'tr';
    
    if (badgeLevel === 'premium') {
        return '<span class="forwarder-badge premium" style="display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border-radius: 6px; font-size: 11px; font-weight: 600;">' +
               '<span>â­</span> ' + (lang === 'en' ? 'Premium Verified' : 'Premium DoÄŸrulanmÄ±ÅŸ') +
               '</span>';
    } else if (badgeLevel === 'verified') {
        return '<span class="forwarder-badge verified" style="display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; background: #10b981; color: white; border-radius: 6px; font-size: 11px; font-weight: 600;">' +
               '<span>âœ“</span> ' + (lang === 'en' ? 'Verified' : 'DoÄŸrulanmÄ±ÅŸ') +
               '</span>';
    } else {
        return '<span class="forwarder-badge pending" style="display: inline-flex; align-items: center; gap: 4px; padding: 4px 10px; background: #94a3b8; color: white; border-radius: 6px; font-size: 11px; font-weight: 600;">' +
               '<span>â³</span> ' + (lang === 'en' ? 'Pending' : 'Beklemede') +
               '</span>';
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TOOLTIP AÃ‡IKLAMA SÄ°STEMÄ°
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function getCertificateTooltip(certId, lang) {
    lang = lang || currentLanguage || 'tr';
    var cert = internationalCertificates.find(function(c) { return c.id === certId; });
    if (cert) {
        return lang === 'en' ? cert.tooltipEn : cert.tooltip;
    }
    return '';
}

function showCertTooltip(element, certId) {
    var tooltip = getCertificateTooltip(certId, currentLanguage);
    if (!tooltip) return;
    
    // Tooltip element oluÅŸtur
    var tooltipEl = document.createElement('div');
    tooltipEl.className = 'cert-tooltip';
    tooltipEl.innerHTML = tooltip;
    tooltipEl.style.cssText = 'position: absolute; background: #1e293b; color: white; padding: 12px 16px; border-radius: 8px; font-size: 12px; max-width: 280px; line-height: 1.5; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.15);';
    
    document.body.appendChild(tooltipEl);
    
    // Pozisyon hesapla
    var rect = element.getBoundingClientRect();
    tooltipEl.style.left = rect.left + 'px';
    tooltipEl.style.top = (rect.bottom + 8) + 'px';
    
    element.tooltipEl = tooltipEl;
}

function hideCertTooltip(element) {
    if (element.tooltipEl) {
        element.tooltipEl.remove();
        element.tooltipEl = null;
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// "WHY THIS FORWARDER?" KARTI - CARGO OWNER VIEW
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function renderWhyThisForwarderCard(forwarderData, lang) {
    lang = lang || currentLanguage || 'tr';
    
    var isPremium = forwarderData.badgeLevel === 'premium';
    var isVerified = forwarderData.badgeLevel === 'verified' || isPremium;
    
    var texts = {
        tr: {
            title: 'Neden Bu Forwarder?',
            legallyVerified: 'Yasal olarak doÄŸrulanmÄ±ÅŸ ÅŸirket',
            activeLanes: 'SeÃ§tiÄŸiniz gÃ¼zergahlarda aktif',
            certifiedCargo: 'YÃ¼k tipiniz iÃ§in sertifikalÄ±',
            verifiedCreds: 'DoÄŸrulanmÄ±ÅŸ operasyonel belgeler',
            trustedNetwork: 'AÄŸ tarafÄ±ndan gÃ¼venilir',
            passedVerification: 'Bu forwarder doÄŸrulama sÃ¼recimizi geÃ§ti ve sevkiyat profilinizle eÅŸleÅŸiyor.',
            premiumBadge: 'Premium DoÄŸrulanmÄ±ÅŸ',
            premiumFeatures: [
                'UluslararasÄ± sertifikalara sahip',
                'KanÄ±tlanmÄ±ÅŸ sevkiyat aktivitesi',
                'SeÃ§ili gÃ¼zergahlarda Ã¶ncelikli eÅŸleÅŸtirme'
            ]
        },
        en: {
            title: 'Why This Forwarder?',
            legallyVerified: 'Legally verified company',
            activeLanes: 'Active on your selected trade lanes',
            certifiedCargo: 'Certified for your cargo type',
            verifiedCreds: 'Verified operational credentials',
            trustedNetwork: 'Trusted by the network',
            passedVerification: 'This forwarder has passed our verification process and matches your shipment profile.',
            premiumBadge: 'Premium Verified',
            premiumFeatures: [
                'Holds international certifications',
                'Proven shipment activity',
                'Priority matching on selected lanes'
            ]
        }
    };
    
    var t = texts[lang] || texts.en;
    
    var html = '<div class="why-forwarder-card" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; margin-top: 16px;">';
    html += '<h4 style="margin: 0 0 16px 0; color: #1e293b; font-size: 15px; display: flex; align-items: center; gap: 8px;">';
    html += '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#10b981" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><polyline points="9 12 11 14 15 10"/></svg>';
    html += t.title + '</h4>';
    
    if (isVerified) {
        html += '<ul style="margin: 0 0 16px 0; padding: 0; list-style: none;">';
        html += '<li style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-size: 13px; color: #475569;"><span style="color: #10b981;">âœ”ï¸</span> ' + t.legallyVerified + '</li>';
        html += '<li style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-size: 13px; color: #475569;"><span style="color: #10b981;">âœ”ï¸</span> ' + t.activeLanes + '</li>';
        html += '<li style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-size: 13px; color: #475569;"><span style="color: #10b981;">âœ”ï¸</span> ' + t.certifiedCargo + '</li>';
        html += '<li style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px; font-size: 13px; color: #475569;"><span style="color: #10b981;">âœ”ï¸</span> ' + t.verifiedCreds + '</li>';
        html += '<li style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #475569;"><span style="color: #10b981;">âœ”ï¸</span> ' + t.trustedNetwork + '</li>';
        html += '</ul>';
        html += '<p style="margin: 0; font-size: 12px; color: #64748b; padding: 12px; background: #f0fdf4; border-radius: 8px;">' + t.passedVerification + '</p>';
    }
    
    // Premium highlight
    if (isPremium) {
        html += '<div style="margin-top: 16px; padding: 16px; background: linear-gradient(135deg, #fef3c7, #fde68a); border-radius: 8px; border: 1px solid #f59e0b;">';
        html += '<div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">';
        html += '<span style="font-size: 18px;">â­</span>';
        html += '<strong style="color: #92400e; font-size: 14px;">' + t.premiumBadge + '</strong>';
        html += '</div>';
        html += '<ul style="margin: 0; padding: 0 0 0 20px; color: #92400e; font-size: 12px;">';
        t.premiumFeatures.forEach(function(feature) {
            html += '<li style="margin-bottom: 4px;">' + feature + '</li>';
        });
        html += '</ul>';
        html += '</div>';
    }
    
    html += '</div>';
    return html;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// "WHY NOT VERIFIED?" / "WHY NOT PREMIUM?" AÃ‡IKLAMALARI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function renderVerificationStatusCard(trustResult, lang) {
    lang = lang || currentLanguage || 'tr';
    
    var texts = {
        tr: {
            notVerifiedTitle: 'DoÄŸrulama Bekliyor',
            notVerifiedDesc: 'BaÅŸvurunuz ÅŸu anda doÄŸrulama bekliyor.',
            notVerifiedReq: 'DoÄŸrulanmÄ±ÅŸ Forwarder olmak iÃ§in lÃ¼tfen:',
            notVerifiedItem1: 'TÃ¼m zorunlu ÅŸirket belgelerini yÃ¼kleyin',
            notVerifiedItem2: 'Belgelerin onaylanmasÄ±nÄ± bekleyin',
            notVerifiedNote: 'TamamlandÄ±ktan sonra doÄŸrulamanÄ±z otomatik olarak iÅŸlenecektir.',
            
            verifiedNotPremiumTitle: 'DoÄŸrulanmÄ±ÅŸ Forwarder',
            verifiedNotPremiumDesc: 'Siz bir DoÄŸrulanmÄ±ÅŸ Forwarder\'sÄ±nÄ±z.',
            verifiedNotPremiumReq: 'Premium statÃ¼sÃ¼ne hak kazanmak iÃ§in:',
            verifiedNotPremiumItem1: 'Ek operasyonel sertifikalar yÃ¼kleyin',
            verifiedNotPremiumItem2: 'GÃ¼ncel sevkiyat aktivitesi kanÄ±tÄ± saÄŸlayÄ±n',
            verifiedNotPremiumItem3: 'GÃ¼zergah profilinizi geniÅŸletin',
            verifiedNotPremiumNote: 'Premium statÃ¼sÃ¼ toplam gÃ¼ven puanÄ±na ve aÄŸ kalitesine gÃ¶re verilir.',
            
            premiumNote: 'Premium statÃ¼sÃ¼, aÄŸ kalitesini ve gÃ¼venilirliÄŸi korumak iÃ§in periyodik olarak gÃ¶zden geÃ§irilebilir.',
            
            missingDocs: 'Eksik belgeler:',
            currentScore: 'Mevcut puanÄ±nÄ±z:',
            requiredScore: 'Premium iÃ§in gereken:'
        },
        en: {
            notVerifiedTitle: 'Pending Verification',
            notVerifiedDesc: 'Your application is currently pending verification.',
            notVerifiedReq: 'To become a Verified Forwarder, please ensure:',
            notVerifiedItem1: 'All mandatory company documents are uploaded',
            notVerifiedItem2: 'Documents are approved',
            notVerifiedNote: 'Once completed, your verification will be processed automatically.',
            
            verifiedNotPremiumTitle: 'Verified Forwarder',
            verifiedNotPremiumDesc: 'You are a Verified Forwarder.',
            verifiedNotPremiumReq: 'To qualify for Premium status, consider:',
            verifiedNotPremiumItem1: 'Uploading additional operational certifications',
            verifiedNotPremiumItem2: 'Providing proof of recent shipment activity',
            verifiedNotPremiumItem3: 'Expanding your trade lane profile',
            verifiedNotPremiumNote: 'Premium status is granted based on overall trust score and network quality.',
            
            premiumNote: 'Premium status may be reviewed periodically to maintain network quality and reliability.',
            
            missingDocs: 'Missing documents:',
            currentScore: 'Your current score:',
            requiredScore: 'Required for Premium:'
        }
    };
    
    var t = texts[lang] || texts.en;
    var html = '';
    
    if (trustResult.badgeLevel === 'pending') {
        // Not Verified
        html = '<div class="verification-status-card" style="background: #fef3c7; border: 1px solid #f59e0b; border-radius: 12px; padding: 20px; margin-top: 16px;">';
        html += '<h4 style="margin: 0 0 12px 0; color: #92400e; font-size: 14px; display: flex; align-items: center; gap: 8px;">';
        html += '<span>â³</span> ' + t.notVerifiedTitle + '</h4>';
        html += '<p style="margin: 0 0 12px 0; color: #92400e; font-size: 13px;">' + t.notVerifiedDesc + '</p>';
        html += '<p style="margin: 0 0 8px 0; color: #78350f; font-size: 12px; font-weight: 600;">' + t.notVerifiedReq + '</p>';
        html += '<ul style="margin: 0 0 12px 0; padding: 0 0 0 20px; color: #92400e; font-size: 12px;">';
        html += '<li>' + t.notVerifiedItem1 + '</li>';
        html += '<li>' + t.notVerifiedItem2 + '</li>';
        html += '</ul>';
        
        // Eksik belgeler listesi
        if (trustResult.missingMandatory && trustResult.missingMandatory.length > 0) {
            html += '<p style="margin: 12px 0 4px 0; color: #78350f; font-size: 11px; font-weight: 600;">' + t.missingDocs + '</p>';
            html += '<div style="display: flex; flex-wrap: wrap; gap: 6px;">';
            trustResult.missingMandatory.forEach(function(docId) {
                html += '<span style="background: #fde68a; color: #92400e; padding: 2px 8px; border-radius: 4px; font-size: 10px;">' + docId + '</span>';
            });
            html += '</div>';
        }
        
        html += '<p style="margin: 12px 0 0 0; color: #78350f; font-size: 11px; font-style: italic;">' + t.notVerifiedNote + '</p>';
        html += '</div>';
        
    } else if (trustResult.badgeLevel === 'verified') {
        // Verified but not Premium
        html = '<div class="verification-status-card" style="background: #f0fdf4; border: 1px solid #10b981; border-radius: 12px; padding: 20px; margin-top: 16px;">';
        html += '<h4 style="margin: 0 0 12px 0; color: #166534; font-size: 14px; display: flex; align-items: center; gap: 8px;">';
        html += '<span>âœ“</span> ' + t.verifiedNotPremiumTitle + '</h4>';
        html += '<p style="margin: 0 0 12px 0; color: #166534; font-size: 13px;">' + t.verifiedNotPremiumDesc + '</p>';
        html += '<p style="margin: 0 0 8px 0; color: #15803d; font-size: 12px; font-weight: 600;">' + t.verifiedNotPremiumReq + '</p>';
        html += '<ul style="margin: 0 0 12px 0; padding: 0 0 0 20px; color: #166534; font-size: 12px;">';
        html += '<li>' + t.verifiedNotPremiumItem1 + '</li>';
        html += '<li>' + t.verifiedNotPremiumItem2 + '</li>';
        html += '<li>' + t.verifiedNotPremiumItem3 + '</li>';
        html += '</ul>';
        
        // Puan bilgisi
        html += '<div style="display: flex; gap: 16px; margin-top: 12px; padding: 12px; background: #dcfce7; border-radius: 8px;">';
        html += '<div style="text-align: center;"><span style="display: block; font-size: 20px; font-weight: 700; color: #166534;">' + trustResult.totalScore + '</span><span style="font-size: 10px; color: #15803d;">' + t.currentScore + '</span></div>';
        html += '<div style="text-align: center;"><span style="display: block; font-size: 20px; font-weight: 700; color: #f59e0b;">' + badgeRequirements.premium.minScore + '</span><span style="font-size: 10px; color: #d97706;">' + t.requiredScore + '</span></div>';
        html += '</div>';
        
        html += '<p style="margin: 12px 0 0 0; color: #15803d; font-size: 11px; font-style: italic;">' + t.verifiedNotPremiumNote + '</p>';
        html += '</div>';
        
    } else if (trustResult.badgeLevel === 'premium') {
        // Premium
        html = '<div class="verification-status-card" style="background: linear-gradient(135deg, #fef3c7, #fde68a); border: 1px solid #f59e0b; border-radius: 12px; padding: 20px; margin-top: 16px;">';
        html += '<h4 style="margin: 0 0 12px 0; color: #92400e; font-size: 14px; display: flex; align-items: center; gap: 8px;">';
        html += '<span>â­</span> Premium Forwarder</h4>';
        html += '<p style="margin: 0 0 12px 0; color: #92400e; font-size: 13px;">' + (lang === 'en' ? 'Congratulations! You have achieved Premium status.' : 'Tebrikler! Premium statÃ¼sÃ¼ne ulaÅŸtÄ±nÄ±z.') + '</p>';
        html += '<div style="display: flex; gap: 8px; margin-bottom: 12px;">';
        html += '<span style="background: #f59e0b; color: white; padding: 4px 12px; border-radius: 20px; font-size: 12px; font-weight: 600;">' + (lang === 'en' ? 'Score:' : 'Puan:') + ' ' + trustResult.totalScore + '</span>';
        html += '</div>';
        html += '<p style="margin: 0; color: #78350f; font-size: 11px; font-style: italic;">' + t.premiumNote + '</p>';
        html += '</div>';
    }
    
    return html;
}

// DoÄŸrulama bilgi modalÄ±
function showVerificationInfo(userType) {
    var lang = currentLanguage || 'tr';
    var texts = {
        tr: {
            title: 'DoÄŸrulama Sistemi HakkÄ±nda',
            desc: 'GÃ¼venilir bir aÄŸ saÄŸlamak iÃ§in, forwarder\'larÄ± kurumsal ve operasyonel belgelere gÃ¶re doÄŸruluyoruz. TÃ¼m veriler gizli tutulur.',
            mandatory: 'Zorunlu Belgeler',
            mandatoryDesc: 'Bu belgeler olmadan doÄŸrulama yapÄ±lamaz.',
            optional: 'Opsiyonel Sertifikalar',
            optionalDesc: 'GÃ¼ven puanÄ±nÄ±zÄ± artÄ±rÄ±r ve Premium statÃ¼sÃ¼ne ulaÅŸmanÄ±zÄ± saÄŸlar.',
            badges: 'Rozet Seviyeleri',
            verifiedBadge: 'DoÄŸrulanmÄ±ÅŸ: TÃ¼m zorunlu belgeler onaylanmÄ±ÅŸ',
            premiumBadge: 'Premium: 40+ puan ve zorunlu belgeler tamamlanmÄ±ÅŸ'
        },
        en: {
            title: 'About Verification System',
            desc: 'To ensure a trusted network, we verify forwarders based on corporate and operational documents. All data is kept confidential.',
            mandatory: 'Mandatory Documents',
            mandatoryDesc: 'Verification cannot be completed without these documents.',
            optional: 'Optional Certificates',
            optionalDesc: 'Increases your trust score and helps you reach Premium status.',
            badges: 'Badge Levels',
            verifiedBadge: 'Verified: All mandatory documents approved',
            premiumBadge: 'Premium: 40+ points and mandatory documents complete'
        }
    };
    var t = texts[lang] || texts.en;
    
    var modal = document.createElement('div');
    modal.className = 'verification-info-modal';
    modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1500;';
    modal.innerHTML = '<div style="background: white; border-radius: 16px; padding: 24px; max-width: 500px; margin: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.2);">' +
        '<h3 style="margin: 0 0 16px 0; color: #1e293b;">' + t.title + '</h3>' +
        '<p style="color: #64748b; font-size: 13px; margin-bottom: 20px;">' + t.desc + '</p>' +
        '<div style="background: #f8fafc; padding: 16px; border-radius: 8px; margin-bottom: 12px;">' +
        '<h4 style="margin: 0 0 8px 0; color: #1e293b; font-size: 13px;">ğŸ“„ ' + t.mandatory + '</h4>' +
        '<p style="margin: 0; color: #64748b; font-size: 12px;">' + t.mandatoryDesc + '</p>' +
        '</div>' +
        '<div style="background: #f8fafc; padding: 16px; border-radius: 8px; margin-bottom: 12px;">' +
        '<h4 style="margin: 0 0 8px 0; color: #1e293b; font-size: 13px;">ğŸ† ' + t.optional + '</h4>' +
        '<p style="margin: 0; color: #64748b; font-size: 12px;">' + t.optionalDesc + '</p>' +
        '</div>' +
        '<div style="background: #f8fafc; padding: 16px; border-radius: 8px; margin-bottom: 16px;">' +
        '<h4 style="margin: 0 0 8px 0; color: #1e293b; font-size: 13px;">ğŸ… ' + t.badges + '</h4>' +
        '<p style="margin: 0 0 4px 0; color: #10b981; font-size: 12px;">âœ“ ' + t.verifiedBadge + '</p>' +
        '<p style="margin: 0; color: #f59e0b; font-size: 12px;">â­ ' + t.premiumBadge + '</p>' +
        '</div>' +
        '<button onclick="this.parentElement.parentElement.remove()" style="width: 100%; padding: 12px; background: #1e3c72; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">OK</button>' +
        '</div>';
    
    modal.addEventListener('click', function(e) {
        if (e.target === modal) modal.remove();
    });
    
    document.body.appendChild(modal);
}

// Sertifika bilgi modalÄ±
function showCertificateInfo(certId) {
    var lang = currentLanguage || 'tr';
    var cert = internationalCertificates.find(function(c) { return c.id === certId; });
    if (!cert) return;
    
    var certName = lang === 'en' && cert.nameEn ? cert.nameEn : cert.name;
    var certTooltip = lang === 'en' && cert.tooltipEn ? cert.tooltipEn : cert.tooltip;
    
    var modal = document.createElement('div');
    modal.className = 'cert-info-modal';
    modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1500;';
    
    var iconHtml = getDocIcon(cert.icon === 'ğŸ†' ? 'cert' : cert.icon === 'ğŸ“‹' ? 'iso' : cert.icon === 'ğŸŒ¿' ? 'globe' : cert.icon === 'âœˆï¸' ? 'airplane' : cert.icon === 'ğŸŒ' ? 'network' : cert.icon === 'ğŸ”—' ? 'network' : cert.icon === 'ğŸ’Š' ? 'pill' : cert.icon === 'ğŸ›¡ï¸' ? 'shield' : cert.icon === 'ğŸ“Š' ? 'doc' : 'cert');
    
    modal.innerHTML = '<div style="background: white; border-radius: 16px; padding: 24px; max-width: 400px; margin: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.2);">' +
        '<div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px;">' +
        '<div style="display: flex; align-items: center; justify-content: center;">' + iconHtml + '</div>' +
        '<div>' +
        '<h3 style="margin: 0 0 4px 0; color: #1e293b; font-size: 16px;">' + certName + '</h3>' +
        '<span style="background: #10b981; color: white; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 600;">+' + cert.points + ' ' + (lang === 'en' ? 'points' : 'puan') + '</span>' +
        '</div>' +
        '</div>' +
        '<p style="color: #475569; font-size: 13px; line-height: 1.6; margin: 0 0 20px 0;">' + certTooltip + '</p>' +
        '<button onclick="this.parentElement.parentElement.remove()" style="width: 100%; padding: 12px; background: #1e3c72; color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer;">' + (lang === 'en' ? 'Close' : 'Kapat') + '</button>' +
        '</div>';
    
    modal.addEventListener('click', function(e) {
        if (e.target === modal) modal.remove();
    });
    
    document.body.appendChild(modal);
}

// Sertifika yÃ¼kleme handler
function handleCertUpload(certId, input) {
    if (input.files && input.files[0]) {
        var file = input.files[0];
        var lang = currentLanguage || 'tr';
        
        // SimÃ¼lasyon: YÃ¼kleme baÅŸarÄ±lÄ±
        forwarderUploadedDocs.optional = forwarderUploadedDocs.optional || [];
        if (forwarderUploadedDocs.optional.indexOf(certId) === -1) {
            forwarderUploadedDocs.optional.push(certId);
        }
        
        // PuanÄ± gÃ¼ncelle
        updateTrustScoreDisplay();
        
        // BaÅŸarÄ± bildirimi
        var cert = internationalCertificates.find(function(c) { return c.id === certId; });
        var certName = cert ? (lang === 'en' && cert.nameEn ? cert.nameEn : cert.name) : certId;
        
        showRateNotification(
            (lang === 'en' ? 'Certificate uploaded: ' : 'Sertifika yÃ¼klendi: ') + certName + ' (+' + cert.points + ' ' + (lang === 'en' ? 'points' : 'puan') + ')',
            'success'
        );
        
        // Upload butonunu gÃ¼ncelle
        var btn = input.nextElementSibling;
        if (btn) {
            btn.innerHTML = '<span style="color: #10b981;">âœ“</span> ' + (lang === 'en' ? 'Uploaded' : 'YÃ¼klendi');
            btn.style.background = '#dcfce7';
            btn.style.color = '#166534';
        }
    }
}

// Trust score display'i gÃ¼ncelle
function updateTrustScoreDisplay() {
    var country = document.getElementById('forwarderCountry') ? document.getElementById('forwarderCountry').value : 'TR';
    var trustResult = calculateForwarderTrustScore(forwarderUploadedDocs, country);
    
    // YENÄ° BAR MANTIÄI
    var bar = document.getElementById('clientTrustBar');
    var text = document.getElementById('clientTrustScoreDisplay');
    
    if (bar && text) {
        // En az %10 dolu gÃ¶rÃ¼nsÃ¼n ki bar fark edilsin
        var percentage = Math.min(100, Math.max(10, trustResult.totalScore));
        
        bar.style.width = percentage + '%';
        
        if (trustResult.mandatoryComplete) {
            bar.style.background = '#10b981'; // YeÅŸil (TamamlandÄ±)
            text.textContent = 'Verified';
            text.style.color = '#10b981';
        } else {
            bar.style.background = '#1e3c72'; // Lacivert (Devam ediyor)
            text.textContent = 'Pending Verification (' + trustResult.totalScore + '%)';
            text.style.color = '#64748b';
        }
    }
}
// Profesyonel SVG Ä°kon Fonksiyonu
function getDocIcon(iconType) {
    var icons = {
        'doc': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>',
        'license': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><rect x="3" y="4" width="18" height="16" rx="2"/><line x1="7" y1="8" x2="17" y2="8"/><line x1="7" y1="12" x2="13" y2="12"/><circle cx="16" cy="15" r="2"/></svg>',
        'building': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><rect x="4" y="2" width="16" height="20" rx="2"/><line x1="9" y1="6" x2="9" y2="6.01"/><line x1="15" y1="6" x2="15" y2="6.01"/><line x1="9" y1="10" x2="9" y2="10.01"/><line x1="15" y1="10" x2="15" y2="10.01"/><line x1="9" y1="14" x2="9" y2="14.01"/><line x1="15" y1="14" x2="15" y2="14.01"/><path d="M9 18h6v4H9z"/></svg>',
        'shield': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><polyline points="9 12 11 14 15 10"/></svg>',
        'network': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><circle cx="12" cy="5" r="3"/><circle cx="5" cy="19" r="3"/><circle cx="19" cy="19" r="3"/><line x1="12" y1="8" x2="5" y2="16"/><line x1="12" y1="8" x2="19" y2="16"/></svg>',
        'id': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><rect x="2" y="5" width="20" height="14" rx="2"/><line x1="6" y1="9" x2="6" y2="9.01"/><line x1="6" y1="13" x2="6" y2="13.01"/><line x1="10" y1="9" x2="18" y2="9"/><line x1="10" y1="13" x2="18" y2="13"/></svg>',
        'tax': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><rect x="2" y="3" width="20" height="18" rx="2"/><line x1="8" y1="7" x2="16" y2="7"/><line x1="8" y1="11" x2="16" y2="11"/><line x1="8" y1="15" x2="12" y2="15"/></svg>',
        'sign': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>',
        'cert': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><circle cx="12" cy="8" r="6"/><path d="M8 14l-2 8 6-3 6 3-2-8"/></svg>',
        'iso': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>',
        'chamber': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><path d="M3 21h18"/><path d="M5 21V7l7-4 7 4v14"/><path d="M9 21v-6h6v6"/></svg>',
        'globe': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>',
        'airplane': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4 20-7z"/></svg>',
        'pill': '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="1.5"><path d="M10.5 20.5L3.5 13.5a4.95 4.95 0 1 1 7-7l7 7a4.95 4.95 0 1 1-7 7z"/><line x1="8.5" y1="8.5" x2="15.5" y2="15.5"/></svg>'
    };
    return icons[iconType] || icons['doc'];
}

// Ãœlke bayraÄŸÄ± (metin olarak)
function getCountryFlag(code) {
    var flags = {
        'TR': 'TR', 'DE': 'DE', 'FR': 'FR', 'IT': 'IT', 'ES': 'ES', 
        'NL': 'NL', 'BE': 'BE', 'PL': 'PL', 'AT': 'AT', 'CH': 'CH',
        'GR': 'GR', 'GB': 'GB', 'US': 'US', 'CN': 'CN', 'AE': 'AE',
        'IN': 'IN', 'SG': 'SG', 'OTHER': '--'
    };
    return flags[code] || '--';
}

function updateForwarderDocRequirements() {
    var country = document.getElementById('forwarderCountry').value;
    var countryData = countryDocRequirements[country] || countryDocRequirements['OTHER'];
    var docsContainer = document.getElementById('forwarderRequiredDocs');
    var optionalContainer = document.getElementById('forwarderOptionalDocs');
    var descEl = document.getElementById('forwarderDocDescription');
    var intlTitle = document.getElementById('intlCertsTitle');
    var lang = currentLanguage || 'tr';
    
    var countryName = lang === 'en' && countryData.nameEn ? countryData.nameEn : countryData.name;
    var reqText = lang === 'en' ? 'Required documents for' : 'iÃ§in gerekli belgeler';
    var reqLabel = lang === 'en' ? 'Required' : 'Zorunlu';
    var optLabel = lang === 'en' ? 'Optional' : 'Optional';
    var uploadBtn = lang === 'en' ? 'Upload' : 'YÃ¼kle';
    var pointsText = lang === 'en' ? 'pts' : 'puan';
    
    if (descEl) {
        descEl.innerHTML = '<strong>' + countryName + '</strong> ' + reqText;
    }
    
    if (intlTitle) {
        intlTitle.innerHTML = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#475569" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg> ' +
            (lang === 'en' ? 'International Certificates (Valid for All Countries)' : 'UluslararasÄ± Sertifikalar (TÃ¼m Ãœlkeler Ä°Ã§in GeÃ§erli)');
    }
    
    if (docsContainer && countryData.forwarder) {
        var html = '';
        countryData.forwarder.required.forEach(function(doc, index) {
            var docName = lang === 'en' && doc.nameEn ? doc.nameEn : doc.name;
            var iconHtml = getDocIcon(doc.icon);
            
            html += '<div class="doc-upload-item" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; text-align: center;">' +
                    '<div style="margin-bottom: 12px; display: flex; justify-content: center;">' + iconHtml + '</div>' +
                    '<strong style="display: block; font-size: 13px; color: #1e293b; margin-bottom: 4px;">' + docName + '</strong>' +
                    '<span style="font-size: 11px; color: #10b981; font-weight: 500;">âœ“ ' + reqLabel + '</span>' +
                    '<input type="file" id="fwdDoc' + doc.id + '" style="display: none;" accept=".pdf,.jpg,.png">' +
                    '<button type="button" onclick="document.getElementById(\'fwdDoc' + doc.id + '\').click()" style="margin-top: 10px; padding: 8px 16px; background: #1e3c72; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer; font-weight: 500;">' + uploadBtn + '</button>' +
                    '</div>';
        });
        docsContainer.innerHTML = html;
    }
    
    // Render optional/international certificates with tooltips
    if (optionalContainer) {
        var optHtml = '';
        
        internationalCertificates.forEach(function(cert) {
            var certName = lang === 'en' && cert.nameEn ? cert.nameEn : cert.name;
            var certDesc = lang === 'en' && cert.descEn ? cert.descEn : cert.desc;
            var certTooltip = lang === 'en' && cert.tooltipEn ? cert.tooltipEn : cert.tooltip;
            var iconHtml = getDocIcon(cert.icon === 'ğŸ†' ? 'cert' : cert.icon === 'ğŸ“‹' ? 'iso' : cert.icon === 'ğŸŒ¿' ? 'globe' : cert.icon === 'âœˆï¸' ? 'airplane' : cert.icon === 'ğŸŒ' ? 'network' : cert.icon === 'ğŸ”—' ? 'network' : cert.icon === 'ğŸ’Š' ? 'pill' : cert.icon === 'ğŸ›¡ï¸' ? 'shield' : cert.icon === 'ğŸ“Š' ? 'doc' : 'cert');
            
            optHtml += '<div class="doc-upload-item" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 16px; text-align: center; position: relative;">' +
                    '<div style="margin-bottom: 10px; display: flex; justify-content: center;">' + iconHtml + '</div>' +
                    '<strong style="display: block; font-size: 12px; color: #1e293b; margin-bottom: 4px;">' + certName + '</strong>' +
                    '<span style="font-size: 10px; color: #64748b; display: block; margin-bottom: 2px;">' + certDesc + '</span>' +
                    '<span style="font-size: 10px; color: #10b981; font-weight: 600;">(+' + cert.points + ' ' + pointsText + ')</span>' +
                    '<button type="button" class="cert-info-btn" onclick="showCertificateInfo(\'' + cert.id + '\')" style="position: absolute; top: 8px; right: 8px; width: 18px; height: 18px; border-radius: 50%; background: #e2e8f0; border: none; color: #64748b; font-size: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;">i</button>' +
                    '<input type="file" id="fwdDoc' + cert.id + '" style="display: none;" accept=".pdf,.jpg,.png" onchange="handleCertUpload(\'' + cert.id + '\', this)">' +
                    '<button type="button" onclick="document.getElementById(\'fwdDoc' + cert.id + '\').click()" style="margin-top: 8px; padding: 6px 12px; background: #64748b; color: white; border: none; border-radius: 6px; font-size: 11px; cursor: pointer;">' + uploadBtn + '</button>' +
                    '</div>';
        });
        optionalContainer.innerHTML = optHtml;
    }
}

function updateClientDocRequirements() {
    var country = document.getElementById('clientCountrySelect').value;
    var countryData = countryDocRequirements[country] || countryDocRequirements['OTHER'];
    var docsContainer = document.getElementById('clientRequiredDocs');
    var descEl = document.getElementById('clientDocDescription');
    var lang = currentLanguage || 'tr';
    
    var countryName = lang === 'en' && countryData.nameEn ? countryData.nameEn : countryData.name;
    var reqText = lang === 'en' ? 'Required documents for' : 'iÃ§in gerekli belgeler';
    var reqLabel = lang === 'en' ? 'Required' : 'Zorunlu';
    var uploadBtn = lang === 'en' ? 'Upload' : 'YÃ¼kle';
    
    if (descEl) {
        descEl.innerHTML = '<strong>' + countryName + '</strong> ' + reqText;
    }
    
    if (docsContainer && countryData.client) {
        var html = '';
        countryData.client.required.forEach(function(doc, index) {
            var docName = lang === 'en' && doc.nameEn ? doc.nameEn : doc.name;
            var iconHtml = getDocIcon(doc.icon);
            
            html += '<div class="doc-upload-item" style="background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; padding: 20px; text-align: center;">' +
                    '<div style="margin-bottom: 12px; display: flex; justify-content: center;">' + iconHtml + '</div>' +
                    '<strong style="display: block; font-size: 13px; color: #1e293b; margin-bottom: 4px;">' + docName + '</strong>' +
                    '<span style="font-size: 11px; color: #10b981; font-weight: 500;">âœ“ ' + reqLabel + '</span>' +
                    '<input type="file" id="clientDoc' + doc.id + '" style="display: none;" accept=".pdf,.jpg,.png">' +
                    '<button type="button" onclick="document.getElementById(\'clientDoc' + doc.id + '\').click()" style="margin-top: 10px; padding: 8px 16px; background: #1e3c72; color: white; border: none; border-radius: 6px; font-size: 12px; cursor: pointer; font-weight: 500;">' + uploadBtn + '</button>' +
                    '</div>';
        });
        docsContainer.innerHTML = html;
    }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LEGAL DOCUMENTS AND MODAL SYSTEM
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

var legalDocuments = {
    terms: {
        title: 'Terms of Service',
        content: `
<div style="font-family: system-ui, -apple-system, sans-serif;">
    <p style="color: #64748b; margin-bottom: 20px;"><strong>Last Updated:</strong> December 21, 2025 | <strong>Effective Date:</strong> January 01, 2025</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">1. PARTIES AND DEFINITIONS</h3>
    <p><strong>1.1.</strong> These Terms of Service ("Agreement") are entered into between Global Freight Network platform ("Platform") operated by [COMPANY NAME] ("Company") and the individual or legal entity registering on the Platform ("User").</p>
    <p><strong>1.2.</strong> <u>Platform:</u> Online logistics intermediation service provided at www.globalfreightnetwork.com.</p>
    <p><strong>1.3.</strong> <u>Forwarder:</u> Freight forwarder companies offering transportation services through the Platform.</p>
    <p><strong>1.4.</strong> <u>Client:</u> Individuals or organizations requesting transportation services through the Platform.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">2. NATURE OF PLATFORM AND INTERMEDIARY STATUS</h3>
    <p><strong>2.1.</strong> The Platform serves solely as an <strong>INTERMEDIARY</strong> facilitating communication and matching between Clients and Forwarders.</p>
    <p><strong>2.2.</strong> Company is <strong>NOT</strong> a party to transportation transactions and does not provide any transportation commitments.</p>
    <p><strong>2.3.</strong> The transportation contract is established directly between the Client and Forwarder. Company is not a party to this contract.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">3. USER OBLIGATIONS</h3>
    <p><strong>3.1.</strong> User warrants that the information provided during registration is accurate.</p>
    <p><strong>3.2.</strong> User agrees to use the Platform only for lawful purposes.</p>
    <p><strong>3.3.</strong> User declares that uploaded documents are authentic and current.</p>
    <p><strong>3.4.</strong> User undertakes to comply with all applicable laws in transactions conducted through the Platform.</p>
    <p><strong>3.5.</strong> Forwarders represent that they possess all necessary legal permits and documents for the services they provide.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">4. FEES AND PAYMENT</h3>
    <p><strong>4.1.</strong> Commission and fees applicable for Platform use are specified in the current rate list.</p>
    <p><strong>4.2.</strong> Commission rates charged to Forwarders may vary on a transaction basis.</p>
    <p><strong>4.3.</strong> Payments may be made through the Platform or directly between parties.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">5. INTELLECTUAL PROPERTY RIGHTS</h3>
    <p><strong>5.1.</strong> All content, design, software and logos of the Platform belong to Company.</p>
    <p><strong>5.2.</strong> Users may not copy, reproduce or distribute Platform content without authorization.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">6. ACCOUNT SUSPENSION AND TERMINATION</h3>
    <p><strong>6.1.</strong> Company may suspend or terminate accounts of Users who violate these terms.</p>
    <p><strong>6.2.</strong> User may close their account at any time.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">7. DISPUTE RESOLUTION AND JURISDICTION</h3>
    <p><strong>7.1.</strong> <strong>Istanbul Courts and Enforcement Offices</strong> shall have jurisdiction over disputes arising from this agreement.</p>
    <p><strong>7.2.</strong> This Agreement is subject to the laws of the Republic of Turkey.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">8. AMENDMENTS</h3>
    <p><strong>8.1.</strong> Company reserves the right to modify this agreement without prior notice.</p>
    <p><strong>8.2.</strong> Amendments shall become effective upon publication on the Platform.</p>
</div>
        `
    },
    
    privacy: {
        title: 'Privacy Policy',
        content: `
<div style="font-family: system-ui, -apple-system, sans-serif;">
    <p style="color: #64748b; margin-bottom: 20px;"><strong>Last Updated:</strong> December 21, 2025</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">1. DATA COLLECTED</h3>
    <p>The following personal data is collected through the Platform:</p>
    <ul style="margin-left: 20px;">
        <li>Identity information (name, surname, ID number)</li>
        <li>Contact information (email, phone, address)</li>
        <li>Company information (trade name, tax number, trade registry details)</li>
        <li>Financial information (bank account details, invoice information)</li>
        <li>Usage data (IP address, browser information, transaction history)</li>
        <li>Location data (for transportation routes)</li>
    </ul>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">2. DATA PROCESSING PURPOSES</h3>
    <p>Your personal data is processed for the following purposes:</p>
    <ul style="margin-left: 20px;">
        <li>Provision of Platform services</li>
        <li>User account management</li>
        <li>Client-Forwarder matching</li>
        <li>Fulfillment of legal obligations</li>
        <li>Security and fraud prevention</li>
        <li>Statistical analysis and service improvement</li>
    </ul>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">3. DATA SHARING</h3>
    <p><strong>3.1.</strong> Your data may be shared with relevant Forwarders or Clients for service provision purposes.</p>
    <p><strong>3.2.</strong> May be shared with public authorities as required by law.</p>
    <p><strong>3.3.</strong> Your data is <strong>NOT SHARED</strong> with third-party marketing companies.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">4. DATA SECURITY</h3>
    <p>Your data is protected with SSL encryption, firewalls and regular security audits.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">5. DATA RETENTION PERIOD</h3>
    <p>Your personal data is retained for legal retention periods or as required for service purposes.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">6. YOUR RIGHTS</h3>
    <p>For your rights under data protection laws, please refer to the "Data Protection Notice" section.</p>
</div>
        `
    },
    
    kvkk: {
        title: 'Data Protection Notice',
        content: `
<div style="font-family: system-ui, -apple-system, sans-serif;">
    <p style="color: #64748b; margin-bottom: 20px;"><strong>Data Protection Information Notice under Turkish Personal Data Protection Law No. 6698</strong></p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">1. DATA CONTROLLER</h3>
    <p><strong>[COMPANY NAME]</strong><br>
    Address: [COMPANY ADDRESS]<br>
    Mersis No: 0123456789012345<br>
    Email: privacy@globalfreightnetwork.com</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">2. PERSONAL DATA PROCESSED</h3>
    <table style="width: 100%; border-collapse: collapse; margin: 16px 0;">
        <tr style="background: #f1f5f9;">
            <th style="border: 1px solid #e2e8f0; padding: 12px; text-align: left;">Data Category</th>
            <th style="border: 1px solid #e2e8f0; padding: 12px; text-align: left;">Data Types</th>
        </tr>
        <tr>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Identity Information</td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Name, surname, ID number, signature</td>
        </tr>
        <tr style="background: #f8fafc;">
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Contact Information</td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Phone, email, address</td>
        </tr>
        <tr>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Financial Information</td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Bank account, invoice details</td>
        </tr>
        <tr style="background: #f8fafc;">
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Transaction Security</td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">IP address, log records</td>
        </tr>
    </table>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">3. LEGAL BASIS FOR DATA PROCESSING</h3>
    <p>Under Article 5/2 of the Data Protection Law:</p>
    <ul style="margin-left: 20px;">
        <li>(a) Explicitly provided by law</li>
        <li>(c) Necessary for performance of contract</li>
        <li>(d) Legal obligation of data controller</li>
        <li>(f) Legitimate interest of data controller</li>
    </ul>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">4. DATA TRANSFER</h3>
    <p>Your personal data may be shared with:</p>
    <ul style="margin-left: 20px;">
        <li>Service providers (servers, software)</li>
        <li>Business partners (Forwarders - only within transaction scope)</li>
        <li>Public authorities (when legally required)</li>
    </ul>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">5. YOUR DATA PROTECTION RIGHTS</h3>
    <p>You have the following rights:</p>
    <ul style="margin-left: 20px;">
        <li>âœ“ Learn whether your personal data is being processed</li>
        <li>âœ“ Request information if processed</li>
        <li>âœ“ Learn the purpose of processing and whether used accordingly</li>
        <li>âœ“ Know third parties to whom data is transferred domestically or abroad</li>
        <li>âœ“ Request correction if incomplete or incorrectly processed</li>
        <li>âœ“ Request deletion or destruction under applicable laws</li>
        <li>âœ“ Object to outcomes arising from automated analysis</li>
        <li>âœ“ Request compensation for damages due to unlawful processing</li>
    </ul>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">6. HOW TO APPLY</h3>
    <p>To exercise your rights, contact:</p>
    <ul style="margin-left: 20px;">
        <li>ğŸ“§ Email: privacy@globalfreightnetwork.com</li>
        <li>ğŸ“® Mail: [COMPANY ADDRESS]</li>
    </ul>
    <p>Applications will be responded to within 30 days.</p>
</div>
        `
    },
    
    disclaimer: {
        title: 'Disclaimer',
        content: `
<div style="font-family: system-ui, -apple-system, sans-serif;">
    <div style="background: #fef2f2; border: 1px solid #fecaca; border-radius: 12px; padding: 20px; margin-bottom: 24px;">
        <h4 style="color: #dc2626; margin: 0 0 12px 0;">âš ï¸ IMPORTANT NOTICE</h4>
        <p style="color: #991b1b; margin: 0; font-weight: 500;">Please read this notice carefully before completing Platform registration. By registering, you accept these terms.</p>
    </div>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">1. INTERMEDIARY NATURE OF PLATFORM</h3>
    <p><strong>1.1.</strong> Global Freight Network is an <strong>ONLINE INTERMEDIARY PLATFORM</strong> connecting Clients with Freight Forwarders.</p>
    <p><strong>1.2.</strong> The Platform is <strong>NOT</strong> a party to transportation services.</p>
    <p><strong>1.3.</strong> The transportation contract is established <strong>DIRECTLY between the Client and Forwarder</strong>.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">2. LIMITATION OF LIABILITY</h3>
    <p>The Platform accepts <strong>NO LIABILITY</strong> for the following:</p>
    
    <div style="background: #f8fafc; border-radius: 8px; padding: 16px; margin: 16px 0;">
        <p style="margin: 0 0 8px 0;"><strong>2.1. Transportation-Related Damages:</strong></p>
        <ul style="margin: 0 0 0 20px; color: #475569;">
            <li>Cargo damage, loss or delays</li>
            <li>Wrong delivery or non-delivery</li>
            <li>Container damages</li>
            <li>Cold chain breaches</li>
        </ul>
    </div>
    
    <div style="background: #f8fafc; border-radius: 8px; padding: 16px; margin: 16px 0;">
        <p style="margin: 0 0 8px 0;"><strong>2.2. Forwarder-Related Issues:</strong></p>
        <ul style="margin: 0 0 0 20px; color: #475569;">
            <li>Quality of Forwarder services</li>
            <li>Forwarder bankruptcy or payment difficulties</li>
            <li>Forwarder violations of legal regulations</li>
            <li>Authenticity of Forwarder documents</li>
        </ul>
    </div>
    
    <div style="background: #f8fafc; border-radius: 8px; padding: 16px; margin: 16px 0;">
        <p style="margin: 0 0 8px 0;"><strong>2.3. Prices and Estimates:</strong></p>
        <ul style="margin: 0 0 0 20px; color: #475569;">
            <li>Rates shown on Platform are <strong>ESTIMATES</strong></li>
            <li>Actual rates are determined by Forwarder</li>
            <li>AI-generated estimates are <strong>NOT GUARANTEED</strong></li>
            <li>Transit time estimates are not binding</li>
        </ul>
    </div>
    
    <div style="background: #f8fafc; border-radius: 8px; padding: 16px; margin: 16px 0;">
        <p style="margin: 0 0 8px 0;"><strong>2.4. Customs and Tax Matters:</strong></p>
        <ul style="margin: 0 0 0 20px; color: #475569;">
            <li>Customs duty calculations are for reference only</li>
            <li>Actual tax amounts may differ</li>
            <li>Forwarder/Client is responsible for customs procedures</li>
        </ul>
    </div>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">3. USER RESPONSIBILITIES</h3>
    <p><strong>3.1.</strong> Clients must conduct their <strong>OWN DUE DILIGENCE</strong> when selecting Forwarders.</p>
    <p><strong>3.2.</strong> Users are <strong>PERSONALLY RESPONSIBLE</strong> for obtaining cargo insurance.</p>
    <p><strong>3.3.</strong> Platform ratings and reviews are for reference only, not guaranteed.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">4. DISPUTES</h3>
    <p><strong>4.1.</strong> Platform is <strong>NOT A PARTY</strong> to disputes between Client and Forwarder.</p>
    <p><strong>4.2.</strong> Platform does <strong>NOT PROVIDE</strong> mediation or arbitration services.</p>
    <p><strong>4.3.</strong> Disputes must be resolved between the relevant parties or through competent courts.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">5. COMPENSATION LIMIT</h3>
    <p><strong>5.1.</strong> In the event Platform becomes liable for compensation for any reason, such liability is limited to the <strong>COMMISSION RECEIVED IN THE LAST 12 MONTHS</strong>.</p>
    <p><strong>5.2.</strong> Platform cannot be held liable for indirect damages, loss of profit, loss of reputation and similar consequential damages.</p>
    
    <div style="background: #fef3c7; border: 1px solid #fcd34d; border-radius: 12px; padding: 20px; margin-top: 24px;">
        <h4 style="color: #92400e; margin: 0 0 12px 0;">ğŸ“Œ SUMMARY</h4>
        <p style="color: #78350f; margin: 0;">By using this platform, you acknowledge and accept that the platform is merely an intermediary, is not a party to transportation transactions, and accepts no liability for the matters specified above.</p>
    </div>
</div>
        `
    },
    
    cookies: {
        title: 'Ã‡erez (Cookie) PolitikasÄ±',
        content: `
<div style="font-family: system-ui, -apple-system, sans-serif;">
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">1. Ã‡EREZ NEDÄ°R?</h3>
    <p>Ã‡erezler, web sitemizi ziyaret ettiÄŸinizde cihazÄ±nÄ±za kaydedilen kÃ¼Ã§Ã¼k metin dosyalarÄ±dÄ±r.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">2. KULLANILAN Ã‡EREZ TÃœRLERÄ°</h3>
    <table style="width: 100%; border-collapse: collapse; margin: 16px 0;">
        <tr style="background: #f1f5f9;">
            <th style="border: 1px solid #e2e8f0; padding: 12px; text-align: left;">Ã‡erez TÃ¼rÃ¼</th>
            <th style="border: 1px solid #e2e8f0; padding: 12px; text-align: left;">AmaÃ§</th>
            <th style="border: 1px solid #e2e8f0; padding: 12px; text-align: left;">SÃ¼re</th>
        </tr>
        <tr>
            <td style="border: 1px solid #e2e8f0; padding: 12px;"><strong>Zorunlu Ã‡erezler</strong></td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Oturum yÃ¶netimi, gÃ¼venlik</td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Oturum sÃ¼resi</td>
        </tr>
        <tr style="background: #f8fafc;">
            <td style="border: 1px solid #e2e8f0; padding: 12px;"><strong>Ä°ÅŸlevsel Ã‡erezler</strong></td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Dil tercihi, kullanÄ±cÄ± ayarlarÄ±</td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">1 yÄ±l</td>
        </tr>
        <tr>
            <td style="border: 1px solid #e2e8f0; padding: 12px;"><strong>Analitik Ã‡erezler</strong></td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">Site kullanÄ±m istatistikleri</td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">2 yÄ±l</td>
        </tr>
        <tr style="background: #f8fafc;">
            <td style="border: 1px solid #e2e8f0; padding: 12px;"><strong>Pazarlama Ã‡erezleri</strong></td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">KiÅŸiselleÅŸtirilmiÅŸ reklamlar</td>
            <td style="border: 1px solid #e2e8f0; padding: 12px;">1 yÄ±l</td>
        </tr>
    </table>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">3. Ã‡EREZ TERCÄ°HLERÄ°</h3>
    <p>TarayÄ±cÄ± ayarlarÄ±nÄ±zdan Ã§erezleri yÃ¶netebilir veya silebilirsiniz. Ancak zorunlu Ã§erezleri devre dÄ±ÅŸÄ± bÄ±rakmak platform iÅŸlevselliÄŸini etkileyebilir.</p>
    
    <h3 style="color: #1e3c72; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; margin-top: 24px;">4. ÃœÃ‡ÃœNCÃœ TARAF Ã‡EREZLERÄ°</h3>
    <p>AÅŸaÄŸÄ±daki hizmet saÄŸlayÄ±cÄ±larÄ±n Ã§erezleri kullanÄ±lmaktadÄ±r:</p>
    <ul style="margin-left: 20px;">
        <li>Google Analytics (analitik)</li>
        <li>Cloudflare (gÃ¼venlik)</li>
        <li>Intercom (mÃ¼ÅŸteri destek)</li>
    </ul>
</div>
        `
    }
};

function openLegalModal(docType) {
    var doc = legalDocuments[docType];
    if (!doc) {
        alert('Belge bulunamadÄ±');
        return;
    }
    
    document.getElementById('legalModalTitle').innerHTML = doc.title;
    document.getElementById('legalModalContent').innerHTML = doc.content;
    document.getElementById('legalModal').classList.add('active');
    document.body.style.overflow = 'hidden';
}

function closeLegalModal(event) {
    // EÄŸer event varsa ve tÄ±klanan yer overlay deÄŸilse, kapatma
    if (event && event.target && event.target.id !== 'legalModal') {
        return;
    }
    document.getElementById('legalModal').classList.remove('active');
    document.body.style.overflow = 'auto';
}
</script>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- FLOATING AI CHATBOT -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<style>
/* Floating Button - Premium Design */
.ai-chatbot-btn {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 60px;
    height: 60px;
    border-radius: 16px;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 20px rgba(30, 60, 114, 0.35);
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}
.ai-chatbot-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 30px rgba(30, 60, 114, 0.45);
}
.ai-chatbot-btn.active {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    border-radius: 16px 16px 4px 16px;
}
.ai-chatbot-btn svg {
    width: 28px;
    height: 28px;
    fill: white;
}
.ai-chatbot-btn .btn-text {
    position: absolute;
    right: 70px;
    background: #1e293b;
    color: white;
    padding: 8px 16px;
    border-radius: 8px;
    font-size: 13px;
    white-space: nowrap;
    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
    font-weight: 500;
}
.ai-chatbot-btn:hover .btn-text {
    opacity: 1;
}

/* Chat Panel */
.ai-chatbot-panel {
    position: fixed;
    bottom: 110px;
    right: 30px;
    width: 400px;
    height: 550px;
    background: white;
    border-radius: 20px;
    box-shadow: 0 10px 50px rgba(0, 0, 0, 0.15);
    display: none;
    flex-direction: column;
    overflow: hidden;
    z-index: 900;
}
.ai-chatbot-panel.active {
    display: flex;
}
.chatbot-avatar {
    width: 36px;
    height: 36px;
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Chat Header */
.chatbot-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 20px;
    border-radius: 20px 20px 0 0;
}
.chatbot-header h3 {
    margin: 0 0 5px 0;
    font-size: 18px;
    display: flex;
    align-items: center;
    gap: 10px;
}
.chatbot-header p {
    margin: 0;
    font-size: 13px;
    opacity: 0.9;
}

/* Mode Buttons */
.chatbot-modes {
    display: flex;
    gap: 6px;
    padding: 12px 15px;
    background: #f1f5f9;
    border-bottom: 1px solid #e2e8f0;
    overflow-x: auto;
}
.chatbot-mode-btn {
    padding: 8px 12px;
    border: none;
    background: white;
    border-radius: 20px;
    font-size: 12px;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 5px;
}
.chatbot-mode-btn:hover {
    background: #cbd5e1;
}
.chatbot-mode-btn.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}

/* Messages */
.chatbot-messages {
    flex: 1;
    overflow-y: auto;
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}
.chat-message {
    display: flex;
    gap: 10px;
    max-width: 90%;
}
.chat-message.user {
    align-self: flex-end;
    flex-direction: row-reverse;
}
.chat-message .message-avatar {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    background: #f1f5f9;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 18px;
    flex-shrink: 0;
}
.chat-message.user .message-avatar {
    display: none;
}
.chat-message .message-content {
    background: #f1f5f9;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 14px;
    line-height: 1.5;
}
.chat-message.user .message-content {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
}
.chat-message.bot .message-content b {
    color: #4f46e5;
}
.typing-dots {
    display: inline-block;
    animation: typing 1s infinite;
}
@keyframes typing {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
}

/* Input */
.chatbot-input-area {
    padding: 15px;
    border-top: 1px solid #e2e8f0;
    display: flex;
    gap: 10px;
}
.chatbot-input-area input {
    flex: 1;
    padding: 12px 18px;
    border: 2px solid #e2e8f0;
    border-radius: 25px;
    font-size: 14px;
    outline: none;
    transition: border-color 0.2s;
}
.chatbot-input-area input:focus {
    border-color: #667eea;
}
.chatbot-input-area button {
    width: 45px;
    height: 45px;
    border: none;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    transition: transform 0.2s;
}
.chatbot-input-area button:hover {
    transform: scale(1.1);
}

/* Mobile */
@media (max-width: 500px) {
    .ai-chatbot-panel {
        width: calc(100% - 20px);
        right: 10px;
        bottom: 90px;
        height: 70vh;
    }
    .ai-chatbot-btn {
        right: 15px;
        bottom: 15px;
    }
}

/* ========================================
   MANAGE SHIPMENTS STYLES
======================================== */
.shipment-manage-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.04);
}

.shipment-manage-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
    padding-bottom: 16px;
    border-bottom: 1px solid #e2e8f0;
}

.shipment-manage-header h3 {
    margin: 0 0 4px 0;
    color: #1e293b;
    font-size: 18px;
}

.shipment-manage-header .cargo-owner-name {
    font-size: 13px;
    color: #64748b;
}

.shipment-status-badge {
    padding: 6px 14px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 600;
}

.shipment-status-badge.in-transit {
    background: #dbeafe;
    color: #1d4ed8;
}

.shipment-status-badge.delivered {
    background: #dcfce7;
    color: #16a34a;
}

.shipment-status-badge.pending {
    background: #fef3c7;
    color: #d97706;
}

.shipment-route-info {
    display: flex;
    align-items: center;
    gap: 20px;
    padding: 16px;
    background: #f8fafc;
    border-radius: 8px;
    margin-bottom: 20px;
}

.shipment-route-info .route-point {
    flex: 1;
}

.shipment-route-info .route-point .label {
    display: block;
    font-size: 11px;
    color: #64748b;
    text-transform: uppercase;
    margin-bottom: 4px;
}

.shipment-route-info .route-point strong {
    font-size: 15px;
    color: #1e293b;
}

.shipment-route-info .route-arrow {
    flex-shrink: 0;
}

.shipment-update-form {
    background: #f8fafc;
    border-radius: 8px;
    padding: 20px;
}

.update-form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 16px;
}

.shipment-update-form .form-group {
    display: flex;
    flex-direction: column;
}

.shipment-update-form .form-group label {
    font-size: 12px;
    font-weight: 600;
    color: #475569;
    margin-bottom: 6px;
}

.shipment-update-form .form-group input,
.shipment-update-form .form-group select,
.shipment-update-form .form-group textarea {
    padding: 10px 12px;
    border: 1px solid #e2e8f0;
    border-radius: 6px;
    font-size: 14px;
    background: white;
}

.shipment-update-form .form-group input:focus,
.shipment-update-form .form-group select:focus,
.shipment-update-form .form-group textarea:focus {
    outline: none;
    border-color: #1e3c72;
    box-shadow: 0 0 0 3px rgba(30,60,114,0.1);
}

.shipment-update-form .form-group input[type="range"] {
    padding: 0;
    height: 6px;
    border: none;
    margin-top: 8px;
}

.progress-label {
    font-size: 12px;
    font-weight: 600;
    color: #1e3c72;
    margin-left: 8px;
}

.update-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid #e2e8f0;
}

.btn-save-update {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 24px;
    background: #1e3c72;
    color: white;
    border: none;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-save-update:hover {
    background: #2d4a8c;
}

.last-update {
    font-size: 12px;
    color: #94a3b8;
}

/* Cargo Owner Simple Tracking */
.simple-tracking-card {
    background: white;
    border-radius: 16px;
    padding: 32px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.08);
}

.tracking-header-simple {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 24px;
}

.tracking-header-simple h2 {
    margin: 0 0 4px 0;
    font-size: 24px;
    color: #1e293b;
}

.tracking-header-simple .forwarder-name {
    font-size: 14px;
    color: #64748b;
}

.tracking-status-large {
    text-align: right;
}

.tracking-status-large .status {
    display: inline-block;
    padding: 8px 16px;
    border-radius: 24px;
    font-weight: 600;
    font-size: 14px;
}

.tracking-status-large .status.in-transit {
    background: #dbeafe;
    color: #1d4ed8;
}

.tracking-status-large .eta {
    display: block;
    margin-top: 8px;
    font-size: 13px;
    color: #64748b;
}

.tracking-route-visual {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 24px;
    color: white;
}

.tracking-route-points {
    display: flex;
    justify-content: space-between;
    margin-bottom: 16px;
}

.tracking-route-points .point {
    text-align: center;
}

.tracking-route-points .point .label {
    display: block;
    font-size: 11px;
    opacity: 0.7;
    margin-bottom: 4px;
}

.tracking-route-points .point .city {
    font-size: 18px;
    font-weight: 600;
}

.tracking-progress-bar {
    height: 8px;
    background: rgba(255,255,255,0.2);
    border-radius: 4px;
    overflow: hidden;
    position: relative;
}

.tracking-progress-bar .fill {
    height: 100%;
    background: #10b981;
    border-radius: 4px;
    transition: width 0.5s ease;
}

.tracking-progress-bar .marker {
    position: absolute;
    top: -8px;
    transform: translateX(-50%);
    width: 24px;
    height: 24px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.tracking-progress-bar .marker svg {
    width: 14px;
    height: 14px;
    color: #1e3c72;
}

.tracking-details-simple {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 24px;
}

.tracking-detail-item {
    background: #f8fafc;
    padding: 16px;
    border-radius: 8px;
    text-align: center;
}

.tracking-detail-item .label {
    display: block;
    font-size: 11px;
    color: #64748b;
    text-transform: uppercase;
    margin-bottom: 4px;
}

.tracking-detail-item .value {
    font-size: 16px;
    font-weight: 600;
    color: #1e293b;
}

.tracking-note-box {
    background: #fffbeb;
    border: 1px solid #fcd34d;
    border-radius: 8px;
    padding: 16px;
}

.tracking-note-box .note-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
}

.tracking-note-box .note-header strong {
    color: #92400e;
    font-size: 13px;
}

.tracking-note-box .note-date {
    font-size: 11px;
    color: #b45309;
}

.tracking-note-box p {
    margin: 0;
    font-size: 14px;
    color: #78350f;
    line-height: 1.5;
}

@media (max-width: 768px) {
    .update-form-row {
        grid-template-columns: 1fr;
    }
    .tracking-details-simple {
        grid-template-columns: repeat(2, 1fr);
    }
    .shipment-route-info {
        flex-direction: column;
        text-align: center;
    }
    .shipment-route-display {
        flex-direction: column;
        gap: 16px;
    }
    .shipment-details-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* ========================================
   CARGO OWNER SHIPMENT VIEW STYLES
======================================== */
.shipment-view-card {
    background: white;
    border: 1px solid #e2e8f0;
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 20px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}

.shipment-view-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 24px;
}

.shipment-view-header h3 {
    margin: 0 0 4px 0;
    color: #1e293b;
    font-size: 20px;
    font-weight: 700;
}

.shipment-view-header .forwarder-name {
    font-size: 13px;
    color: #64748b;
}

.shipment-route-display {
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 20px;
    background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
    border-radius: 12px;
    margin-bottom: 24px;
}

.route-endpoint {
    flex: 0 0 auto;
    min-width: 140px;
}

.route-endpoint .endpoint-label {
    display: block;
    font-size: 10px;
    color: #94a3b8;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 4px;
}

.route-endpoint strong {
    font-size: 15px;
    color: #1e293b;
}

.route-progress-visual {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
}

.progress-line {
    width: 100%;
    height: 6px;
    background: #e2e8f0;
    border-radius: 3px;
    position: relative;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, #10b981 0%, #059669 100%);
    border-radius: 3px;
    transition: width 0.5s ease;
}

.progress-marker {
    position: absolute;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 28px;
    height: 28px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    transition: left 0.5s ease;
}

.progress-percent {
    font-size: 12px;
    font-weight: 600;
    color: #10b981;
}

.shipment-details-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 20px;
}

.shipment-details-grid .detail-item {
    background: #f8fafc;
    padding: 14px;
    border-radius: 8px;
    text-align: center;
}

.shipment-details-grid .detail-label {
    display: block;
    font-size: 11px;
    color: #64748b;
    text-transform: uppercase;
    margin-bottom: 6px;
}

.shipment-details-grid .detail-item strong {
    font-size: 14px;
    color: #1e293b;
}

.forwarder-note-box {
    background: #fffbeb;
    border: 1px solid #fcd34d;
    border-radius: 10px;
    padding: 16px;
    margin-bottom: 20px;
}

.forwarder-note-box .note-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 10px;
}

.forwarder-note-box .note-header strong {
    color: #92400e;
    font-size: 13px;
}

.forwarder-note-box .note-date {
    font-size: 11px;
    color: #b45309;
    margin-left: auto;
}

.forwarder-note-box p {
    margin: 0;
    font-size: 14px;
    color: #78350f;
    line-height: 1.6;
}

.shipment-actions {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 16px;
    border-top: 1px solid #e2e8f0;
}

.shipment-actions .btn-secondary {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    background: white;
    color: #1e3c72;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.shipment-actions .btn-secondary:hover {
    background: #f8fafc;
    border-color: #1e3c72;
}

.shipment-actions .last-updated {
    font-size: 12px;
    color: #94a3b8;
}
</style>

<!-- Floating Chatbot KaldÄ±rÄ±ldÄ± - AI Asistan butonu zaten mevcut -->

<!-- ============================================
     SUPABASE SDK with onload initialization
     ============================================ -->
<script>
// Supabase configuration - defined before SDK loads
var SUPABASE_URL = 'https://teljolppqncevuzlhsoq.supabase.co';
var SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRlbGpvbHBwcW5jZXZ1emxoc29xIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY0OTI2NzQsImV4cCI6MjA4MjA2ODY3NH0.Sly-MJBAkLhse2Yd4Pe_-M85LfXujWRZ7ZiMy__qLr4';
var supabase = null;
var supabaseReady = false;

async function onSupabaseLoad() {
    console.log('Supabase SDK loaded, initializing...');
    try {
        if (window.supabase && window.supabase.createClient) {
            supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
            supabaseReady = true;
            console.log('âœ… Supabase ready!');
            
            // VERÄ°LERÄ° SUPABASE'DEN YÃœKLE
            await loadNetworkFromSupabase();
            await loadQuotesFromSupabase();
            console.log('âœ… Data loaded from Supabase');
        } else {
            console.log('âŒ createClient not available');
        }
    } catch(e) {
        console.log('âŒ Error:', e.message);
    }
}
</script>
<script src="https://unpkg.com/@supabase/supabase-js@2" onload="onSupabaseLoad()"></script>

<!-- ============================================
     SUPABASE DATA ACCESS LAYER
     ============================================ -->
<script>

// ============================================
// SUPABASE DATA ACCESS LAYER (DAL)
// ============================================

// --- REQUESTS (RFQs) ---

// Load all requests for forwarder dashboard (from all cargo owners)
async function loadAllRequestsForForwarder() {
    console.log('Loading all requests for forwarder...');
    
    try {
        var requests = await loadRequestsFromSupabase();
        
        if (requests && requests.length > 0) {
            // Mevcut demo verileri koru, Supabase'den gelenleri ekle
            requests.forEach(function(req) {
                var exists = networkRequests.some(function(r) { 
                    return r.id === req.id || r.id === req.request_id; 
                });
                if (!exists) {
                    networkRequests.push(req);
                }
            });
            console.log('Total requests available for forwarder:', networkRequests.length);
        }
        
        // Render the requests
        if (typeof renderForwarderRequests === 'function') {
            renderForwarderRequests();
        }
        
        return networkRequests;
    } catch (e) {
        console.log('Error loading requests:', e);
        return networkRequests;
    }
}

// Refresh requests from Supabase (can be called periodically)
async function refreshForwarderRequests() {
    console.log('Refreshing forwarder requests from Supabase...');
    
    try {
        var freshRequests = await loadRequestsFromSupabase();
        
        if (freshRequests && freshRequests.length > 0) {
            // Merge with existing requests
            freshRequests.forEach(function(req) {
                var existingIndex = networkRequests.findIndex(function(r) { 
                    return r.id === req.id || r.id === req.request_id; 
                });
                
                if (existingIndex === -1) {
                    // New request - add it
                    networkRequests.unshift(req);
                    console.log('New request added:', req.id);
                } else {
                    // Update existing request
                    networkRequests[existingIndex] = Object.assign(networkRequests[existingIndex], req);
                }
            });
        }
        
        // Re-render
        if (typeof renderForwarderRequests === 'function') {
            renderForwarderRequests();
        }
        
        return networkRequests;
    } catch (e) {
        console.log('Error refreshing requests:', e);
        return networkRequests;
    }
}

// Load all requests from Supabase
async function loadRequestsFromSupabase() {
    if (!supabase) {
        console.log('DAL: Using localStorage for requests');
        return loadNetworkFromStorageSync();
    }
    
    try {
        var result = await supabase
            .from('requests')
            .select('*')
            .order('created_at', { ascending: false });
        
        if (result.error) {
            console.log('Supabase requests error, using localStorage:', result.error.message);
            return loadNetworkFromStorageSync();
        }
        
        console.log('Loaded', result.data.length, 'requests from Supabase');
        
        // Supabase formatÄ±nÄ± uygulama formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r
        return result.data.map(function(r) {
            return {
                id: r.id || r.request_id,
                shipper: r.shipper_name || r.shipper,
                shipperCompany: r.shipper_company,
                clientId: r.client_id,
                origin: r.origin,
                destination: r.destination,
                freight: r.freight_type || r.freight,
                loadType: r.load_type,
                containerType: r.container_type,
                containerSize: r.container_size,
                weight: r.weight,
                volume: r.volume,
                cargoCategory: r.cargo_category,
                cargoType: r.cargo_type,
                incoterm: r.incoterm,
                loadDate: r.load_date,
                targetDate: r.target_date,
                budget: r.budget,
                status: r.status || 'open',
                notes: r.notes,
                createdAt: r.created_at,
                quotes: [] // Quotes ayrÄ± tablodan yÃ¼klenecek
            };
        });
    } catch (e) {
        console.log('Supabase connection error, using localStorage');
        return loadNetworkFromStorageSync();
    }
}

// Save new request
async function saveRequestToSupabase(requestData) {
    // Her zaman localStorage'a da kaydet (yedek)
    networkRequests.unshift(requestData);
    saveNetworkToStorage();
    
    if (!supabase) {
        console.log('DAL: Request saved to localStorage only');
        return { success: true, source: 'localStorage', data: requestData };
    }
    
    try {
        // Supabase formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r
        var supabaseData = {
            request_id: requestData.id,
            user_id: currentUserId || null, // KALICI Ã‡Ã–ZÃœM: UUID kullan
            client_id: requestData.clientId,
            shipper_name: requestData.shipper,
            shipper_company: requestData.shipperCompany,
            origin: requestData.origin,
            destination: requestData.destination,
            freight_type: requestData.freight,
            load_type: requestData.loadType,
            container_type: requestData.containerType,
            container_size: requestData.containerSize,
            weight: parseInt(requestData.weight) || 0,
            volume: requestData.volume,
            cargo_category: requestData.cargoCategory,
            cargo_type: requestData.cargoType,
            incoterm: requestData.incoterm,
            load_date: requestData.loadDate,
            target_date: requestData.targetDate,
            budget: requestData.budget,
            status: requestData.status || 'open',
            notes: requestData.notes
        };
        
        var result = await supabase
            .from('requests')
            .insert([supabaseData])
            .select();
        
        if (result.error) {
            console.log('Supabase insert error:', result.error.message);
            return { success: true, source: 'localStorage', data: requestData };
        }
        
        console.log('Request saved to Supabase:', result.data[0].id);
        return { success: true, source: 'supabase', data: result.data[0] };
    } catch (e) {
        console.log('Supabase save error, data in localStorage:', e.message);
        return { success: true, source: 'localStorage', data: requestData };
    }
}

// --- QUOTES (Quoteler) ---

// TÃ¼m quoteleri Supabase'den Ã§ek
async function loadQuotesFromSupabase(requestId) {
    if (!supabase) {
        return quotesDB.filter(function(q) { 
            return !requestId || q.requestId === requestId; 
        });
    }
    
    try {
        var query = supabase
            .from('quotes')
            .select('*')
            .order('created_at', { ascending: false });
        
        if (requestId) {
            query = query.eq('request_id', requestId);
        }
        
        var result = await query;
        
        if (result.error) {
            console.log('Supabase quotes error:', result.error.message);
            return quotesDB;
        }
        
        console.log('Loaded', result.data.length, 'quotes from Supabase');
        
        // Supabase formatÄ±nÄ± uygulama formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r
        return result.data.map(function(q) {
            return {
                id: q.id || q.quote_id,
                requestId: q.request_id,
                clientId: q.client_id,
                forwarderId: q.forwarder_id,
                forwarderName: q.forwarder_name,
                forwarderCompany: q.forwarder_company,
                origin: q.origin,
                destination: q.destination,
                containerType: q.container_type,
                incoterm: q.incoterm,
                freightRate: q.freight_rate,
                thcOrigin: q.thc_origin,
                thcDest: q.thc_dest,
                totalPrice: q.total_price,
                currency: q.currency || 'USD',
                transitDays: q.transit_days,
                validUntil: q.valid_until,
                status: q.status || 'pending',
                notes: q.notes,
                createdAt: q.created_at
            };
        });
    } catch (e) {
        console.log('Supabase quotes connection error');
        return quotesDB;
    }
}

// Load all quotes for a specific cargo owner (client)
async function loadQuotesForClient(clientId) {
    console.log('Loading quotes for client:', clientId);
    
    if (!supabase) {
        console.log('Supabase not available, using localStorage');
        return quotesDB.filter(function(q) { 
            return q.clientId === clientId || q.clientId === 'demo-client'; 
        });
    }
    
    try {
        // Use ilike for flexible matching (handles "Ahmet" vs "Ahmet Turan" etc.)
        var result = await supabase
            .from('quotes')
            .select('*')
            .or('client_id.ilike.%' + clientId + '%,client_id.eq.demo-client')
            .order('created_at', { ascending: false });
        
        if (result.error) {
            console.log('Supabase quotes error:', result.error.message);
            return quotesDB.filter(function(q) { 
                return q.clientId === clientId || q.clientId === 'demo-client'; 
            });
        }
        
        console.log('Loaded', result.data.length, 'quotes for client from Supabase');
        
        // Clear existing quotes from quotesDB for this client to avoid duplicates
        quotesDB = quotesDB.filter(function(q) {
            return q.clientId !== clientId && q.clientId !== 'demo-client';
        });
        
        // Add Supabase quotes
        var quotes = result.data.map(function(q) {
            return {
                id: q.quote_id || q.id,
                requestId: q.request_id,
                clientId: q.client_id,
                forwarderId: q.forwarder_id,
                forwarderName: q.forwarder_name,
                forwarderCompany: q.forwarder_company,
                origin: q.origin,
                destination: q.destination,
                containerType: q.container_type,
                incoterm: q.incoterm,
                freightRate: q.freight_rate,
                thcOrigin: q.thc_origin,
                thcDest: q.thc_dest,
                totalPrice: q.total_price,
                currency: q.currency || 'USD',
                transitDays: q.transit_days,
                validUntil: q.valid_until,
                status: q.status || 'pending',
                notes: q.notes,
                createdAt: q.created_at
            };
        });
        
        // Add to quotesDB
        quotes.forEach(function(quote) {
            quotesDB.push(quote);
        });
        
        return quotes;
    } catch (e) {
        console.log('Error loading client quotes:', e);
        return quotesDB.filter(function(q) { 
            return q.clientId === clientId || q.clientId === 'demo-client'; 
        });
    }
}

// Initialize Supabase realtime subscriptions
function setupRealtimeSubscriptions() {
    if (!supabase) {
        console.log('Supabase not available, skipping realtime setup');
        return;
    }
    
    console.log('Setting up realtime subscriptions...');
    
    try {
        // Subscribe to new requests (for forwarders)
        var requestsChannel = supabase
            .channel('requests-changes')
            .on('postgres_changes', 
                { event: 'INSERT', schema: 'public', table: 'requests' },
                function(payload) {
                    console.log('New request received:', payload.new);
                    
                    // Add to networkRequests if forwarder is logged in
                    if (currentUserType === 'forwarder') {
                        var newReq = {
                            id: payload.new.request_id || payload.new.id,
                            shipper: payload.new.shipper_name,
                            shipperCompany: payload.new.shipper_company,
                            clientId: payload.new.client_id,
                            origin: payload.new.origin,
                            destination: payload.new.destination,
                            freight: payload.new.freight_type,
                            loadType: payload.new.load_type,
                            containerType: payload.new.container_type,
                            weight: payload.new.weight,
                            volume: payload.new.volume,
                            cargoCategory: payload.new.cargo_category,
                            cargoType: payload.new.cargo_type,
                            incoterm: payload.new.incoterm,
                            loadDate: payload.new.load_date,
                            status: payload.new.status || 'open',
                            notes: payload.new.notes,
                            createdAt: payload.new.created_at,
                            quotes: []
                        };
                        
                        // Check if not already exists
                        var exists = networkRequests.some(function(r) { 
                            return r.id === newReq.id; 
                        });
                        
                        if (!exists) {
                            networkRequests.unshift(newReq);
                            renderForwarderRequests();
                            showRateNotification('New RFQ received: ' + newReq.origin.split(',')[0] + ' â†’ ' + newReq.destination.split(',')[0], 'success');
                        }
                    }
                }
            )
            .subscribe();
        
        // Subscribe to new quotes (for cargo owners)
        var quotesChannel = supabase
            .channel('quotes-changes')
            .on('postgres_changes', 
                { event: 'INSERT', schema: 'public', table: 'quotes' },
                function(payload) {
                    console.log('New quote received:', payload.new);
                    
                    // Add to quotesDB if client is logged in
                    if (currentUserType === 'client') {
                        var newQuote = {
                            id: payload.new.quote_id || payload.new.id,
                            requestId: payload.new.request_id,
                            clientId: payload.new.client_id,
                            forwarderId: payload.new.forwarder_id,
                            forwarderName: payload.new.forwarder_name,
                            forwarderCompany: payload.new.forwarder_company,
                            origin: payload.new.origin,
                            destination: payload.new.destination,
                            containerType: payload.new.container_type,
                            incoterm: payload.new.incoterm,
                            freightRate: payload.new.freight_rate,
                            totalPrice: payload.new.total_price,
                            transitDays: payload.new.transit_days,
                            validUntil: payload.new.valid_until,
                            status: payload.new.status || 'pending',
                            notes: payload.new.notes,
                            createdAt: payload.new.created_at
                        };
                        
                        // Check if belongs to current client
                        if (newQuote.clientId === currentUser || newQuote.clientId === 'demo-client') {
                            var exists = quotesDB.some(function(q) { 
                                return q.id === newQuote.id; 
                            });
                            
                            if (!exists) {
                                quotesDB.push(newQuote);
                                renderClientQuotes();
                                
                                // Update badge
                                var badge = document.getElementById('quotesBadge');
                                if (badge) {
                                    var count = parseInt(badge.textContent || '0') + 1;
                                    badge.textContent = count;
                                    badge.style.display = 'inline-flex';
                                }
                                
                                showRateNotification('New quote received from ' + newQuote.forwarderName + '!', 'success');
                            }
                        }
                    }
                }
            )
            .subscribe();
        
        console.log('Realtime subscriptions active');
        
    } catch (e) {
        console.log('Realtime setup error:', e);
    }
}

// Yeni quote kaydet
async function saveQuoteToSupabase(quoteData) {
    // Her zaman localStorage'a da kaydet (yedek)
    quotesDB.push(quoteData);
    saveQuotesToStorage();
    
    if (!supabase) {
        console.log('DAL: Quote saved to localStorage only');
        return { success: true, source: 'localStorage', data: quoteData };
    }
    
    try {
        // Supabase formatÄ±na dÃ¶nÃ¼ÅŸtÃ¼r
        var supabaseData = {
            quote_id: quoteData.id,
            request_id: quoteData.requestId,
            forwarder_user_id: currentUserId || null, // KALICI Ã‡Ã–ZÃœM: Forwarder UUID
            client_id: quoteData.clientId,
            forwarder_id: quoteData.forwarderId,
            forwarder_name: quoteData.forwarderName,
            forwarder_company: quoteData.forwarderCompany,
            origin: quoteData.origin,
            destination: quoteData.destination,
            container_type: quoteData.containerType,
            incoterm: quoteData.incoterm,
            freight_rate: quoteData.freightRate,
            thc_origin: quoteData.thcOrigin,
            thc_dest: quoteData.thcDest,
            total_price: quoteData.totalPrice,
            currency: quoteData.currency || 'USD',
            transit_days: quoteData.transitDays,
            valid_until: quoteData.validUntil,
            status: quoteData.status || 'pending',
            notes: quoteData.notes
        };
        
        var result = await supabase
            .from('quotes')
            .insert([supabaseData])
            .select();
        
        if (result.error) {
            console.log('Supabase quote insert error:', result.error.message);
            return { success: true, source: 'localStorage', data: quoteData };
        }
        
        console.log('Quote saved to Supabase:', result.data[0].id);
        return { success: true, source: 'supabase', data: result.data[0] };
    } catch (e) {
        console.log('Supabase quote save error:', e.message);
        return { success: true, source: 'localStorage', data: quoteData };
    }
}

// Quote durumunu gÃ¼ncelle
async function updateQuoteStatus(quoteId, newStatus) {
    // localStorage gÃ¼ncelle
    var localQuote = quotesDB.find(function(q) { return q.id === quoteId; });
    if (localQuote) {
        localQuote.status = newStatus;
        saveQuotesToStorage();
    }
    
    if (!supabase) return { success: true, source: 'localStorage' };
    
    try {
        var result = await supabase
            .from('quotes')
            .update({ status: newStatus, updated_at: new Date().toISOString() })
            .eq('quote_id', quoteId);
        
        if (result.error) {
            console.log('Supabase update error:', result.error.message);
        }
        return { success: true };
    } catch (e) {
        return { success: true, source: 'localStorage' };
    }
}

// Update request status in Supabase
async function updateRequestStatus(requestId, newStatus) {
    // localStorage gÃ¼ncelle
    var localRequest = networkRequests.find(function(r) { return r.id === requestId; });
    if (localRequest) {
        localRequest.status = newStatus;
        saveNetworkToStorage();
    }
    
    if (!supabase) return { success: true, source: 'localStorage' };
    
    try {
        // Try with request_id field first
        var result = await supabase
            .from('requests')
            .update({ status: newStatus, updated_at: new Date().toISOString() })
            .eq('request_id', requestId);
        
        // If no rows affected, try with id field
        if (result.error || (result.data && result.data.length === 0)) {
            result = await supabase
                .from('requests')
                .update({ status: newStatus, updated_at: new Date().toISOString() })
                .eq('id', requestId);
        }
        
        if (result.error) {
            console.log('Supabase request update error:', result.error.message);
        } else {
            console.log('Request status updated to:', newStatus);
        }
        return { success: true };
    } catch (e) {
        console.log('Request status update error:', e.message);
        return { success: true, source: 'localStorage' };
    }
}

// --- SHIPMENTS ---

// Create shipment when quote is accepted
async function createShipmentInSupabase(quote) {
    console.log('Creating shipment for quote:', quote.id);
    
    var quoteId = quote.id || quote.quote_id;
    
    // DUPLICATE KONTROLÃœ - AynÄ± quote iÃ§in zaten shipment var mÄ±?
    if (supabase) {
        try {
            var existingCheck = await supabase
                .from('shipments')
                .select('shipment_id')
                .eq('quote_id', quoteId)
                .limit(1);
            
            if (existingCheck.data && existingCheck.data.length > 0) {
                console.log('âš ï¸ Shipment already exists for quote:', quoteId);
                return { success: true, source: 'existing', data: existingCheck.data[0] };
            }
        } catch(e) {
            console.log('Duplicate check error:', e.message);
        }
    }
    
    var shipmentId = 'SHP-' + Date.now();
    var shipmentData = {
        shipment_id: shipmentId,
        quote_id: quoteId,
        request_id: quote.requestId || quote.request_id,
        client_id: quote.clientId || quote.client_id,
        forwarder_id: quote.forwarderId || quote.forwarder_id,
        forwarder_name: quote.forwarderName || quote.forwarder_name,
        origin: quote.origin,
        destination: quote.destination,
        container_type: quote.containerType || quote.container_type,
        total_price: quote.totalPrice || quote.total_price,
        status: 'booked',
        created_at: new Date().toISOString()
    };
    
    if (!supabase) {
        console.log('Shipment saved to localStorage only');
        return { success: true, source: 'localStorage', data: shipmentData };
    }
    
    try {
        var result = await supabase
            .from('shipments')
            .insert([shipmentData])
            .select();
        
        if (result.error) {
            console.log('Supabase shipment insert error:', result.error.message);
            return { success: false, error: result.error.message };
        }
        
        console.log('âœ… Shipment created in Supabase:', result.data[0].shipment_id);
        return { success: true, source: 'supabase', data: result.data[0] };
    } catch (e) {
        console.log('Shipment create error:', e.message);
        return { success: false, error: e.message };
    }
}

// --- PROFILES (KullanÄ±cÄ± Profileleri) ---

// Profile kaydet/gÃ¼ncelle
async function saveProfileToSupabase(profileData) {
    if (!supabase) {
        console.log('DAL: Profile saved to localStorage only');
        return { success: true, source: 'localStorage' };
    }
    
    try {
        // Match the actual profiles table structure
        var supabaseData = {
            user_id: currentUserId || null, // KALICI Ã‡Ã–ZÃœM: UUID ekle
            email: profileData.email,
            user_type: profileData.userType,
            company_name: profileData.companyName,
            contact_person: profileData.contactPerson || profileData.companyName,
            phone: profileData.phone || '',
            city: profileData.city || '',
            country: profileData.country || ''
        };
        
        console.log('Saving profile to Supabase:', supabaseData);
        
        // First try to find existing profile by email
        var existing = await supabase
            .from('profiles')
            .select('id')
            .eq('email', profileData.email)
            .single();
        
        var result;
        if (existing.data && existing.data.id) {
            // Update existing - also update user_id if we have it now
            result = await supabase
                .from('profiles')
                .update(supabaseData)
                .eq('id', existing.data.id)
                .select();
        } else {
            // Insert new
            result = await supabase
                .from('profiles')
                .insert([supabaseData])
                .select();
        }
        
        if (result.error) {
            console.log('Supabase profile error:', result.error.message);
            return { success: false, error: result.error.message };
        }
        
        console.log('Profile saved to Supabase successfully');
        return { success: true, source: 'supabase', data: result.data ? result.data[0] : null };
    } catch (e) {
        console.log('Profile save error:', e.message);
        return { success: false, error: e.message };
    }
}

// Profile yÃ¼kle
async function loadProfileFromSupabase(email) {
    if (!supabase) return null;
    
    try {
        var result = await supabase
            .from('profiles')
            .select('*')
            .eq('email', email)
            .single();
        
        if (result.error || !result.data) return null;
        
        return {
            email: result.data.email,
            userType: result.data.user_type,
            companyName: result.data.company_name,
            contactPerson: result.data.contact_person,
            email: result.data.email,
            phone: result.data.phone,
            address: result.data.address,
            city: result.data.city,
            country: result.data.country
        };
    } catch (e) {
        return null;
    }
}

// --- HELPER: localStorage sync load - KÃ–K Ã‡Ã–ZÃœM: ArtÄ±k Supabase'den yÃ¼kleniyor ---
function loadNetworkFromStorageSync() {
    // KÃ–K Ã‡Ã–ZÃœM: localStorage kullanÄ±lmÄ±yor, networkRequests zaten Supabase'den yÃ¼klendi
    return networkRequests || [];
}

// ============================================
// SESSION CHECK ON PAGE LOAD
// ============================================
async function checkSession() {
    console.log('Checking session...');
    
    // EÄŸer kullanÄ±cÄ± zaten bir dashboard'da ise session kontrolÃ¼ yapma
    var clientDash = document.getElementById('clientDashboard');
    var forwarderDash = document.getElementById('forwarderDashboard');
    var carrierDash = document.getElementById('carrierDashboard');
    
    var isInDashboard = (clientDash && !clientDash.classList.contains('hidden')) ||
                        (forwarderDash && !forwarderDash.classList.contains('hidden')) ||
                        (carrierDash && !carrierDash.classList.contains('hidden'));
    
    if (isInDashboard) {
        console.log('User already in dashboard, skipping session check');
        return true;
    }
    
    try {
        // Supabase session kontrolÃ¼
        if (supabase && supabase.auth) {
            var sessionResult = await supabase.auth.getSession();
            if (sessionResult && sessionResult.data && sessionResult.data.session) {
                var user = sessionResult.data.session.user;
                console.log('Active Supabase session found:', user.email);
                localStorage.setItem('currentUserEmail', user.email);
                
                // KullanÄ±cÄ± meta verisinden type al
                var userType = user.user_metadata ? user.user_metadata.user_type : null;
                if (userType) {
                    localStorage.setItem('currentUser', user.email.split('@')[0]);
                    localStorage.setItem('currentUserType', userType);
                }
            }
        }
        
        // localStorage'dan session bilgilerini kontrol et
        var savedUser = localStorage.getItem('currentUser');
        var savedUserType = localStorage.getItem('currentUserType');
        var savedUserId = localStorage.getItem('currentUserId');
        var savedUserEmail = localStorage.getItem('currentUserEmail');
        
        if (savedUser && savedUserType) {
            console.log('Restoring session for:', savedUser, savedUserType);
            currentUser = savedUser;
            currentUserType = savedUserType;
            currentUserId = savedUserId || ''; // KALICI Ã‡Ã–ZÃœM: UUID restore
            currentUserEmail = savedUserEmail || '';
            userType = savedUserType;
            
            // Dashboard'a yÃ¶nlendir
            hideAllPages();
            redirectToDashboard(savedUser, savedUserType);
            
            // Supabase'den verileri yÃ¼kle (arka planda)
            if (supabaseReady) {
                loadRequestsFromSupabase().then(function(requests) {
                    if (requests && requests.length > 0) {
                        // Merge with local data
                        requests.forEach(function(r) {
                            var exists = networkRequests.find(function(nr) { return nr.id === r.id; });
                            if (!exists) networkRequests.push(r);
                        });
                        console.log('Synced', requests.length, 'requests from Supabase');
                    }
                });
            }
            
            return true;
        }
    } catch (error) {
        console.log('Session check: No active session');
    }
    
    return false;
}

function redirectToDashboard(name, type) {
    if (type === 'client') {
        document.getElementById('clientDashboard').classList.remove('hidden');
        document.getElementById('clientNameDisplay').textContent = name;
        document.getElementById('clientWelcomeName').textContent = name;
        if (typeof setupAutocomplete === 'function') setupAutocomplete();
        if (typeof loadClientProfile === 'function') loadClientProfile();
        if (typeof renderClientQuotes === 'function') renderClientQuotes();
    } else if (type === 'forwarder') {
        document.getElementById('forwarderDashboard').classList.remove('hidden');
        document.getElementById('forwarderNameDisplay').textContent = name;
        document.getElementById('forwarderWelcomeName').textContent = name;
        
        // Clear and reload submitted quotes for this user
        if (typeof mySubmittedQuotes !== 'undefined') mySubmittedQuotes = {};
        if (typeof loadSubmittedQuotes === 'function') loadSubmittedQuotes();
        
        if (typeof showForwarderTab === 'function') showForwarderTab('home');
        if (typeof loadForwarderProfile === 'function') loadForwarderProfile();
        if (typeof renderForwarderQuotes === 'function') renderForwarderQuotes();
    } else if (type === 'seaCarrier' || type === 'airCarrier' || type === 'landCarrier') {
        document.getElementById('carrierDashboard').classList.remove('hidden');
        document.getElementById('carrierNameDisplay').textContent = name;
        document.getElementById('carrierWelcomeName').textContent = name;
        if (typeof renderCarrierRates === 'function') renderCarrierRates();
    }
}

// Check session when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Auto-redirect devre dÄ±ÅŸÄ± - kullanÄ±cÄ± her zaman landing page'i gÃ¶rmeli
    // Login sonrasÄ± yÃ¶nlendirme doLogin fonksiyonunda yapÄ±lÄ±yor
    console.log('Page loaded - showing landing page');
});

console.log('Supabase DAL ready - supabaseReady:', supabaseReady);
</script>

</body>
</html>
